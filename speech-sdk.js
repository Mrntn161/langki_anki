"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1;}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err;}finally{try{if(!_n&&null!=_i["return"]&&(_r=_i["return"](),Object(_r)!==_r))return;}finally{if(_d)throw _e;}}return _arr;}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _get(){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get.bind();}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(arguments.length<3?target:receiver);}return desc.value;};}return _get.apply(this,arguments);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return exports;};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value;},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key];}try{define({},"");}catch(err){define=function define(obj,key,value){return obj[key]=value;};}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator;}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)};}catch(err){return{type:"throw",arg:err};}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,function(){return this;});var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg);});});}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject);},function(err){invoke("throw",err,resolve,reject);}):PromiseImpl.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result);},function(error){return invoke("throw",error,resolve,reject);});}reject(record.arg);}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){invoke(method,arg,resolve,reject);});}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();}});}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult();}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg);}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done};}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg);}};}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(undefined===method)return context.delegate=null,"throw"===methodName&&delegate.iterator["return"]&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel);}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry);}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record;}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0);}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next;};return next.next=next;}}return{next:doneResult};}function doneResult(){return{value:undefined,done:!0};}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name));},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun;},exports.awrap=function(arg){return{__await:arg};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,function(){return this;}),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next();});},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,function(){return this;}),define(Gp,"toString",function(){return"[object Generator]";}),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next;}return next.done=!0,next;};},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined);},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval;},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught;}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record);},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel;},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel;}},"catch":function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry);}return thrown;}}throw new Error("illegal catch attempt");},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel;}},exports;}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}_next(undefined);});};}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map():undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function");}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper);}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor);}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class);};return _wrapNativeSuper(Class);}function _construct(Parent,args,Class){if(_isNativeReflectConstruct()){_construct=Reflect.construct.bind();}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor();if(Class)_setPrototypeOf(instance,Class.prototype);return instance;};}return _construct.apply(null,arguments);}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}else if(call!==void 0){throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}/******/(function(){// webpackBootstrap
/******/var __webpack_modules__=[/* 0 */,/* 1 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function get(){return m[k];}});}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k];});var __exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)if(p!=="default"&&!exports.hasOwnProperty(p))__createBinding(exports,m,p);};Object.defineProperty(exports,"__esModule",{value:true});/* eslint-disable @typescript-eslint/no-unused-vars */ // Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var Exports_js_1=__webpack_require__(2);// Note: this instantiation ensures the above import isn't
// removed on compile. The import being absent causes an error on running
void new Exports_js_1.AgentConfig();// Speech SDK API
__exportStar(__webpack_require__(79),exports);/***/},/* 2 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function get(){return m[k];}});}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k];});var __exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)if(p!=="default"&&!exports.hasOwnProperty(p))__createBinding(exports,m,p);};Object.defineProperty(exports,"__esModule",{value:true});exports.AutoDetectSourceLanguagesOpenRangeOptionName=exports.ForceDictationPropertyName=exports.ServicePropertiesPropertyName=exports.CancellationErrorCodePropertyName=exports.OutputFormatPropertyName=void 0;// Make sure not to export internal modules.
//
__exportStar(__webpack_require__(3),exports);__exportStar(__webpack_require__(56),exports);__exportStar(__webpack_require__(55),exports);__exportStar(__webpack_require__(57),exports);__exportStar(__webpack_require__(58),exports);__exportStar(__webpack_require__(59),exports);__exportStar(__webpack_require__(203),exports);__exportStar(__webpack_require__(204),exports);__exportStar(__webpack_require__(205),exports);__exportStar(__webpack_require__(207),exports);__exportStar(__webpack_require__(208),exports);__exportStar(__webpack_require__(209),exports);__exportStar(__webpack_require__(210),exports);__exportStar(__webpack_require__(211),exports);__exportStar(__webpack_require__(212),exports);__exportStar(__webpack_require__(213),exports);__exportStar(__webpack_require__(214),exports);__exportStar(__webpack_require__(195),exports);__exportStar(__webpack_require__(215),exports);__exportStar(__webpack_require__(216),exports);__exportStar(__webpack_require__(217),exports);__exportStar(__webpack_require__(218),exports);__exportStar(__webpack_require__(219),exports);__exportStar(__webpack_require__(220),exports);__exportStar(__webpack_require__(221),exports);__exportStar(__webpack_require__(222),exports);__exportStar(__webpack_require__(223),exports);__exportStar(__webpack_require__(224),exports);__exportStar(__webpack_require__(225),exports);__exportStar(__webpack_require__(226),exports);__exportStar(__webpack_require__(227),exports);__exportStar(__webpack_require__(228),exports);__exportStar(__webpack_require__(229),exports);__exportStar(__webpack_require__(230),exports);__exportStar(__webpack_require__(231),exports);__exportStar(__webpack_require__(232),exports);__exportStar(__webpack_require__(233),exports);__exportStar(__webpack_require__(235),exports);__exportStar(__webpack_require__(236),exports);__exportStar(__webpack_require__(237),exports);__exportStar(__webpack_require__(238),exports);__exportStar(__webpack_require__(242),exports);__exportStar(__webpack_require__(243),exports);__exportStar(__webpack_require__(259),exports);__exportStar(__webpack_require__(260),exports);__exportStar(__webpack_require__(262),exports);var AvatarSynthesisAdapter_js_1=__webpack_require__(263);Object.defineProperty(exports,"AvatarSynthesisAdapter",{enumerable:true,get:function get(){return AvatarSynthesisAdapter_js_1.AvatarSynthesisAdapter;}});var SpeechSynthesisAdapter_js_1=__webpack_require__(264);Object.defineProperty(exports,"SpeechSynthesisAdapter",{enumerable:true,get:function get(){return SpeechSynthesisAdapter_js_1.SpeechSynthesisAdapter;}});__exportStar(__webpack_require__(265),exports);__exportStar(__webpack_require__(266),exports);__exportStar(__webpack_require__(267),exports);__exportStar(__webpack_require__(268),exports);__exportStar(__webpack_require__(269),exports);__exportStar(__webpack_require__(270),exports);__exportStar(__webpack_require__(271),exports);exports.OutputFormatPropertyName="OutputFormat";exports.CancellationErrorCodePropertyName="CancellationErrorCode";exports.ServicePropertiesPropertyName="ServiceProperties";exports.ForceDictationPropertyName="ForceDictation";exports.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange";/***/},/* 3 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.CognitiveSubscriptionKeyAuthentication=void 0;var Exports_js_1=__webpack_require__(4);var HeaderNames_js_1=__webpack_require__(54);var IAuthentication_js_1=__webpack_require__(55);/**
 * @class
 */var CognitiveSubscriptionKeyAuthentication=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of the CognitiveSubscriptionKeyAuthentication class.
     * @constructor
     * @param {string} subscriptionKey - The subscription key
     */function CognitiveSubscriptionKeyAuthentication(subscriptionKey){_classCallCheck(this,CognitiveSubscriptionKeyAuthentication);if(!subscriptionKey){throw new Exports_js_1.ArgumentNullError("subscriptionKey");}this.privAuthInfo=new IAuthentication_js_1.AuthInfo(HeaderNames_js_1.HeaderNames.AuthKey,subscriptionKey);}/**
     * Fetches the subscription key.
     * @member
     * @function
     * @public
     * @param {string} authFetchEventId - The id to fetch.
     */ // eslint-disable-next-line @typescript-eslint/no-unused-vars
_createClass(CognitiveSubscriptionKeyAuthentication,[{key:"fetch",value:function fetch(authFetchEventId){return Promise.resolve(this.privAuthInfo);}/**
     * Fetches the subscription key.
     * @member
     * @function
     * @public
     * @param {string} authFetchEventId - The id to fetch.
     */ // eslint-disable-next-line @typescript-eslint/no-unused-vars
},{key:"fetchOnExpiry",value:function fetchOnExpiry(authFetchEventId){return Promise.resolve(this.privAuthInfo);}}]);return CognitiveSubscriptionKeyAuthentication;}();exports.CognitiveSubscriptionKeyAuthentication=CognitiveSubscriptionKeyAuthentication;/***/},/* 4 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function get(){return m[k];}});}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k];});var __exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)if(p!=="default"&&!exports.hasOwnProperty(p))__createBinding(exports,m,p);};Object.defineProperty(exports,"__esModule",{value:true});__exportStar(__webpack_require__(5),exports);__exportStar(__webpack_require__(24),exports);__exportStar(__webpack_require__(25),exports);__exportStar(__webpack_require__(27),exports);__exportStar(__webpack_require__(28),exports);__exportStar(__webpack_require__(29),exports);__exportStar(__webpack_require__(26),exports);__exportStar(__webpack_require__(30),exports);__exportStar(__webpack_require__(31),exports);__exportStar(__webpack_require__(7),exports);__exportStar(__webpack_require__(32),exports);__exportStar(__webpack_require__(33),exports);__exportStar(__webpack_require__(34),exports);__exportStar(__webpack_require__(35),exports);__exportStar(__webpack_require__(36),exports);__exportStar(__webpack_require__(37),exports);__exportStar(__webpack_require__(38),exports);__exportStar(__webpack_require__(39),exports);__exportStar(__webpack_require__(40),exports);__exportStar(__webpack_require__(41),exports);__exportStar(__webpack_require__(42),exports);__exportStar(__webpack_require__(6),exports);__exportStar(__webpack_require__(43),exports);__exportStar(__webpack_require__(44),exports);__exportStar(__webpack_require__(45),exports);__exportStar(__webpack_require__(46),exports);__exportStar(__webpack_require__(47),exports);var TranslationStatus_js_1=__webpack_require__(48);Object.defineProperty(exports,"TranslationStatus",{enumerable:true,get:function get(){return TranslationStatus_js_1.TranslationStatus;}});__exportStar(__webpack_require__(49),exports);__exportStar(__webpack_require__(50),exports);__exportStar(__webpack_require__(51),exports);__exportStar(__webpack_require__(52),exports);__exportStar(__webpack_require__(53),exports);/***/},/* 5 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.AudioStreamNodeErrorEvent=exports.AudioStreamNodeDetachedEvent=exports.AudioStreamNodeAttachedEvent=exports.AudioStreamNodeAttachingEvent=exports.AudioStreamNodeEvent=exports.AudioSourceErrorEvent=exports.AudioSourceOffEvent=exports.AudioSourceReadyEvent=exports.AudioSourceInitializingEvent=exports.AudioSourceEvent=void 0;/* eslint-disable max-classes-per-file */var PlatformEvent_js_1=__webpack_require__(6);var AudioSourceEvent=/*#__PURE__*/function(_PlatformEvent_js_1$P){_inherits(AudioSourceEvent,_PlatformEvent_js_1$P);var _super=_createSuper(AudioSourceEvent);function AudioSourceEvent(eventName,audioSourceId){var _this;var eventType=arguments.length>2&&arguments[2]!==undefined?arguments[2]:PlatformEvent_js_1.EventType.Info;_classCallCheck(this,AudioSourceEvent);_this=_super.call(this,eventName,eventType);_this.privAudioSourceId=audioSourceId;return _this;}_createClass(AudioSourceEvent,[{key:"audioSourceId",get:function get(){return this.privAudioSourceId;}}]);return AudioSourceEvent;}(PlatformEvent_js_1.PlatformEvent);exports.AudioSourceEvent=AudioSourceEvent;var AudioSourceInitializingEvent=/*#__PURE__*/function(_AudioSourceEvent){_inherits(AudioSourceInitializingEvent,_AudioSourceEvent);var _super2=_createSuper(AudioSourceInitializingEvent);function AudioSourceInitializingEvent(audioSourceId){_classCallCheck(this,AudioSourceInitializingEvent);return _super2.call(this,"AudioSourceInitializingEvent",audioSourceId);}return _createClass(AudioSourceInitializingEvent);}(AudioSourceEvent);exports.AudioSourceInitializingEvent=AudioSourceInitializingEvent;var AudioSourceReadyEvent=/*#__PURE__*/function(_AudioSourceEvent2){_inherits(AudioSourceReadyEvent,_AudioSourceEvent2);var _super3=_createSuper(AudioSourceReadyEvent);function AudioSourceReadyEvent(audioSourceId){_classCallCheck(this,AudioSourceReadyEvent);return _super3.call(this,"AudioSourceReadyEvent",audioSourceId);}return _createClass(AudioSourceReadyEvent);}(AudioSourceEvent);exports.AudioSourceReadyEvent=AudioSourceReadyEvent;var AudioSourceOffEvent=/*#__PURE__*/function(_AudioSourceEvent3){_inherits(AudioSourceOffEvent,_AudioSourceEvent3);var _super4=_createSuper(AudioSourceOffEvent);function AudioSourceOffEvent(audioSourceId){_classCallCheck(this,AudioSourceOffEvent);return _super4.call(this,"AudioSourceOffEvent",audioSourceId);}return _createClass(AudioSourceOffEvent);}(AudioSourceEvent);exports.AudioSourceOffEvent=AudioSourceOffEvent;var AudioSourceErrorEvent=/*#__PURE__*/function(_AudioSourceEvent4){_inherits(AudioSourceErrorEvent,_AudioSourceEvent4);var _super5=_createSuper(AudioSourceErrorEvent);function AudioSourceErrorEvent(audioSourceId,error){var _this2;_classCallCheck(this,AudioSourceErrorEvent);_this2=_super5.call(this,"AudioSourceErrorEvent",audioSourceId,PlatformEvent_js_1.EventType.Error);_this2.privError=error;return _this2;}_createClass(AudioSourceErrorEvent,[{key:"error",get:function get(){return this.privError;}}]);return AudioSourceErrorEvent;}(AudioSourceEvent);exports.AudioSourceErrorEvent=AudioSourceErrorEvent;var AudioStreamNodeEvent=/*#__PURE__*/function(_AudioSourceEvent5){_inherits(AudioStreamNodeEvent,_AudioSourceEvent5);var _super6=_createSuper(AudioStreamNodeEvent);function AudioStreamNodeEvent(eventName,audioSourceId,audioNodeId){var _this3;_classCallCheck(this,AudioStreamNodeEvent);_this3=_super6.call(this,eventName,audioSourceId);_this3.privAudioNodeId=audioNodeId;return _this3;}_createClass(AudioStreamNodeEvent,[{key:"audioNodeId",get:function get(){return this.privAudioNodeId;}}]);return AudioStreamNodeEvent;}(AudioSourceEvent);exports.AudioStreamNodeEvent=AudioStreamNodeEvent;var AudioStreamNodeAttachingEvent=/*#__PURE__*/function(_AudioStreamNodeEvent){_inherits(AudioStreamNodeAttachingEvent,_AudioStreamNodeEvent);var _super7=_createSuper(AudioStreamNodeAttachingEvent);function AudioStreamNodeAttachingEvent(audioSourceId,audioNodeId){_classCallCheck(this,AudioStreamNodeAttachingEvent);return _super7.call(this,"AudioStreamNodeAttachingEvent",audioSourceId,audioNodeId);}return _createClass(AudioStreamNodeAttachingEvent);}(AudioStreamNodeEvent);exports.AudioStreamNodeAttachingEvent=AudioStreamNodeAttachingEvent;var AudioStreamNodeAttachedEvent=/*#__PURE__*/function(_AudioStreamNodeEvent2){_inherits(AudioStreamNodeAttachedEvent,_AudioStreamNodeEvent2);var _super8=_createSuper(AudioStreamNodeAttachedEvent);function AudioStreamNodeAttachedEvent(audioSourceId,audioNodeId){_classCallCheck(this,AudioStreamNodeAttachedEvent);return _super8.call(this,"AudioStreamNodeAttachedEvent",audioSourceId,audioNodeId);}return _createClass(AudioStreamNodeAttachedEvent);}(AudioStreamNodeEvent);exports.AudioStreamNodeAttachedEvent=AudioStreamNodeAttachedEvent;var AudioStreamNodeDetachedEvent=/*#__PURE__*/function(_AudioStreamNodeEvent3){_inherits(AudioStreamNodeDetachedEvent,_AudioStreamNodeEvent3);var _super9=_createSuper(AudioStreamNodeDetachedEvent);function AudioStreamNodeDetachedEvent(audioSourceId,audioNodeId){_classCallCheck(this,AudioStreamNodeDetachedEvent);return _super9.call(this,"AudioStreamNodeDetachedEvent",audioSourceId,audioNodeId);}return _createClass(AudioStreamNodeDetachedEvent);}(AudioStreamNodeEvent);exports.AudioStreamNodeDetachedEvent=AudioStreamNodeDetachedEvent;var AudioStreamNodeErrorEvent=/*#__PURE__*/function(_AudioStreamNodeEvent4){_inherits(AudioStreamNodeErrorEvent,_AudioStreamNodeEvent4);var _super10=_createSuper(AudioStreamNodeErrorEvent);function AudioStreamNodeErrorEvent(audioSourceId,audioNodeId,error){var _this4;_classCallCheck(this,AudioStreamNodeErrorEvent);_this4=_super10.call(this,"AudioStreamNodeErrorEvent",audioSourceId,audioNodeId);_this4.privError=error;return _this4;}_createClass(AudioStreamNodeErrorEvent,[{key:"error",get:function get(){return this.privError;}}]);return AudioStreamNodeErrorEvent;}(AudioStreamNodeEvent);exports.AudioStreamNodeErrorEvent=AudioStreamNodeErrorEvent;/***/},/* 6 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.PlatformEvent=exports.EventType=void 0;var Guid_js_1=__webpack_require__(7);var EventType;(function(EventType){EventType[EventType["Debug"]=0]="Debug";EventType[EventType["Info"]=1]="Info";EventType[EventType["Warning"]=2]="Warning";EventType[EventType["Error"]=3]="Error";EventType[EventType["None"]=4]="None";})(EventType=exports.EventType||(exports.EventType={}));var PlatformEvent=/*#__PURE__*/function(){function PlatformEvent(eventName,eventType){_classCallCheck(this,PlatformEvent);this.privName=eventName;this.privEventId=Guid_js_1.createNoDashGuid();this.privEventTime=new Date().toISOString();this.privEventType=eventType;this.privMetadata={};}_createClass(PlatformEvent,[{key:"name",get:function get(){return this.privName;}},{key:"eventId",get:function get(){return this.privEventId;}},{key:"eventTime",get:function get(){return this.privEventTime;}},{key:"eventType",get:function get(){return this.privEventType;}},{key:"metadata",get:function get(){return this.privMetadata;}}]);return PlatformEvent;}();exports.PlatformEvent=PlatformEvent;/***/},/* 7 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.createNoDashGuid=exports.createGuid=void 0;var uuid_1=__webpack_require__(8);var createGuid=function createGuid(){return uuid_1.v4();};exports.createGuid=createGuid;var createNoDashGuid=function createNoDashGuid(){return createGuid().replace(new RegExp("-","g"),"").toUpperCase();};exports.createNoDashGuid=createNoDashGuid;/***/},/* 8 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"NIL",{enumerable:true,get:function get(){return _nil["default"];}});Object.defineProperty(exports,"parse",{enumerable:true,get:function get(){return _parse["default"];}});Object.defineProperty(exports,"stringify",{enumerable:true,get:function get(){return _stringify["default"];}});Object.defineProperty(exports,"v1",{enumerable:true,get:function get(){return _v["default"];}});Object.defineProperty(exports,"v3",{enumerable:true,get:function get(){return _v2["default"];}});Object.defineProperty(exports,"v4",{enumerable:true,get:function get(){return _v3["default"];}});Object.defineProperty(exports,"v5",{enumerable:true,get:function get(){return _v4["default"];}});Object.defineProperty(exports,"validate",{enumerable:true,get:function get(){return _validate["default"];}});Object.defineProperty(exports,"version",{enumerable:true,get:function get(){return _version["default"];}});var _v=_interopRequireDefault(__webpack_require__(9));var _v2=_interopRequireDefault(__webpack_require__(14));var _v3=_interopRequireDefault(__webpack_require__(18));var _v4=_interopRequireDefault(__webpack_require__(20));var _nil=_interopRequireDefault(__webpack_require__(22));var _version=_interopRequireDefault(__webpack_require__(23));var _validate=_interopRequireDefault(__webpack_require__(12));var _stringify=_interopRequireDefault(__webpack_require__(11));var _parse=_interopRequireDefault(__webpack_require__(16));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}/***/},/* 9 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _rng=_interopRequireDefault(__webpack_require__(10));var _stringify=__webpack_require__(11);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}// **`v1()` - Generate time-based UUID**
//
// Inspired by https://github.com/LiosK/UUID.js
// and http://docs.python.org/library/uuid.html
var _nodeId;var _clockseq;// Previous uuid creation time
var _lastMSecs=0;var _lastNSecs=0;// See https://github.com/uuidjs/uuid for API details
function v1(options,buf,offset){var i=buf&&offset||0;var b=buf||new Array(16);options=options||{};var node=options.node||_nodeId;var clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;// node and clockseq need to be initialized to random values if they're not
// specified.  We do this lazily to minimize issues related to insufficient
// system entropy.  See #189
if(node==null||clockseq==null){var seedBytes=options.random||(options.rng||_rng["default"])();if(node==null){// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)
node=_nodeId=[seedBytes[0]|0x01,seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]];}if(clockseq==null){// Per 4.2.2, randomize (14 bit) clockseq
clockseq=_clockseq=(seedBytes[6]<<8|seedBytes[7])&0x3fff;}}// UUID timestamps are 100 nano-second units since the Gregorian epoch,
// (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so
// time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'
// (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.
var msecs=options.msecs!==undefined?options.msecs:Date.now();// Per 4.2.1.2, use count of uuid's generated during the current clock
// cycle to simulate higher resolution clock
var nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1;// Time since last uuid creation (in msecs)
var dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/10000;// Per 4.2.1.2, Bump clockseq on clock regression
if(dt<0&&options.clockseq===undefined){clockseq=clockseq+1&0x3fff;}// Reset nsecs if clock regresses (new clockseq) or we've moved onto a new
// time interval
if((dt<0||msecs>_lastMSecs)&&options.nsecs===undefined){nsecs=0;}// Per 4.2.1.2 Throw error if too many uuids are requested
if(nsecs>=10000){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");}_lastMSecs=msecs;_lastNSecs=nsecs;_clockseq=clockseq;// Per 4.1.4 - Convert from unix epoch to Gregorian epoch
msecs+=12219292800000;// `time_low`
var tl=((msecs&0xfffffff)*10000+nsecs)%0x100000000;b[i++]=tl>>>24&0xff;b[i++]=tl>>>16&0xff;b[i++]=tl>>>8&0xff;b[i++]=tl&0xff;// `time_mid`
var tmh=msecs/0x100000000*10000&0xfffffff;b[i++]=tmh>>>8&0xff;b[i++]=tmh&0xff;// `time_high_and_version`
b[i++]=tmh>>>24&0xf|0x10;// include version
b[i++]=tmh>>>16&0xff;// `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)
b[i++]=clockseq>>>8|0x80;// `clock_seq_low`
b[i++]=clockseq&0xff;// `node`
for(var n=0;n<6;++n){b[i+n]=node[n];}return buf||(0,_stringify.unsafeStringify)(b);}var _default=v1;exports["default"]=_default;/***/},/* 10 */ /***/function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=rng;// Unique ID creation requires a high quality random # generator. In the browser we therefore
// require the crypto API and do not support built-in fallback to lower quality random number
// generators (like Math.random()).
var getRandomValues;var rnds8=new Uint8Array(16);function rng(){// lazy load so that environments that need to polyfill have a chance to do so
if(!getRandomValues){// getRandomValues needs to be invoked in a context where "this" is a Crypto implementation.
getRandomValues=typeof crypto!=='undefined'&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto);if(!getRandomValues){throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');}}return getRandomValues(rnds8);}/***/},/* 11 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;exports.unsafeStringify=unsafeStringify;var _validate=_interopRequireDefault(__webpack_require__(12));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}/**
 * Convert array of 16 byte values to UUID string format of the form:
 * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
 */var byteToHex=[];for(var i=0;i<256;++i){byteToHex.push((i+0x100).toString(16).slice(1));}function unsafeStringify(arr){var offset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;// Note: Be careful editing this code!  It's been tuned for performance
// and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434
return(byteToHex[arr[offset+0]]+byteToHex[arr[offset+1]]+byteToHex[arr[offset+2]]+byteToHex[arr[offset+3]]+'-'+byteToHex[arr[offset+4]]+byteToHex[arr[offset+5]]+'-'+byteToHex[arr[offset+6]]+byteToHex[arr[offset+7]]+'-'+byteToHex[arr[offset+8]]+byteToHex[arr[offset+9]]+'-'+byteToHex[arr[offset+10]]+byteToHex[arr[offset+11]]+byteToHex[arr[offset+12]]+byteToHex[arr[offset+13]]+byteToHex[arr[offset+14]]+byteToHex[arr[offset+15]]).toLowerCase();}function stringify(arr){var offset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var uuid=unsafeStringify(arr,offset);// Consistency check for valid UUID.  If this throws, it's likely due to one
// of the following:
// - One or more input array values don't map to a hex octet (leading to
// "undefined" in the uuid)
// - Invalid input values for the RFC `version` or `variant` fields
if(!(0,_validate["default"])(uuid)){throw TypeError('Stringified UUID is invalid');}return uuid;}var _default=stringify;exports["default"]=_default;/***/},/* 12 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _regex=_interopRequireDefault(__webpack_require__(13));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function validate(uuid){return typeof uuid==='string'&&_regex["default"].test(uuid);}var _default=validate;exports["default"]=_default;/***/},/* 13 */ /***/function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;exports["default"]=_default;/***/},/* 14 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _v=_interopRequireDefault(__webpack_require__(15));var _md=_interopRequireDefault(__webpack_require__(17));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}var v3=(0,_v["default"])('v3',0x30,_md["default"]);var _default=v3;exports["default"]=_default;/***/},/* 15 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.URL=exports.DNS=void 0;exports["default"]=v35;var _stringify=__webpack_require__(11);var _parse=_interopRequireDefault(__webpack_require__(16));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function stringToBytes(str){str=unescape(encodeURIComponent(str));// UTF8 escape
var bytes=[];for(var i=0;i<str.length;++i){bytes.push(str.charCodeAt(i));}return bytes;}var DNS='6ba7b810-9dad-11d1-80b4-00c04fd430c8';exports.DNS=DNS;var URL='6ba7b811-9dad-11d1-80b4-00c04fd430c8';exports.URL=URL;function v35(name,version,hashfunc){function generateUUID(value,namespace,buf,offset){var _namespace;if(typeof value==='string'){value=stringToBytes(value);}if(typeof namespace==='string'){namespace=(0,_parse["default"])(namespace);}if(((_namespace=namespace)===null||_namespace===void 0?void 0:_namespace.length)!==16){throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');}// Compute hash of namespace and value, Per 4.3
// Future: Use spread syntax when supported on all platforms, e.g. `bytes =
// hashfunc([...namespace, ... value])`
var bytes=new Uint8Array(16+value.length);bytes.set(namespace);bytes.set(value,namespace.length);bytes=hashfunc(bytes);bytes[6]=bytes[6]&0x0f|version;bytes[8]=bytes[8]&0x3f|0x80;if(buf){offset=offset||0;for(var i=0;i<16;++i){buf[offset+i]=bytes[i];}return buf;}return(0,_stringify.unsafeStringify)(bytes);}// Function#name is not settable on some platforms (#270)
try{generateUUID.name=name;// eslint-disable-next-line no-empty
}catch(err){}// For CommonJS default export support
generateUUID.DNS=DNS;generateUUID.URL=URL;return generateUUID;}/***/},/* 16 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _validate=_interopRequireDefault(__webpack_require__(12));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function parse(uuid){if(!(0,_validate["default"])(uuid)){throw TypeError('Invalid UUID');}var v;var arr=new Uint8Array(16);// Parse ########-....-....-....-............
arr[0]=(v=parseInt(uuid.slice(0,8),16))>>>24;arr[1]=v>>>16&0xff;arr[2]=v>>>8&0xff;arr[3]=v&0xff;// Parse ........-####-....-....-............
arr[4]=(v=parseInt(uuid.slice(9,13),16))>>>8;arr[5]=v&0xff;// Parse ........-....-####-....-............
arr[6]=(v=parseInt(uuid.slice(14,18),16))>>>8;arr[7]=v&0xff;// Parse ........-....-....-####-............
arr[8]=(v=parseInt(uuid.slice(19,23),16))>>>8;arr[9]=v&0xff;// Parse ........-....-....-....-############
// (Use "/" to avoid 32-bit truncation when bit-shifting high-order bytes)
arr[10]=(v=parseInt(uuid.slice(24,36),16))/0x10000000000&0xff;arr[11]=v/0x100000000&0xff;arr[12]=v>>>24&0xff;arr[13]=v>>>16&0xff;arr[14]=v>>>8&0xff;arr[15]=v&0xff;return arr;}var _default=parse;exports["default"]=_default;/***/},/* 17 */ /***/function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;/*
 * Browser-compatible JavaScript MD5
 *
 * Modification of JavaScript MD5
 * https://github.com/blueimp/JavaScript-MD5
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * https://opensource.org/licenses/MIT
 *
 * Based on
 * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message
 * Digest Algorithm, as defined in RFC 1321.
 * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for more info.
 */function md5(bytes){if(typeof bytes==='string'){var msg=unescape(encodeURIComponent(bytes));// UTF8 escape
bytes=new Uint8Array(msg.length);for(var i=0;i<msg.length;++i){bytes[i]=msg.charCodeAt(i);}}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes),bytes.length*8));}/*
 * Convert an array of little-endian words to an array of bytes
 */function md5ToHexEncodedArray(input){var output=[];var length32=input.length*32;var hexTab='0123456789abcdef';for(var i=0;i<length32;i+=8){var x=input[i>>5]>>>i%32&0xff;var hex=parseInt(hexTab.charAt(x>>>4&0x0f)+hexTab.charAt(x&0x0f),16);output.push(hex);}return output;}/**
 * Calculate output length with padding and bit length
 */function getOutputLength(inputLength8){return(inputLength8+64>>>9<<4)+14+1;}/*
 * Calculate the MD5 of an array of little-endian words, and a bit length.
 */function wordsToMd5(x,len){/* append padding */x[len>>5]|=0x80<<len%32;x[getOutputLength(len)-1]=len;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(var i=0;i<x.length;i+=16){var olda=a;var oldb=b;var oldc=c;var oldd=d;a=md5ff(a,b,c,d,x[i],7,-680876936);d=md5ff(d,a,b,c,x[i+1],12,-389564586);c=md5ff(c,d,a,b,x[i+2],17,606105819);b=md5ff(b,c,d,a,x[i+3],22,-1044525330);a=md5ff(a,b,c,d,x[i+4],7,-176418897);d=md5ff(d,a,b,c,x[i+5],12,1200080426);c=md5ff(c,d,a,b,x[i+6],17,-1473231341);b=md5ff(b,c,d,a,x[i+7],22,-45705983);a=md5ff(a,b,c,d,x[i+8],7,1770035416);d=md5ff(d,a,b,c,x[i+9],12,-1958414417);c=md5ff(c,d,a,b,x[i+10],17,-42063);b=md5ff(b,c,d,a,x[i+11],22,-1990404162);a=md5ff(a,b,c,d,x[i+12],7,1804603682);d=md5ff(d,a,b,c,x[i+13],12,-40341101);c=md5ff(c,d,a,b,x[i+14],17,-1502002290);b=md5ff(b,c,d,a,x[i+15],22,1236535329);a=md5gg(a,b,c,d,x[i+1],5,-165796510);d=md5gg(d,a,b,c,x[i+6],9,-1069501632);c=md5gg(c,d,a,b,x[i+11],14,643717713);b=md5gg(b,c,d,a,x[i],20,-373897302);a=md5gg(a,b,c,d,x[i+5],5,-701558691);d=md5gg(d,a,b,c,x[i+10],9,38016083);c=md5gg(c,d,a,b,x[i+15],14,-660478335);b=md5gg(b,c,d,a,x[i+4],20,-405537848);a=md5gg(a,b,c,d,x[i+9],5,568446438);d=md5gg(d,a,b,c,x[i+14],9,-1019803690);c=md5gg(c,d,a,b,x[i+3],14,-187363961);b=md5gg(b,c,d,a,x[i+8],20,1163531501);a=md5gg(a,b,c,d,x[i+13],5,-1444681467);d=md5gg(d,a,b,c,x[i+2],9,-51403784);c=md5gg(c,d,a,b,x[i+7],14,1735328473);b=md5gg(b,c,d,a,x[i+12],20,-1926607734);a=md5hh(a,b,c,d,x[i+5],4,-378558);d=md5hh(d,a,b,c,x[i+8],11,-2022574463);c=md5hh(c,d,a,b,x[i+11],16,1839030562);b=md5hh(b,c,d,a,x[i+14],23,-35309556);a=md5hh(a,b,c,d,x[i+1],4,-1530992060);d=md5hh(d,a,b,c,x[i+4],11,1272893353);c=md5hh(c,d,a,b,x[i+7],16,-155497632);b=md5hh(b,c,d,a,x[i+10],23,-1094730640);a=md5hh(a,b,c,d,x[i+13],4,681279174);d=md5hh(d,a,b,c,x[i],11,-358537222);c=md5hh(c,d,a,b,x[i+3],16,-722521979);b=md5hh(b,c,d,a,x[i+6],23,76029189);a=md5hh(a,b,c,d,x[i+9],4,-640364487);d=md5hh(d,a,b,c,x[i+12],11,-421815835);c=md5hh(c,d,a,b,x[i+15],16,530742520);b=md5hh(b,c,d,a,x[i+2],23,-995338651);a=md5ii(a,b,c,d,x[i],6,-198630844);d=md5ii(d,a,b,c,x[i+7],10,1126891415);c=md5ii(c,d,a,b,x[i+14],15,-1416354905);b=md5ii(b,c,d,a,x[i+5],21,-57434055);a=md5ii(a,b,c,d,x[i+12],6,1700485571);d=md5ii(d,a,b,c,x[i+3],10,-1894986606);c=md5ii(c,d,a,b,x[i+10],15,-1051523);b=md5ii(b,c,d,a,x[i+1],21,-2054922799);a=md5ii(a,b,c,d,x[i+8],6,1873313359);d=md5ii(d,a,b,c,x[i+15],10,-30611744);c=md5ii(c,d,a,b,x[i+6],15,-1560198380);b=md5ii(b,c,d,a,x[i+13],21,1309151649);a=md5ii(a,b,c,d,x[i+4],6,-145523070);d=md5ii(d,a,b,c,x[i+11],10,-1120210379);c=md5ii(c,d,a,b,x[i+2],15,718787259);b=md5ii(b,c,d,a,x[i+9],21,-343485551);a=safeAdd(a,olda);b=safeAdd(b,oldb);c=safeAdd(c,oldc);d=safeAdd(d,oldd);}return[a,b,c,d];}/*
 * Convert an array bytes to an array of little-endian words
 * Characters >255 have their high-byte silently ignored.
 */function bytesToWords(input){if(input.length===0){return[];}var length8=input.length*8;var output=new Uint32Array(getOutputLength(length8));for(var i=0;i<length8;i+=8){output[i>>5]|=(input[i/8]&0xff)<<i%32;}return output;}/*
 * Add integers, wrapping at 2^32. This uses 16-bit operations internally
 * to work around bugs in some JS interpreters.
 */function safeAdd(x,y){var lsw=(x&0xffff)+(y&0xffff);var msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&0xffff;}/*
 * Bitwise rotate a 32-bit number to the left.
 */function bitRotateLeft(num,cnt){return num<<cnt|num>>>32-cnt;}/*
 * These functions implement the four basic operations the algorithm uses.
 */function md5cmn(q,a,b,x,s,t){return safeAdd(bitRotateLeft(safeAdd(safeAdd(a,q),safeAdd(x,t)),s),b);}function md5ff(a,b,c,d,x,s,t){return md5cmn(b&c|~b&d,a,b,x,s,t);}function md5gg(a,b,c,d,x,s,t){return md5cmn(b&d|c&~d,a,b,x,s,t);}function md5hh(a,b,c,d,x,s,t){return md5cmn(b^c^d,a,b,x,s,t);}function md5ii(a,b,c,d,x,s,t){return md5cmn(c^(b|~d),a,b,x,s,t);}var _default=md5;exports["default"]=_default;/***/},/* 18 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _native=_interopRequireDefault(__webpack_require__(19));var _rng=_interopRequireDefault(__webpack_require__(10));var _stringify=__webpack_require__(11);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function v4(options,buf,offset){if(_native["default"].randomUUID&&!buf&&!options){return _native["default"].randomUUID();}options=options||{};var rnds=options.random||(options.rng||_rng["default"])();// Per 4.4, set bits for version and `clock_seq_hi_and_reserved`
rnds[6]=rnds[6]&0x0f|0x40;rnds[8]=rnds[8]&0x3f|0x80;// Copy bytes to buffer, if provided
if(buf){offset=offset||0;for(var i=0;i<16;++i){buf[offset+i]=rnds[i];}return buf;}return(0,_stringify.unsafeStringify)(rnds);}var _default=v4;exports["default"]=_default;/***/},/* 19 */ /***/function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var randomUUID=typeof crypto!=='undefined'&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var _default={randomUUID:randomUUID};exports["default"]=_default;/***/},/* 20 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _v=_interopRequireDefault(__webpack_require__(15));var _sha=_interopRequireDefault(__webpack_require__(21));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}var v5=(0,_v["default"])('v5',0x50,_sha["default"]);var _default=v5;exports["default"]=_default;/***/},/* 21 */ /***/function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;// Adapted from Chris Veness' SHA1 code at
// http://www.movable-type.co.uk/scripts/sha1.html
function f(s,x,y,z){switch(s){case 0:return x&y^~x&z;case 1:return x^y^z;case 2:return x&y^x&z^y&z;case 3:return x^y^z;}}function ROTL(x,n){return x<<n|x>>>32-n;}function sha1(bytes){var K=[0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xca62c1d6];var H=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0];if(typeof bytes==='string'){var msg=unescape(encodeURIComponent(bytes));// UTF8 escape
bytes=[];for(var i=0;i<msg.length;++i){bytes.push(msg.charCodeAt(i));}}else if(!Array.isArray(bytes)){// Convert Array-like to Array
bytes=Array.prototype.slice.call(bytes);}bytes.push(0x80);var l=bytes.length/4+2;var N=Math.ceil(l/16);var M=new Array(N);for(var _i=0;_i<N;++_i){var arr=new Uint32Array(16);for(var j=0;j<16;++j){arr[j]=bytes[_i*64+j*4]<<24|bytes[_i*64+j*4+1]<<16|bytes[_i*64+j*4+2]<<8|bytes[_i*64+j*4+3];}M[_i]=arr;}M[N-1][14]=(bytes.length-1)*8/Math.pow(2,32);M[N-1][14]=Math.floor(M[N-1][14]);M[N-1][15]=(bytes.length-1)*8&0xffffffff;for(var _i2=0;_i2<N;++_i2){var W=new Uint32Array(80);for(var t=0;t<16;++t){W[t]=M[_i2][t];}for(var _t=16;_t<80;++_t){W[_t]=ROTL(W[_t-3]^W[_t-8]^W[_t-14]^W[_t-16],1);}var a=H[0];var b=H[1];var c=H[2];var d=H[3];var e=H[4];for(var _t2=0;_t2<80;++_t2){var s=Math.floor(_t2/20);var T=ROTL(a,5)+f(s,b,c,d)+e+K[s]+W[_t2]>>>0;e=d;d=c;c=ROTL(b,30)>>>0;b=a;a=T;}H[0]=H[0]+a>>>0;H[1]=H[1]+b>>>0;H[2]=H[2]+c>>>0;H[3]=H[3]+d>>>0;H[4]=H[4]+e>>>0;}return[H[0]>>24&0xff,H[0]>>16&0xff,H[0]>>8&0xff,H[0]&0xff,H[1]>>24&0xff,H[1]>>16&0xff,H[1]>>8&0xff,H[1]&0xff,H[2]>>24&0xff,H[2]>>16&0xff,H[2]>>8&0xff,H[2]&0xff,H[3]>>24&0xff,H[3]>>16&0xff,H[3]>>8&0xff,H[3]&0xff,H[4]>>24&0xff,H[4]>>16&0xff,H[4]>>8&0xff,H[4]&0xff];}var _default=sha1;exports["default"]=_default;/***/},/* 22 */ /***/function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _default='00000000-0000-0000-0000-000000000000';exports["default"]=_default;/***/},/* 23 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _validate=_interopRequireDefault(__webpack_require__(12));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function version(uuid){if(!(0,_validate["default"])(uuid)){throw TypeError('Invalid UUID');}return parseInt(uuid.slice(14,15),16);}var _default=version;exports["default"]=_default;/***/},/* 24 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConnectionMessageSentEvent=exports.ConnectionMessageReceivedEvent=exports.ConnectionEstablishErrorEvent=exports.ConnectionErrorEvent=exports.ConnectionClosedEvent=exports.ConnectionEstablishedEvent=exports.ConnectionStartEvent=exports.ConnectionEvent=exports.ServiceEvent=void 0;var PlatformEvent_js_1=__webpack_require__(6);var ServiceEvent=/*#__PURE__*/function(_PlatformEvent_js_1$P2){_inherits(ServiceEvent,_PlatformEvent_js_1$P2);var _super11=_createSuper(ServiceEvent);function ServiceEvent(eventName,jsonstring){var _this5;var eventType=arguments.length>2&&arguments[2]!==undefined?arguments[2]:PlatformEvent_js_1.EventType.Info;_classCallCheck(this,ServiceEvent);_this5=_super11.call(this,eventName,eventType);_this5.privJsonResult=jsonstring;return _this5;}_createClass(ServiceEvent,[{key:"jsonString",get:function get(){return this.privJsonResult;}}]);return ServiceEvent;}(PlatformEvent_js_1.PlatformEvent);exports.ServiceEvent=ServiceEvent;var ConnectionEvent=/*#__PURE__*/function(_PlatformEvent_js_1$P3){_inherits(ConnectionEvent,_PlatformEvent_js_1$P3);var _super12=_createSuper(ConnectionEvent);function ConnectionEvent(eventName,connectionId){var _this6;var eventType=arguments.length>2&&arguments[2]!==undefined?arguments[2]:PlatformEvent_js_1.EventType.Info;_classCallCheck(this,ConnectionEvent);_this6=_super12.call(this,eventName,eventType);_this6.privConnectionId=connectionId;return _this6;}_createClass(ConnectionEvent,[{key:"connectionId",get:function get(){return this.privConnectionId;}}]);return ConnectionEvent;}(PlatformEvent_js_1.PlatformEvent);exports.ConnectionEvent=ConnectionEvent;var ConnectionStartEvent=/*#__PURE__*/function(_ConnectionEvent){_inherits(ConnectionStartEvent,_ConnectionEvent);var _super13=_createSuper(ConnectionStartEvent);function ConnectionStartEvent(connectionId,uri,headers){var _this7;_classCallCheck(this,ConnectionStartEvent);_this7=_super13.call(this,"ConnectionStartEvent",connectionId);_this7.privUri=uri;_this7.privHeaders=headers;return _this7;}_createClass(ConnectionStartEvent,[{key:"uri",get:function get(){return this.privUri;}},{key:"headers",get:function get(){return this.privHeaders;}}]);return ConnectionStartEvent;}(ConnectionEvent);exports.ConnectionStartEvent=ConnectionStartEvent;var ConnectionEstablishedEvent=/*#__PURE__*/function(_ConnectionEvent2){_inherits(ConnectionEstablishedEvent,_ConnectionEvent2);var _super14=_createSuper(ConnectionEstablishedEvent);function ConnectionEstablishedEvent(connectionId){_classCallCheck(this,ConnectionEstablishedEvent);return _super14.call(this,"ConnectionEstablishedEvent",connectionId);}return _createClass(ConnectionEstablishedEvent);}(ConnectionEvent);exports.ConnectionEstablishedEvent=ConnectionEstablishedEvent;var ConnectionClosedEvent=/*#__PURE__*/function(_ConnectionEvent3){_inherits(ConnectionClosedEvent,_ConnectionEvent3);var _super15=_createSuper(ConnectionClosedEvent);function ConnectionClosedEvent(connectionId,statusCode,reason){var _this8;_classCallCheck(this,ConnectionClosedEvent);_this8=_super15.call(this,"ConnectionClosedEvent",connectionId,PlatformEvent_js_1.EventType.Debug);_this8.privReason=reason;_this8.privStatusCode=statusCode;return _this8;}_createClass(ConnectionClosedEvent,[{key:"reason",get:function get(){return this.privReason;}},{key:"statusCode",get:function get(){return this.privStatusCode;}}]);return ConnectionClosedEvent;}(ConnectionEvent);exports.ConnectionClosedEvent=ConnectionClosedEvent;var ConnectionErrorEvent=/*#__PURE__*/function(_ConnectionEvent4){_inherits(ConnectionErrorEvent,_ConnectionEvent4);var _super16=_createSuper(ConnectionErrorEvent);function ConnectionErrorEvent(connectionId,message,type){var _this9;_classCallCheck(this,ConnectionErrorEvent);_this9=_super16.call(this,"ConnectionErrorEvent",connectionId,PlatformEvent_js_1.EventType.Debug);_this9.privMessage=message;_this9.privType=type;return _this9;}_createClass(ConnectionErrorEvent,[{key:"message",get:function get(){return this.privMessage;}},{key:"type",get:function get(){return this.privType;}}]);return ConnectionErrorEvent;}(ConnectionEvent);exports.ConnectionErrorEvent=ConnectionErrorEvent;var ConnectionEstablishErrorEvent=/*#__PURE__*/function(_ConnectionEvent5){_inherits(ConnectionEstablishErrorEvent,_ConnectionEvent5);var _super17=_createSuper(ConnectionEstablishErrorEvent);function ConnectionEstablishErrorEvent(connectionId,statuscode,reason){var _this10;_classCallCheck(this,ConnectionEstablishErrorEvent);_this10=_super17.call(this,"ConnectionEstablishErrorEvent",connectionId,PlatformEvent_js_1.EventType.Error);_this10.privStatusCode=statuscode;_this10.privReason=reason;return _this10;}_createClass(ConnectionEstablishErrorEvent,[{key:"reason",get:function get(){return this.privReason;}},{key:"statusCode",get:function get(){return this.privStatusCode;}}]);return ConnectionEstablishErrorEvent;}(ConnectionEvent);exports.ConnectionEstablishErrorEvent=ConnectionEstablishErrorEvent;var ConnectionMessageReceivedEvent=/*#__PURE__*/function(_ConnectionEvent6){_inherits(ConnectionMessageReceivedEvent,_ConnectionEvent6);var _super18=_createSuper(ConnectionMessageReceivedEvent);function ConnectionMessageReceivedEvent(connectionId,networkReceivedTimeISO,message){var _this11;_classCallCheck(this,ConnectionMessageReceivedEvent);_this11=_super18.call(this,"ConnectionMessageReceivedEvent",connectionId);_this11.privNetworkReceivedTime=networkReceivedTimeISO;_this11.privMessage=message;return _this11;}_createClass(ConnectionMessageReceivedEvent,[{key:"networkReceivedTime",get:function get(){return this.privNetworkReceivedTime;}},{key:"message",get:function get(){return this.privMessage;}}]);return ConnectionMessageReceivedEvent;}(ConnectionEvent);exports.ConnectionMessageReceivedEvent=ConnectionMessageReceivedEvent;var ConnectionMessageSentEvent=/*#__PURE__*/function(_ConnectionEvent7){_inherits(ConnectionMessageSentEvent,_ConnectionEvent7);var _super19=_createSuper(ConnectionMessageSentEvent);function ConnectionMessageSentEvent(connectionId,networkSentTimeISO,message){var _this12;_classCallCheck(this,ConnectionMessageSentEvent);_this12=_super19.call(this,"ConnectionMessageSentEvent",connectionId);_this12.privNetworkSentTime=networkSentTimeISO;_this12.privMessage=message;return _this12;}_createClass(ConnectionMessageSentEvent,[{key:"networkSentTime",get:function get(){return this.privNetworkSentTime;}},{key:"message",get:function get(){return this.privMessage;}}]);return ConnectionMessageSentEvent;}(ConnectionEvent);exports.ConnectionMessageSentEvent=ConnectionMessageSentEvent;/***/},/* 25 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";/* eslint-disable @typescript-eslint/no-unsafe-return */ // Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConnectionMessage=exports.MessageType=void 0;var Error_js_1=__webpack_require__(26);var Guid_js_1=__webpack_require__(7);var MessageType;(function(MessageType){MessageType[MessageType["Text"]=0]="Text";MessageType[MessageType["Binary"]=1]="Binary";})(MessageType=exports.MessageType||(exports.MessageType={}));var ConnectionMessage=/*#__PURE__*/function(){function ConnectionMessage(messageType,body,headers,id){_classCallCheck(this,ConnectionMessage);this.privBody=null;if(messageType===MessageType.Text&&body&&!(typeof body==="string")){throw new Error_js_1.InvalidOperationError("Payload must be a string");}if(messageType===MessageType.Binary&&body&&!(body instanceof ArrayBuffer)){throw new Error_js_1.InvalidOperationError("Payload must be ArrayBuffer");}this.privMessageType=messageType;// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
this.privBody=body;this.privHeaders=headers?headers:{};this.privId=id?id:Guid_js_1.createNoDashGuid();switch(this.messageType){case MessageType.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case MessageType.Text:this.privSize=this.textBody.length;}}_createClass(ConnectionMessage,[{key:"messageType",get:function get(){return this.privMessageType;}},{key:"headers",get:function get(){return this.privHeaders;}},{key:"body",get:function get(){return this.privBody;}},{key:"textBody",get:function get(){if(this.privMessageType===MessageType.Binary){throw new Error_js_1.InvalidOperationError("Not supported for binary message");}return this.privBody;}},{key:"binaryBody",get:function get(){if(this.privMessageType===MessageType.Text){throw new Error_js_1.InvalidOperationError("Not supported for text message");}return this.privBody;}},{key:"id",get:function get(){return this.privId;}}]);return ConnectionMessage;}();exports.ConnectionMessage=ConnectionMessage;/***/},/* 26 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ObjectDisposedError=exports.InvalidOperationError=exports.ArgumentNullError=void 0;/* eslint-disable max-classes-per-file */ /**
 * The error that is thrown when an argument passed in is null.
 *
 * @export
 * @class ArgumentNullError
 * @extends {Error}
 */var ArgumentNullError=/*#__PURE__*/function(_Error){_inherits(ArgumentNullError,_Error);var _super20=_createSuper(ArgumentNullError);/**
     * Creates an instance of ArgumentNullError.
     *
     * @param {string} argumentName - Name of the argument that is null
     *
     * @memberOf ArgumentNullError
     */function ArgumentNullError(argumentName){var _this13;_classCallCheck(this,ArgumentNullError);_this13=_super20.call(this,argumentName);_this13.name="ArgumentNull";_this13.message=argumentName;return _this13;}return _createClass(ArgumentNullError);}(/*#__PURE__*/_wrapNativeSuper(Error));exports.ArgumentNullError=ArgumentNullError;/**
 * The error that is thrown when an invalid operation is performed in the code.
 *
 * @export
 * @class InvalidOperationError
 * @extends {Error}
 */var InvalidOperationError=/*#__PURE__*/function(_Error2){_inherits(InvalidOperationError,_Error2);var _super21=_createSuper(InvalidOperationError);/**
     * Creates an instance of InvalidOperationError.
     *
     * @param {string} error - The error
     *
     * @memberOf InvalidOperationError
     */function InvalidOperationError(error){var _this14;_classCallCheck(this,InvalidOperationError);_this14=_super21.call(this,error);_this14.name="InvalidOperation";_this14.message=error;return _this14;}return _createClass(InvalidOperationError);}(/*#__PURE__*/_wrapNativeSuper(Error));exports.InvalidOperationError=InvalidOperationError;/**
 * The error that is thrown when an object is disposed.
 *
 * @export
 * @class ObjectDisposedError
 * @extends {Error}
 */var ObjectDisposedError=/*#__PURE__*/function(_Error3){_inherits(ObjectDisposedError,_Error3);var _super22=_createSuper(ObjectDisposedError);/**
     * Creates an instance of ObjectDisposedError.
     *
     * @param {string} objectName - The object that is disposed
     * @param {string} error - The error
     *
     * @memberOf ObjectDisposedError
     */function ObjectDisposedError(objectName,error){var _this15;_classCallCheck(this,ObjectDisposedError);_this15=_super22.call(this,error);_this15.name=objectName+"ObjectDisposed";_this15.message=error;return _this15;}return _createClass(ObjectDisposedError);}(/*#__PURE__*/_wrapNativeSuper(Error));exports.ObjectDisposedError=ObjectDisposedError;/***/},/* 27 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConnectionOpenResponse=void 0;var ConnectionOpenResponse=/*#__PURE__*/function(){function ConnectionOpenResponse(statusCode,reason){_classCallCheck(this,ConnectionOpenResponse);this.privStatusCode=statusCode;this.privReason=reason;}_createClass(ConnectionOpenResponse,[{key:"statusCode",get:function get(){return this.privStatusCode;}},{key:"reason",get:function get(){return this.privReason;}}]);return ConnectionOpenResponse;}();exports.ConnectionOpenResponse=ConnectionOpenResponse;/***/},/* 28 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.DeferralMap=void 0;/**
 * The error that is thrown when an argument passed in is null.
 *
 * @export
 * @class DefferalMap
 */var DeferralMap=/*#__PURE__*/function(){function DeferralMap(){_classCallCheck(this,DeferralMap);this.privMap={};}_createClass(DeferralMap,[{key:"add",value:function add(id,deferral){this.privMap[id]=deferral;}},{key:"getId",value:function getId(id){return this.privMap[id];}},{key:"complete",value:function complete(id,result){try{this.privMap[id].resolve(result);}catch(error){this.privMap[id].reject(error);}finally{this.privMap[id]=undefined;}}}]);return DeferralMap;}();exports.DeferralMap=DeferralMap;/***/},/* 29 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SendingAgentContextMessageEvent=exports.DialogEvent=void 0;var PlatformEvent_js_1=__webpack_require__(6);var DialogEvent=/*#__PURE__*/function(_PlatformEvent_js_1$P4){_inherits(DialogEvent,_PlatformEvent_js_1$P4);var _super23=_createSuper(DialogEvent);function DialogEvent(eventName){var eventType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:PlatformEvent_js_1.EventType.Info;_classCallCheck(this,DialogEvent);return _super23.call(this,eventName,eventType);}return _createClass(DialogEvent);}(PlatformEvent_js_1.PlatformEvent);exports.DialogEvent=DialogEvent;var SendingAgentContextMessageEvent=/*#__PURE__*/function(_DialogEvent){_inherits(SendingAgentContextMessageEvent,_DialogEvent);var _super24=_createSuper(SendingAgentContextMessageEvent);function SendingAgentContextMessageEvent(agentConfig){var _this16;_classCallCheck(this,SendingAgentContextMessageEvent);_this16=_super24.call(this,"SendingAgentContextMessageEvent");_this16.privAgentConfig=agentConfig;return _this16;}_createClass(SendingAgentContextMessageEvent,[{key:"agentConfig",get:function get(){return this.privAgentConfig;}}]);return SendingAgentContextMessageEvent;}(DialogEvent);exports.SendingAgentContextMessageEvent=SendingAgentContextMessageEvent;/***/},/* 30 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.Events=void 0;var Error_js_1=__webpack_require__(26);var EventSource_js_1=__webpack_require__(31);var Events=/*#__PURE__*/function(){function Events(){_classCallCheck(this,Events);}_createClass(Events,null,[{key:"setEventSource",value:function setEventSource(eventSource){if(!eventSource){throw new Error_js_1.ArgumentNullError("eventSource");}Events.privInstance=eventSource;}},{key:"instance",get:function get(){return Events.privInstance;}}]);return Events;}();exports.Events=Events;Events.privInstance=new EventSource_js_1.EventSource();/***/},/* 31 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.EventSource=void 0;var Error_js_1=__webpack_require__(26);var Guid_js_1=__webpack_require__(7);var EventSource=/*#__PURE__*/function(){function EventSource(metadata){_classCallCheck(this,EventSource);this.privEventListeners={};this.privIsDisposed=false;this.privConsoleListener=undefined;this.privMetadata=metadata;}_createClass(EventSource,[{key:"onEvent",value:function onEvent(event){if(this.isDisposed()){throw new Error_js_1.ObjectDisposedError("EventSource");}if(this.metadata){for(var paramName in this.metadata){if(paramName){if(event.metadata){if(!event.metadata[paramName]){event.metadata[paramName]=this.metadata[paramName];}}}}}for(var eventId in this.privEventListeners){if(eventId&&this.privEventListeners[eventId]){this.privEventListeners[eventId](event);}}}},{key:"attach",value:function attach(onEventCallback){var _this17=this;var id=Guid_js_1.createNoDashGuid();this.privEventListeners[id]=onEventCallback;return{detach:function detach(){delete _this17.privEventListeners[id];return Promise.resolve();}};}},{key:"attachListener",value:function attachListener(listener){return this.attach(function(e){return listener.onEvent(e);});}},{key:"attachConsoleListener",value:function attachConsoleListener(listener){if(!!this.privConsoleListener){void this.privConsoleListener.detach();// Detach implementation for eventListeners is synchronous
}this.privConsoleListener=this.attach(function(e){return listener.onEvent(e);});return this.privConsoleListener;}},{key:"isDisposed",value:function isDisposed(){return this.privIsDisposed;}},{key:"dispose",value:function dispose(){this.privEventListeners=null;this.privIsDisposed=true;}},{key:"metadata",get:function get(){return this.privMetadata;}}]);return EventSource;}();exports.EventSource=EventSource;/***/},/* 32 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});/***/},/* 33 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConnectionState=void 0;var ConnectionState;(function(ConnectionState){ConnectionState[ConnectionState["None"]=0]="None";ConnectionState[ConnectionState["Connected"]=1]="Connected";ConnectionState[ConnectionState["Connecting"]=2]="Connecting";ConnectionState[ConnectionState["Disconnected"]=3]="Disconnected";})(ConnectionState=exports.ConnectionState||(exports.ConnectionState={}));/***/},/* 34 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});/***/},/* 35 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});/***/},/* 36 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});/***/},/* 37 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});/***/},/* 38 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});/***/},/* 39 */ /***/function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});/***/},/* 40 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});/***/},/* 41 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});/***/},/* 42 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.List=void 0;var Error_js_1=__webpack_require__(26);var List=/*#__PURE__*/function(){function List(list){_classCallCheck(this,List);this.privSubscriptionIdCounter=0;this.privAddSubscriptions={};this.privRemoveSubscriptions={};this.privDisposedSubscriptions={};this.privDisposeReason=null;this.privList=[];// copy the list rather than taking as is.
if(list){var _iterator=_createForOfIteratorHelper(list),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;this.privList.push(item);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}}_createClass(List,[{key:"get",value:function get(itemIndex){this.throwIfDisposed();return this.privList[itemIndex];}},{key:"first",value:function first(){return this.get(0);}},{key:"last",value:function last(){return this.get(this.length()-1);}},{key:"add",value:function add(item){this.throwIfDisposed();this.insertAt(this.privList.length,item);}},{key:"insertAt",value:function insertAt(index,item){this.throwIfDisposed();if(index===0){this.privList.unshift(item);}else if(index===this.privList.length){this.privList.push(item);}else{this.privList.splice(index,0,item);}this.triggerSubscriptions(this.privAddSubscriptions);}},{key:"removeFirst",value:function removeFirst(){this.throwIfDisposed();return this.removeAt(0);}},{key:"removeLast",value:function removeLast(){this.throwIfDisposed();return this.removeAt(this.length()-1);}},{key:"removeAt",value:function removeAt(index){this.throwIfDisposed();return this.remove(index,1)[0];}},{key:"remove",value:function remove(index,count){this.throwIfDisposed();var removedElements=this.privList.splice(index,count);this.triggerSubscriptions(this.privRemoveSubscriptions);return removedElements;}},{key:"clear",value:function clear(){this.throwIfDisposed();this.remove(0,this.length());}},{key:"length",value:function length(){this.throwIfDisposed();return this.privList.length;}},{key:"onAdded",value:function onAdded(addedCallback){var _this18=this;this.throwIfDisposed();var subscriptionId=this.privSubscriptionIdCounter++;this.privAddSubscriptions[subscriptionId]=addedCallback;return{detach:function detach(){delete _this18.privAddSubscriptions[subscriptionId];return Promise.resolve();}};}},{key:"onRemoved",value:function onRemoved(removedCallback){var _this19=this;this.throwIfDisposed();var subscriptionId=this.privSubscriptionIdCounter++;this.privRemoveSubscriptions[subscriptionId]=removedCallback;return{detach:function detach(){delete _this19.privRemoveSubscriptions[subscriptionId];return Promise.resolve();}};}},{key:"onDisposed",value:function onDisposed(disposedCallback){var _this20=this;this.throwIfDisposed();var subscriptionId=this.privSubscriptionIdCounter++;this.privDisposedSubscriptions[subscriptionId]=disposedCallback;return{detach:function detach(){delete _this20.privDisposedSubscriptions[subscriptionId];return Promise.resolve();}};}},{key:"join",value:function join(seperator){this.throwIfDisposed();return this.privList.join(seperator);}},{key:"toArray",value:function toArray(){var cloneCopy=Array();this.privList.forEach(function(val){cloneCopy.push(val);});return cloneCopy;}},{key:"any",value:function any(callback){this.throwIfDisposed();if(callback){return this.where(callback).length()>0;}else{return this.length()>0;}}},{key:"all",value:function all(callback){this.throwIfDisposed();return this.where(callback).length()===this.length();}},{key:"forEach",value:function forEach(callback){this.throwIfDisposed();for(var i=0;i<this.length();i++){callback(this.privList[i],i);}}},{key:"select",value:function select(callback){this.throwIfDisposed();var selectList=[];for(var i=0;i<this.privList.length;i++){selectList.push(callback(this.privList[i],i));}return new List(selectList);}},{key:"where",value:function where(callback){this.throwIfDisposed();var filteredList=new List();for(var i=0;i<this.privList.length;i++){if(callback(this.privList[i],i)){filteredList.add(this.privList[i]);}}return filteredList;}},{key:"orderBy",value:function orderBy(compareFn){this.throwIfDisposed();var clonedArray=this.toArray();var orderedArray=clonedArray.sort(compareFn);return new List(orderedArray);}},{key:"orderByDesc",value:function orderByDesc(compareFn){this.throwIfDisposed();return this.orderBy(function(a,b){return compareFn(b,a);});}},{key:"clone",value:function clone(){this.throwIfDisposed();return new List(this.toArray());}},{key:"concat",value:function concat(list){this.throwIfDisposed();return new List(this.privList.concat(list.toArray()));}},{key:"concatArray",value:function concatArray(array){this.throwIfDisposed();return new List(this.privList.concat(array));}},{key:"isDisposed",value:function isDisposed(){return this.privList==null;}},{key:"dispose",value:function dispose(reason){if(!this.isDisposed()){this.privDisposeReason=reason;this.privList=null;this.privAddSubscriptions=null;this.privRemoveSubscriptions=null;this.triggerSubscriptions(this.privDisposedSubscriptions);}}},{key:"throwIfDisposed",value:function throwIfDisposed(){if(this.isDisposed()){throw new Error_js_1.ObjectDisposedError("List",this.privDisposeReason);}}},{key:"triggerSubscriptions",value:function triggerSubscriptions(subscriptions){if(subscriptions){for(var subscriptionId in subscriptions){if(subscriptionId){subscriptions[subscriptionId]();}}}}}]);return List;}();exports.List=List;/***/},/* 43 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.marshalPromiseToCallbacks=exports.Sink=exports.Deferred=exports.PromiseResultEventSource=exports.PromiseResult=exports.PromiseState=void 0;/* eslint-disable max-classes-per-file, @typescript-eslint/typedef */var PromiseState;(function(PromiseState){PromiseState[PromiseState["None"]=0]="None";PromiseState[PromiseState["Resolved"]=1]="Resolved";PromiseState[PromiseState["Rejected"]=2]="Rejected";})(PromiseState=exports.PromiseState||(exports.PromiseState={}));var PromiseResult=/*#__PURE__*/function(){function PromiseResult(promiseResultEventSource){var _this21=this;_classCallCheck(this,PromiseResult);this.throwIfError=function(){if(_this21.isError){throw _this21.error;}};promiseResultEventSource.on(function(result){if(!_this21.privIsCompleted){_this21.privIsCompleted=true;_this21.privIsError=false;_this21.privResult=result;}},function(error){if(!_this21.privIsCompleted){_this21.privIsCompleted=true;_this21.privIsError=true;_this21.privError=error;}});}_createClass(PromiseResult,[{key:"isCompleted",get:function get(){return this.privIsCompleted;}},{key:"isError",get:function get(){return this.privIsError;}},{key:"error",get:function get(){return this.privError;}},{key:"result",get:function get(){return this.privResult;}}]);return PromiseResult;}();exports.PromiseResult=PromiseResult;var PromiseResultEventSource=/*#__PURE__*/_createClass(function PromiseResultEventSource(){var _this22=this;_classCallCheck(this,PromiseResultEventSource);this.setResult=function(result){_this22.privOnSetResult(result);};this.setError=function(error){_this22.privOnSetError(error);};this.on=function(onSetResult,onSetError){_this22.privOnSetResult=onSetResult;_this22.privOnSetError=onSetError;};});exports.PromiseResultEventSource=PromiseResultEventSource;var Deferred=/*#__PURE__*/function(){function Deferred(){var _this23=this;_classCallCheck(this,Deferred);this.resolve=function(result){_this23.privResolve(result);return _this23;};this.reject=function(error){_this23.privReject(error);return _this23;};// eslint-disable-next-line @typescript-eslint/explicit-function-return-type
this.privPromise=new Promise(function(resolve,reject){_this23.privResolve=resolve;_this23.privReject=reject;});}_createClass(Deferred,[{key:"promise",get:function get(){return this.privPromise;}}]);return Deferred;}();exports.Deferred=Deferred;var Sink=/*#__PURE__*/function(){function Sink(){_classCallCheck(this,Sink);this.privState=PromiseState.None;this.privPromiseResult=null;this.privPromiseResultEvents=null;this.privSuccessHandlers=[];this.privErrorHandlers=[];this.privPromiseResultEvents=new PromiseResultEventSource();this.privPromiseResult=new PromiseResult(this.privPromiseResultEvents);}_createClass(Sink,[{key:"state",get:function get(){return this.privState;}},{key:"result",get:function get(){return this.privPromiseResult;}},{key:"resolve",value:function resolve(result){if(this.privState!==PromiseState.None){throw new Error("'Cannot resolve a completed promise'");}this.privState=PromiseState.Resolved;this.privPromiseResultEvents.setResult(result);for(var i=0;i<this.privSuccessHandlers.length;i++){this.executeSuccessCallback(result,this.privSuccessHandlers[i],this.privErrorHandlers[i]);}this.detachHandlers();}},{key:"reject",value:function reject(error){if(this.privState!==PromiseState.None){throw new Error("'Cannot reject a completed promise'");}this.privState=PromiseState.Rejected;this.privPromiseResultEvents.setError(error);var _iterator2=_createForOfIteratorHelper(this.privErrorHandlers),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var errorHandler=_step2.value;this.executeErrorCallback(error,errorHandler);}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}this.detachHandlers();}},{key:"on",value:function on(successCallback,errorCallback){if(successCallback==null){// eslint-disable-next-line @typescript-eslint/no-empty-function
successCallback=function successCallback(){};}if(this.privState===PromiseState.None){this.privSuccessHandlers.push(successCallback);this.privErrorHandlers.push(errorCallback);}else{if(this.privState===PromiseState.Resolved){this.executeSuccessCallback(this.privPromiseResult.result,successCallback,errorCallback);}else if(this.privState===PromiseState.Rejected){this.executeErrorCallback(this.privPromiseResult.error,errorCallback);}this.detachHandlers();}}},{key:"executeSuccessCallback",value:function executeSuccessCallback(result,successCallback,errorCallback){try{successCallback(result);}catch(e){this.executeErrorCallback("'Unhandled callback error: ".concat(e,"'"),errorCallback);}}},{key:"executeErrorCallback",value:function executeErrorCallback(error,errorCallback){if(errorCallback){try{errorCallback(error);}catch(e){throw new Error("'Unhandled callback error: ".concat(e,". InnerError: ").concat(error,"'"));}}else{throw new Error("'Unhandled error: ".concat(error,"'"));}}},{key:"detachHandlers",value:function detachHandlers(){this.privErrorHandlers=[];this.privSuccessHandlers=[];}}]);return Sink;}();exports.Sink=Sink;// eslint-disable-next-line prefer-arrow/prefer-arrow-functions
function marshalPromiseToCallbacks(promise,cb,err){promise.then(function(val){try{if(!!cb){cb(val);}}catch(error){if(!!err){try{if(error instanceof Error){var typedError=error;err(typedError.name+": "+typedError.message);}else{err(error);}// eslint-disable-next-line no-empty
}catch(error){}}}},function(error){if(!!err){try{if(error instanceof Error){var typedError=error;err(typedError.name+": "+typedError.message);}else{err(error);}// eslint-disable-next-line no-empty
}catch(error){}}});}exports.marshalPromiseToCallbacks=marshalPromiseToCallbacks;/***/},/* 44 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.Queue=void 0;var Error_js_1=__webpack_require__(26);var List_js_1=__webpack_require__(42);var Promise_js_1=__webpack_require__(43);var SubscriberType;(function(SubscriberType){SubscriberType[SubscriberType["Dequeue"]=0]="Dequeue";SubscriberType[SubscriberType["Peek"]=1]="Peek";})(SubscriberType||(SubscriberType={}));var Queue=/*#__PURE__*/function(){function Queue(list){var _this24=this;_classCallCheck(this,Queue);this.privPromiseStore=new List_js_1.List();this.privIsDrainInProgress=false;this.privIsDisposing=false;this.privDisposeReason=null;this.privList=list?list:new List_js_1.List();this.privDetachables=[];this.privSubscribers=new List_js_1.List();this.privDetachables.push(this.privList.onAdded(function(){return _this24.drain();}));}_createClass(Queue,[{key:"enqueue",value:function enqueue(item){this.throwIfDispose();this.enqueueFromPromise(new Promise(function(resolve){return resolve(item);}));}},{key:"enqueueFromPromise",value:function enqueueFromPromise(promise){var _this25=this;this.throwIfDispose();promise.then(function(val){_this25.privList.add(val);// eslint-disable-next-line @typescript-eslint/no-empty-function
},function(){});}},{key:"dequeue",value:function dequeue(){this.throwIfDispose();var deferredSubscriber=new Promise_js_1.Deferred();if(this.privSubscribers){this.privSubscribers.add({deferral:deferredSubscriber,type:SubscriberType.Dequeue});this.drain();}return deferredSubscriber.promise;}},{key:"peek",value:function peek(){this.throwIfDispose();var deferredSubscriber=new Promise_js_1.Deferred();var subs=this.privSubscribers;if(subs){this.privSubscribers.add({deferral:deferredSubscriber,type:SubscriberType.Peek});this.drain();}return deferredSubscriber.promise;}},{key:"length",value:function length(){this.throwIfDispose();return this.privList.length();}},{key:"isDisposed",value:function isDisposed(){return this.privSubscribers==null;}},{key:"drainAndDispose",value:function(){var _drainAndDispose=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(pendingItemProcessor,reason){var _this26=this;var subs,subscriber,_iterator3,_step3,detachable,promiseArray;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(!this.isDisposed()&&!this.privIsDisposing)){_context.next=30;break;}this.privDisposeReason=reason;this.privIsDisposing=true;subs=this.privSubscribers;if(subs){while(subs.length()>0){subscriber=subs.removeFirst();// TODO: this needs work (Resolve(null) instead?).
subscriber.deferral.resolve(undefined);// subscriber.deferral.reject("Disposed");
}// note: this block assumes cooperative multitasking, i.e.,
// between the if-statement and the assignment there are no
// thread switches.
// Reason is that between the initial const = this.; and this
// point there is the derral.resolve() operation that might have
// caused recursive calls to the Queue, especially, calling
// Dispose() on the queue alredy (which would reset the var
// here to null!).
// That should generally hold true for javascript...
if(this.privSubscribers===subs){this.privSubscribers=subs;}}_iterator3=_createForOfIteratorHelper(this.privDetachables);_context.prev=6;_iterator3.s();case 8:if((_step3=_iterator3.n()).done){_context.next=14;break;}detachable=_step3.value;_context.next=12;return detachable.detach();case 12:_context.next=8;break;case 14:_context.next=19;break;case 16:_context.prev=16;_context.t0=_context["catch"](6);_iterator3.e(_context.t0);case 19:_context.prev=19;_iterator3.f();return _context.finish(19);case 22:if(!(this.privPromiseStore.length()>0&&pendingItemProcessor)){_context.next=28;break;}promiseArray=[];this.privPromiseStore.toArray().forEach(function(wrapper){promiseArray.push(wrapper);});return _context.abrupt("return",Promise.all(promiseArray)["finally"](function(){_this26.privSubscribers=null;_this26.privList.forEach(function(item){pendingItemProcessor(item);});_this26.privList=null;return;}).then());case 28:this.privSubscribers=null;this.privList=null;case 30:case"end":return _context.stop();}},_callee,this,[[6,16,19,22]]);}));function drainAndDispose(_x,_x2){return _drainAndDispose.apply(this,arguments);}return drainAndDispose;}()},{key:"dispose",value:function(){var _dispose=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(reason){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.drainAndDispose(null,reason);case 2:case"end":return _context2.stop();}},_callee2,this);}));function dispose(_x3){return _dispose.apply(this,arguments);}return dispose;}()},{key:"drain",value:function drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=true;var subs=this.privSubscribers;var lists=this.privList;if(subs&&lists){while(lists.length()>0&&subs.length()>0&&!this.privIsDisposing){var subscriber=subs.removeFirst();if(subscriber.type===SubscriberType.Peek){subscriber.deferral.resolve(lists.first());}else{var dequeuedItem=lists.removeFirst();subscriber.deferral.resolve(dequeuedItem);}}// note: this block assumes cooperative multitasking, i.e.,
// between the if-statement and the assignment there are no
// thread switches.
// Reason is that between the initial const = this.; and this
// point there is the derral.resolve() operation that might have
// caused recursive calls to the Queue, especially, calling
// Dispose() on the queue alredy (which would reset the var
// here to null!).
// That should generally hold true for javascript...
if(this.privSubscribers===subs){this.privSubscribers=subs;}// note: this block assumes cooperative multitasking, i.e.,
// between the if-statement and the assignment there are no
// thread switches.
// Reason is that between the initial const = this.; and this
// point there is the derral.resolve() operation that might have
// caused recursive calls to the Queue, especially, calling
// Dispose() on the queue alredy (which would reset the var
// here to null!).
// That should generally hold true for javascript...
if(this.privList===lists){this.privList=lists;}}this.privIsDrainInProgress=false;}}},{key:"throwIfDispose",value:function throwIfDispose(){if(this.isDisposed()){if(this.privDisposeReason){throw new Error_js_1.InvalidOperationError(this.privDisposeReason);}throw new Error_js_1.ObjectDisposedError("Queue");}else if(this.privIsDisposing){throw new Error_js_1.InvalidOperationError("Queue disposing");}}}]);return Queue;}();exports.Queue=Queue;/***/},/* 45 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";/* eslint-disable @typescript-eslint/no-unsafe-assignment */ // Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.RawWebsocketMessage=void 0;var ConnectionMessage_js_1=__webpack_require__(25);var Error_js_1=__webpack_require__(26);var Guid_js_1=__webpack_require__(7);var RawWebsocketMessage=/*#__PURE__*/function(){function RawWebsocketMessage(messageType,payload,id){_classCallCheck(this,RawWebsocketMessage);this.privPayload=null;if(!payload){throw new Error_js_1.ArgumentNullError("payload");}// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
if(messageType===ConnectionMessage_js_1.MessageType.Binary&&Object.getPrototypeOf(payload).constructor.name!=="ArrayBuffer"){throw new Error_js_1.InvalidOperationError("Payload must be ArrayBuffer");}if(messageType===ConnectionMessage_js_1.MessageType.Text&&!(typeof payload==="string")){throw new Error_js_1.InvalidOperationError("Payload must be a string");}this.privMessageType=messageType;this.privPayload=payload;this.privId=id?id:Guid_js_1.createNoDashGuid();}_createClass(RawWebsocketMessage,[{key:"messageType",get:function get(){return this.privMessageType;}},{key:"payload",get:function get(){// eslint-disable-next-line @typescript-eslint/no-unsafe-return
return this.privPayload;}},{key:"textContent",get:function get(){if(this.privMessageType===ConnectionMessage_js_1.MessageType.Binary){throw new Error_js_1.InvalidOperationError("Not supported for binary message");}return this.privPayload;}},{key:"binaryContent",get:function get(){if(this.privMessageType===ConnectionMessage_js_1.MessageType.Text){throw new Error_js_1.InvalidOperationError("Not supported for text message");}return this.privPayload;}},{key:"id",get:function get(){return this.privId;}}]);return RawWebsocketMessage;}();exports.RawWebsocketMessage=RawWebsocketMessage;/***/},/* 46 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.RiffPcmEncoder=void 0;var RiffPcmEncoder=/*#__PURE__*/function(){function RiffPcmEncoder(actualSampleRate,desiredSampleRate){_classCallCheck(this,RiffPcmEncoder);this.privActualSampleRate=actualSampleRate;this.privDesiredSampleRate=desiredSampleRate;}_createClass(RiffPcmEncoder,[{key:"encode",value:function encode(actualAudioFrame){var audioFrame=this.downSampleAudioFrame(actualAudioFrame,this.privActualSampleRate,this.privDesiredSampleRate);if(!audioFrame){return null;}var audioLength=audioFrame.length*2;var buffer=new ArrayBuffer(audioLength);var view=new DataView(buffer);this.floatTo16BitPCM(view,0,audioFrame);return buffer;}},{key:"setString",value:function setString(view,offset,str){for(var i=0;i<str.length;i++){view.setUint8(offset+i,str.charCodeAt(i));}}},{key:"floatTo16BitPCM",value:function floatTo16BitPCM(view,offset,input){for(var i=0;i<input.length;i++,offset+=2){var s=Math.max(-1,Math.min(1,input[i]));view.setInt16(offset,s<0?s*0x8000:s*0x7FFF,true);}}},{key:"downSampleAudioFrame",value:function downSampleAudioFrame(srcFrame,srcRate,dstRate){if(!srcFrame){return null;}if(dstRate===srcRate||dstRate>srcRate){return srcFrame;}var ratio=srcRate/dstRate;var dstLength=Math.round(srcFrame.length/ratio);var dstFrame=new Float32Array(dstLength);var srcOffset=0;var dstOffset=0;while(dstOffset<dstLength){var nextSrcOffset=Math.round((dstOffset+1)*ratio);var accum=0;var count=0;while(srcOffset<nextSrcOffset&&srcOffset<srcFrame.length){accum+=srcFrame[srcOffset++];count++;}dstFrame[dstOffset++]=accum/count;}return dstFrame;}}]);return RiffPcmEncoder;}();exports.RiffPcmEncoder=RiffPcmEncoder;/***/},/* 47 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.Stream=void 0;var Error_js_1=__webpack_require__(26);var Guid_js_1=__webpack_require__(7);var Queue_js_1=__webpack_require__(44);var Stream=/*#__PURE__*/function(){function Stream(streamId){_classCallCheck(this,Stream);this.privIsWriteEnded=false;this.privIsReadEnded=false;this.privId=streamId?streamId:Guid_js_1.createNoDashGuid();this.privReaderQueue=new Queue_js_1.Queue();}_createClass(Stream,[{key:"isClosed",get:function get(){return this.privIsWriteEnded;}},{key:"isReadEnded",get:function get(){return this.privIsReadEnded;}},{key:"id",get:function get(){return this.privId;}},{key:"close",value:function close(){if(!this.privIsWriteEnded){this.writeStreamChunk({buffer:null,isEnd:true,timeReceived:Date.now()});this.privIsWriteEnded=true;}}},{key:"writeStreamChunk",value:function writeStreamChunk(streamChunk){this.throwIfClosed();if(!this.privReaderQueue.isDisposed()){try{this.privReaderQueue.enqueue(streamChunk);}catch(e){// Do nothing
}}}},{key:"read",value:function read(){var _this27=this;if(this.privIsReadEnded){throw new Error_js_1.InvalidOperationError("Stream read has already finished");}return this.privReaderQueue.dequeue().then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(streamChunk){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(!(streamChunk===undefined||streamChunk.isEnd)){_context3.next=3;break;}_context3.next=3;return _this27.privReaderQueue.dispose("End of stream reached");case 3:return _context3.abrupt("return",streamChunk);case 4:case"end":return _context3.stop();}},_callee3);}));return function(_x4){return _ref.apply(this,arguments);};}());}},{key:"readEnded",value:function readEnded(){if(!this.privIsReadEnded){this.privIsReadEnded=true;this.privReaderQueue=new Queue_js_1.Queue();}}},{key:"throwIfClosed",value:function throwIfClosed(){if(this.privIsWriteEnded){throw new Error_js_1.InvalidOperationError("Stream closed");}}}]);return Stream;}();exports.Stream=Stream;/***/},/* 48 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.TranslationStatus=void 0;/**
 * Defines translation status.
 * @class TranslationStatus
 */var TranslationStatus;(function(TranslationStatus){/**
     * @member TranslationStatus.Success
     */TranslationStatus[TranslationStatus["Success"]=0]="Success";/**
     * @member TranslationStatus.Error
     */TranslationStatus[TranslationStatus["Error"]=1]="Error";})(TranslationStatus=exports.TranslationStatus||(exports.TranslationStatus={}));/***/},/* 49 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ChunkedArrayBufferStream=void 0;var Exports_js_1=__webpack_require__(4);var ChunkedArrayBufferStream=/*#__PURE__*/function(_Exports_js_1$Stream){_inherits(ChunkedArrayBufferStream,_Exports_js_1$Stream);var _super25=_createSuper(ChunkedArrayBufferStream);function ChunkedArrayBufferStream(targetChunkSize,streamId){var _this28;_classCallCheck(this,ChunkedArrayBufferStream);_this28=_super25.call(this,streamId);_this28.privTargetChunkSize=Math.round(targetChunkSize);_this28.privNextBufferReadyBytes=0;return _this28;}_createClass(ChunkedArrayBufferStream,[{key:"writeStreamChunk",value:function writeStreamChunk(chunk){// No pending write, and the buffer is the right size so write it.
if(chunk.isEnd||0===this.privNextBufferReadyBytes&&chunk.buffer.byteLength===this.privTargetChunkSize){_get(_getPrototypeOf(ChunkedArrayBufferStream.prototype),"writeStreamChunk",this).call(this,chunk);return;}var bytesCopiedFromBuffer=0;while(bytesCopiedFromBuffer<chunk.buffer.byteLength){// Fill the next buffer.
if(undefined===this.privNextBufferToWrite){this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize);this.privNextBufferStartTime=chunk.timeReceived;}// Find out how many bytes we can copy into the read buffer.
var bytesToCopy=Math.min(chunk.buffer.byteLength-bytesCopiedFromBuffer,this.privTargetChunkSize-this.privNextBufferReadyBytes);var targetView=new Uint8Array(this.privNextBufferToWrite);var sourceView=new Uint8Array(chunk.buffer.slice(bytesCopiedFromBuffer,bytesToCopy+bytesCopiedFromBuffer));targetView.set(sourceView,this.privNextBufferReadyBytes);this.privNextBufferReadyBytes+=bytesToCopy;bytesCopiedFromBuffer+=bytesToCopy;// Are we ready to write?
if(this.privNextBufferReadyBytes===this.privTargetChunkSize){_get(_getPrototypeOf(ChunkedArrayBufferStream.prototype),"writeStreamChunk",this).call(this,{buffer:this.privNextBufferToWrite,isEnd:false,timeReceived:this.privNextBufferStartTime});this.privNextBufferReadyBytes=0;this.privNextBufferToWrite=undefined;}}}},{key:"close",value:function close(){// Send whatever is pending, then close the base class.
if(0!==this.privNextBufferReadyBytes&&!this.isClosed){_get(_getPrototypeOf(ChunkedArrayBufferStream.prototype),"writeStreamChunk",this).call(this,{buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:false,timeReceived:this.privNextBufferStartTime});}_get(_getPrototypeOf(ChunkedArrayBufferStream.prototype),"close",this).call(this);}}]);return ChunkedArrayBufferStream;}(Exports_js_1.Stream);exports.ChunkedArrayBufferStream=ChunkedArrayBufferStream;/***/},/* 50 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});/***/},/* 51 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.Timeout=void 0;var Timeout=/*#__PURE__*/function(){function Timeout(){_classCallCheck(this,Timeout);}_createClass(Timeout,null,[{key:"load",value:function load(){// Prefilling the Maps with a function indexed by zero is necessary to be compliant with the specification.
var scheduledTimeoutFunctions=new Map([[0,function(){}]]);// eslint-disable-line @typescript-eslint/no-empty-function
var unhandledRequests=new Map();// eslint-disable-next-line
var workerScript="!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=14)}([function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return i})),n.d(t,\"b\",(function(){return u})),n.d(t,\"c\",(function(){return a})),n.d(t,\"d\",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id \"'.concat(e,'\".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id \"'.concat(e,'\".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if(\"performance\"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o=\"performance\"in self?performance.now():Date.now();o>n?postMessage({id:null,method:\"call\",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){\"use strict\";n.r(t);var r=n(2);for(var o in r)\"default\"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)\"default\"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)\"default\"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)\"default\"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)\"default\"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)\"default\"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)\"default\"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)\"default\"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){\"use strict\";n.r(t);var r=n(11);for(var o in r)\"default\"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)\"default\"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)\"default\"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){\"use strict\";n.r(t);var r=n(0),o=n(1);for(var i in o)\"default\"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)\"default\"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener(\"message\",({data:e})=>{try{if(\"clear\"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if(\"set\"!==e.method)throw new Error('The given method \"'.concat(e.method,'\" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);";var workerUrl="data:text/javascript;base64,"+btoa(workerScript);var worker=new Worker(workerUrl);worker.addEventListener("message",function(_ref2){var data=_ref2.data;if(Timeout.isCallNotification(data)){var timerId=data.params.timerId;var idOrFunc=scheduledTimeoutFunctions.get(timerId);if(typeof idOrFunc==="number"){var unhandledTimerId=unhandledRequests.get(idOrFunc);if(unhandledTimerId===undefined||unhandledTimerId!==timerId){throw new Error("The timer is in an undefined state.");}}else if(typeof idOrFunc!=="undefined"){idOrFunc();// A timeout can be safely deleted because it is only called once.
scheduledTimeoutFunctions["delete"](timerId);}else{throw new Error("The timer is in an undefined state.");}}else if(Timeout.isClearResponse(data)){var id=data.id;var _unhandledTimerId=unhandledRequests.get(id);if(_unhandledTimerId===undefined){throw new Error("The timer is in an undefined state.");}unhandledRequests["delete"](id);scheduledTimeoutFunctions["delete"](_unhandledTimerId);}else{var message=data.error.message;throw new Error(message);}});var clearTimeout=function clearTimeout(timerId){var id=Math.random();unhandledRequests.set(id,timerId);scheduledTimeoutFunctions.set(timerId,id);worker.postMessage({id:id,method:"clear",params:{timerId:timerId}});};var setTimeout=function setTimeout(func,delay){var timerId=Math.random();scheduledTimeoutFunctions.set(timerId,func);worker.postMessage({id:null,method:"set",params:{delay:delay,now:performance.now(),timerId:timerId}});return timerId;};return{clearTimeout:clearTimeout,setTimeout:setTimeout};}},{key:"loadWorkerTimers",value:function loadWorkerTimers(){return function(){if(Timeout.workerTimers!==null){return Timeout.workerTimers;}Timeout.workerTimers=Timeout.load();return Timeout.workerTimers;};}},{key:"isCallNotification",value:function isCallNotification(message){return message.method!==undefined&&message.method==="call";}},{key:"isClearResponse",value:function isClearResponse(message){return message.error===null&&typeof message.id==="number";}}]);return Timeout;}();exports.Timeout=Timeout;Timeout.workerTimers=null;Timeout.clearTimeout=function(timerId){return Timeout.timers().clearTimeout(timerId);};Timeout.setTimeout=function(func,delay){return Timeout.timers().setTimeout(func,delay);};Timeout.timers=Timeout.loadWorkerTimers();/***/},/* 52 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.OCSPCacheUpdateErrorEvent=exports.OCSPResponseRetrievedEvent=exports.OCSPCacheFetchErrorEvent=exports.OCSPVerificationFailedEvent=exports.OCSPCacheHitEvent=exports.OCSPCacheEntryNeedsRefreshEvent=exports.OCSPCacheEntryExpiredEvent=exports.OCSPWSUpgradeStartedEvent=exports.OCSPStapleReceivedEvent=exports.OCSPCacheUpdateCompleteEvent=exports.OCSPDiskCacheStoreEvent=exports.OCSPMemoryCacheStoreEvent=exports.OCSPCacheUpdateNeededEvent=exports.OCSPDiskCacheHitEvent=exports.OCSPCacheMissEvent=exports.OCSPMemoryCacheHitEvent=exports.OCSPEvent=void 0;/* eslint-disable max-classes-per-file */var PlatformEvent_js_1=__webpack_require__(6);var OCSPEvent=/*#__PURE__*/function(_PlatformEvent_js_1$P5){_inherits(OCSPEvent,_PlatformEvent_js_1$P5);var _super26=_createSuper(OCSPEvent);function OCSPEvent(eventName,eventType,signature){var _this29;_classCallCheck(this,OCSPEvent);_this29=_super26.call(this,eventName,eventType);_this29.privSignature=signature;return _this29;}return _createClass(OCSPEvent);}(PlatformEvent_js_1.PlatformEvent);exports.OCSPEvent=OCSPEvent;var OCSPMemoryCacheHitEvent=/*#__PURE__*/function(_OCSPEvent){_inherits(OCSPMemoryCacheHitEvent,_OCSPEvent);var _super27=_createSuper(OCSPMemoryCacheHitEvent);function OCSPMemoryCacheHitEvent(signature){_classCallCheck(this,OCSPMemoryCacheHitEvent);return _super27.call(this,"OCSPMemoryCacheHitEvent",PlatformEvent_js_1.EventType.Debug,signature);}return _createClass(OCSPMemoryCacheHitEvent);}(OCSPEvent);exports.OCSPMemoryCacheHitEvent=OCSPMemoryCacheHitEvent;var OCSPCacheMissEvent=/*#__PURE__*/function(_OCSPEvent2){_inherits(OCSPCacheMissEvent,_OCSPEvent2);var _super28=_createSuper(OCSPCacheMissEvent);function OCSPCacheMissEvent(signature){_classCallCheck(this,OCSPCacheMissEvent);return _super28.call(this,"OCSPCacheMissEvent",PlatformEvent_js_1.EventType.Debug,signature);}return _createClass(OCSPCacheMissEvent);}(OCSPEvent);exports.OCSPCacheMissEvent=OCSPCacheMissEvent;var OCSPDiskCacheHitEvent=/*#__PURE__*/function(_OCSPEvent3){_inherits(OCSPDiskCacheHitEvent,_OCSPEvent3);var _super29=_createSuper(OCSPDiskCacheHitEvent);function OCSPDiskCacheHitEvent(signature){_classCallCheck(this,OCSPDiskCacheHitEvent);return _super29.call(this,"OCSPDiskCacheHitEvent",PlatformEvent_js_1.EventType.Debug,signature);}return _createClass(OCSPDiskCacheHitEvent);}(OCSPEvent);exports.OCSPDiskCacheHitEvent=OCSPDiskCacheHitEvent;var OCSPCacheUpdateNeededEvent=/*#__PURE__*/function(_OCSPEvent4){_inherits(OCSPCacheUpdateNeededEvent,_OCSPEvent4);var _super30=_createSuper(OCSPCacheUpdateNeededEvent);function OCSPCacheUpdateNeededEvent(signature){_classCallCheck(this,OCSPCacheUpdateNeededEvent);return _super30.call(this,"OCSPCacheUpdateNeededEvent",PlatformEvent_js_1.EventType.Debug,signature);}return _createClass(OCSPCacheUpdateNeededEvent);}(OCSPEvent);exports.OCSPCacheUpdateNeededEvent=OCSPCacheUpdateNeededEvent;var OCSPMemoryCacheStoreEvent=/*#__PURE__*/function(_OCSPEvent5){_inherits(OCSPMemoryCacheStoreEvent,_OCSPEvent5);var _super31=_createSuper(OCSPMemoryCacheStoreEvent);function OCSPMemoryCacheStoreEvent(signature){_classCallCheck(this,OCSPMemoryCacheStoreEvent);return _super31.call(this,"OCSPMemoryCacheStoreEvent",PlatformEvent_js_1.EventType.Debug,signature);}return _createClass(OCSPMemoryCacheStoreEvent);}(OCSPEvent);exports.OCSPMemoryCacheStoreEvent=OCSPMemoryCacheStoreEvent;var OCSPDiskCacheStoreEvent=/*#__PURE__*/function(_OCSPEvent6){_inherits(OCSPDiskCacheStoreEvent,_OCSPEvent6);var _super32=_createSuper(OCSPDiskCacheStoreEvent);function OCSPDiskCacheStoreEvent(signature){_classCallCheck(this,OCSPDiskCacheStoreEvent);return _super32.call(this,"OCSPDiskCacheStoreEvent",PlatformEvent_js_1.EventType.Debug,signature);}return _createClass(OCSPDiskCacheStoreEvent);}(OCSPEvent);exports.OCSPDiskCacheStoreEvent=OCSPDiskCacheStoreEvent;var OCSPCacheUpdateCompleteEvent=/*#__PURE__*/function(_OCSPEvent7){_inherits(OCSPCacheUpdateCompleteEvent,_OCSPEvent7);var _super33=_createSuper(OCSPCacheUpdateCompleteEvent);function OCSPCacheUpdateCompleteEvent(signature){_classCallCheck(this,OCSPCacheUpdateCompleteEvent);return _super33.call(this,"OCSPCacheUpdateCompleteEvent",PlatformEvent_js_1.EventType.Debug,signature);}return _createClass(OCSPCacheUpdateCompleteEvent);}(OCSPEvent);exports.OCSPCacheUpdateCompleteEvent=OCSPCacheUpdateCompleteEvent;var OCSPStapleReceivedEvent=/*#__PURE__*/function(_OCSPEvent8){_inherits(OCSPStapleReceivedEvent,_OCSPEvent8);var _super34=_createSuper(OCSPStapleReceivedEvent);function OCSPStapleReceivedEvent(){_classCallCheck(this,OCSPStapleReceivedEvent);return _super34.call(this,"OCSPStapleReceivedEvent",PlatformEvent_js_1.EventType.Debug,"");}return _createClass(OCSPStapleReceivedEvent);}(OCSPEvent);exports.OCSPStapleReceivedEvent=OCSPStapleReceivedEvent;var OCSPWSUpgradeStartedEvent=/*#__PURE__*/function(_OCSPEvent9){_inherits(OCSPWSUpgradeStartedEvent,_OCSPEvent9);var _super35=_createSuper(OCSPWSUpgradeStartedEvent);function OCSPWSUpgradeStartedEvent(serialNumber){_classCallCheck(this,OCSPWSUpgradeStartedEvent);return _super35.call(this,"OCSPWSUpgradeStartedEvent",PlatformEvent_js_1.EventType.Debug,serialNumber);}return _createClass(OCSPWSUpgradeStartedEvent);}(OCSPEvent);exports.OCSPWSUpgradeStartedEvent=OCSPWSUpgradeStartedEvent;var OCSPCacheEntryExpiredEvent=/*#__PURE__*/function(_OCSPEvent10){_inherits(OCSPCacheEntryExpiredEvent,_OCSPEvent10);var _super36=_createSuper(OCSPCacheEntryExpiredEvent);function OCSPCacheEntryExpiredEvent(serialNumber,expireTime){var _this30;_classCallCheck(this,OCSPCacheEntryExpiredEvent);_this30=_super36.call(this,"OCSPCacheEntryExpiredEvent",PlatformEvent_js_1.EventType.Debug,serialNumber);_this30.privExpireTime=expireTime;return _this30;}return _createClass(OCSPCacheEntryExpiredEvent);}(OCSPEvent);exports.OCSPCacheEntryExpiredEvent=OCSPCacheEntryExpiredEvent;var OCSPCacheEntryNeedsRefreshEvent=/*#__PURE__*/function(_OCSPEvent11){_inherits(OCSPCacheEntryNeedsRefreshEvent,_OCSPEvent11);var _super37=_createSuper(OCSPCacheEntryNeedsRefreshEvent);function OCSPCacheEntryNeedsRefreshEvent(serialNumber,startTime,expireTime){var _this31;_classCallCheck(this,OCSPCacheEntryNeedsRefreshEvent);_this31=_super37.call(this,"OCSPCacheEntryNeedsRefreshEvent",PlatformEvent_js_1.EventType.Debug,serialNumber);_this31.privExpireTime=expireTime;_this31.privStartTime=startTime;return _this31;}return _createClass(OCSPCacheEntryNeedsRefreshEvent);}(OCSPEvent);exports.OCSPCacheEntryNeedsRefreshEvent=OCSPCacheEntryNeedsRefreshEvent;var OCSPCacheHitEvent=/*#__PURE__*/function(_OCSPEvent12){_inherits(OCSPCacheHitEvent,_OCSPEvent12);var _super38=_createSuper(OCSPCacheHitEvent);function OCSPCacheHitEvent(serialNumber,startTime,expireTime){var _this32;_classCallCheck(this,OCSPCacheHitEvent);_this32=_super38.call(this,"OCSPCacheHitEvent",PlatformEvent_js_1.EventType.Debug,serialNumber);_this32.privExpireTime=expireTime;_this32.privExpireTimeString=new Date(expireTime).toLocaleDateString();_this32.privStartTime=startTime;_this32.privStartTimeString=new Date(startTime).toLocaleTimeString();return _this32;}return _createClass(OCSPCacheHitEvent);}(OCSPEvent);exports.OCSPCacheHitEvent=OCSPCacheHitEvent;var OCSPVerificationFailedEvent=/*#__PURE__*/function(_OCSPEvent13){_inherits(OCSPVerificationFailedEvent,_OCSPEvent13);var _super39=_createSuper(OCSPVerificationFailedEvent);function OCSPVerificationFailedEvent(serialNumber,error){var _this33;_classCallCheck(this,OCSPVerificationFailedEvent);_this33=_super39.call(this,"OCSPVerificationFailedEvent",PlatformEvent_js_1.EventType.Debug,serialNumber);_this33.privError=error;return _this33;}return _createClass(OCSPVerificationFailedEvent);}(OCSPEvent);exports.OCSPVerificationFailedEvent=OCSPVerificationFailedEvent;var OCSPCacheFetchErrorEvent=/*#__PURE__*/function(_OCSPEvent14){_inherits(OCSPCacheFetchErrorEvent,_OCSPEvent14);var _super40=_createSuper(OCSPCacheFetchErrorEvent);function OCSPCacheFetchErrorEvent(serialNumber,error){var _this34;_classCallCheck(this,OCSPCacheFetchErrorEvent);_this34=_super40.call(this,"OCSPCacheFetchErrorEvent",PlatformEvent_js_1.EventType.Debug,serialNumber);_this34.privError=error;return _this34;}return _createClass(OCSPCacheFetchErrorEvent);}(OCSPEvent);exports.OCSPCacheFetchErrorEvent=OCSPCacheFetchErrorEvent;var OCSPResponseRetrievedEvent=/*#__PURE__*/function(_OCSPEvent15){_inherits(OCSPResponseRetrievedEvent,_OCSPEvent15);var _super41=_createSuper(OCSPResponseRetrievedEvent);function OCSPResponseRetrievedEvent(serialNumber){_classCallCheck(this,OCSPResponseRetrievedEvent);return _super41.call(this,"OCSPResponseRetrievedEvent",PlatformEvent_js_1.EventType.Debug,serialNumber);}return _createClass(OCSPResponseRetrievedEvent);}(OCSPEvent);exports.OCSPResponseRetrievedEvent=OCSPResponseRetrievedEvent;var OCSPCacheUpdateErrorEvent=/*#__PURE__*/function(_OCSPEvent16){_inherits(OCSPCacheUpdateErrorEvent,_OCSPEvent16);var _super42=_createSuper(OCSPCacheUpdateErrorEvent);function OCSPCacheUpdateErrorEvent(serialNumber,error){var _this35;_classCallCheck(this,OCSPCacheUpdateErrorEvent);_this35=_super42.call(this,"OCSPCacheUpdateErrorEvent",PlatformEvent_js_1.EventType.Debug,serialNumber);_this35.privError=error;return _this35;}return _createClass(OCSPCacheUpdateErrorEvent);}(OCSPEvent);exports.OCSPCacheUpdateErrorEvent=OCSPCacheUpdateErrorEvent;/***/},/* 53 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.BackgroundEvent=void 0;var Exports_js_1=__webpack_require__(4);var BackgroundEvent=/*#__PURE__*/function(_Exports_js_1$Platfor){_inherits(BackgroundEvent,_Exports_js_1$Platfor);var _super43=_createSuper(BackgroundEvent);function BackgroundEvent(error){var _this36;_classCallCheck(this,BackgroundEvent);_this36=_super43.call(this,"BackgroundEvent",Exports_js_1.EventType.Error);_this36.privError=error;return _this36;}_createClass(BackgroundEvent,[{key:"error",get:function get(){return this.privError;}}]);return BackgroundEvent;}(Exports_js_1.PlatformEvent);exports.BackgroundEvent=BackgroundEvent;/***/},/* 54 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.HeaderNames=void 0;var HeaderNames=/*#__PURE__*/_createClass(function HeaderNames(){_classCallCheck(this,HeaderNames);});exports.HeaderNames=HeaderNames;HeaderNames.AuthKey="Ocp-Apim-Subscription-Key";HeaderNames.Authorization="Authorization";HeaderNames.SpIDAuthKey="Apim-Subscription-Id";HeaderNames.ConnectionId="X-ConnectionId";HeaderNames.ContentType="Content-Type";HeaderNames.CustomCommandsAppId="X-CommandsAppId";HeaderNames.Path="Path";HeaderNames.RequestId="X-RequestId";HeaderNames.RequestStreamId="X-StreamId";HeaderNames.RequestTimestamp="X-Timestamp";/***/},/* 55 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.AuthInfo=void 0;var AuthInfo=/*#__PURE__*/function(){function AuthInfo(headerName,token){_classCallCheck(this,AuthInfo);this.privHeaderName=headerName;this.privToken=token;}_createClass(AuthInfo,[{key:"headerName",get:function get(){return this.privHeaderName;}},{key:"token",get:function get(){return this.privToken;}}]);return AuthInfo;}();exports.AuthInfo=AuthInfo;/***/},/* 56 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.CognitiveTokenAuthentication=void 0;var Exports_js_1=__webpack_require__(4);var IAuthentication_js_1=__webpack_require__(55);var HeaderNames_js_1=__webpack_require__(54);var CognitiveTokenAuthentication=/*#__PURE__*/function(){function CognitiveTokenAuthentication(fetchCallback,fetchOnExpiryCallback){_classCallCheck(this,CognitiveTokenAuthentication);if(!fetchCallback){throw new Exports_js_1.ArgumentNullError("fetchCallback");}if(!fetchOnExpiryCallback){throw new Exports_js_1.ArgumentNullError("fetchOnExpiryCallback");}this.privFetchCallback=fetchCallback;this.privFetchOnExpiryCallback=fetchOnExpiryCallback;}_createClass(CognitiveTokenAuthentication,[{key:"fetch",value:function fetch(authFetchEventId){return this.privFetchCallback(authFetchEventId).then(function(token){return new IAuthentication_js_1.AuthInfo(HeaderNames_js_1.HeaderNames.Authorization,token===undefined?undefined:CognitiveTokenAuthentication.privTokenPrefix+token);});}},{key:"fetchOnExpiry",value:function fetchOnExpiry(authFetchEventId){return this.privFetchOnExpiryCallback(authFetchEventId).then(function(token){return new IAuthentication_js_1.AuthInfo(HeaderNames_js_1.HeaderNames.Authorization,token===undefined?undefined:CognitiveTokenAuthentication.privTokenPrefix+token);});}}]);return CognitiveTokenAuthentication;}();exports.CognitiveTokenAuthentication=CognitiveTokenAuthentication;CognitiveTokenAuthentication.privTokenPrefix="Bearer ";/***/},/* 57 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});/***/},/* 58 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});/***/},/* 59 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.IntentConnectionFactory=void 0;var Exports_js_1=__webpack_require__(60);var Exports_js_2=__webpack_require__(79);var ConnectionFactoryBase_js_1=__webpack_require__(134);var Exports_js_3=__webpack_require__(2);var HeaderNames_js_1=__webpack_require__(54);var IntentConnectionFactory=/*#__PURE__*/function(_ConnectionFactoryBas){_inherits(IntentConnectionFactory,_ConnectionFactoryBas);var _super44=_createSuper(IntentConnectionFactory);function IntentConnectionFactory(){_classCallCheck(this,IntentConnectionFactory);return _super44.apply(this,arguments);}_createClass(IntentConnectionFactory,[{key:"create",value:function create(config,authInfo,connectionId){var endpoint=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint);if(!endpoint){var region=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_IntentRegion);var hostSuffix=ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region);var host=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,"wss://"+region+".sr.speech"+hostSuffix);endpoint=host+"/speech/recognition/interactive/cognitiveservices/v1";}var queryParams={format:"simple",language:config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(config,queryParams,endpoint);var headers={};if(authInfo.token!==undefined&&authInfo.token!==""){headers[authInfo.headerName]=authInfo.token;}headers[HeaderNames_js_1.HeaderNames.ConnectionId]=connectionId;config.parameters.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Url,endpoint);var enableCompression=config.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new Exports_js_1.WebsocketConnection(endpoint,queryParams,headers,new Exports_js_3.WebsocketMessageFormatter(),Exports_js_1.ProxyInfo.fromRecognizerConfig(config),enableCompression,connectionId);}},{key:"getSpeechRegionFromIntentRegion",value:function getSpeechRegionFromIntentRegion(intentRegion){switch(intentRegion){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return intentRegion;}}}]);return IntentConnectionFactory;}(ConnectionFactoryBase_js_1.ConnectionFactoryBase);exports.IntentConnectionFactory=IntentConnectionFactory;/***/},/* 60 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function get(){return m[k];}});}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k];});var __exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)if(p!=="default"&&!exports.hasOwnProperty(p))__createBinding(exports,m,p);};Object.defineProperty(exports,"__esModule",{value:true});__exportStar(__webpack_require__(61),exports);__exportStar(__webpack_require__(65),exports);__exportStar(__webpack_require__(66),exports);__exportStar(__webpack_require__(68),exports);__exportStar(__webpack_require__(69),exports);__exportStar(__webpack_require__(70),exports);__exportStar(__webpack_require__(71),exports);__exportStar(__webpack_require__(77),exports);__exportStar(__webpack_require__(78),exports);__exportStar(__webpack_require__(199),exports);__exportStar(__webpack_require__(202),exports);/***/},/* 61 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";/* eslint-disable @typescript-eslint/no-unsafe-assignment */ // Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function get(){return m[k];}});}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k];});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v});}:function(o,v){o["default"]=v;});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result;};Object.defineProperty(exports,"__esModule",{value:true});exports.ConsoleLoggingListener=void 0;var fs=__importStar(__webpack_require__(62));var LogLevel_js_1=__webpack_require__(63);var Contracts_js_1=__webpack_require__(64);var ConsoleLoggingListener=/*#__PURE__*/function(){function ConsoleLoggingListener(){var logLevelFilter=arguments.length>0&&arguments[0]!==undefined?arguments[0]:LogLevel_js_1.LogLevel.None;_classCallCheck(this,ConsoleLoggingListener);this.privLogPath=undefined;this.privEnableConsoleOutput=true;this.privLogLevelFilter=logLevelFilter;}_createClass(ConsoleLoggingListener,[{key:"logPath",set:function set(path){Contracts_js_1.Contracts.throwIfNullOrUndefined(fs.openSync,"\nFile System access not available");this.privLogPath=path;}},{key:"enableConsoleOutput",set:function set(enableOutput){this.privEnableConsoleOutput=enableOutput;}},{key:"onEvent",value:function onEvent(event){if(event.eventType>=this.privLogLevelFilter){var log=this.toString(event);if(!!this.logCallback){this.logCallback(log);}if(!!this.privLogPath){fs.writeFileSync(this.privLogPath,log+"\n",{flag:"a+"});}if(this.privEnableConsoleOutput){switch(event.eventType){case LogLevel_js_1.LogLevel.Debug:// eslint-disable-next-line no-console
console.debug(log);break;case LogLevel_js_1.LogLevel.Info:// eslint-disable-next-line no-console
console.info(log);break;case LogLevel_js_1.LogLevel.Warning:// eslint-disable-next-line no-console
console.warn(log);break;case LogLevel_js_1.LogLevel.Error:// eslint-disable-next-line no-console
console.error(log);break;default:// eslint-disable-next-line no-console
console.log(log);break;}}}}},{key:"toString",value:function toString(event){var logFragments=["".concat(event.eventTime),"".concat(event.name)];var e=event;for(var prop in e){if(prop&&event.hasOwnProperty(prop)&&prop!=="eventTime"&&prop!=="eventType"&&prop!=="eventId"&&prop!=="name"&&prop!=="constructor"){// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
var value=e[prop];var valueToLog="<NULL>";if(value!==undefined&&value!==null){if(typeof value==="number"||typeof value==="string"){valueToLog=value.toString();}else{valueToLog=JSON.stringify(value);}}logFragments.push("".concat(prop,": ").concat(valueToLog));}}return logFragments.join(" | ");}}]);return ConsoleLoggingListener;}();exports.ConsoleLoggingListener=ConsoleLoggingListener;/***/},/* 62 */ /***/function(){/* (ignored) */ /***/},/* 63 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.LogLevel=void 0;var Exports_js_1=__webpack_require__(4);Object.defineProperty(exports,"LogLevel",{enumerable:true,get:function get(){return Exports_js_1.EventType;}});/***/},/* 64 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.Contracts=void 0;/**
 * @class Contracts
 * @private
 */var Contracts=/*#__PURE__*/function(){function Contracts(){_classCallCheck(this,Contracts);}_createClass(Contracts,null,[{key:"throwIfNullOrUndefined",value:function throwIfNullOrUndefined(param,name){if(param===undefined||param===null){throw new Error("throwIfNullOrUndefined:"+name);}}},{key:"throwIfNull",value:function throwIfNull(param,name){if(param===null){throw new Error("throwIfNull:"+name);}}},{key:"throwIfNullOrWhitespace",value:function throwIfNullOrWhitespace(param,name){Contracts.throwIfNullOrUndefined(param,name);if((""+param).trim().length<1){throw new Error("throwIfNullOrWhitespace:"+name);}}},{key:"throwIfNullOrTooLong",value:function throwIfNullOrTooLong(param,name,maxLength){Contracts.throwIfNullOrUndefined(param,name);if((""+param).length>maxLength){throw new Error("throwIfNullOrTooLong:"+name+" (more than "+maxLength.toString()+" characters)");}}},{key:"throwIfNullOrTooShort",value:function throwIfNullOrTooShort(param,name,minLength){Contracts.throwIfNullOrUndefined(param,name);if((""+param).length<minLength){throw new Error("throwIfNullOrTooShort:"+name+" (less than "+minLength.toString()+" characters)");}}},{key:"throwIfDisposed",value:function throwIfDisposed(isDisposed){if(isDisposed){throw new Error("the object is already disposed");}}},{key:"throwIfArrayEmptyOrWhitespace",value:function throwIfArrayEmptyOrWhitespace(array,name){Contracts.throwIfNullOrUndefined(array,name);if(array.length===0){throw new Error("throwIfArrayEmptyOrWhitespace:"+name);}var _iterator4=_createForOfIteratorHelper(array),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var item=_step4.value;Contracts.throwIfNullOrWhitespace(item,name);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}},{key:"throwIfFileDoesNotExist",value:function throwIfFileDoesNotExist(param,name){Contracts.throwIfNullOrWhitespace(param,name);// TODO check for file existence.
}},{key:"throwIfNotUndefined",value:function throwIfNotUndefined(param,name){if(param!==undefined){throw new Error("throwIfNotUndefined:"+name);}}}]);return Contracts;}();exports.Contracts=Contracts;/***/},/* 65 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});/***/},/* 66 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.MicAudioSource=exports.AudioWorkletSourceURLPropertyName=void 0;var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(4);var AudioStreamFormat_js_1=__webpack_require__(67);exports.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";var MicAudioSource=/*#__PURE__*/function(){function MicAudioSource(privRecorder,deviceId,audioSourceId,mediaStream){_classCallCheck(this,MicAudioSource);this.privRecorder=privRecorder;this.deviceId=deviceId;this.privStreams={};this.privOutputChunkSize=MicAudioSource.AUDIOFORMAT.avgBytesPerSec/10;this.privId=audioSourceId?audioSourceId:Exports_js_2.createNoDashGuid();this.privEvents=new Exports_js_2.EventSource();this.privMediaStream=mediaStream||null;this.privIsClosing=false;}_createClass(MicAudioSource,[{key:"format",get:function get(){return Promise.resolve(MicAudioSource.AUDIOFORMAT);}},{key:"turnOn",value:function turnOn(){var _this37=this;if(this.privInitializeDeferral){return this.privInitializeDeferral.promise;}this.privInitializeDeferral=new Exports_js_2.Deferred();try{this.createAudioContext();}catch(error){if(error instanceof Error){var typedError=error;this.privInitializeDeferral.reject(typedError.name+": "+typedError.message);}else{this.privInitializeDeferral.reject(error);}return this.privInitializeDeferral.promise;}var nav=window.navigator;var getUserMedia=// eslint-disable-next-line
nav.getUserMedia||nav.webkitGetUserMedia||nav.mozGetUserMedia||nav.msGetUserMedia;if(!!nav.mediaDevices){getUserMedia=function getUserMedia(constraints,successCallback,errorCallback){nav.mediaDevices.getUserMedia(constraints).then(successCallback)["catch"](errorCallback);};}if(!getUserMedia){var errorMsg="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(errorMsg);this.onEvent(new Exports_js_2.AudioSourceErrorEvent(errorMsg,""));// mic initialized error - no streamid at this point
}else{var next=function next(){_this37.onEvent(new Exports_js_2.AudioSourceInitializingEvent(_this37.privId));// no stream id
if(_this37.privMediaStream&&_this37.privMediaStream.active){_this37.onEvent(new Exports_js_2.AudioSourceReadyEvent(_this37.privId));_this37.privInitializeDeferral.resolve();}else{getUserMedia({audio:_this37.deviceId?{deviceId:_this37.deviceId}:true,video:false},function(mediaStream){_this37.privMediaStream=mediaStream;_this37.onEvent(new Exports_js_2.AudioSourceReadyEvent(_this37.privId));_this37.privInitializeDeferral.resolve();},function(error){var errorMsg="Error occurred during microphone initialization: ".concat(error);_this37.privInitializeDeferral.reject(errorMsg);_this37.onEvent(new Exports_js_2.AudioSourceErrorEvent(_this37.privId,errorMsg));});}};if(this.privContext.state==="suspended"){// NOTE: On iOS, the Web Audio API requires sounds to be triggered from an explicit user action.
// https://github.com/WebAudio/web-audio-api/issues/790
this.privContext.resume().then(next)["catch"](function(reason){_this37.privInitializeDeferral.reject("Failed to initialize audio context: ".concat(reason));});}else{next();}}return this.privInitializeDeferral.promise;}},{key:"id",value:function id(){return this.privId;}},{key:"attach",value:function attach(audioNodeId){var _this38=this;this.onEvent(new Exports_js_2.AudioStreamNodeAttachingEvent(this.privId,audioNodeId));return this.listen(audioNodeId).then(function(stream){_this38.onEvent(new Exports_js_2.AudioStreamNodeAttachedEvent(_this38.privId,audioNodeId));return{detach:function(){var _detach=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:stream.readEnded();delete _this38.privStreams[audioNodeId];_this38.onEvent(new Exports_js_2.AudioStreamNodeDetachedEvent(_this38.privId,audioNodeId));return _context4.abrupt("return",_this38.turnOff());case 4:case"end":return _context4.stop();}},_callee4);}));function detach(){return _detach.apply(this,arguments);}return detach;}(),id:function id(){return audioNodeId;},read:function read(){return stream.read();}};});}},{key:"detach",value:function detach(audioNodeId){if(audioNodeId&&this.privStreams[audioNodeId]){this.privStreams[audioNodeId].close();delete this.privStreams[audioNodeId];this.onEvent(new Exports_js_2.AudioStreamNodeDetachedEvent(this.privId,audioNodeId));}}},{key:"turnOff",value:function(){var _turnOff=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var streamId,stream;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:for(streamId in this.privStreams){if(streamId){stream=this.privStreams[streamId];if(stream){stream.close();}}}this.onEvent(new Exports_js_2.AudioSourceOffEvent(this.privId));// no stream now
if(!this.privInitializeDeferral){_context5.next=6;break;}_context5.next=5;return this.privInitializeDeferral;case 5:this.privInitializeDeferral=null;case 6:_context5.next=8;return this.destroyAudioContext();case 8:return _context5.abrupt("return");case 9:case"end":return _context5.stop();}},_callee5,this);}));function turnOff(){return _turnOff.apply(this,arguments);}return turnOff;}()},{key:"events",get:function get(){return this.privEvents;}},{key:"deviceInfo",get:function get(){return this.getMicrophoneLabel().then(function(label){return{bitspersample:MicAudioSource.AUDIOFORMAT.bitsPerSample,channelcount:MicAudioSource.AUDIOFORMAT.channels,connectivity:Exports_js_1.connectivity.Unknown,manufacturer:"Speech SDK",model:label,samplerate:MicAudioSource.AUDIOFORMAT.samplesPerSec,type:Exports_js_1.type.Microphones};});}},{key:"setProperty",value:function setProperty(name,value){if(name===exports.AudioWorkletSourceURLPropertyName){this.privRecorder.setWorkletUrl(value);}else{throw new Error("Property '"+name+"' is not supported on Microphone.");}}},{key:"getMicrophoneLabel",value:function getMicrophoneLabel(){var _this39=this;var defaultMicrophoneName="microphone";// If we did this already, return the value.
if(this.privMicrophoneLabel!==undefined){return Promise.resolve(this.privMicrophoneLabel);}// If the stream isn't currently running, we can't query devices because security.
if(this.privMediaStream===undefined||!this.privMediaStream.active){return Promise.resolve(defaultMicrophoneName);}// Setup a default
this.privMicrophoneLabel=defaultMicrophoneName;// Get the id of the device running the audio track.
var microphoneDeviceId=this.privMediaStream.getTracks()[0].getSettings().deviceId;// If the browser doesn't support getting the device ID, set a default and return.
if(undefined===microphoneDeviceId){return Promise.resolve(this.privMicrophoneLabel);}var deferred=new Exports_js_2.Deferred();// Enumerate the media devices.
navigator.mediaDevices.enumerateDevices().then(function(devices){var _iterator5=_createForOfIteratorHelper(devices),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var device=_step5.value;if(device.deviceId===microphoneDeviceId){// Found the device
_this39.privMicrophoneLabel=device.label;break;}}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}deferred.resolve(_this39.privMicrophoneLabel);},function(){return deferred.resolve(_this39.privMicrophoneLabel);});return deferred.promise;}},{key:"listen",value:function(){var _listen=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(audioNodeId){var stream,result;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:_context6.next=2;return this.turnOn();case 2:stream=new Exports_js_2.ChunkedArrayBufferStream(this.privOutputChunkSize,audioNodeId);this.privStreams[audioNodeId]=stream;_context6.prev=4;this.privRecorder.record(this.privContext,this.privMediaStream,stream);_context6.next=12;break;case 8:_context6.prev=8;_context6.t0=_context6["catch"](4);this.onEvent(new Exports_js_2.AudioStreamNodeErrorEvent(this.privId,audioNodeId,_context6.t0));throw _context6.t0;case 12:result=stream;return _context6.abrupt("return",result);case 14:case"end":return _context6.stop();}},_callee6,this,[[4,8]]);}));function listen(_x5){return _listen.apply(this,arguments);}return listen;}()},{key:"onEvent",value:function onEvent(event){this.privEvents.onEvent(event);Exports_js_2.Events.instance.onEvent(event);}},{key:"createAudioContext",value:function createAudioContext(){if(!!this.privContext){return;}this.privContext=AudioStreamFormat_js_1.AudioStreamFormatImpl.getAudioContext(MicAudioSource.AUDIOFORMAT.samplesPerSec);}},{key:"destroyAudioContext",value:function(){var _destroyAudioContext=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(){var hasClose;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:if(this.privContext){_context7.next=2;break;}return _context7.abrupt("return");case 2:this.privRecorder.releaseMediaResources(this.privContext);// This pattern brought to you by a bug in the TypeScript compiler where it
// confuses the ("close" in this.privContext) with this.privContext always being null as the alternate.
// https://github.com/Microsoft/TypeScript/issues/11498
hasClose=false;if("close"in this.privContext){hasClose=true;}if(!hasClose){_context7.next=14;break;}if(this.privIsClosing){_context7.next=12;break;}// The audio context close may take enough time that the close is called twice
this.privIsClosing=true;_context7.next=10;return this.privContext.close();case 10:this.privContext=null;this.privIsClosing=false;case 12:_context7.next=17;break;case 14:if(!(null!==this.privContext&&this.privContext.state==="running")){_context7.next=17;break;}_context7.next=17;return this.privContext.suspend();case 17:case"end":return _context7.stop();}},_callee7,this);}));function destroyAudioContext(){return _destroyAudioContext.apply(this,arguments);}return destroyAudioContext;}()}]);return MicAudioSource;}();exports.MicAudioSource=MicAudioSource;MicAudioSource.AUDIOFORMAT=AudioStreamFormat_js_1.AudioStreamFormat.getDefaultInputFormat();/***/},/* 67 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.AudioStreamFormatImpl=exports.AudioStreamFormat=exports.AudioFormatTag=void 0;// eslint-disable-next-line max-classes-per-file
var AudioFormatTag;(function(AudioFormatTag){AudioFormatTag[AudioFormatTag["PCM"]=1]="PCM";AudioFormatTag[AudioFormatTag["MuLaw"]=2]="MuLaw";AudioFormatTag[AudioFormatTag["Siren"]=3]="Siren";AudioFormatTag[AudioFormatTag["MP3"]=4]="MP3";AudioFormatTag[AudioFormatTag["SILKSkype"]=5]="SILKSkype";AudioFormatTag[AudioFormatTag["OGG_OPUS"]=6]="OGG_OPUS";AudioFormatTag[AudioFormatTag["WEBM_OPUS"]=7]="WEBM_OPUS";AudioFormatTag[AudioFormatTag["ALaw"]=8]="ALaw";AudioFormatTag[AudioFormatTag["FLAC"]=9]="FLAC";AudioFormatTag[AudioFormatTag["OPUS"]=10]="OPUS";AudioFormatTag[AudioFormatTag["AMR_WB"]=11]="AMR_WB";AudioFormatTag[AudioFormatTag["G722"]=12]="G722";})(AudioFormatTag=exports.AudioFormatTag||(exports.AudioFormatTag={}));/**
 * Represents audio stream format used for custom audio input configurations.
 * @class AudioStreamFormat
 */var AudioStreamFormat=/*#__PURE__*/function(){function AudioStreamFormat(){_classCallCheck(this,AudioStreamFormat);}_createClass(AudioStreamFormat,null,[{key:"getDefaultInputFormat",value:/**
     * Creates an audio stream format object representing the default audio stream
     * format (16KHz 16bit mono PCM).
     * @member AudioStreamFormat.getDefaultInputFormat
     * @function
     * @public
     * @returns {AudioStreamFormat} The audio stream format being created.
     */function getDefaultInputFormat(){return AudioStreamFormatImpl.getDefaultInputFormat();}/**
     * Creates an audio stream format object with the specified format characteristics.
     * @member AudioStreamFormat.getWaveFormat
     * @function
     * @public
     * @param {number} samplesPerSecond - Sample rate, in samples per second (Hertz).
     * @param {number} bitsPerSample - Bits per sample, typically 16.
     * @param {number} channels - Number of channels in the waveform-audio data. Monaural data
     * uses one channel and stereo data uses two channels.
     * @param {AudioFormatTag} format - Audio format (PCM, alaw or mulaw).
     * @returns {AudioStreamFormat} The audio stream format being created.
     */},{key:"getWaveFormat",value:function getWaveFormat(samplesPerSecond,bitsPerSample,channels,format){return new AudioStreamFormatImpl(samplesPerSecond,bitsPerSample,channels,format);}/**
     * Creates an audio stream format object with the specified pcm waveformat characteristics.
     * @member AudioStreamFormat.getWaveFormatPCM
     * @function
     * @public
     * @param {number} samplesPerSecond - Sample rate, in samples per second (Hertz).
     * @param {number} bitsPerSample - Bits per sample, typically 16.
     * @param {number} channels - Number of channels in the waveform-audio data. Monaural data
     * uses one channel and stereo data uses two channels.
     * @returns {AudioStreamFormat} The audio stream format being created.
     */},{key:"getWaveFormatPCM",value:function getWaveFormatPCM(samplesPerSecond,bitsPerSample,channels){return new AudioStreamFormatImpl(samplesPerSecond,bitsPerSample,channels);}}]);return AudioStreamFormat;}();exports.AudioStreamFormat=AudioStreamFormat;/**
 * @private
 * @class AudioStreamFormatImpl
 */var AudioStreamFormatImpl=/*#__PURE__*/function(_AudioStreamFormat){_inherits(AudioStreamFormatImpl,_AudioStreamFormat);var _super45=_createSuper(AudioStreamFormatImpl);/**
     * Creates an instance with the given values.
     * @constructor
     * @param {number} samplesPerSec - Samples per second.
     * @param {number} bitsPerSample - Bits per sample.
     * @param {number} channels - Number of channels.
     * @param {AudioFormatTag} format - Audio format (PCM, alaw or mulaw).
     */function AudioStreamFormatImpl(){var _this40;var samplesPerSec=arguments.length>0&&arguments[0]!==undefined?arguments[0]:16000;var bitsPerSample=arguments.length>1&&arguments[1]!==undefined?arguments[1]:16;var channels=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var format=arguments.length>3&&arguments[3]!==undefined?arguments[3]:AudioFormatTag.PCM;_classCallCheck(this,AudioStreamFormatImpl);_this40=_super45.call(this);var isWavFormat=true;/* 1 for PCM; 6 for alaw; 7 for mulaw */switch(format){case AudioFormatTag.PCM:_this40.formatTag=1;break;case AudioFormatTag.ALaw:_this40.formatTag=6;break;case AudioFormatTag.MuLaw:_this40.formatTag=7;break;default:isWavFormat=false;}_this40.bitsPerSample=bitsPerSample;_this40.samplesPerSec=samplesPerSec;_this40.channels=channels;_this40.avgBytesPerSec=_this40.samplesPerSec*_this40.channels*(_this40.bitsPerSample/8);_this40.blockAlign=_this40.channels*Math.max(_this40.bitsPerSample,8);if(isWavFormat){_this40.privHeader=new ArrayBuffer(44);// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView
var view=new DataView(_this40.privHeader);/* RIFF identifier */_this40.setString(view,0,"RIFF");/* file length */view.setUint32(4,0,true);/* RIFF type & Format */_this40.setString(view,8,"WAVEfmt ");/* format chunk length */view.setUint32(16,16,true);/* audio format */view.setUint16(20,_this40.formatTag,true);/* channel count */view.setUint16(22,_this40.channels,true);/* sample rate */view.setUint32(24,_this40.samplesPerSec,true);/* byte rate (sample rate * block align) */view.setUint32(28,_this40.avgBytesPerSec,true);/* block align (channel count * bytes per sample) */view.setUint16(32,_this40.channels*(_this40.bitsPerSample/8),true);/* bits per sample */view.setUint16(34,_this40.bitsPerSample,true);/* data chunk identifier */_this40.setString(view,36,"data");/* data chunk length */view.setUint32(40,0,true);}return _this40;}/**
     * Retrieves the default input format.
     * @member AudioStreamFormatImpl.getDefaultInputFormat
     * @function
     * @public
     * @returns {AudioStreamFormatImpl} The default input format.
     */_createClass(AudioStreamFormatImpl,[{key:"close",value:/* eslint-enable */ /**
     * Closes the configuration object.
     * @member AudioStreamFormatImpl.prototype.close
     * @function
     * @public
     */function close(){return;}},{key:"header",get:function get(){return this.privHeader;}},{key:"setString",value:function setString(view,offset,str){for(var i=0;i<str.length;i++){view.setUint8(offset+i,str.charCodeAt(i));}}}],[{key:"getDefaultInputFormat",value:function getDefaultInputFormat(){return new AudioStreamFormatImpl();}/**
     * Creates an audio context appropriate to current browser
     * @member AudioStreamFormatImpl.getAudioContext
     * @function
     * @public
     * @returns {AudioContext} An audio context instance
     */ /* eslint-disable */},{key:"getAudioContext",value:function getAudioContext(sampleRate){// Workaround for Speech SDK bug in Safari.
var AudioContext=window.AudioContext// our preferred impl
||window.webkitAudioContext// fallback, mostly when on Safari
||false;// could not find.
// https://developer.mozilla.org/en-US/docs/Web/API/AudioContext
if(!!AudioContext){if(sampleRate!==undefined&&navigator.mediaDevices.getSupportedConstraints().sampleRate){return new AudioContext({sampleRate:sampleRate});}else{return new AudioContext();}}else{throw new Error("Browser does not support Web Audio API (AudioContext is not available).");}}}]);return AudioStreamFormatImpl;}(AudioStreamFormat);exports.AudioStreamFormatImpl=AudioStreamFormatImpl;/***/},/* 68 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.FileAudioSource=void 0;var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(4);var AudioStreamFormat_js_1=__webpack_require__(67);var FileAudioSource=/*#__PURE__*/function(){function FileAudioSource(file,filename,audioSourceId){_classCallCheck(this,FileAudioSource);this.privStreams={};this.privHeaderEnd=44;this.privId=audioSourceId?audioSourceId:Exports_js_2.createNoDashGuid();this.privEvents=new Exports_js_2.EventSource();this.privSource=file;if(typeof window!=="undefined"&&typeof Blob!=="undefined"&&this.privSource instanceof Blob){this.privFilename=file.name;}else{this.privFilename=filename||"unknown.wav";}// Read the header.
this.privAudioFormatPromise=this.readHeader();}_createClass(FileAudioSource,[{key:"format",get:function get(){return this.privAudioFormatPromise;}},{key:"turnOn",value:function turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){var errorMsg=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";this.onEvent(new Exports_js_2.AudioSourceErrorEvent(errorMsg,""));return Promise.reject(errorMsg);}this.onEvent(new Exports_js_2.AudioSourceInitializingEvent(this.privId));// no stream id
this.onEvent(new Exports_js_2.AudioSourceReadyEvent(this.privId));return;}},{key:"id",value:function id(){return this.privId;}},{key:"attach",value:function(){var _attach=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(audioNodeId){var _this41=this;var stream;return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:this.onEvent(new Exports_js_2.AudioStreamNodeAttachingEvent(this.privId,audioNodeId));_context9.next=3;return this.upload(audioNodeId);case 3:stream=_context9.sent;this.onEvent(new Exports_js_2.AudioStreamNodeAttachedEvent(this.privId,audioNodeId));return _context9.abrupt("return",Promise.resolve({detach:function(){var _detach2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(){return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:stream.readEnded();delete _this41.privStreams[audioNodeId];_this41.onEvent(new Exports_js_2.AudioStreamNodeDetachedEvent(_this41.privId,audioNodeId));_context8.next=5;return _this41.turnOff();case 5:case"end":return _context8.stop();}},_callee8);}));function detach(){return _detach2.apply(this,arguments);}return detach;}(),id:function id(){return audioNodeId;},read:function read(){return stream.read();}}));case 6:case"end":return _context9.stop();}},_callee9,this);}));function attach(_x6){return _attach.apply(this,arguments);}return attach;}()},{key:"detach",value:function detach(audioNodeId){if(audioNodeId&&this.privStreams[audioNodeId]){this.privStreams[audioNodeId].close();delete this.privStreams[audioNodeId];this.onEvent(new Exports_js_2.AudioStreamNodeDetachedEvent(this.privId,audioNodeId));}}},{key:"turnOff",value:function turnOff(){for(var streamId in this.privStreams){if(streamId){var stream=this.privStreams[streamId];if(stream&&!stream.isClosed){stream.close();}}}this.onEvent(new Exports_js_2.AudioSourceOffEvent(this.privId));// no stream now
return Promise.resolve();}},{key:"events",get:function get(){return this.privEvents;}},{key:"deviceInfo",get:function get(){return this.privAudioFormatPromise.then(function(result){return Promise.resolve({bitspersample:result.bitsPerSample,channelcount:result.channels,connectivity:Exports_js_1.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:result.samplesPerSec,type:Exports_js_1.type.File});});}},{key:"readHeader",value:function readHeader(){var _this42=this;// Read the wave header.
var maxHeaderSize=4296;var header=this.privSource.slice(0,maxHeaderSize);var headerResult=new Exports_js_2.Deferred();var processHeader=function processHeader(header){var view=new DataView(header);var getWord=function getWord(index){return String.fromCharCode(view.getUint8(index),view.getUint8(index+1),view.getUint8(index+2),view.getUint8(index+3));};// RIFF 4 bytes.
if("RIFF"!==getWord(0)){headerResult.reject("Invalid WAV header in file, RIFF was not found");return;}// length, 4 bytes
// RIFF Type & fmt 8 bytes
if("WAVE"!==getWord(8)||"fmt "!==getWord(12)){headerResult.reject("Invalid WAV header in file, WAVEfmt was not found");return;}var formatSize=view.getInt32(16,true);var channelCount=view.getUint16(22,true);var sampleRate=view.getUint32(24,true);var bitsPerSample=view.getUint16(34,true);// Confirm if header is 44 bytes long.
var pos=36+Math.max(formatSize-16,0);for(;getWord(pos)!=="data";pos+=2){if(pos>maxHeaderSize-8){headerResult.reject("Invalid WAV header in file, data block was not found");return;}}_this42.privHeaderEnd=pos+8;headerResult.resolve(AudioStreamFormat_js_1.AudioStreamFormat.getWaveFormatPCM(sampleRate,bitsPerSample,channelCount));};if(typeof window!=="undefined"&&typeof Blob!=="undefined"&&header instanceof Blob){var reader=new FileReader();reader.onload=function(event){var header=event.target.result;processHeader(header);};reader.readAsArrayBuffer(header);}else{var h=header;processHeader(h.buffer.slice(h.byteOffset,h.byteOffset+h.byteLength));}return headerResult.promise;}},{key:"upload",value:function(){var _upload=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(audioNodeId){var _this43=this;var onerror,format,stream,chunk,processFile,reader,c;return _regeneratorRuntime().wrap(function _callee10$(_context10){while(1)switch(_context10.prev=_context10.next){case 0:onerror=function onerror(error){var errorMsg="Error occurred while processing '".concat(_this43.privFilename,"'. ").concat(error);_this43.onEvent(new Exports_js_2.AudioStreamNodeErrorEvent(_this43.privId,audioNodeId,errorMsg));throw new Error(errorMsg);};_context10.prev=1;_context10.next=4;return this.turnOn();case 4:_context10.next=6;return this.privAudioFormatPromise;case 6:format=_context10.sent;stream=new Exports_js_2.ChunkedArrayBufferStream(format.avgBytesPerSec/10,audioNodeId);this.privStreams[audioNodeId]=stream;chunk=this.privSource.slice(this.privHeaderEnd);processFile=function processFile(buff){if(stream.isClosed){return;// output stream was closed (somebody called TurnOff). We're done here.
}stream.writeStreamChunk({buffer:buff,isEnd:false,timeReceived:Date.now()});stream.close();};if(typeof window!=="undefined"&&typeof Blob!=="undefined"&&chunk instanceof Blob){reader=new FileReader();reader.onerror=function(ev){return onerror(ev.toString());};reader.onload=function(event){var fileBuffer=event.target.result;processFile(fileBuffer);};reader.readAsArrayBuffer(chunk);}else{c=chunk;processFile(c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength));}return _context10.abrupt("return",stream);case 15:_context10.prev=15;_context10.t0=_context10["catch"](1);onerror(_context10.t0);case 18:case"end":return _context10.stop();}},_callee10,this,[[1,15]]);}));function upload(_x7){return _upload.apply(this,arguments);}return upload;}()},{key:"onEvent",value:function onEvent(event){this.privEvents.onEvent(event);Exports_js_2.Events.instance.onEvent(event);}}]);return FileAudioSource;}();exports.FileAudioSource=FileAudioSource;/***/},/* 69 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.PcmRecorder=void 0;var Exports_1=__webpack_require__(4);var PcmRecorder=/*#__PURE__*/function(){function PcmRecorder(stopInputOnRelease){_classCallCheck(this,PcmRecorder);this.privStopInputOnRelease=stopInputOnRelease;}_createClass(PcmRecorder,[{key:"record",value:function record(context,mediaStream,outputStream){var _this44=this;var desiredSampleRate=16000;var waveStreamEncoder=new Exports_1.RiffPcmEncoder(context.sampleRate,desiredSampleRate);var micInput=context.createMediaStreamSource(mediaStream);var attachScriptProcessor=function attachScriptProcessor(){// eslint-disable-next-line @typescript-eslint/explicit-function-return-type
var scriptNode=function(){var bufferSize=0;try{return context.createScriptProcessor(bufferSize,1,1);}catch(error){// Webkit (<= version 31) requires a valid bufferSize.
bufferSize=2048;var audioSampleRate=context.sampleRate;while(bufferSize<16384&&audioSampleRate>=2*desiredSampleRate){bufferSize<<=1;audioSampleRate>>=1;}return context.createScriptProcessor(bufferSize,1,1);}}();scriptNode.onaudioprocess=function(event){var inputFrame=event.inputBuffer.getChannelData(0);if(outputStream&&!outputStream.isClosed){var waveFrame=waveStreamEncoder.encode(inputFrame);if(!!waveFrame){outputStream.writeStreamChunk({buffer:waveFrame,isEnd:false,timeReceived:Date.now()});}}};micInput.connect(scriptNode);scriptNode.connect(context.destination);_this44.privMediaResources={scriptProcessorNode:scriptNode,source:micInput,stream:mediaStream};};// https://webaudio.github.io/web-audio-api/#audioworklet
// Using AudioWorklet to improve audio quality and avoid audio glitches due to blocking the UI thread
var skipAudioWorklet=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(!!context.audioWorklet&&!skipAudioWorklet){if(!this.privSpeechProcessorScript){var workletScript="class SP extends AudioWorkletProcessor {\n                    constructor(options) {\n                      super(options);\n                    }\n                    process(inputs, outputs) {\n                      const input = inputs[0];\n                      const output = [];\n                      for (let channel = 0; channel < input.length; channel += 1) {\n                        output[channel] = input[channel];\n                      }\n                      this.port.postMessage(output[0]);\n                      return true;\n                    }\n                  }\n                  registerProcessor('speech-processor', SP);";var blob=new Blob([workletScript],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(blob);}context.audioWorklet.addModule(this.privSpeechProcessorScript).then(function(){var workletNode=new AudioWorkletNode(context,"speech-processor");workletNode.port.onmessage=function(ev){var inputFrame=ev.data;if(outputStream&&!outputStream.isClosed){var waveFrame=waveStreamEncoder.encode(inputFrame);if(!!waveFrame){outputStream.writeStreamChunk({buffer:waveFrame,isEnd:false,timeReceived:Date.now()});}}};micInput.connect(workletNode);workletNode.connect(context.destination);_this44.privMediaResources={scriptProcessorNode:workletNode,source:micInput,stream:mediaStream};})["catch"](function(){attachScriptProcessor();});}else{try{attachScriptProcessor();}catch(err){throw new Error("Unable to start audio worklet node for PCMRecorder: ".concat(err));}}}},{key:"releaseMediaResources",value:function releaseMediaResources(context){if(this.privMediaResources){if(this.privMediaResources.scriptProcessorNode){this.privMediaResources.scriptProcessorNode.disconnect(context.destination);this.privMediaResources.scriptProcessorNode=null;}if(this.privMediaResources.source){this.privMediaResources.source.disconnect();if(this.privStopInputOnRelease){this.privMediaResources.stream.getTracks().forEach(function(track){return track.stop();});}this.privMediaResources.source=null;}}}},{key:"setWorkletUrl",value:function setWorkletUrl(url){this.privSpeechProcessorScript=url;}}]);return PcmRecorder;}();exports.PcmRecorder=PcmRecorder;/***/},/* 70 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.WebsocketConnection=void 0;var Exports_js_1=__webpack_require__(4);var WebsocketMessageAdapter_js_1=__webpack_require__(71);var WebsocketConnection=/*#__PURE__*/function(){function WebsocketConnection(uri,queryParameters,headers,messageFormatter,proxyInfo){var enableCompression=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;var connectionId=arguments.length>6?arguments[6]:undefined;_classCallCheck(this,WebsocketConnection);this.privIsDisposed=false;if(!uri){throw new Exports_js_1.ArgumentNullError("uri");}if(!messageFormatter){throw new Exports_js_1.ArgumentNullError("messageFormatter");}this.privMessageFormatter=messageFormatter;var queryParams="";var i=0;if(queryParameters){for(var paramName in queryParameters){if(paramName){queryParams+=i===0&&uri.indexOf("?")===-1?"?":"&";var key=encodeURIComponent(paramName);queryParams+=key;var val=queryParameters[paramName];if(val){val=encodeURIComponent(val);queryParams+="=".concat(val);}i++;}}}if(headers){for(var headerName in headers){if(headerName){queryParams+=i===0&&uri.indexOf("?")===-1?"?":"&";var _val=encodeURIComponent(headers[headerName]);queryParams+="".concat(headerName,"=").concat(_val);i++;}}}this.privUri=uri+queryParams;this.privId=connectionId?connectionId:Exports_js_1.createNoDashGuid();this.privConnectionMessageAdapter=new WebsocketMessageAdapter_js_1.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,proxyInfo,headers,enableCompression);}_createClass(WebsocketConnection,[{key:"dispose",value:function(){var _dispose2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11(){return _regeneratorRuntime().wrap(function _callee11$(_context11){while(1)switch(_context11.prev=_context11.next){case 0:this.privIsDisposed=true;if(!this.privConnectionMessageAdapter){_context11.next=4;break;}_context11.next=4;return this.privConnectionMessageAdapter.close();case 4:case"end":return _context11.stop();}},_callee11,this);}));function dispose(){return _dispose2.apply(this,arguments);}return dispose;}()},{key:"isDisposed",value:function isDisposed(){return this.privIsDisposed;}},{key:"id",get:function get(){return this.privId;}},{key:"uri",get:function get(){return this.privUri;}},{key:"state",value:function state(){return this.privConnectionMessageAdapter.state;}},{key:"open",value:function open(){return this.privConnectionMessageAdapter.open();}},{key:"send",value:function send(message){return this.privConnectionMessageAdapter.send(message);}},{key:"read",value:function read(){return this.privConnectionMessageAdapter.read();}},{key:"events",get:function get(){return this.privConnectionMessageAdapter.events;}}]);return WebsocketConnection;}();exports.WebsocketConnection=WebsocketConnection;/***/},/* 71 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function get(){return m[k];}});}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k];});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v});}:function(o,v){o["default"]=v;});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result;};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{"default":mod};};Object.defineProperty(exports,"__esModule",{value:true});exports.WebsocketMessageAdapter=void 0;var net=__importStar(__webpack_require__(72));var tls=__importStar(__webpack_require__(73));var agent_base_1=__importDefault(__webpack_require__(74));var https_proxy_agent_1=__importDefault(__webpack_require__(75));var ws_1=__importDefault(__webpack_require__(76));var HeaderNames_js_1=__webpack_require__(54);var Exports_js_1=__webpack_require__(4);var WebsocketMessageAdapter=/*#__PURE__*/function(){function WebsocketMessageAdapter(uri,connectionId,messageFormatter,proxyInfo,headers,enableCompression){_classCallCheck(this,WebsocketMessageAdapter);if(!uri){throw new Exports_js_1.ArgumentNullError("uri");}if(!messageFormatter){throw new Exports_js_1.ArgumentNullError("messageFormatter");}this.proxyInfo=proxyInfo;this.privConnectionEvents=new Exports_js_1.EventSource();this.privConnectionId=connectionId;this.privMessageFormatter=messageFormatter;this.privConnectionState=Exports_js_1.ConnectionState.None;this.privUri=uri;this.privHeaders=headers;this.privEnableCompression=enableCompression;// Add the connection ID to the headers
this.privHeaders[HeaderNames_js_1.HeaderNames.ConnectionId]=this.privConnectionId;this.privLastErrorReceived="";}_createClass(WebsocketMessageAdapter,[{key:"state",get:function get(){return this.privConnectionState;}},{key:"open",value:function open(){var _this45=this;if(this.privConnectionState===Exports_js_1.ConnectionState.Disconnected){return Promise.reject("Cannot open a connection that is in ".concat(this.privConnectionState," state"));}if(this.privConnectionEstablishDeferral){return this.privConnectionEstablishDeferral.promise;}this.privConnectionEstablishDeferral=new Exports_js_1.Deferred();this.privCertificateValidatedDeferral=new Exports_js_1.Deferred();this.privConnectionState=Exports_js_1.ConnectionState.Connecting;try{if(typeof WebSocket!=="undefined"&&!WebsocketMessageAdapter.forceNpmWebSocket){// Browser handles cert checks.
this.privCertificateValidatedDeferral.resolve();this.privWebsocketClient=new WebSocket(this.privUri);}else{var _protocol,_protocol2;var options={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};// The ocsp library will handle validation for us and fail the connection if needed.
this.privCertificateValidatedDeferral.resolve();options.agent=this.getAgent();// Workaround for https://github.com/microsoft/cognitive-services-speech-sdk-js/issues/465
// Which is root caused by https://github.com/TooTallNate/node-agent-base/issues/61
var uri=new URL(this.privUri);var protocol=uri.protocol;if(((_protocol=protocol)===null||_protocol===void 0?void 0:_protocol.toLocaleLowerCase())==="wss:"){protocol="https:";}else if(((_protocol2=protocol)===null||_protocol2===void 0?void 0:_protocol2.toLocaleLowerCase())==="ws:"){protocol="http:";}// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
options.agent.protocol=protocol;this.privWebsocketClient=new ws_1["default"](this.privUri,options);}this.privWebsocketClient.binaryType="arraybuffer";this.privReceivingMessageQueue=new Exports_js_1.Queue();this.privDisconnectDeferral=new Exports_js_1.Deferred();this.privSendMessageQueue=new Exports_js_1.Queue();this.processSendQueue()["catch"](function(reason){Exports_js_1.Events.instance.onEvent(new Exports_js_1.BackgroundEvent(reason));});}catch(error){this.privConnectionEstablishDeferral.resolve(new Exports_js_1.ConnectionOpenResponse(500,error));return this.privConnectionEstablishDeferral.promise;}this.onEvent(new Exports_js_1.ConnectionStartEvent(this.privConnectionId,this.privUri));this.privWebsocketClient.onopen=function(){_this45.privCertificateValidatedDeferral.promise.then(function(){_this45.privConnectionState=Exports_js_1.ConnectionState.Connected;_this45.onEvent(new Exports_js_1.ConnectionEstablishedEvent(_this45.privConnectionId));_this45.privConnectionEstablishDeferral.resolve(new Exports_js_1.ConnectionOpenResponse(200,""));},function(error){_this45.privConnectionEstablishDeferral.reject(error);});};this.privWebsocketClient.onerror=function(e){_this45.onEvent(new Exports_js_1.ConnectionErrorEvent(_this45.privConnectionId,e.message,e.type));_this45.privLastErrorReceived=e.message;};this.privWebsocketClient.onclose=function(e){if(_this45.privConnectionState===Exports_js_1.ConnectionState.Connecting){_this45.privConnectionState=Exports_js_1.ConnectionState.Disconnected;// this.onEvent(new ConnectionEstablishErrorEvent(this.connectionId, e.code, e.reason));
_this45.privConnectionEstablishDeferral.resolve(new Exports_js_1.ConnectionOpenResponse(e.code,e.reason+" "+_this45.privLastErrorReceived));}else{_this45.privConnectionState=Exports_js_1.ConnectionState.Disconnected;_this45.privWebsocketClient=null;_this45.onEvent(new Exports_js_1.ConnectionClosedEvent(_this45.privConnectionId,e.code,e.reason));}_this45.onClose(e.code,e.reason)["catch"](function(reason){Exports_js_1.Events.instance.onEvent(new Exports_js_1.BackgroundEvent(reason));});};this.privWebsocketClient.onmessage=function(e){var networkReceivedTime=new Date().toISOString();if(_this45.privConnectionState===Exports_js_1.ConnectionState.Connected){var deferred=new Exports_js_1.Deferred();// let id = ++this.idCounter;
_this45.privReceivingMessageQueue.enqueueFromPromise(deferred.promise);if(e.data instanceof ArrayBuffer){var rawMessage=new Exports_js_1.RawWebsocketMessage(Exports_js_1.MessageType.Binary,e.data);_this45.privMessageFormatter.toConnectionMessage(rawMessage).then(function(connectionMessage){_this45.onEvent(new Exports_js_1.ConnectionMessageReceivedEvent(_this45.privConnectionId,networkReceivedTime,connectionMessage));deferred.resolve(connectionMessage);},function(error){// TODO: Events for these ?
deferred.reject("Invalid binary message format. Error: ".concat(error));});}else{var _rawMessage=new Exports_js_1.RawWebsocketMessage(Exports_js_1.MessageType.Text,e.data);_this45.privMessageFormatter.toConnectionMessage(_rawMessage).then(function(connectionMessage){_this45.onEvent(new Exports_js_1.ConnectionMessageReceivedEvent(_this45.privConnectionId,networkReceivedTime,connectionMessage));deferred.resolve(connectionMessage);},function(error){// TODO: Events for these ?
deferred.reject("Invalid text message format. Error: ".concat(error));});}}};return this.privConnectionEstablishDeferral.promise;}},{key:"send",value:function send(message){if(this.privConnectionState!==Exports_js_1.ConnectionState.Connected){return Promise.reject("Cannot send on connection that is in ".concat(Exports_js_1.ConnectionState[this.privConnectionState]," state"));}var messageSendStatusDeferral=new Exports_js_1.Deferred();var messageSendDeferral=new Exports_js_1.Deferred();this.privSendMessageQueue.enqueueFromPromise(messageSendDeferral.promise);this.privMessageFormatter.fromConnectionMessage(message).then(function(rawMessage){messageSendDeferral.resolve({Message:message,RawWebsocketMessage:rawMessage,sendStatusDeferral:messageSendStatusDeferral});},function(error){messageSendDeferral.reject("Error formatting the message. ".concat(error));});return messageSendStatusDeferral.promise;}},{key:"read",value:function read(){if(this.privConnectionState!==Exports_js_1.ConnectionState.Connected){return Promise.reject("Cannot read on connection that is in ".concat(this.privConnectionState," state"));}return this.privReceivingMessageQueue.dequeue();}},{key:"close",value:function close(reason){if(this.privWebsocketClient){if(this.privConnectionState!==Exports_js_1.ConnectionState.Disconnected){this.privWebsocketClient.close(1000,reason?reason:"Normal closure by client");}}else{return Promise.resolve();}return this.privDisconnectDeferral.promise;}},{key:"events",get:function get(){return this.privConnectionEvents;}},{key:"sendRawMessage",value:function sendRawMessage(sendItem){try{// indicates we are draining the queue and it came with no message;
if(!sendItem){return Promise.resolve();}this.onEvent(new Exports_js_1.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),sendItem.Message));// add a check for the ws readystate in order to stop the red console error 'WebSocket is already in CLOSING or CLOSED state' appearing
if(this.isWebsocketOpen){// eslint-disable-next-line @typescript-eslint/no-unsafe-argument
this.privWebsocketClient.send(sendItem.RawWebsocketMessage.payload);}else{return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+sendItem.Message.id+" "+new Error().stack);}return Promise.resolve();}catch(e){return Promise.reject("websocket send error: ".concat(e));}}},{key:"onClose",value:function(){var _onClose=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12(code,reason){var closeReason;return _regeneratorRuntime().wrap(function _callee12$(_context12){while(1)switch(_context12.prev=_context12.next){case 0:closeReason="Connection closed. ".concat(code,": ").concat(reason);this.privConnectionState=Exports_js_1.ConnectionState.Disconnected;this.privDisconnectDeferral.resolve();_context12.next=5;return this.privReceivingMessageQueue.drainAndDispose(function(){// TODO: Events for these ?
// Logger.instance.onEvent(new LoggingEvent(LogType.Warning, null, `Failed to process received message. Reason: ${closeReason}, Message: ${JSON.stringify(pendingReceiveItem)}`));
},closeReason);case 5:_context12.next=7;return this.privSendMessageQueue.drainAndDispose(function(pendingSendItem){pendingSendItem.sendStatusDeferral.reject(closeReason);},closeReason);case 7:case"end":return _context12.stop();}},_callee12,this);}));function onClose(_x8,_x9){return _onClose.apply(this,arguments);}return onClose;}()},{key:"processSendQueue",value:function(){var _processSendQueue=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13(){var itemToSend,sendItem;return _regeneratorRuntime().wrap(function _callee13$(_context13){while(1)switch(_context13.prev=_context13.next){case 0:if(!true){_context13.next=18;break;}itemToSend=this.privSendMessageQueue.dequeue();_context13.next=4;return itemToSend;case 4:sendItem=_context13.sent;if(sendItem){_context13.next=7;break;}return _context13.abrupt("return");case 7:_context13.prev=7;_context13.next=10;return this.sendRawMessage(sendItem);case 10:sendItem.sendStatusDeferral.resolve();_context13.next=16;break;case 13:_context13.prev=13;_context13.t0=_context13["catch"](7);sendItem.sendStatusDeferral.reject(_context13.t0);case 16:_context13.next=0;break;case 18:case"end":return _context13.stop();}},_callee13,this,[[7,13]]);}));function processSendQueue(){return _processSendQueue.apply(this,arguments);}return processSendQueue;}()},{key:"onEvent",value:function onEvent(event){this.privConnectionEvents.onEvent(event);Exports_js_1.Events.instance.onEvent(event);}// eslint-disable-next-line @typescript-eslint/no-unused-vars
},{key:"getAgent",value:function getAgent(){// eslint-disable-next-line @typescript-eslint/unbound-method
var agent=new agent_base_1["default"].Agent(this.createConnection);if(this.proxyInfo!==undefined&&this.proxyInfo.HostName!==undefined&&this.proxyInfo.Port>0){agent.proxyInfo=this.proxyInfo;}return agent;}},{key:"createConnection",value:function createConnection(request,options){var socketPromise;options=_objectSpread(_objectSpread({},options),{requestOCSP:true,servername:options.host});if(!!this.proxyInfo){var httpProxyAgent=WebsocketMessageAdapter.GetProxyAgent(this.proxyInfo);var baseAgent=httpProxyAgent;socketPromise=new Promise(function(resolve,reject){baseAgent.callback(request,options,function(error,socket){if(!!error){reject(error);}else{resolve(socket);}});});}else{if(!!options.secureEndpoint){socketPromise=Promise.resolve(tls.connect(options));}else{socketPromise=Promise.resolve(net.connect(options));}}return socketPromise;}},{key:"isWebsocketOpen",get:function get(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN;}}],[{key:"GetProxyAgent",value:function GetProxyAgent(proxyInfo){var httpProxyOptions={host:proxyInfo.HostName,port:proxyInfo.Port};if(!!proxyInfo.UserName){httpProxyOptions.headers={"Proxy-Authentication":"Basic "+new Buffer("".concat(proxyInfo.UserName,":").concat(proxyInfo.Password===undefined?"":proxyInfo.Password)).toString("base64")};}else{httpProxyOptions.headers={};}httpProxyOptions.headers.requestOCSP="true";var httpProxyAgent=new https_proxy_agent_1["default"](httpProxyOptions);return httpProxyAgent;}}]);return WebsocketMessageAdapter;}();exports.WebsocketMessageAdapter=WebsocketMessageAdapter;WebsocketMessageAdapter.forceNpmWebSocket=false;/***/},/* 72 */ /***/function(){/* (ignored) */ /***/},/* 73 */ /***/function(){/* (ignored) */ /***/},/* 74 */ /***/function(){/* (ignored) */ /***/},/* 75 */ /***/function(){/* (ignored) */ /***/},/* 76 */ /***/function(){/* (ignored) */ /***/},/* 77 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ReplayableAudioNode=void 0;var ReplayableAudioNode=/*#__PURE__*/function(){function ReplayableAudioNode(audioSource,bytesPerSecond){_classCallCheck(this,ReplayableAudioNode);this.privBuffers=[];this.privReplayOffset=0;this.privLastShrinkOffset=0;this.privBufferStartOffset=0;this.privBufferSerial=0;this.privBufferedBytes=0;this.privReplay=false;this.privLastChunkAcquiredTime=0;this.privAudioNode=audioSource;this.privBytesPerSecond=bytesPerSecond;}_createClass(ReplayableAudioNode,[{key:"id",value:function id(){return this.privAudioNode.id();}// Reads and returns the next chunk of audio buffer.
// If replay of existing buffers are needed, read() will first seek and replay
// existing content, and upoin completion it will read new content from the underlying
// audio node, saving that content into the replayable buffers.
},{key:"read",value:function read(){var _this46=this;// if there is a replay request to honor.
if(!!this.privReplay&&this.privBuffers.length!==0){// Find the start point in the buffers.
// Offsets are in 100ns increments.
// So how many bytes do we need to seek to get the right offset?
var offsetToSeek=this.privReplayOffset-this.privBufferStartOffset;var bytesToSeek=Math.round(offsetToSeek*this.privBytesPerSecond*1e-7);if(0!==bytesToSeek%2){bytesToSeek++;}var i=0;while(i<this.privBuffers.length&&bytesToSeek>=this.privBuffers[i].chunk.buffer.byteLength){bytesToSeek-=this.privBuffers[i++].chunk.buffer.byteLength;}if(i<this.privBuffers.length){var retVal=this.privBuffers[i].chunk.buffer.slice(bytesToSeek);this.privReplayOffset+=retVal.byteLength/this.privBytesPerSecond*1e+7;// If we've reached the end of the buffers, stop replaying.
if(i===this.privBuffers.length-1){this.privReplay=false;}return Promise.resolve({buffer:retVal,isEnd:false,timeReceived:this.privBuffers[i].chunk.timeReceived});}}return this.privAudioNode.read().then(function(result){if(result&&result.buffer){_this46.privBuffers.push(new BufferEntry(result,_this46.privBufferSerial++,_this46.privBufferedBytes));_this46.privBufferedBytes+=result.buffer.byteLength;}return result;});}},{key:"detach",value:function detach(){this.privBuffers=undefined;return this.privAudioNode.detach();}},{key:"replay",value:function replay(){if(this.privBuffers&&0!==this.privBuffers.length){this.privReplay=true;this.privReplayOffset=this.privLastShrinkOffset;}}// Shrinks the existing audio buffers to start at the new offset, or at the
// beginning of the buffer closest to the requested offset.
// A replay request will start from the last shrink point.
},{key:"shrinkBuffers",value:function shrinkBuffers(offset){if(this.privBuffers===undefined||this.privBuffers.length===0){return;}this.privLastShrinkOffset=offset;// Find the start point in the buffers.
// Offsets are in 100ns increments.
// So how many bytes do we need to seek to get the right offset?
var offsetToSeek=offset-this.privBufferStartOffset;var bytesToSeek=Math.round(offsetToSeek*this.privBytesPerSecond*1e-7);var i=0;while(i<this.privBuffers.length&&bytesToSeek>=this.privBuffers[i].chunk.buffer.byteLength){bytesToSeek-=this.privBuffers[i++].chunk.buffer.byteLength;}this.privBufferStartOffset=Math.round(offset-bytesToSeek/this.privBytesPerSecond*1e+7);this.privBuffers=this.privBuffers.slice(i);}// Finds the time a buffer of audio was first seen by offset.
},{key:"findTimeAtOffset",value:function findTimeAtOffset(offset){if(offset<this.privBufferStartOffset||this.privBuffers===undefined){return 0;}var _iterator6=_createForOfIteratorHelper(this.privBuffers),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var value=_step6.value;var startOffset=value.byteOffset/this.privBytesPerSecond*1e7;var endOffset=startOffset+value.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(offset>=startOffset&&offset<=endOffset){return value.chunk.timeReceived;}}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}return 0;}}]);return ReplayableAudioNode;}();exports.ReplayableAudioNode=ReplayableAudioNode;// Primary use of this class is to help debugging problems with the replay
// code. If the memory cost of alloc / dealloc gets too much, drop it and just use
// the ArrayBuffer directly.
var BufferEntry=/*#__PURE__*/_createClass(function BufferEntry(chunk,serial,byteOffset){_classCallCheck(this,BufferEntry);this.chunk=chunk;this.serial=serial;this.byteOffset=byteOffset;});/***/},/* 78 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ProxyInfo=void 0;var Exports_js_1=__webpack_require__(79);var ProxyInfo=/*#__PURE__*/function(){function ProxyInfo(proxyHostName,proxyPort,proxyUserName,proxyPassword){_classCallCheck(this,ProxyInfo);this.privProxyHostName=proxyHostName;this.privProxyPort=proxyPort;this.privProxyUserName=proxyUserName;this.privProxyPassword=proxyPassword;}_createClass(ProxyInfo,[{key:"HostName",get:function get(){return this.privProxyHostName;}},{key:"Port",get:function get(){return this.privProxyPort;}},{key:"UserName",get:function get(){return this.privProxyUserName;}},{key:"Password",get:function get(){return this.privProxyPassword;}}],[{key:"fromParameters",value:function fromParameters(parameters){return new ProxyInfo(parameters.getProperty(Exports_js_1.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(parameters.getProperty(Exports_js_1.PropertyId.SpeechServiceConnection_ProxyPort),10),parameters.getProperty(Exports_js_1.PropertyId.SpeechServiceConnection_ProxyUserName),parameters.getProperty(Exports_js_1.PropertyId.SpeechServiceConnection_ProxyPassword));}},{key:"fromRecognizerConfig",value:function fromRecognizerConfig(config){return this.fromParameters(config.parameters);}}]);return ProxyInfo;}();exports.ProxyInfo=ProxyInfo;/***/},/* 79 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});var AudioConfig_js_1=__webpack_require__(80);Object.defineProperty(exports,"AudioConfig",{enumerable:true,get:function get(){return AudioConfig_js_1.AudioConfig;}});var AudioStreamFormat_js_1=__webpack_require__(67);Object.defineProperty(exports,"AudioStreamFormat",{enumerable:true,get:function get(){return AudioStreamFormat_js_1.AudioStreamFormat;}});Object.defineProperty(exports,"AudioFormatTag",{enumerable:true,get:function get(){return AudioStreamFormat_js_1.AudioFormatTag;}});var AudioInputStream_js_1=__webpack_require__(83);Object.defineProperty(exports,"AudioInputStream",{enumerable:true,get:function get(){return AudioInputStream_js_1.AudioInputStream;}});Object.defineProperty(exports,"PullAudioInputStream",{enumerable:true,get:function get(){return AudioInputStream_js_1.PullAudioInputStream;}});Object.defineProperty(exports,"PushAudioInputStream",{enumerable:true,get:function get(){return AudioInputStream_js_1.PushAudioInputStream;}});var AudioOutputStream_js_1=__webpack_require__(84);Object.defineProperty(exports,"AudioOutputStream",{enumerable:true,get:function get(){return AudioOutputStream_js_1.AudioOutputStream;}});Object.defineProperty(exports,"PullAudioOutputStream",{enumerable:true,get:function get(){return AudioOutputStream_js_1.PullAudioOutputStream;}});Object.defineProperty(exports,"PushAudioOutputStream",{enumerable:true,get:function get(){return AudioOutputStream_js_1.PushAudioOutputStream;}});var CancellationReason_js_1=__webpack_require__(87);Object.defineProperty(exports,"CancellationReason",{enumerable:true,get:function get(){return CancellationReason_js_1.CancellationReason;}});var PullAudioInputStreamCallback_js_1=__webpack_require__(88);Object.defineProperty(exports,"PullAudioInputStreamCallback",{enumerable:true,get:function get(){return PullAudioInputStreamCallback_js_1.PullAudioInputStreamCallback;}});var PushAudioOutputStreamCallback_js_1=__webpack_require__(89);Object.defineProperty(exports,"PushAudioOutputStreamCallback",{enumerable:true,get:function get(){return PushAudioOutputStreamCallback_js_1.PushAudioOutputStreamCallback;}});var KeywordRecognitionModel_js_1=__webpack_require__(90);Object.defineProperty(exports,"KeywordRecognitionModel",{enumerable:true,get:function get(){return KeywordRecognitionModel_js_1.KeywordRecognitionModel;}});var SessionEventArgs_js_1=__webpack_require__(91);Object.defineProperty(exports,"SessionEventArgs",{enumerable:true,get:function get(){return SessionEventArgs_js_1.SessionEventArgs;}});var RecognitionEventArgs_js_1=__webpack_require__(92);Object.defineProperty(exports,"RecognitionEventArgs",{enumerable:true,get:function get(){return RecognitionEventArgs_js_1.RecognitionEventArgs;}});var OutputFormat_js_1=__webpack_require__(93);Object.defineProperty(exports,"OutputFormat",{enumerable:true,get:function get(){return OutputFormat_js_1.OutputFormat;}});var IntentRecognitionEventArgs_js_1=__webpack_require__(94);Object.defineProperty(exports,"IntentRecognitionEventArgs",{enumerable:true,get:function get(){return IntentRecognitionEventArgs_js_1.IntentRecognitionEventArgs;}});var RecognitionResult_js_1=__webpack_require__(95);Object.defineProperty(exports,"RecognitionResult",{enumerable:true,get:function get(){return RecognitionResult_js_1.RecognitionResult;}});var SpeechRecognitionResult_js_1=__webpack_require__(96);Object.defineProperty(exports,"SpeechRecognitionResult",{enumerable:true,get:function get(){return SpeechRecognitionResult_js_1.SpeechRecognitionResult;}});var IntentRecognitionResult_js_1=__webpack_require__(97);Object.defineProperty(exports,"IntentRecognitionResult",{enumerable:true,get:function get(){return IntentRecognitionResult_js_1.IntentRecognitionResult;}});var LanguageUnderstandingModel_js_1=__webpack_require__(98);Object.defineProperty(exports,"LanguageUnderstandingModel",{enumerable:true,get:function get(){return LanguageUnderstandingModel_js_1.LanguageUnderstandingModel;}});var SpeechRecognitionEventArgs_js_1=__webpack_require__(99);Object.defineProperty(exports,"SpeechRecognitionEventArgs",{enumerable:true,get:function get(){return SpeechRecognitionEventArgs_js_1.SpeechRecognitionEventArgs;}});Object.defineProperty(exports,"ConversationTranscriptionEventArgs",{enumerable:true,get:function get(){return SpeechRecognitionEventArgs_js_1.ConversationTranscriptionEventArgs;}});Object.defineProperty(exports,"MeetingTranscriptionEventArgs",{enumerable:true,get:function get(){return SpeechRecognitionEventArgs_js_1.MeetingTranscriptionEventArgs;}});var SpeechRecognitionCanceledEventArgs_js_1=__webpack_require__(100);Object.defineProperty(exports,"SpeechRecognitionCanceledEventArgs",{enumerable:true,get:function get(){return SpeechRecognitionCanceledEventArgs_js_1.SpeechRecognitionCanceledEventArgs;}});var TranslationRecognitionEventArgs_js_1=__webpack_require__(102);Object.defineProperty(exports,"TranslationRecognitionEventArgs",{enumerable:true,get:function get(){return TranslationRecognitionEventArgs_js_1.TranslationRecognitionEventArgs;}});var TranslationSynthesisEventArgs_js_1=__webpack_require__(103);Object.defineProperty(exports,"TranslationSynthesisEventArgs",{enumerable:true,get:function get(){return TranslationSynthesisEventArgs_js_1.TranslationSynthesisEventArgs;}});var TranslationRecognitionResult_js_1=__webpack_require__(104);Object.defineProperty(exports,"TranslationRecognitionResult",{enumerable:true,get:function get(){return TranslationRecognitionResult_js_1.TranslationRecognitionResult;}});var TranslationSynthesisResult_js_1=__webpack_require__(105);Object.defineProperty(exports,"TranslationSynthesisResult",{enumerable:true,get:function get(){return TranslationSynthesisResult_js_1.TranslationSynthesisResult;}});var ResultReason_js_1=__webpack_require__(106);Object.defineProperty(exports,"ResultReason",{enumerable:true,get:function get(){return ResultReason_js_1.ResultReason;}});var SpeechConfig_js_1=__webpack_require__(107);Object.defineProperty(exports,"SpeechConfig",{enumerable:true,get:function get(){return SpeechConfig_js_1.SpeechConfig;}});Object.defineProperty(exports,"SpeechConfigImpl",{enumerable:true,get:function get(){return SpeechConfig_js_1.SpeechConfigImpl;}});var SpeechTranslationConfig_js_1=__webpack_require__(108);Object.defineProperty(exports,"SpeechTranslationConfig",{enumerable:true,get:function get(){return SpeechTranslationConfig_js_1.SpeechTranslationConfig;}});Object.defineProperty(exports,"SpeechTranslationConfigImpl",{enumerable:true,get:function get(){return SpeechTranslationConfig_js_1.SpeechTranslationConfigImpl;}});var PropertyCollection_js_1=__webpack_require__(109);Object.defineProperty(exports,"PropertyCollection",{enumerable:true,get:function get(){return PropertyCollection_js_1.PropertyCollection;}});var PropertyId_js_1=__webpack_require__(110);Object.defineProperty(exports,"PropertyId",{enumerable:true,get:function get(){return PropertyId_js_1.PropertyId;}});var Recognizer_js_1=__webpack_require__(111);Object.defineProperty(exports,"Recognizer",{enumerable:true,get:function get(){return Recognizer_js_1.Recognizer;}});var SpeechRecognizer_js_1=__webpack_require__(112);Object.defineProperty(exports,"SpeechRecognizer",{enumerable:true,get:function get(){return SpeechRecognizer_js_1.SpeechRecognizer;}});var IntentRecognizer_js_1=__webpack_require__(113);Object.defineProperty(exports,"IntentRecognizer",{enumerable:true,get:function get(){return IntentRecognizer_js_1.IntentRecognizer;}});var VoiceProfileType_js_1=__webpack_require__(114);Object.defineProperty(exports,"VoiceProfileType",{enumerable:true,get:function get(){return VoiceProfileType_js_1.VoiceProfileType;}});var TranslationRecognizer_js_1=__webpack_require__(115);Object.defineProperty(exports,"TranslationRecognizer",{enumerable:true,get:function get(){return TranslationRecognizer_js_1.TranslationRecognizer;}});var Translations_js_1=__webpack_require__(118);Object.defineProperty(exports,"Translations",{enumerable:true,get:function get(){return Translations_js_1.Translations;}});var NoMatchReason_js_1=__webpack_require__(119);Object.defineProperty(exports,"NoMatchReason",{enumerable:true,get:function get(){return NoMatchReason_js_1.NoMatchReason;}});var NoMatchDetails_js_1=__webpack_require__(120);Object.defineProperty(exports,"NoMatchDetails",{enumerable:true,get:function get(){return NoMatchDetails_js_1.NoMatchDetails;}});var TranslationRecognitionCanceledEventArgs_js_1=__webpack_require__(121);Object.defineProperty(exports,"TranslationRecognitionCanceledEventArgs",{enumerable:true,get:function get(){return TranslationRecognitionCanceledEventArgs_js_1.TranslationRecognitionCanceledEventArgs;}});var IntentRecognitionCanceledEventArgs_js_1=__webpack_require__(122);Object.defineProperty(exports,"IntentRecognitionCanceledEventArgs",{enumerable:true,get:function get(){return IntentRecognitionCanceledEventArgs_js_1.IntentRecognitionCanceledEventArgs;}});var CancellationDetailsBase_js_1=__webpack_require__(123);Object.defineProperty(exports,"CancellationDetailsBase",{enumerable:true,get:function get(){return CancellationDetailsBase_js_1.CancellationDetailsBase;}});var CancellationDetails_js_1=__webpack_require__(124);Object.defineProperty(exports,"CancellationDetails",{enumerable:true,get:function get(){return CancellationDetails_js_1.CancellationDetails;}});var CancellationErrorCodes_js_1=__webpack_require__(125);Object.defineProperty(exports,"CancellationErrorCode",{enumerable:true,get:function get(){return CancellationErrorCodes_js_1.CancellationErrorCode;}});var ConnectionEventArgs_js_1=__webpack_require__(126);Object.defineProperty(exports,"ConnectionEventArgs",{enumerable:true,get:function get(){return ConnectionEventArgs_js_1.ConnectionEventArgs;}});var ServiceEventArgs_js_1=__webpack_require__(127);Object.defineProperty(exports,"ServiceEventArgs",{enumerable:true,get:function get(){return ServiceEventArgs_js_1.ServiceEventArgs;}});var Connection_js_1=__webpack_require__(116);Object.defineProperty(exports,"Connection",{enumerable:true,get:function get(){return Connection_js_1.Connection;}});var PhraseListGrammar_js_1=__webpack_require__(128);Object.defineProperty(exports,"PhraseListGrammar",{enumerable:true,get:function get(){return PhraseListGrammar_js_1.PhraseListGrammar;}});var DialogServiceConfig_js_1=__webpack_require__(129);Object.defineProperty(exports,"DialogServiceConfig",{enumerable:true,get:function get(){return DialogServiceConfig_js_1.DialogServiceConfig;}});var BotFrameworkConfig_js_1=__webpack_require__(130);Object.defineProperty(exports,"BotFrameworkConfig",{enumerable:true,get:function get(){return BotFrameworkConfig_js_1.BotFrameworkConfig;}});var CustomCommandsConfig_js_1=__webpack_require__(131);Object.defineProperty(exports,"CustomCommandsConfig",{enumerable:true,get:function get(){return CustomCommandsConfig_js_1.CustomCommandsConfig;}});var DialogServiceConnector_js_1=__webpack_require__(132);Object.defineProperty(exports,"DialogServiceConnector",{enumerable:true,get:function get(){return DialogServiceConnector_js_1.DialogServiceConnector;}});var ActivityReceivedEventArgs_js_1=__webpack_require__(136);Object.defineProperty(exports,"ActivityReceivedEventArgs",{enumerable:true,get:function get(){return ActivityReceivedEventArgs_js_1.ActivityReceivedEventArgs;}});var TurnStatusReceivedEventArgs_js_1=__webpack_require__(137);Object.defineProperty(exports,"TurnStatusReceivedEventArgs",{enumerable:true,get:function get(){return TurnStatusReceivedEventArgs_js_1.TurnStatusReceivedEventArgs;}});var ServicePropertyChannel_js_1=__webpack_require__(139);Object.defineProperty(exports,"ServicePropertyChannel",{enumerable:true,get:function get(){return ServicePropertyChannel_js_1.ServicePropertyChannel;}});var ProfanityOption_js_1=__webpack_require__(140);Object.defineProperty(exports,"ProfanityOption",{enumerable:true,get:function get(){return ProfanityOption_js_1.ProfanityOption;}});var BaseAudioPlayer_js_1=__webpack_require__(141);Object.defineProperty(exports,"BaseAudioPlayer",{enumerable:true,get:function get(){return BaseAudioPlayer_js_1.BaseAudioPlayer;}});var ConnectionMessageEventArgs_js_1=__webpack_require__(142);Object.defineProperty(exports,"ConnectionMessageEventArgs",{enumerable:true,get:function get(){return ConnectionMessageEventArgs_js_1.ConnectionMessageEventArgs;}});var ConnectionMessage_js_1=__webpack_require__(117);Object.defineProperty(exports,"ConnectionMessage",{enumerable:true,get:function get(){return ConnectionMessage_js_1.ConnectionMessage;}});var VoiceProfile_js_1=__webpack_require__(143);Object.defineProperty(exports,"VoiceProfile",{enumerable:true,get:function get(){return VoiceProfile_js_1.VoiceProfile;}});var VoiceProfileEnrollmentResult_js_1=__webpack_require__(144);Object.defineProperty(exports,"VoiceProfileEnrollmentResult",{enumerable:true,get:function get(){return VoiceProfileEnrollmentResult_js_1.VoiceProfileEnrollmentResult;}});Object.defineProperty(exports,"VoiceProfileEnrollmentCancellationDetails",{enumerable:true,get:function get(){return VoiceProfileEnrollmentResult_js_1.VoiceProfileEnrollmentCancellationDetails;}});var VoiceProfileResult_js_1=__webpack_require__(145);Object.defineProperty(exports,"VoiceProfileResult",{enumerable:true,get:function get(){return VoiceProfileResult_js_1.VoiceProfileResult;}});Object.defineProperty(exports,"VoiceProfileCancellationDetails",{enumerable:true,get:function get(){return VoiceProfileResult_js_1.VoiceProfileCancellationDetails;}});var VoiceProfilePhraseResult_js_1=__webpack_require__(146);Object.defineProperty(exports,"VoiceProfilePhraseResult",{enumerable:true,get:function get(){return VoiceProfilePhraseResult_js_1.VoiceProfilePhraseResult;}});var VoiceProfileClient_js_1=__webpack_require__(147);Object.defineProperty(exports,"VoiceProfileClient",{enumerable:true,get:function get(){return VoiceProfileClient_js_1.VoiceProfileClient;}});var SpeakerRecognizer_js_1=__webpack_require__(148);Object.defineProperty(exports,"SpeakerRecognizer",{enumerable:true,get:function get(){return SpeakerRecognizer_js_1.SpeakerRecognizer;}});var SpeakerIdentificationModel_js_1=__webpack_require__(149);Object.defineProperty(exports,"SpeakerIdentificationModel",{enumerable:true,get:function get(){return SpeakerIdentificationModel_js_1.SpeakerIdentificationModel;}});var SpeakerVerificationModel_js_1=__webpack_require__(150);Object.defineProperty(exports,"SpeakerVerificationModel",{enumerable:true,get:function get(){return SpeakerVerificationModel_js_1.SpeakerVerificationModel;}});var AutoDetectSourceLanguageConfig_js_1=__webpack_require__(151);Object.defineProperty(exports,"AutoDetectSourceLanguageConfig",{enumerable:true,get:function get(){return AutoDetectSourceLanguageConfig_js_1.AutoDetectSourceLanguageConfig;}});var AutoDetectSourceLanguageResult_js_1=__webpack_require__(153);Object.defineProperty(exports,"AutoDetectSourceLanguageResult",{enumerable:true,get:function get(){return AutoDetectSourceLanguageResult_js_1.AutoDetectSourceLanguageResult;}});var SourceLanguageConfig_js_1=__webpack_require__(154);Object.defineProperty(exports,"SourceLanguageConfig",{enumerable:true,get:function get(){return SourceLanguageConfig_js_1.SourceLanguageConfig;}});var SpeakerRecognitionResult_js_1=__webpack_require__(155);Object.defineProperty(exports,"SpeakerRecognitionResult",{enumerable:true,get:function get(){return SpeakerRecognitionResult_js_1.SpeakerRecognitionResult;}});Object.defineProperty(exports,"SpeakerRecognitionResultType",{enumerable:true,get:function get(){return SpeakerRecognitionResult_js_1.SpeakerRecognitionResultType;}});Object.defineProperty(exports,"SpeakerRecognitionCancellationDetails",{enumerable:true,get:function get(){return SpeakerRecognitionResult_js_1.SpeakerRecognitionCancellationDetails;}});var Exports_js_1=__webpack_require__(156);Object.defineProperty(exports,"Conversation",{enumerable:true,get:function get(){return Exports_js_1.Conversation;}});Object.defineProperty(exports,"ConversationExpirationEventArgs",{enumerable:true,get:function get(){return Exports_js_1.ConversationExpirationEventArgs;}});Object.defineProperty(exports,"ConversationParticipantsChangedEventArgs",{enumerable:true,get:function get(){return Exports_js_1.ConversationParticipantsChangedEventArgs;}});Object.defineProperty(exports,"ConversationTranslationCanceledEventArgs",{enumerable:true,get:function get(){return Exports_js_1.ConversationTranslationCanceledEventArgs;}});Object.defineProperty(exports,"ConversationTranslationEventArgs",{enumerable:true,get:function get(){return Exports_js_1.ConversationTranslationEventArgs;}});Object.defineProperty(exports,"ConversationTranslationResult",{enumerable:true,get:function get(){return Exports_js_1.ConversationTranslationResult;}});Object.defineProperty(exports,"ConversationTranslator",{enumerable:true,get:function get(){return Exports_js_1.ConversationTranslator;}});Object.defineProperty(exports,"ConversationTranscriber",{enumerable:true,get:function get(){return Exports_js_1.ConversationTranscriber;}});Object.defineProperty(exports,"ConversationTranscriptionResult",{enumerable:true,get:function get(){return Exports_js_1.ConversationTranscriptionResult;}});Object.defineProperty(exports,"Meeting",{enumerable:true,get:function get(){return Exports_js_1.Meeting;}});Object.defineProperty(exports,"MeetingTranscriber",{enumerable:true,get:function get(){return Exports_js_1.MeetingTranscriber;}});Object.defineProperty(exports,"Participant",{enumerable:true,get:function get(){return Exports_js_1.Participant;}});Object.defineProperty(exports,"ParticipantChangedReason",{enumerable:true,get:function get(){return Exports_js_1.ParticipantChangedReason;}});Object.defineProperty(exports,"User",{enumerable:true,get:function get(){return Exports_js_1.User;}});var Synthesizer_js_1=__webpack_require__(174);Object.defineProperty(exports,"Synthesizer",{enumerable:true,get:function get(){return Synthesizer_js_1.Synthesizer;}});var SpeechSynthesisOutputFormat_js_1=__webpack_require__(86);Object.defineProperty(exports,"SpeechSynthesisOutputFormat",{enumerable:true,get:function get(){return SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat;}});var SpeechSynthesizer_js_1=__webpack_require__(175);Object.defineProperty(exports,"SpeechSynthesizer",{enumerable:true,get:function get(){return SpeechSynthesizer_js_1.SpeechSynthesizer;}});var SynthesisResult_js_1=__webpack_require__(176);Object.defineProperty(exports,"SynthesisResult",{enumerable:true,get:function get(){return SynthesisResult_js_1.SynthesisResult;}});var SpeechSynthesisResult_js_1=__webpack_require__(177);Object.defineProperty(exports,"SpeechSynthesisResult",{enumerable:true,get:function get(){return SpeechSynthesisResult_js_1.SpeechSynthesisResult;}});var SpeechSynthesisEventArgs_js_1=__webpack_require__(178);Object.defineProperty(exports,"SpeechSynthesisEventArgs",{enumerable:true,get:function get(){return SpeechSynthesisEventArgs_js_1.SpeechSynthesisEventArgs;}});var SpeechSynthesisWordBoundaryEventArgs_js_1=__webpack_require__(179);Object.defineProperty(exports,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:true,get:function get(){return SpeechSynthesisWordBoundaryEventArgs_js_1.SpeechSynthesisWordBoundaryEventArgs;}});var SpeechSynthesisBookmarkEventArgs_js_1=__webpack_require__(180);Object.defineProperty(exports,"SpeechSynthesisBookmarkEventArgs",{enumerable:true,get:function get(){return SpeechSynthesisBookmarkEventArgs_js_1.SpeechSynthesisBookmarkEventArgs;}});var SpeechSynthesisVisemeEventArgs_js_1=__webpack_require__(181);Object.defineProperty(exports,"SpeechSynthesisVisemeEventArgs",{enumerable:true,get:function get(){return SpeechSynthesisVisemeEventArgs_js_1.SpeechSynthesisVisemeEventArgs;}});var SpeechSynthesisBoundaryType_js_1=__webpack_require__(182);Object.defineProperty(exports,"SpeechSynthesisBoundaryType",{enumerable:true,get:function get(){return SpeechSynthesisBoundaryType_js_1.SpeechSynthesisBoundaryType;}});var SynthesisVoicesResult_js_1=__webpack_require__(183);Object.defineProperty(exports,"SynthesisVoicesResult",{enumerable:true,get:function get(){return SynthesisVoicesResult_js_1.SynthesisVoicesResult;}});var VoiceInfo_js_1=__webpack_require__(184);Object.defineProperty(exports,"SynthesisVoiceGender",{enumerable:true,get:function get(){return VoiceInfo_js_1.SynthesisVoiceGender;}});Object.defineProperty(exports,"SynthesisVoiceType",{enumerable:true,get:function get(){return VoiceInfo_js_1.SynthesisVoiceType;}});Object.defineProperty(exports,"VoiceInfo",{enumerable:true,get:function get(){return VoiceInfo_js_1.VoiceInfo;}});var SpeakerAudioDestination_js_1=__webpack_require__(185);Object.defineProperty(exports,"SpeakerAudioDestination",{enumerable:true,get:function get(){return SpeakerAudioDestination_js_1.SpeakerAudioDestination;}});var ConversationTranscriptionCanceledEventArgs_js_1=__webpack_require__(186);Object.defineProperty(exports,"ConversationTranscriptionCanceledEventArgs",{enumerable:true,get:function get(){return ConversationTranscriptionCanceledEventArgs_js_1.ConversationTranscriptionCanceledEventArgs;}});var MeetingTranscriptionCanceledEventArgs_js_1=__webpack_require__(187);Object.defineProperty(exports,"MeetingTranscriptionCanceledEventArgs",{enumerable:true,get:function get(){return MeetingTranscriptionCanceledEventArgs_js_1.MeetingTranscriptionCanceledEventArgs;}});var PronunciationAssessmentGradingSystem_js_1=__webpack_require__(188);Object.defineProperty(exports,"PronunciationAssessmentGradingSystem",{enumerable:true,get:function get(){return PronunciationAssessmentGradingSystem_js_1.PronunciationAssessmentGradingSystem;}});var PronunciationAssessmentGranularity_js_1=__webpack_require__(189);Object.defineProperty(exports,"PronunciationAssessmentGranularity",{enumerable:true,get:function get(){return PronunciationAssessmentGranularity_js_1.PronunciationAssessmentGranularity;}});var PronunciationAssessmentConfig_js_1=__webpack_require__(190);Object.defineProperty(exports,"PronunciationAssessmentConfig",{enumerable:true,get:function get(){return PronunciationAssessmentConfig_js_1.PronunciationAssessmentConfig;}});var PronunciationAssessmentResult_js_1=__webpack_require__(191);Object.defineProperty(exports,"PronunciationAssessmentResult",{enumerable:true,get:function get(){return PronunciationAssessmentResult_js_1.PronunciationAssessmentResult;}});var LanguageIdMode_js_1=__webpack_require__(152);Object.defineProperty(exports,"LanguageIdMode",{enumerable:true,get:function get(){return LanguageIdMode_js_1.LanguageIdMode;}});var AvatarConfig_js_1=__webpack_require__(192);Object.defineProperty(exports,"AvatarConfig",{enumerable:true,get:function get(){return AvatarConfig_js_1.AvatarConfig;}});var AvatarEventArgs_js_1=__webpack_require__(193);Object.defineProperty(exports,"AvatarEventArgs",{enumerable:true,get:function get(){return AvatarEventArgs_js_1.AvatarEventArgs;}});var AvatarSynthesizer_js_1=__webpack_require__(194);Object.defineProperty(exports,"AvatarSynthesizer",{enumerable:true,get:function get(){return AvatarSynthesizer_js_1.AvatarSynthesizer;}});var AvatarVideoFormat_js_1=__webpack_require__(196);Object.defineProperty(exports,"AvatarVideoFormat",{enumerable:true,get:function get(){return AvatarVideoFormat_js_1.AvatarVideoFormat;}});Object.defineProperty(exports,"Coordinate",{enumerable:true,get:function get(){return AvatarVideoFormat_js_1.Coordinate;}});var AvatarWebRTCConnectionResult_js_1=__webpack_require__(197);Object.defineProperty(exports,"AvatarWebRTCConnectionResult",{enumerable:true,get:function get(){return AvatarWebRTCConnectionResult_js_1.AvatarWebRTCConnectionResult;}});var Diagnostics_js_1=__webpack_require__(198);Object.defineProperty(exports,"Diagnostics",{enumerable:true,get:function get(){return Diagnostics_js_1.Diagnostics;}});var LogLevel_js_1=__webpack_require__(63);Object.defineProperty(exports,"LogLevel",{enumerable:true,get:function get(){return LogLevel_js_1.LogLevel;}});/***/},/* 80 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.AudioOutputConfigImpl=exports.AudioConfigImpl=exports.AudioConfig=void 0;var Exports_js_1=__webpack_require__(60);var Contracts_js_1=__webpack_require__(64);var Exports_js_2=__webpack_require__(79);var AudioFileWriter_js_1=__webpack_require__(81);var AudioInputStream_js_1=__webpack_require__(83);var AudioOutputStream_js_1=__webpack_require__(84);/**
 * Represents audio input configuration used for specifying what type of input to use (microphone, file, stream).
 * @class AudioConfig
 * Updated in version 1.11.0
 */var AudioConfig=/*#__PURE__*/function(){function AudioConfig(){_classCallCheck(this,AudioConfig);}_createClass(AudioConfig,null,[{key:"fromDefaultMicrophoneInput",value:/**
     * Creates an AudioConfig object representing the default microphone on the system.
     * @member AudioConfig.fromDefaultMicrophoneInput
     * @function
     * @public
     * @returns {AudioConfig} The audio input configuration being created.
     */function fromDefaultMicrophoneInput(){var pcmRecorder=new Exports_js_1.PcmRecorder(true);return new AudioConfigImpl(new Exports_js_1.MicAudioSource(pcmRecorder));}/**
     * Creates an AudioConfig object representing a microphone with the specified device ID.
     * @member AudioConfig.fromMicrophoneInput
     * @function
     * @public
     * @param {string | undefined} deviceId - Specifies the device ID of the microphone to be used.
     * Default microphone is used the value is omitted.
     * @returns {AudioConfig} The audio input configuration being created.
     */},{key:"fromMicrophoneInput",value:function fromMicrophoneInput(deviceId){var pcmRecorder=new Exports_js_1.PcmRecorder(true);return new AudioConfigImpl(new Exports_js_1.MicAudioSource(pcmRecorder,deviceId));}/**
     * Creates an AudioConfig object representing the specified file.
     * @member AudioConfig.fromWavFileInput
     * @function
     * @public
     * @param {File} fileName - Specifies the audio input file. Currently, only WAV / PCM is supported.
     * @returns {AudioConfig} The audio input configuration being created.
     */},{key:"fromWavFileInput",value:function fromWavFileInput(file){var name=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"unnamedBuffer.wav";return new AudioConfigImpl(new Exports_js_1.FileAudioSource(file,name));}/**
     * Creates an AudioConfig object representing the specified stream.
     * @member AudioConfig.fromStreamInput
     * @function
     * @public
     * @param {AudioInputStream | PullAudioInputStreamCallback | MediaStream} audioStream - Specifies the custom audio input
     * stream. Currently, only WAV / PCM is supported.
     * @returns {AudioConfig} The audio input configuration being created.
     */},{key:"fromStreamInput",value:function fromStreamInput(audioStream){if(audioStream instanceof Exports_js_2.PullAudioInputStreamCallback){return new AudioConfigImpl(new AudioInputStream_js_1.PullAudioInputStreamImpl(audioStream));}if(audioStream instanceof Exports_js_2.AudioInputStream){return new AudioConfigImpl(audioStream);}if(typeof MediaStream!=="undefined"&&audioStream instanceof MediaStream){var pcmRecorder=new Exports_js_1.PcmRecorder(false);return new AudioConfigImpl(new Exports_js_1.MicAudioSource(pcmRecorder,null,null,audioStream));}throw new Error("Not Supported Type");}/**
     * Creates an AudioConfig object representing the default speaker.
     * @member AudioConfig.fromDefaultSpeakerOutput
     * @function
     * @public
     * @returns {AudioConfig} The audio output configuration being created.
     * Added in version 1.11.0
     */},{key:"fromDefaultSpeakerOutput",value:function fromDefaultSpeakerOutput(){return new AudioOutputConfigImpl(new Exports_js_2.SpeakerAudioDestination());}/**
     * Creates an AudioConfig object representing the custom IPlayer object.
     * You can use the IPlayer object to control pause, resume, etc.
     * @member AudioConfig.fromSpeakerOutput
     * @function
     * @public
     * @param {IPlayer} player - the IPlayer object for playback.
     * @returns {AudioConfig} The audio output configuration being created.
     * Added in version 1.12.0
     */},{key:"fromSpeakerOutput",value:function fromSpeakerOutput(player){if(player===undefined){return AudioConfig.fromDefaultSpeakerOutput();}if(player instanceof Exports_js_2.SpeakerAudioDestination){return new AudioOutputConfigImpl(player);}throw new Error("Not Supported Type");}/**
     * Creates an AudioConfig object representing a specified output audio file
     * @member AudioConfig.fromAudioFileOutput
     * @function
     * @public
     * @param {PathLike} filename - the filename of the output audio file
     * @returns {AudioConfig} The audio output configuration being created.
     * Added in version 1.11.0
     */},{key:"fromAudioFileOutput",value:function fromAudioFileOutput(filename){return new AudioOutputConfigImpl(new AudioFileWriter_js_1.AudioFileWriter(filename));}/**
     * Creates an AudioConfig object representing a specified audio output stream
     * @member AudioConfig.fromStreamOutput
     * @function
     * @public
     * @param {AudioOutputStream | PushAudioOutputStreamCallback} audioStream - Specifies the custom audio output
     * stream.
     * @returns {AudioConfig} The audio output configuration being created.
     * Added in version 1.11.0
     */},{key:"fromStreamOutput",value:function fromStreamOutput(audioStream){if(audioStream instanceof Exports_js_2.PushAudioOutputStreamCallback){return new AudioOutputConfigImpl(new AudioOutputStream_js_1.PushAudioOutputStreamImpl(audioStream));}if(audioStream instanceof Exports_js_2.PushAudioOutputStream){return new AudioOutputConfigImpl(audioStream);}if(audioStream instanceof Exports_js_2.PullAudioOutputStream){return new AudioOutputConfigImpl(audioStream);}throw new Error("Not Supported Type");}}]);return AudioConfig;}();exports.AudioConfig=AudioConfig;/**
 * Represents audio input stream used for custom audio input configurations.
 * @private
 * @class AudioConfigImpl
 */var AudioConfigImpl=/*#__PURE__*/function(_AudioConfig){_inherits(AudioConfigImpl,_AudioConfig);var _super46=_createSuper(AudioConfigImpl);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {IAudioSource} source - An audio source.
     */function AudioConfigImpl(source){var _this47;_classCallCheck(this,AudioConfigImpl);_this47=_super46.call(this);_this47.privSource=source;return _this47;}/**
     * Format information for the audio
     */_createClass(AudioConfigImpl,[{key:"format",get:function get(){return this.privSource.format;}/**
     * @member AudioConfigImpl.prototype.close
     * @function
     * @public
     */},{key:"close",value:function close(cb,err){this.privSource.turnOff().then(function(){if(!!cb){cb();}},function(error){if(!!err){err(error);}});}/**
     * @member AudioConfigImpl.prototype.id
     * @function
     * @public
     */},{key:"id",value:function id(){return this.privSource.id();}/**
     * @member AudioConfigImpl.prototype.turnOn
     * @function
     * @public
     * @returns {Promise<void>} A promise.
     */},{key:"turnOn",value:function turnOn(){return this.privSource.turnOn();}/**
     * @member AudioConfigImpl.prototype.attach
     * @function
     * @public
     * @param {string} audioNodeId - The audio node id.
     * @returns {Promise<IAudioStreamNode>} A promise.
     */},{key:"attach",value:function attach(audioNodeId){return this.privSource.attach(audioNodeId);}/**
     * @member AudioConfigImpl.prototype.detach
     * @function
     * @public
     * @param {string} audioNodeId - The audio node id.
     */},{key:"detach",value:function detach(audioNodeId){return this.privSource.detach(audioNodeId);}/**
     * @member AudioConfigImpl.prototype.turnOff
     * @function
     * @public
     * @returns {Promise<void>} A promise.
     */},{key:"turnOff",value:function turnOff(){return this.privSource.turnOff();}/**
     * @member AudioConfigImpl.prototype.events
     * @function
     * @public
     * @returns {EventSource<AudioSourceEvent>} An event source for audio events.
     */},{key:"events",get:function get(){return this.privSource.events;}},{key:"setProperty",value:function setProperty(name,value){Contracts_js_1.Contracts.throwIfNull(value,"value");if(undefined!==this.privSource.setProperty){this.privSource.setProperty(name,value);}else{throw new Error("This AudioConfig instance does not support setting properties.");}}},{key:"getProperty",value:function getProperty(name,def){if(undefined!==this.privSource.getProperty){return this.privSource.getProperty(name,def);}else{throw new Error("This AudioConfig instance does not support getting properties.");}return def;}},{key:"deviceInfo",get:function get(){return this.privSource.deviceInfo;}}]);return AudioConfigImpl;}(AudioConfig);exports.AudioConfigImpl=AudioConfigImpl;var AudioOutputConfigImpl=/*#__PURE__*/function(_AudioConfig2){_inherits(AudioOutputConfigImpl,_AudioConfig2);var _super47=_createSuper(AudioOutputConfigImpl);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {IAudioDestination} destination - An audio destination.
     */function AudioOutputConfigImpl(destination){var _this48;_classCallCheck(this,AudioOutputConfigImpl);_this48=_super47.call(this);_this48.privDestination=destination;return _this48;}_createClass(AudioOutputConfigImpl,[{key:"format",set:function set(format){this.privDestination.format=format;}},{key:"write",value:function write(buffer){this.privDestination.write(buffer);}},{key:"close",value:function close(){this.privDestination.close();}},{key:"id",value:function id(){return this.privDestination.id();}},{key:"setProperty",value:function setProperty(){throw new Error("This AudioConfig instance does not support setting properties.");}},{key:"getProperty",value:function getProperty(){throw new Error("This AudioConfig instance does not support getting properties.");}}]);return AudioOutputConfigImpl;}(AudioConfig);exports.AudioOutputConfigImpl=AudioOutputConfigImpl;/***/},/* 81 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function get(){return m[k];}});}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k];});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v});}:function(o,v){o["default"]=v;});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result;};Object.defineProperty(exports,"__esModule",{value:true});exports.AudioFileWriter=void 0;var fs=__importStar(__webpack_require__(82));var Contracts_js_1=__webpack_require__(64);var AudioFileWriter=/*#__PURE__*/function(){function AudioFileWriter(filename){_classCallCheck(this,AudioFileWriter);Contracts_js_1.Contracts.throwIfNullOrUndefined(fs.openSync,"\nFile System access not available, please use Push or PullAudioOutputStream");this.privFd=fs.openSync(filename,"w");}_createClass(AudioFileWriter,[{key:"format",set:function set(format){Contracts_js_1.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set");this.privAudioFormat=format;var headerOffset=0;if(this.privAudioFormat.hasHeader){headerOffset=this.privAudioFormat.header.byteLength;}if(this.privFd!==undefined){this.privWriteStream=fs.createWriteStream("",{fd:this.privFd,start:headerOffset,autoClose:false});}}},{key:"write",value:function write(buffer){Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing.");if(this.privWriteStream!==undefined){this.privWriteStream.write(new Uint8Array(buffer.slice(0)));}}},{key:"close",value:function close(){var _this49=this;if(this.privFd!==undefined){this.privWriteStream.on("finish",function(){if(_this49.privAudioFormat.hasHeader){_this49.privAudioFormat.updateHeader(_this49.privWriteStream.bytesWritten);fs.writeSync(_this49.privFd,new Int8Array(_this49.privAudioFormat.header),0,_this49.privAudioFormat.header.byteLength,0);}fs.closeSync(_this49.privFd);_this49.privFd=undefined;});this.privWriteStream.end();}}},{key:"id",value:function id(){return this.privId;}}]);return AudioFileWriter;}();exports.AudioFileWriter=AudioFileWriter;/***/},/* 82 */ /***/function(){/* (ignored) */ /***/},/* 83 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.PullAudioInputStreamImpl=exports.PullAudioInputStream=exports.PushAudioInputStreamImpl=exports.PushAudioInputStream=exports.AudioInputStream=void 0;/* eslint-disable max-classes-per-file */var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(4);var Guid_js_1=__webpack_require__(7);var Exports_js_3=__webpack_require__(79);var AudioStreamFormat_js_1=__webpack_require__(67);/**
 * Represents audio input stream used for custom audio input configurations.
 * @class AudioInputStream
 */var AudioInputStream=/*#__PURE__*/function(){/**
     * Creates and initializes an instance.
     * @constructor
     */function AudioInputStream(){_classCallCheck(this,AudioInputStream);return;}/**
     * Creates a memory backed PushAudioInputStream with the specified audio format.
     * @member AudioInputStream.createPushStream
     * @function
     * @public
     * @param {AudioStreamFormat} format - The audio data format in which audio will be
     * written to the push audio stream's write() method (Required if format is not 16 kHz 16bit mono PCM).
     * @returns {PushAudioInputStream} The audio input stream being created.
     */_createClass(AudioInputStream,null,[{key:"createPushStream",value:function createPushStream(format){return PushAudioInputStream.create(format);}/**
     * Creates a PullAudioInputStream that delegates to the specified callback interface for read()
     * and close() methods.
     * @member AudioInputStream.createPullStream
     * @function
     * @public
     * @param {PullAudioInputStreamCallback} callback - The custom audio input object, derived from
     * PullAudioInputStreamCallback
     * @param {AudioStreamFormat} format - The audio data format in which audio will be returned from
     * the callback's read() method (Required if format is not 16 kHz 16bit mono PCM).
     * @returns {PullAudioInputStream} The audio input stream being created.
     */},{key:"createPullStream",value:function createPullStream(callback,format){return PullAudioInputStream.create(callback,format);// throw new Error("Oops");
}}]);return AudioInputStream;}();exports.AudioInputStream=AudioInputStream;/**
 * Represents memory backed push audio input stream used for custom audio input configurations.
 * @class PushAudioInputStream
 */var PushAudioInputStream=/*#__PURE__*/function(_AudioInputStream){_inherits(PushAudioInputStream,_AudioInputStream);var _super48=_createSuper(PushAudioInputStream);function PushAudioInputStream(){_classCallCheck(this,PushAudioInputStream);return _super48.apply(this,arguments);}_createClass(PushAudioInputStream,null,[{key:"create",value:/**
     * Creates a memory backed PushAudioInputStream with the specified audio format.
     * @member PushAudioInputStream.create
     * @function
     * @public
     * @param {AudioStreamFormat} format - The audio data format in which audio will be written to the
     * push audio stream's write() method (Required if format is not 16 kHz 16bit mono PCM).
     * @returns {PushAudioInputStream} The push audio input stream being created.
     */function create(format){return new PushAudioInputStreamImpl(format);}}]);return PushAudioInputStream;}(AudioInputStream);exports.PushAudioInputStream=PushAudioInputStream;/**
 * Represents memory backed push audio input stream used for custom audio input configurations.
 * @private
 * @class PushAudioInputStreamImpl
 */var PushAudioInputStreamImpl=/*#__PURE__*/function(_PushAudioInputStream){_inherits(PushAudioInputStreamImpl,_PushAudioInputStream);var _super49=_createSuper(PushAudioInputStreamImpl);/**
     * Creates and initalizes an instance with the given values.
     * @constructor
     * @param {AudioStreamFormat} format - The audio stream format.
     */function PushAudioInputStreamImpl(format){var _this50;_classCallCheck(this,PushAudioInputStreamImpl);_this50=_super49.call(this);if(format===undefined){_this50.privFormat=AudioStreamFormat_js_1.AudioStreamFormatImpl.getDefaultInputFormat();}else{_this50.privFormat=format;}_this50.privEvents=new Exports_js_2.EventSource();_this50.privId=Guid_js_1.createNoDashGuid();_this50.privStream=new Exports_js_2.ChunkedArrayBufferStream(_this50.privFormat.avgBytesPerSec/10);return _this50;}/**
     * Format information for the audio
     */_createClass(PushAudioInputStreamImpl,[{key:"format",get:function get(){return Promise.resolve(this.privFormat);}/**
     * Writes the audio data specified by making an internal copy of the data.
     * @member PushAudioInputStreamImpl.prototype.write
     * @function
     * @public
     * @param {ArrayBuffer} dataBuffer - The audio buffer of which this function will make a copy.
     */},{key:"write",value:function write(dataBuffer){this.privStream.writeStreamChunk({buffer:dataBuffer,isEnd:false,timeReceived:Date.now()});}/**
     * Closes the stream.
     * @member PushAudioInputStreamImpl.prototype.close
     * @function
     * @public
     */},{key:"close",value:function close(){this.privStream.close();}},{key:"id",value:function id(){return this.privId;}},{key:"turnOn",value:function turnOn(){this.onEvent(new Exports_js_2.AudioSourceInitializingEvent(this.privId));// no stream id
this.onEvent(new Exports_js_2.AudioSourceReadyEvent(this.privId));return;}},{key:"attach",value:function(){var _attach2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee15(audioNodeId){var _this51=this;var stream;return _regeneratorRuntime().wrap(function _callee15$(_context15){while(1)switch(_context15.prev=_context15.next){case 0:this.onEvent(new Exports_js_2.AudioStreamNodeAttachingEvent(this.privId,audioNodeId));_context15.next=3;return this.turnOn();case 3:stream=this.privStream;this.onEvent(new Exports_js_2.AudioStreamNodeAttachedEvent(this.privId,audioNodeId));return _context15.abrupt("return",{detach:function(){var _detach3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee14(){return _regeneratorRuntime().wrap(function _callee14$(_context14){while(1)switch(_context14.prev=_context14.next){case 0:_this51.onEvent(new Exports_js_2.AudioStreamNodeDetachedEvent(_this51.privId,audioNodeId));return _context14.abrupt("return",_this51.turnOff());case 2:case"end":return _context14.stop();}},_callee14);}));function detach(){return _detach3.apply(this,arguments);}return detach;}(),id:function id(){return audioNodeId;},read:function read(){return stream.read();}});case 6:case"end":return _context15.stop();}},_callee15,this);}));function attach(_x10){return _attach2.apply(this,arguments);}return attach;}()},{key:"detach",value:function detach(audioNodeId){this.onEvent(new Exports_js_2.AudioStreamNodeDetachedEvent(this.privId,audioNodeId));}},{key:"turnOff",value:function turnOff(){return;}},{key:"events",get:function get(){return this.privEvents;}},{key:"deviceInfo",get:function get(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:Exports_js_1.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:Exports_js_1.type.Stream});}},{key:"onEvent",value:function onEvent(event){this.privEvents.onEvent(event);Exports_js_2.Events.instance.onEvent(event);}},{key:"toBuffer",value:function toBuffer(arrayBuffer){var buf=Buffer.alloc(arrayBuffer.byteLength);var view=new Uint8Array(arrayBuffer);for(var i=0;i<buf.length;++i){buf[i]=view[i];}return buf;}}]);return PushAudioInputStreamImpl;}(PushAudioInputStream);exports.PushAudioInputStreamImpl=PushAudioInputStreamImpl;/*
 * Represents audio input stream used for custom audio input configurations.
 * @class PullAudioInputStream
 */var PullAudioInputStream=/*#__PURE__*/function(_AudioInputStream2){_inherits(PullAudioInputStream,_AudioInputStream2);var _super50=_createSuper(PullAudioInputStream);/**
     * Creates and initializes and instance.
     * @constructor
     */function PullAudioInputStream(){_classCallCheck(this,PullAudioInputStream);return _super50.call(this);}/**
     * Creates a PullAudioInputStream that delegates to the specified callback interface for
     * read() and close() methods, using the default format (16 kHz 16bit mono PCM).
     * @member PullAudioInputStream.create
     * @function
     * @public
     * @param {PullAudioInputStreamCallback} callback - The custom audio input object,
     * derived from PullAudioInputStreamCustomCallback
     * @param {AudioStreamFormat} format - The audio data format in which audio will be
     * returned from the callback's read() method (Required if format is not 16 kHz 16bit mono PCM).
     * @returns {PullAudioInputStream} The push audio input stream being created.
     */_createClass(PullAudioInputStream,null,[{key:"create",value:function create(callback,format){return new PullAudioInputStreamImpl(callback,format);}}]);return PullAudioInputStream;}(AudioInputStream);exports.PullAudioInputStream=PullAudioInputStream;/**
 * Represents audio input stream used for custom audio input configurations.
 * @private
 * @class PullAudioInputStreamImpl
 */var PullAudioInputStreamImpl=/*#__PURE__*/function(_PullAudioInputStream){_inherits(PullAudioInputStreamImpl,_PullAudioInputStream);var _super51=_createSuper(PullAudioInputStreamImpl);/**
     * Creates a PullAudioInputStream that delegates to the specified callback interface for
     * read() and close() methods, using the default format (16 kHz 16bit mono PCM).
     * @constructor
     * @param {PullAudioInputStreamCallback} callback - The custom audio input object,
     * derived from PullAudioInputStreamCustomCallback
     * @param {AudioStreamFormat} format - The audio data format in which audio will be
     * returned from the callback's read() method (Required if format is not 16 kHz 16bit mono PCM).
     */function PullAudioInputStreamImpl(callback,format){var _this52;_classCallCheck(this,PullAudioInputStreamImpl);_this52=_super51.call(this);if(undefined===format){_this52.privFormat=Exports_js_3.AudioStreamFormat.getDefaultInputFormat();}else{_this52.privFormat=format;}_this52.privEvents=new Exports_js_2.EventSource();_this52.privId=Guid_js_1.createNoDashGuid();_this52.privCallback=callback;_this52.privIsClosed=false;_this52.privBufferSize=_this52.privFormat.avgBytesPerSec/10;return _this52;}/**
     * Format information for the audio
     */_createClass(PullAudioInputStreamImpl,[{key:"format",get:function get(){return Promise.resolve(this.privFormat);}/**
     * Closes the stream.
     * @member PullAudioInputStreamImpl.prototype.close
     * @function
     * @public
     */},{key:"close",value:function close(){this.privIsClosed=true;this.privCallback.close();}},{key:"id",value:function id(){return this.privId;}},{key:"turnOn",value:function turnOn(){this.onEvent(new Exports_js_2.AudioSourceInitializingEvent(this.privId));// no stream id
this.onEvent(new Exports_js_2.AudioSourceReadyEvent(this.privId));return;}},{key:"attach",value:function(){var _attach3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee16(audioNodeId){var _this53=this;return _regeneratorRuntime().wrap(function _callee16$(_context16){while(1)switch(_context16.prev=_context16.next){case 0:this.onEvent(new Exports_js_2.AudioStreamNodeAttachingEvent(this.privId,audioNodeId));_context16.next=3;return this.turnOn();case 3:this.onEvent(new Exports_js_2.AudioStreamNodeAttachedEvent(this.privId,audioNodeId));return _context16.abrupt("return",{detach:function detach(){_this53.privCallback.close();_this53.onEvent(new Exports_js_2.AudioStreamNodeDetachedEvent(_this53.privId,audioNodeId));return _this53.turnOff();},id:function id(){return audioNodeId;},read:function read(){var totalBytes=0;var transmitBuff;// Until we have the minimum number of bytes to send in a transmission, keep asking for more.
while(totalBytes<_this53.privBufferSize){// Sizing the read buffer to the delta between the perfect size and what's left means we won't ever get too much
// data back.
var readBuff=new ArrayBuffer(_this53.privBufferSize-totalBytes);var pulledBytes=_this53.privCallback.read(readBuff);// If there is no return buffer yet defined, set the return buffer to the that was just populated.
// This was, if we have enough data there's no copy penalty, but if we don't we have a buffer that's the
// preferred size allocated.
if(undefined===transmitBuff){transmitBuff=readBuff;}else{// Not the first bite at the apple, so fill the return buffer with the data we got back.
var intView=new Int8Array(transmitBuff);intView.set(new Int8Array(readBuff),totalBytes);}// If there are no bytes to read, just break out and be done.
if(0===pulledBytes){break;}totalBytes+=pulledBytes;}return Promise.resolve({buffer:transmitBuff.slice(0,totalBytes),isEnd:_this53.privIsClosed||totalBytes===0,timeReceived:Date.now()});}});case 5:case"end":return _context16.stop();}},_callee16,this);}));function attach(_x11){return _attach3.apply(this,arguments);}return attach;}()},{key:"detach",value:function detach(audioNodeId){this.onEvent(new Exports_js_2.AudioStreamNodeDetachedEvent(this.privId,audioNodeId));}},{key:"turnOff",value:function turnOff(){return;}},{key:"events",get:function get(){return this.privEvents;}},{key:"deviceInfo",get:function get(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:Exports_js_1.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:Exports_js_1.type.Stream});}},{key:"onEvent",value:function onEvent(event){this.privEvents.onEvent(event);Exports_js_2.Events.instance.onEvent(event);}}]);return PullAudioInputStreamImpl;}(PullAudioInputStream);exports.PullAudioInputStreamImpl=PullAudioInputStreamImpl;/***/},/* 84 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.PushAudioOutputStreamImpl=exports.PushAudioOutputStream=exports.PullAudioOutputStreamImpl=exports.PullAudioOutputStream=exports.AudioOutputStream=void 0;/* eslint-disable max-classes-per-file */var Exports_js_1=__webpack_require__(4);var Contracts_js_1=__webpack_require__(64);var AudioOutputFormat_js_1=__webpack_require__(85);/**
 * Represents audio output stream used for custom audio output configurations.
 * @class AudioOutputStream
 */var AudioOutputStream=/*#__PURE__*/function(){/**
     * Creates and initializes an instance.
     * @constructor
     */function AudioOutputStream(){_classCallCheck(this,AudioOutputStream);return;}/**
     * Creates a memory backed PullAudioOutputStream with the specified audio format.
     * @member AudioOutputStream.createPullStream
     * @function
     * @public
     * @returns {PullAudioOutputStream} The audio output stream being created.
     */_createClass(AudioOutputStream,null,[{key:"createPullStream",value:function createPullStream(){return PullAudioOutputStream.create();}}]);return AudioOutputStream;}();exports.AudioOutputStream=AudioOutputStream;/**
 * Represents memory backed push audio output stream used for custom audio output configurations.
 * @class PullAudioOutputStream
 */var PullAudioOutputStream=/*#__PURE__*/function(_AudioOutputStream){_inherits(PullAudioOutputStream,_AudioOutputStream);var _super52=_createSuper(PullAudioOutputStream);function PullAudioOutputStream(){_classCallCheck(this,PullAudioOutputStream);return _super52.apply(this,arguments);}_createClass(PullAudioOutputStream,null,[{key:"create",value:/**
     * Creates a memory backed PullAudioOutputStream with the specified audio format.
     * @member PullAudioOutputStream.create
     * @function
     * @public
     * @returns {PullAudioOutputStream} The push audio output stream being created.
     */function create(){return new PullAudioOutputStreamImpl();}}]);return PullAudioOutputStream;}(AudioOutputStream);exports.PullAudioOutputStream=PullAudioOutputStream;/**
 * Represents memory backed push audio output stream used for custom audio output configurations.
 * @private
 * @class PullAudioOutputStreamImpl
 */var PullAudioOutputStreamImpl=/*#__PURE__*/function(_PullAudioOutputStrea){_inherits(PullAudioOutputStreamImpl,_PullAudioOutputStrea);var _super53=_createSuper(PullAudioOutputStreamImpl);/**
     * Creates and initializes an instance with the given values.
     * @constructor
     */function PullAudioOutputStreamImpl(){var _this54;_classCallCheck(this,PullAudioOutputStreamImpl);_this54=_super53.call(this);_this54.privId=Exports_js_1.createNoDashGuid();_this54.privStream=new Exports_js_1.Stream();return _this54;}/**
     * Sets the format information to the stream. For internal use only.
     * @param {AudioStreamFormat} format - the format to be set.
     */_createClass(PullAudioOutputStreamImpl,[{key:"format",get:/**
     * Format information for the audio
     */function get(){return this.privFormat;}/**
     * Checks if the stream is closed
     * @member PullAudioOutputStreamImpl.prototype.isClosed
     * @property
     * @public
     */,set:function set(format){if(format===undefined||format===null){this.privFormat=AudioOutputFormat_js_1.AudioOutputFormatImpl.getDefaultOutputFormat();}this.privFormat=format;}},{key:"isClosed",get:function get(){return this.privStream.isClosed;}/**
     * Gets the id of the stream
     * @member PullAudioOutputStreamImpl.prototype.id
     * @property
     * @public
     */},{key:"id",value:function id(){return this.privId;}/**
     * Reads audio data from the internal buffer.
     * @member PullAudioOutputStreamImpl.prototype.read
     * @function
     * @public
     * @param {ArrayBuffer} dataBuffer - An ArrayBuffer to store the read data.
     * @returns {Promise<number>} - Audio buffer length has been read.
     */},{key:"read",value:function(){var _read=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee17(dataBuffer){var intView,totalBytes,chunk,tmpBuffer;return _regeneratorRuntime().wrap(function _callee17$(_context17){while(1)switch(_context17.prev=_context17.next){case 0:intView=new Int8Array(dataBuffer);totalBytes=0;if(!(this.privLastChunkView!==undefined)){_context17.next=10;break;}if(!(this.privLastChunkView.length>dataBuffer.byteLength)){_context17.next=7;break;}intView.set(this.privLastChunkView.slice(0,dataBuffer.byteLength));this.privLastChunkView=this.privLastChunkView.slice(dataBuffer.byteLength);return _context17.abrupt("return",Promise.resolve(dataBuffer.byteLength));case 7:intView.set(this.privLastChunkView);totalBytes=this.privLastChunkView.length;this.privLastChunkView=undefined;case 10:if(!(totalBytes<dataBuffer.byteLength&&!this.privStream.isReadEnded)){_context17.next=17;break;}_context17.next=13;return this.privStream.read();case 13:chunk=_context17.sent;if(chunk!==undefined&&!chunk.isEnd){tmpBuffer=void 0;if(chunk.buffer.byteLength>dataBuffer.byteLength-totalBytes){tmpBuffer=chunk.buffer.slice(0,dataBuffer.byteLength-totalBytes);this.privLastChunkView=new Int8Array(chunk.buffer.slice(dataBuffer.byteLength-totalBytes));}else{tmpBuffer=chunk.buffer;}intView.set(new Int8Array(tmpBuffer),totalBytes);totalBytes+=tmpBuffer.byteLength;}else{this.privStream.readEnded();}_context17.next=10;break;case 17:return _context17.abrupt("return",totalBytes);case 18:case"end":return _context17.stop();}},_callee17,this);}));function read(_x12){return _read.apply(this,arguments);}return read;}()/**
     * Writes the audio data specified by making an internal copy of the data.
     * @member PullAudioOutputStreamImpl.prototype.write
     * @function
     * @public
     * @param {ArrayBuffer} dataBuffer - The audio buffer of which this function will make a copy.
     */},{key:"write",value:function write(dataBuffer){Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing");this.privStream.writeStreamChunk({buffer:dataBuffer,isEnd:false,timeReceived:Date.now()});}/**
     * Closes the stream.
     * @member PullAudioOutputStreamImpl.prototype.close
     * @function
     * @public
     */},{key:"close",value:function close(){this.privStream.close();}}]);return PullAudioOutputStreamImpl;}(PullAudioOutputStream);exports.PullAudioOutputStreamImpl=PullAudioOutputStreamImpl;/*
 * Represents audio output stream used for custom audio output configurations.
 * @class PushAudioOutputStream
 */var PushAudioOutputStream=/*#__PURE__*/function(_AudioOutputStream2){_inherits(PushAudioOutputStream,_AudioOutputStream2);var _super54=_createSuper(PushAudioOutputStream);/**
     * Creates and initializes and instance.
     * @constructor
     */function PushAudioOutputStream(){_classCallCheck(this,PushAudioOutputStream);return _super54.call(this);}/**
     * Creates a PushAudioOutputStream that delegates to the specified callback interface for
     * write() and close() methods.
     * @member PushAudioOutputStream.create
     * @function
     * @public
     * @param {PushAudioOutputStreamCallback} callback - The custom audio output object,
     * derived from PushAudioOutputStreamCallback
     * @returns {PushAudioOutputStream} The push audio output stream being created.
     */_createClass(PushAudioOutputStream,null,[{key:"create",value:function create(callback){return new PushAudioOutputStreamImpl(callback);}}]);return PushAudioOutputStream;}(AudioOutputStream);exports.PushAudioOutputStream=PushAudioOutputStream;/**
 * Represents audio output stream used for custom audio output configurations.
 * @private
 * @class PushAudioOutputStreamImpl
 */var PushAudioOutputStreamImpl=/*#__PURE__*/function(_PushAudioOutputStrea){_inherits(PushAudioOutputStreamImpl,_PushAudioOutputStrea);var _super55=_createSuper(PushAudioOutputStreamImpl);/**
     * Creates a PushAudioOutputStream that delegates to the specified callback interface for
     * read() and close() methods.
     * @constructor
     * @param {PushAudioOutputStreamCallback} callback - The custom audio output object,
     * derived from PushAudioOutputStreamCallback
     */function PushAudioOutputStreamImpl(callback){var _this55;_classCallCheck(this,PushAudioOutputStreamImpl);_this55=_super55.call(this);_this55.privId=Exports_js_1.createNoDashGuid();_this55.privCallback=callback;return _this55;}// eslint-disable-next-line @typescript-eslint/no-empty-function
_createClass(PushAudioOutputStreamImpl,[{key:"format",set:function set(format){}},{key:"write",value:function write(buffer){if(!!this.privCallback.write){this.privCallback.write(buffer);}}},{key:"close",value:function close(){if(!!this.privCallback.close){this.privCallback.close();}}},{key:"id",value:function id(){return this.privId;}}]);return PushAudioOutputStreamImpl;}(PushAudioOutputStream);exports.PushAudioOutputStreamImpl=PushAudioOutputStreamImpl;/***/},/* 85 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var _AudioOutputFormatImp;Object.defineProperty(exports,"__esModule",{value:true});exports.AudioOutputFormatImpl=void 0;var SpeechSynthesisOutputFormat_js_1=__webpack_require__(86);var AudioStreamFormat_js_1=__webpack_require__(67);/**
 * @private
 * @class AudioOutputFormatImpl
 * Updated in version 1.17.0
 */ // eslint-disable-next-line max-classes-per-file
var AudioOutputFormatImpl=/*#__PURE__*/function(_AudioStreamFormat_js){_inherits(AudioOutputFormatImpl,_AudioStreamFormat_js);var _super56=_createSuper(AudioOutputFormatImpl);/**
     * Creates an instance with the given values.
     * @constructor
     * @param formatTag
     * @param {number} channels - Number of channels.
     * @param {number} samplesPerSec - Samples per second.
     * @param {number} avgBytesPerSec - Average bytes per second.
     * @param {number} blockAlign - Block alignment.
     * @param {number} bitsPerSample - Bits per sample.
     * @param {string} audioFormatString - Audio format string
     * @param {string} requestAudioFormatString - Audio format string sent to service.
     * @param {boolean} hasHeader - If the format has header or not.
     */function AudioOutputFormatImpl(formatTag,channels,samplesPerSec,avgBytesPerSec,blockAlign,bitsPerSample,audioFormatString,requestAudioFormatString,hasHeader){var _this56;_classCallCheck(this,AudioOutputFormatImpl);_this56=_super56.call(this,samplesPerSec,bitsPerSample,channels,formatTag);_this56.formatTag=formatTag;_this56.avgBytesPerSec=avgBytesPerSec;_this56.blockAlign=blockAlign;_this56.priAudioFormatString=audioFormatString;_this56.priRequestAudioFormatString=requestAudioFormatString;_this56.priHasHeader=hasHeader;return _this56;}_createClass(AudioOutputFormatImpl,[{key:"hasHeader",get:/**
     * Specifies if this audio output format has a header
     * @boolean AudioOutputFormatImpl.prototype.hasHeader
     * @function
     * @public
     */function get(){return this.priHasHeader;}/**
     * Specifies the header of this format
     * @ArrayBuffer AudioOutputFormatImpl.prototype.header
     * @function
     * @public
     */},{key:"header",get:function get(){if(this.hasHeader){return this.privHeader;}return undefined;}/**
     * Updates the header based on the audio length
     * @member AudioOutputFormatImpl.updateHeader
     * @function
     * @public
     * @param {number} audioLength - the audio length
     */},{key:"updateHeader",value:function updateHeader(audioLength){if(this.priHasHeader){var view=new DataView(this.privHeader);view.setUint32(4,audioLength+this.privHeader.byteLength-8,true);view.setUint32(40,audioLength,true);}}/**
     * Specifies the audio format string to be sent to the service
     * @string AudioOutputFormatImpl.prototype.requestAudioFormatString
     * @function
     * @public
     */},{key:"requestAudioFormatString",get:function get(){return this.priRequestAudioFormatString;}/**
     * Adds audio header
     * @param audio the raw audio without header
     * @returns the audio with header if applicable
     */},{key:"addHeader",value:function addHeader(audio){if(!this.hasHeader){return audio;}this.updateHeader(audio.byteLength);var tmp=new Uint8Array(audio.byteLength+this.header.byteLength);tmp.set(new Uint8Array(this.header),0);tmp.set(new Uint8Array(audio),this.header.byteLength);return tmp.buffer;}}],[{key:"fromSpeechSynthesisOutputFormat",value:function fromSpeechSynthesisOutputFormat(speechSynthesisOutputFormat){if(speechSynthesisOutputFormat===undefined){return AudioOutputFormatImpl.getDefaultOutputFormat();}return AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(AudioOutputFormatImpl.SpeechSynthesisOutputFormatToString[speechSynthesisOutputFormat]);}},{key:"fromSpeechSynthesisOutputFormatString",value:function fromSpeechSynthesisOutputFormatString(speechSynthesisOutputFormatString){switch(speechSynthesisOutputFormatString){case"raw-8khz-8bit-mono-mulaw":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MuLaw,1,8000,8000,1,8,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"riff-16khz-16kbps-mono-siren":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.Siren,1,16000,2000,40,0,speechSynthesisOutputFormatString,"audio-16khz-16kbps-mono-siren",true);case"audio-16khz-16kbps-mono-siren":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.Siren,1,16000,2000,40,0,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"audio-16khz-32kbitrate-mono-mp3":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MP3,1,16000,32<<7,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"audio-16khz-128kbitrate-mono-mp3":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MP3,1,16000,128<<7,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"audio-16khz-64kbitrate-mono-mp3":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MP3,1,16000,64<<7,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"audio-24khz-48kbitrate-mono-mp3":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MP3,1,24000,48<<7,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"audio-24khz-96kbitrate-mono-mp3":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MP3,1,24000,96<<7,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"audio-24khz-160kbitrate-mono-mp3":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MP3,1,24000,160<<7,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"raw-16khz-16bit-mono-truesilk":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.SILKSkype,1,16000,32000,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"riff-8khz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,8000,16000,2,16,speechSynthesisOutputFormatString,"raw-8khz-16bit-mono-pcm",true);case"riff-24khz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,24000,48000,2,16,speechSynthesisOutputFormatString,"raw-24khz-16bit-mono-pcm",true);case"riff-8khz-8bit-mono-mulaw":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MuLaw,1,8000,8000,1,8,speechSynthesisOutputFormatString,"raw-8khz-8bit-mono-mulaw",true);case"raw-16khz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,16000,32000,2,16,speechSynthesisOutputFormatString,"raw-16khz-16bit-mono-pcm",false);case"raw-24khz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,24000,48000,2,16,speechSynthesisOutputFormatString,"raw-24khz-16bit-mono-pcm",false);case"raw-8khz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,8000,16000,2,16,speechSynthesisOutputFormatString,"raw-8khz-16bit-mono-pcm",false);case"ogg-16khz-16bit-mono-opus":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.OGG_OPUS,1,16000,8192,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"ogg-24khz-16bit-mono-opus":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.OGG_OPUS,1,24000,8192,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"raw-48khz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,48000,96000,2,16,speechSynthesisOutputFormatString,"raw-48khz-16bit-mono-pcm",false);case"riff-48khz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,48000,96000,2,16,speechSynthesisOutputFormatString,"raw-48khz-16bit-mono-pcm",true);case"audio-48khz-96kbitrate-mono-mp3":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MP3,1,48000,96<<7,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"audio-48khz-192kbitrate-mono-mp3":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.MP3,1,48000,192<<7,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"ogg-48khz-16bit-mono-opus":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.OGG_OPUS,1,48000,12000,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"webm-16khz-16bit-mono-opus":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.WEBM_OPUS,1,16000,4000,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"webm-24khz-16bit-mono-opus":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.WEBM_OPUS,1,24000,6000,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"webm-24khz-16bit-24kbps-mono-opus":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.WEBM_OPUS,1,24000,3000,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"audio-16khz-16bit-32kbps-mono-opus":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.OPUS,1,16000,4000,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"audio-24khz-16bit-48kbps-mono-opus":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.OPUS,1,24000,6000,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"audio-24khz-16bit-24kbps-mono-opus":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.OPUS,1,24000,3000,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"audio-24khz-16bit-mono-flac":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.FLAC,1,24000,24000,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"audio-48khz-16bit-mono-flac":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.FLAC,1,48000,30000,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"raw-24khz-16bit-mono-truesilk":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.SILKSkype,1,24000,48000,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"raw-8khz-8bit-mono-alaw":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.ALaw,1,8000,8000,1,8,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"riff-8khz-8bit-mono-alaw":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.ALaw,1,8000,8000,1,8,speechSynthesisOutputFormatString,"raw-8khz-8bit-mono-alaw",true);case"raw-22050hz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,22050,44100,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"riff-22050hz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,22050,44100,2,16,speechSynthesisOutputFormatString,"raw-22050hz-16bit-mono-pcm",true);case"raw-44100hz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,44100,88200,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"riff-44100hz-16bit-mono-pcm":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,44100,88200,2,16,speechSynthesisOutputFormatString,"raw-44100hz-16bit-mono-pcm",true);case"amr-wb-16000h":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.AMR_WB,1,16000,3052,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"g722-16khz-64kbps":return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.G722,1,16000,8000,2,16,speechSynthesisOutputFormatString,speechSynthesisOutputFormatString,false);case"riff-16khz-16bit-mono-pcm":default:return new AudioOutputFormatImpl(AudioStreamFormat_js_1.AudioFormatTag.PCM,1,16000,32000,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",true);}}},{key:"getDefaultOutputFormat",value:function getDefaultOutputFormat(){return AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(typeof window!=="undefined"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm");}}]);return AudioOutputFormatImpl;}(AudioStreamFormat_js_1.AudioStreamFormatImpl);exports.AudioOutputFormatImpl=AudioOutputFormatImpl;AudioOutputFormatImpl.SpeechSynthesisOutputFormatToString=(_AudioOutputFormatImp={},_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw,"raw-8khz-8bit-mono-mulaw"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren,"riff-16khz-16kbps-mono-siren"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren,"audio-16khz-16kbps-mono-siren"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3,"audio-16khz-32kbitrate-mono-mp3"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3,"audio-16khz-128kbitrate-mono-mp3"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3,"audio-16khz-64kbitrate-mono-mp3"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3,"audio-24khz-48kbitrate-mono-mp3"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3,"audio-24khz-96kbitrate-mono-mp3"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3,"audio-24khz-160kbitrate-mono-mp3"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk,"raw-16khz-16bit-mono-truesilk"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm,"riff-16khz-16bit-mono-pcm"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm,"riff-8khz-16bit-mono-pcm"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm,"riff-24khz-16bit-mono-pcm"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw,"riff-8khz-8bit-mono-mulaw"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm,"raw-16khz-16bit-mono-pcm"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm,"raw-24khz-16bit-mono-pcm"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm,"raw-8khz-16bit-mono-pcm"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus,"ogg-16khz-16bit-mono-opus"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus,"ogg-24khz-16bit-mono-opus"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm,"raw-48khz-16bit-mono-pcm"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm,"riff-48khz-16bit-mono-pcm"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3,"audio-48khz-96kbitrate-mono-mp3"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3,"audio-48khz-192kbitrate-mono-mp3"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus,"ogg-48khz-16bit-mono-opus"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus,"webm-16khz-16bit-mono-opus"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus,"webm-24khz-16bit-mono-opus"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus,"webm-24khz-16bit-24kbps-mono-opus"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk,"raw-24khz-16bit-mono-truesilk"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw,"raw-8khz-8bit-mono-alaw"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw,"riff-8khz-8bit-mono-alaw"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus,"audio-16khz-16bit-32kbps-mono-opus"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus,"audio-24khz-16bit-48kbps-mono-opus"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus,"audio-24khz-16bit-24kbps-mono-opus"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm,"raw-22050hz-16bit-mono-pcm"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm,"riff-22050hz-16bit-mono-pcm"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm,"raw-44100hz-16bit-mono-pcm"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm,"riff-44100hz-16bit-mono-pcm"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.AmrWb16000Hz,"amr-wb-16000hz"),_defineProperty(_AudioOutputFormatImp,SpeechSynthesisOutputFormat_js_1.SpeechSynthesisOutputFormat.G72216Khz64Kbps,"g722-16khz-64kbps"),_AudioOutputFormatImp);/***/},/* 86 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechSynthesisOutputFormat=void 0;/**
 * Define speech synthesis audio output formats.
 * @enum SpeechSynthesisOutputFormat
 * Updated in version 1.17.0
 */var SpeechSynthesisOutputFormat;(function(SpeechSynthesisOutputFormat){/**
     * raw-8khz-8bit-mono-mulaw
     * @member SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw,
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw8Khz8BitMonoMULaw"]=0]="Raw8Khz8BitMonoMULaw";/**
     * riff-16khz-16kbps-mono-siren
     * @note Unsupported by the service. Do not use this value.
     * @member SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff16Khz16KbpsMonoSiren"]=1]="Riff16Khz16KbpsMonoSiren";/**
     * audio-16khz-16kbps-mono-siren
     * @note Unsupported by the service. Do not use this value.
     * @member SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio16Khz16KbpsMonoSiren"]=2]="Audio16Khz16KbpsMonoSiren";/**
     * audio-16khz-32kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio16Khz32KBitRateMonoMp3"]=3]="Audio16Khz32KBitRateMonoMp3";/**
     * audio-16khz-128kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio16Khz128KBitRateMonoMp3"]=4]="Audio16Khz128KBitRateMonoMp3";/**
     * audio-16khz-64kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio16Khz64KBitRateMonoMp3"]=5]="Audio16Khz64KBitRateMonoMp3";/**
     * audio-24khz-48kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio24Khz48KBitRateMonoMp3"]=6]="Audio24Khz48KBitRateMonoMp3";/**
     * audio-24khz-96kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio24Khz96KBitRateMonoMp3"]=7]="Audio24Khz96KBitRateMonoMp3";/**
     * audio-24khz-160kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio24Khz160KBitRateMonoMp3"]=8]="Audio24Khz160KBitRateMonoMp3";/**
     * raw-16khz-16bit-mono-truesilk
     * @member SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw16Khz16BitMonoTrueSilk"]=9]="Raw16Khz16BitMonoTrueSilk";/**
     * riff-16khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff16Khz16BitMonoPcm"]=10]="Riff16Khz16BitMonoPcm";/**
     * riff-8khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff8Khz16BitMonoPcm"]=11]="Riff8Khz16BitMonoPcm";/**
     * riff-24khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff24Khz16BitMonoPcm"]=12]="Riff24Khz16BitMonoPcm";/**
     * riff-8khz-8bit-mono-mulaw
     * @member SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff8Khz8BitMonoMULaw"]=13]="Riff8Khz8BitMonoMULaw";/**
     * raw-16khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw16Khz16BitMonoPcm"]=14]="Raw16Khz16BitMonoPcm";/**
     * raw-24khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw24Khz16BitMonoPcm"]=15]="Raw24Khz16BitMonoPcm";/**
     * raw-8khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw8Khz16BitMonoPcm"]=16]="Raw8Khz16BitMonoPcm";/**
     * ogg-16khz-16bit-mono-opus
     * @member SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Ogg16Khz16BitMonoOpus"]=17]="Ogg16Khz16BitMonoOpus";/**
     * ogg-24khz-16bit-mono-opus
     * @member SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Ogg24Khz16BitMonoOpus"]=18]="Ogg24Khz16BitMonoOpus";/**
     * raw-48khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw48Khz16BitMonoPcm"]=19]="Raw48Khz16BitMonoPcm";/**
     * riff-48khz-16bit-mono-pcm
     * @member SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff48Khz16BitMonoPcm"]=20]="Riff48Khz16BitMonoPcm";/**
     * audio-48khz-96kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio48Khz96KBitRateMonoMp3"]=21]="Audio48Khz96KBitRateMonoMp3";/**
     * audio-48khz-192kbitrate-mono-mp3
     * @member SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio48Khz192KBitRateMonoMp3"]=22]="Audio48Khz192KBitRateMonoMp3";/**
     * ogg-48khz-16bit-mono-opus
     * Added in version 1.16.0
     * @member SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Ogg48Khz16BitMonoOpus"]=23]="Ogg48Khz16BitMonoOpus";/**
     * webm-16khz-16bit-mono-opus
     * Added in version 1.16.0
     * @member SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Webm16Khz16BitMonoOpus"]=24]="Webm16Khz16BitMonoOpus";/**
     * webm-24khz-16bit-mono-opus
     * Added in version 1.16.0
     * @member SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Webm24Khz16BitMonoOpus"]=25]="Webm24Khz16BitMonoOpus";/**
     * raw-24khz-16bit-mono-truesilk
     * Added in version 1.17.0
     * @member SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw24Khz16BitMonoTrueSilk"]=26]="Raw24Khz16BitMonoTrueSilk";/**
     * raw-8khz-8bit-mono-alaw
     * Added in version 1.17.0
     * @member SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw8Khz8BitMonoALaw"]=27]="Raw8Khz8BitMonoALaw";/**
     * riff-8khz-8bit-mono-alaw
     * Added in version 1.17.0
     * @member SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff8Khz8BitMonoALaw"]=28]="Riff8Khz8BitMonoALaw";/**
     * webm-24khz-16bit-24kbps-mono-opus
     * Audio compressed by OPUS codec in a webm container, with bitrate of 24kbps, optimized for IoT scenario.
     * Added in version 1.19.0
     * @member SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Webm24Khz16Bit24KbpsMonoOpus"]=29]="Webm24Khz16Bit24KbpsMonoOpus";/**
     * audio-16khz-16bit-32kbps-mono-opus
     * Audio compressed by OPUS codec without container, with bitrate of 32kbps.
     * Added in version 1.20.0
     * @member SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio16Khz16Bit32KbpsMonoOpus"]=30]="Audio16Khz16Bit32KbpsMonoOpus";/**
     * audio-24khz-16bit-48kbps-mono-opus
     * Audio compressed by OPUS codec without container, with bitrate of 48kbps.
     * Added in version 1.20.0
     * @member SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio24Khz16Bit48KbpsMonoOpus"]=31]="Audio24Khz16Bit48KbpsMonoOpus";/**
     * audio-24khz-16bit-24kbps-mono-opus
     * Audio compressed by OPUS codec without container, with bitrate of 24kbps.
     * Added in version 1.20.0
     * @member SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Audio24Khz16Bit24KbpsMonoOpus"]=32]="Audio24Khz16Bit24KbpsMonoOpus";/**
     * raw-22050hz-16bit-mono-pcm
     * Raw PCM audio at 22050Hz sampling rate and 16-bit depth.
     * Added in version 1.22.0
     * @member SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw22050Hz16BitMonoPcm"]=33]="Raw22050Hz16BitMonoPcm";/**
     * riff-22050hz-16bit-mono-pcm
     * PCM audio at 22050Hz sampling rate and 16-bit depth, with RIFF header.
     * Added in version 1.22.0
     * @member SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff22050Hz16BitMonoPcm"]=34]="Riff22050Hz16BitMonoPcm";/**
     * raw-44100hz-16bit-mono-pcm
     * Raw PCM audio at 44100Hz sampling rate and 16-bit depth.
     * Added in version 1.22.0
     * @member SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Raw44100Hz16BitMonoPcm"]=35]="Raw44100Hz16BitMonoPcm";/**
     * riff-44100hz-16bit-mono-pcm
     * PCM audio at 44100Hz sampling rate and 16-bit depth, with RIFF header.
     * Added in version 1.22.0
     * @member SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["Riff44100Hz16BitMonoPcm"]=36]="Riff44100Hz16BitMonoPcm";/**
     * amr-wb-16000hz
     * AMR-WB audio at 16kHz sampling rate.
     * Added in version 1.38.0
     * @member SpeechSynthesisOutputFormat.AmrWb16000Hz
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["AmrWb16000Hz"]=37]="AmrWb16000Hz";/**
     * g722-16khz-64kbps
     * G.722 audio at 16kHz sampling rate and 64kbps bitrate.
     * Added in version 1.38.0
     */SpeechSynthesisOutputFormat[SpeechSynthesisOutputFormat["G72216Khz64Kbps"]=38]="G72216Khz64Kbps";})(SpeechSynthesisOutputFormat=exports.SpeechSynthesisOutputFormat||(exports.SpeechSynthesisOutputFormat={}));/***/},/* 87 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.CancellationReason=void 0;/**
 * Defines the possible reasons a recognition result might be canceled.
 * @class CancellationReason
 */var CancellationReason;(function(CancellationReason){/**
     * Indicates that an error occurred during speech recognition.
     * @member CancellationReason.Error
     */CancellationReason[CancellationReason["Error"]=0]="Error";/**
     * Indicates that the end of the audio stream was reached.
     * @member CancellationReason.EndOfStream
     */CancellationReason[CancellationReason["EndOfStream"]=1]="EndOfStream";})(CancellationReason=exports.CancellationReason||(exports.CancellationReason={}));/***/},/* 88 */ /***/function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PullAudioInputStreamCallback=void 0;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * An abstract base class that defines callback methods (read() and close()) for
 * custom audio input streams).
 * @class PullAudioInputStreamCallback
 */var PullAudioInputStreamCallback=/*#__PURE__*/_createClass(function PullAudioInputStreamCallback(){_classCallCheck(this,PullAudioInputStreamCallback);});exports.PullAudioInputStreamCallback=PullAudioInputStreamCallback;/***/},/* 89 */ /***/function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PushAudioOutputStreamCallback=void 0;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/**
 * An abstract base class that defines callback methods (write() and close()) for
 * custom audio output streams).
 * @class PushAudioOutputStreamCallback
 */var PushAudioOutputStreamCallback=/*#__PURE__*/_createClass(function PushAudioOutputStreamCallback(){_classCallCheck(this,PushAudioOutputStreamCallback);});exports.PushAudioOutputStreamCallback=PushAudioOutputStreamCallback;/***/},/* 90 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.KeywordRecognitionModel=void 0;var Contracts_js_1=__webpack_require__(64);/**
 * Represents a keyword recognition model for recognizing when
 * the user says a keyword to initiate further speech recognition.
 * @class KeywordRecognitionModel
 */var KeywordRecognitionModel=/*#__PURE__*/function(){/**
     * Create and initializes a new instance.
     * @constructor
     */function KeywordRecognitionModel(){_classCallCheck(this,KeywordRecognitionModel);this.privDisposed=false;return;}/**
     * Creates a keyword recognition model using the specified filename.
     * @member KeywordRecognitionModel.fromFile
     * @function
     * @public
     * @param {string} fileName - A string that represents file name for the keyword recognition model.
     * Note, the file can point to a zip file in which case the model
     * will be extracted from the zip.
     * @returns {KeywordRecognitionModel} The keyword recognition model being created.
     */_createClass(KeywordRecognitionModel,[{key:"close",value:/**
     * Dispose of associated resources.
     * @member KeywordRecognitionModel.prototype.close
     * @function
     * @public
     */function close(){if(this.privDisposed){return;}this.privDisposed=true;}}],[{key:"fromFile",value:function fromFile(fileName){Contracts_js_1.Contracts.throwIfFileDoesNotExist(fileName,"fileName");throw new Error("Not yet implemented.");}/**
     * Creates a keyword recognition model using the specified filename.
     * @member KeywordRecognitionModel.fromStream
     * @function
     * @public
     * @param {string} file - A File that represents file for the keyword recognition model.
     * Note, the file can point to a zip file in which case the model will be extracted from the zip.
     * @returns {KeywordRecognitionModel} The keyword recognition model being created.
     */},{key:"fromStream",value:function fromStream(file){Contracts_js_1.Contracts.throwIfNull(file,"file");throw new Error("Not yet implemented.");}}]);return KeywordRecognitionModel;}();exports.KeywordRecognitionModel=KeywordRecognitionModel;/***/},/* 91 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SessionEventArgs=void 0;/**
 * Defines content for session events like SessionStarted/Stopped, SoundStarted/Stopped.
 * @class SessionEventArgs
 */var SessionEventArgs=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} sessionId - The session id.
     */function SessionEventArgs(sessionId){_classCallCheck(this,SessionEventArgs);this.privSessionId=sessionId;}/**
     * Represents the session identifier.
     * @member SessionEventArgs.prototype.sessionId
     * @function
     * @public
     * @returns {string} Represents the session identifier.
     */_createClass(SessionEventArgs,[{key:"sessionId",get:function get(){return this.privSessionId;}}]);return SessionEventArgs;}();exports.SessionEventArgs=SessionEventArgs;/***/},/* 92 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.RecognitionEventArgs=void 0;var Exports_js_1=__webpack_require__(79);/**
 * Defines payload for session events like Speech Start/End Detected
 * @class
 */var RecognitionEventArgs=/*#__PURE__*/function(_Exports_js_1$Session){_inherits(RecognitionEventArgs,_Exports_js_1$Session);var _super57=_createSuper(RecognitionEventArgs);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */function RecognitionEventArgs(offset,sessionId){var _this57;_classCallCheck(this,RecognitionEventArgs);_this57=_super57.call(this,sessionId);_this57.privOffset=offset;return _this57;}/**
     * Represents the message offset
     * @member RecognitionEventArgs.prototype.offset
     * @function
     * @public
     */_createClass(RecognitionEventArgs,[{key:"offset",get:function get(){return this.privOffset;}}]);return RecognitionEventArgs;}(Exports_js_1.SessionEventArgs);exports.RecognitionEventArgs=RecognitionEventArgs;/***/},/* 93 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.OutputFormat=void 0;/**
 * Define Speech Recognizer output formats.
 * @class OutputFormat
 */var OutputFormat;(function(OutputFormat){/**
     * @member OutputFormat.Simple
     */OutputFormat[OutputFormat["Simple"]=0]="Simple";/**
     * @member OutputFormat.Detailed
     */OutputFormat[OutputFormat["Detailed"]=1]="Detailed";})(OutputFormat=exports.OutputFormat||(exports.OutputFormat={}));/***/},/* 94 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.IntentRecognitionEventArgs=void 0;var Exports_js_1=__webpack_require__(79);/**
 * Intent recognition result event arguments.
 * @class
 */var IntentRecognitionEventArgs=/*#__PURE__*/function(_Exports_js_1$Recogni){_inherits(IntentRecognitionEventArgs,_Exports_js_1$Recogni);var _super58=_createSuper(IntentRecognitionEventArgs);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param result - The result of the intent recognition.
     * @param offset - The offset.
     * @param sessionId - The session id.
     */function IntentRecognitionEventArgs(result,offset,sessionId){var _this58;_classCallCheck(this,IntentRecognitionEventArgs);_this58=_super58.call(this,offset,sessionId);_this58.privResult=result;return _this58;}/**
     * Represents the intent recognition result.
     * @member IntentRecognitionEventArgs.prototype.result
     * @function
     * @public
     * @returns {IntentRecognitionResult} Represents the intent recognition result.
     */_createClass(IntentRecognitionEventArgs,[{key:"result",get:function get(){return this.privResult;}}]);return IntentRecognitionEventArgs;}(Exports_js_1.RecognitionEventArgs);exports.IntentRecognitionEventArgs=IntentRecognitionEventArgs;/***/},/* 95 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.RecognitionResult=void 0;/**
 * Defines result of speech recognition.
 * @class RecognitionResult
 */var RecognitionResult=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} language - Primary Language detected, if provided.
     * @param {string} languageDetectionConfidence - Primary Language confidence ("Unknown," "Low," "Medium," "High"...), if provided.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */function RecognitionResult(resultId,reason,text,duration,offset,language,languageDetectionConfidence,errorDetails,json,properties){_classCallCheck(this,RecognitionResult);this.privResultId=resultId;this.privReason=reason;this.privText=text;this.privDuration=duration;this.privOffset=offset;this.privLanguage=language;this.privLanguageDetectionConfidence=languageDetectionConfidence;this.privErrorDetails=errorDetails;this.privJson=json;this.privProperties=properties;}/**
     * Specifies the result identifier.
     * @member RecognitionResult.prototype.resultId
     * @function
     * @public
     * @returns {string} Specifies the result identifier.
     */_createClass(RecognitionResult,[{key:"resultId",get:function get(){return this.privResultId;}/**
     * Specifies status of the result.
     * @member RecognitionResult.prototype.reason
     * @function
     * @public
     * @returns {ResultReason} Specifies status of the result.
     */},{key:"reason",get:function get(){return this.privReason;}/**
     * Presents the recognized text in the result.
     * @member RecognitionResult.prototype.text
     * @function
     * @public
     * @returns {string} Presents the recognized text in the result.
     */},{key:"text",get:function get(){return this.privText;}/**
     * Duration of recognized speech in 100 nano second increments.
     * @member RecognitionResult.prototype.duration
     * @function
     * @public
     * @returns {number} Duration of recognized speech in 100 nano second increments.
     */},{key:"duration",get:function get(){return this.privDuration;}/**
     * Offset of recognized speech in 100 nano second increments.
     * @member RecognitionResult.prototype.offset
     * @function
     * @public
     * @returns {number} Offset of recognized speech in 100 nano second increments.
     */},{key:"offset",get:function get(){return this.privOffset;}/**
     * Primary Language detected.
     * @member RecognitionResult.prototype.language
     * @function
     * @public
     * @returns {string} language detected.
     */},{key:"language",get:function get(){return this.privLanguage;}/**
     * Primary Language detection confidence (Unknown, Low, Medium, High).
     * @member RecognitionResult.prototype.languageDetectionConfidence
     * @function
     * @public
     * @returns {string} detection confidence strength.
     */},{key:"languageDetectionConfidence",get:function get(){return this.privLanguageDetectionConfidence;}/**
     * In case of an unsuccessful recognition, provides details of the occurred error.
     * @member RecognitionResult.prototype.errorDetails
     * @function
     * @public
     * @returns {string} a brief description of an error.
     */},{key:"errorDetails",get:function get(){return this.privErrorDetails;}/**
     * A string containing Json serialized recognition result as it was received from the service.
     * @member RecognitionResult.prototype.json
     * @function
     * @private
     * @returns {string} Json serialized representation of the result.
     */},{key:"json",get:function get(){return this.privJson;}/**
     * The set of properties exposed in the result.
     * @member RecognitionResult.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The set of properties exposed in the result.
     */},{key:"properties",get:function get(){return this.privProperties;}}]);return RecognitionResult;}();exports.RecognitionResult=RecognitionResult;/***/},/* 96 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechRecognitionResult=void 0;var Exports_js_1=__webpack_require__(79);/**
 * Defines result of speech recognition.
 * @class SpeechRecognitionResult
 */var SpeechRecognitionResult=/*#__PURE__*/function(_Exports_js_1$Recogni2){_inherits(SpeechRecognitionResult,_Exports_js_1$Recogni2);var _super59=_createSuper(SpeechRecognitionResult);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @public
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} language - Primary Language detected, if provided.
     * @param {string} languageDetectionConfidence - Primary Language confidence ("Unknown," "Low," "Medium," "High"...), if provided.
     * @param {string} speakerId - speaker id for conversation transcription, if provided.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */function SpeechRecognitionResult(resultId,reason,text,duration,offset,language,languageDetectionConfidence,speakerId,errorDetails,json,properties){var _this59;_classCallCheck(this,SpeechRecognitionResult);_this59=_super59.call(this,resultId,reason,text,duration,offset,language,languageDetectionConfidence,errorDetails,json,properties);_this59.privSpeakerId=speakerId;return _this59;}/**
     * speaker id from conversation transcription/id scenarios
     * @member SpeechRecognitionResult.prototype.speakerId
     * @function
     * @public
     * @returns {string} id of speaker in given result
     */_createClass(SpeechRecognitionResult,[{key:"speakerId",get:function get(){return this.privSpeakerId;}}]);return SpeechRecognitionResult;}(Exports_js_1.RecognitionResult);exports.SpeechRecognitionResult=SpeechRecognitionResult;/***/},/* 97 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.IntentRecognitionResult=void 0;var Exports_js_1=__webpack_require__(79);/**
 * Intent recognition result.
 * @class
 */var IntentRecognitionResult=/*#__PURE__*/function(_Exports_js_1$SpeechR){_inherits(IntentRecognitionResult,_Exports_js_1$SpeechR);var _super60=_createSuper(IntentRecognitionResult);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param intentId - The intent id.
     * @param resultId - The result id.
     * @param reason - The reason.
     * @param text - The recognized text.
     * @param duration - The duration.
     * @param offset - The offset into the stream.
     * @param language - Primary Language detected, if provided.
     * @param languageDetectionConfidence - Primary Language confidence ("Unknown," "Low," "Medium," "High"...), if provided.
     * @param errorDetails - Error details, if provided.
     * @param json - Additional Json, if provided.
     * @param properties - Additional properties, if provided.
     */function IntentRecognitionResult(intentId,resultId,reason,text,duration,offset,language,languageDetectionConfidence,errorDetails,json,properties){var _this60;_classCallCheck(this,IntentRecognitionResult);_this60=_super60.call(this,resultId,reason,text,duration,offset,language,languageDetectionConfidence,undefined,errorDetails,json,properties);_this60.privIntentId=intentId;return _this60;}/**
     * A String that represents the intent identifier being recognized.
     * @member IntentRecognitionResult.prototype.intentId
     * @function
     * @public
     * @returns {string} A String that represents the intent identifier being recognized.
     */_createClass(IntentRecognitionResult,[{key:"intentId",get:function get(){return this.privIntentId;}}]);return IntentRecognitionResult;}(Exports_js_1.SpeechRecognitionResult);exports.IntentRecognitionResult=IntentRecognitionResult;/***/},/* 98 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.LanguageUnderstandingModelImpl=exports.LanguageUnderstandingModel=void 0;// eslint-disable-next-line max-classes-per-file
var Contracts_js_1=__webpack_require__(64);/**
 * Language understanding model
 * @class LanguageUnderstandingModel
 */var LanguageUnderstandingModel=/*#__PURE__*/function(){/**
     * Creates and initializes a new instance
     * @constructor
     */function LanguageUnderstandingModel(){_classCallCheck(this,LanguageUnderstandingModel);return;}/**
     * Creates an language understanding model using the specified endpoint.
     * @member LanguageUnderstandingModel.fromEndpoint
     * @function
     * @public
     * @param {URL} uri - A String that represents the endpoint of the language understanding model.
     * @returns {LanguageUnderstandingModel} The language understanding model being created.
     */_createClass(LanguageUnderstandingModel,null,[{key:"fromEndpoint",value:function fromEndpoint(uri){Contracts_js_1.Contracts.throwIfNull(uri,"uri");Contracts_js_1.Contracts.throwIfNullOrWhitespace(uri.hostname,"uri");var langModelImp=new LanguageUnderstandingModelImpl();// Need to extract the app ID from the URL.
// URL is in the format: https://<region>.api.cognitive.microsoft.com/luis/v2.0/apps/<Guid>?subscription-key=<key>&timezoneOffset=-360
// Start tearing the string apart.
// region can be extracted from the host name.
var firstDot=uri.host.indexOf(".");if(-1===firstDot){throw new Error("Could not determine region from endpoint");}langModelImp.region=uri.host.substr(0,firstDot);// Now the app ID.
var lastSegment=uri.pathname.lastIndexOf("/")+1;if(-1===lastSegment){throw new Error("Could not determine appId from endpoint");}langModelImp.appId=uri.pathname.substr(lastSegment);// And finally the key.
langModelImp.subscriptionKey=uri.searchParams.get("subscription-key");if(undefined===langModelImp.subscriptionKey){throw new Error("Could not determine subscription key from endpoint");}return langModelImp;}/**
     * Creates an language understanding model using the application id of Language Understanding service.
     * @member LanguageUnderstandingModel.fromAppId
     * @function
     * @public
     * @param {string} appId - A String that represents the application id of Language Understanding service.
     * @returns {LanguageUnderstandingModel} The language understanding model being created.
     */},{key:"fromAppId",value:function fromAppId(appId){Contracts_js_1.Contracts.throwIfNullOrWhitespace(appId,"appId");var langModelImp=new LanguageUnderstandingModelImpl();langModelImp.appId=appId;return langModelImp;}/**
     * Creates a language understanding model using hostname, subscription key and application
     * id of Language Understanding service.
     * @member LanguageUnderstandingModel.fromSubscription
     * @function
     * @public
     * @param {string} subscriptionKey - A String that represents the subscription key of
     * Language Understanding service.
     * @param {string} appId - A String that represents the application id of Language
     * Understanding service.
     * @param {LanguageUnderstandingModel} region - A String that represents the region
     * of the Language Understanding service (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {LanguageUnderstandingModel} The language understanding model being created.
     */},{key:"fromSubscription",value:function fromSubscription(subscriptionKey,appId,region){Contracts_js_1.Contracts.throwIfNullOrWhitespace(subscriptionKey,"subscriptionKey");Contracts_js_1.Contracts.throwIfNullOrWhitespace(appId,"appId");Contracts_js_1.Contracts.throwIfNullOrWhitespace(region,"region");var langModelImp=new LanguageUnderstandingModelImpl();langModelImp.appId=appId;langModelImp.region=region;langModelImp.subscriptionKey=subscriptionKey;return langModelImp;}}]);return LanguageUnderstandingModel;}();exports.LanguageUnderstandingModel=LanguageUnderstandingModel;/**
 * @private
 * @class LanguageUnderstandingModelImpl
 */var LanguageUnderstandingModelImpl=/*#__PURE__*/function(_LanguageUnderstandin){_inherits(LanguageUnderstandingModelImpl,_LanguageUnderstandin);var _super61=_createSuper(LanguageUnderstandingModelImpl);function LanguageUnderstandingModelImpl(){_classCallCheck(this,LanguageUnderstandingModelImpl);return _super61.apply(this,arguments);}return _createClass(LanguageUnderstandingModelImpl);}(LanguageUnderstandingModel);exports.LanguageUnderstandingModelImpl=LanguageUnderstandingModelImpl;/***/},/* 99 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.MeetingTranscriptionEventArgs=exports.ConversationTranscriptionEventArgs=exports.SpeechRecognitionEventArgs=void 0;/* eslint-disable max-classes-per-file */var Exports_js_1=__webpack_require__(79);/**
 * Defines contents of speech recognizing/recognized event.
 * @class SpeechRecognitionEventArgs
 */var SpeechRecognitionEventArgs=/*#__PURE__*/function(_Exports_js_1$Recogni3){_inherits(SpeechRecognitionEventArgs,_Exports_js_1$Recogni3);var _super62=_createSuper(SpeechRecognitionEventArgs);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {SpeechRecognitionResult} result - The speech recognition result.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */function SpeechRecognitionEventArgs(result,offset,sessionId){var _this61;_classCallCheck(this,SpeechRecognitionEventArgs);_this61=_super62.call(this,offset,sessionId);_this61.privResult=result;return _this61;}/**
     * Specifies the recognition result.
     * @member SpeechRecognitionEventArgs.prototype.result
     * @function
     * @public
     * @returns {SpeechRecognitionResult} the recognition result.
     */_createClass(SpeechRecognitionEventArgs,[{key:"result",get:function get(){return this.privResult;}}]);return SpeechRecognitionEventArgs;}(Exports_js_1.RecognitionEventArgs);exports.SpeechRecognitionEventArgs=SpeechRecognitionEventArgs;/**
 * Defines contents of conversation transcribed/transcribing event.
 * @class ConversationTranscriptionEventArgs
 */var ConversationTranscriptionEventArgs=/*#__PURE__*/function(_Exports_js_1$Recogni4){_inherits(ConversationTranscriptionEventArgs,_Exports_js_1$Recogni4);var _super63=_createSuper(ConversationTranscriptionEventArgs);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {ConversationTranscriptionResult} result - The conversation transcription result.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */function ConversationTranscriptionEventArgs(result,offset,sessionId){var _this62;_classCallCheck(this,ConversationTranscriptionEventArgs);_this62=_super63.call(this,offset,sessionId);_this62.privResult=result;return _this62;}/**
     * Specifies the transcription result.
     * @member ConversationTranscription1EventArgs.prototype.result
     * @function
     * @public
     * @returns {ConversationTranscriptionResult} the recognition result.
     */_createClass(ConversationTranscriptionEventArgs,[{key:"result",get:function get(){return this.privResult;}}]);return ConversationTranscriptionEventArgs;}(Exports_js_1.RecognitionEventArgs);exports.ConversationTranscriptionEventArgs=ConversationTranscriptionEventArgs;/**
 * Defines contents of meeting transcribed/transcribing event.
 * @class MeetingTranscriptionEventArgs
 */var MeetingTranscriptionEventArgs=/*#__PURE__*/function(_SpeechRecognitionEve){_inherits(MeetingTranscriptionEventArgs,_SpeechRecognitionEve);var _super64=_createSuper(MeetingTranscriptionEventArgs);function MeetingTranscriptionEventArgs(){_classCallCheck(this,MeetingTranscriptionEventArgs);return _super64.apply(this,arguments);}return _createClass(MeetingTranscriptionEventArgs);}(SpeechRecognitionEventArgs);exports.MeetingTranscriptionEventArgs=MeetingTranscriptionEventArgs;/***/},/* 100 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechRecognitionCanceledEventArgs=void 0;var CancellationEventArgsBase_js_1=__webpack_require__(101);var SpeechRecognitionCanceledEventArgs=/*#__PURE__*/function(_CancellationEventArg){_inherits(SpeechRecognitionCanceledEventArgs,_CancellationEventArg);var _super65=_createSuper(SpeechRecognitionCanceledEventArgs);function SpeechRecognitionCanceledEventArgs(){_classCallCheck(this,SpeechRecognitionCanceledEventArgs);return _super65.apply(this,arguments);}return _createClass(SpeechRecognitionCanceledEventArgs);}(CancellationEventArgsBase_js_1.CancellationEventArgsBase);exports.SpeechRecognitionCanceledEventArgs=SpeechRecognitionCanceledEventArgs;/***/},/* 101 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.CancellationEventArgsBase=void 0;var Exports_js_1=__webpack_require__(79);/**
 * Defines content of a CancellationEvent.
 * @class CancellationEventArgsBase
 */var CancellationEventArgsBase=/*#__PURE__*/function(_Exports_js_1$Recogni5){_inherits(CancellationEventArgsBase,_Exports_js_1$Recogni5);var _super66=_createSuper(CancellationEventArgsBase);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {CancellationReason} reason - The cancellation reason.
     * @param {string} errorDetails - Error details, if provided.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */function CancellationEventArgsBase(reason,errorDetails,errorCode,offset,sessionId){var _this63;_classCallCheck(this,CancellationEventArgsBase);_this63=_super66.call(this,offset,sessionId);_this63.privReason=reason;_this63.privErrorDetails=errorDetails;_this63.privErrorCode=errorCode;return _this63;}/**
     * The reason the recognition was canceled.
     * @member CancellationEventArgsBase.prototype.reason
     * @function
     * @public
     * @returns {CancellationReason} Specifies the reason canceled.
     */_createClass(CancellationEventArgsBase,[{key:"reason",get:function get(){return this.privReason;}/**
     * The error code in case of an unsuccessful operation.
     * @return An error code that represents the error reason.
     */},{key:"errorCode",get:function get(){return this.privErrorCode;}/**
     * In case of an unsuccessful operation, provides details of the occurred error.
     * @member CancellationEventArgsBase.prototype.errorDetails
     * @function
     * @public
     * @returns {string} A String that represents the error details.
     */},{key:"errorDetails",get:function get(){return this.privErrorDetails;}}]);return CancellationEventArgsBase;}(Exports_js_1.RecognitionEventArgs);exports.CancellationEventArgsBase=CancellationEventArgsBase;/***/},/* 102 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.TranslationRecognitionEventArgs=void 0;var Exports_js_1=__webpack_require__(79);/**
 * Translation text result event arguments.
 * @class TranslationRecognitionEventArgs
 */var TranslationRecognitionEventArgs=/*#__PURE__*/function(_Exports_js_1$Recogni6){_inherits(TranslationRecognitionEventArgs,_Exports_js_1$Recogni6);var _super67=_createSuper(TranslationRecognitionEventArgs);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {TranslationRecognitionResult} result - The translation recognition result.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */function TranslationRecognitionEventArgs(result,offset,sessionId){var _this64;_classCallCheck(this,TranslationRecognitionEventArgs);_this64=_super67.call(this,offset,sessionId);_this64.privResult=result;return _this64;}/**
     * Specifies the recognition result.
     * @member TranslationRecognitionEventArgs.prototype.result
     * @function
     * @public
     * @returns {TranslationRecognitionResult} the recognition result.
     */_createClass(TranslationRecognitionEventArgs,[{key:"result",get:function get(){return this.privResult;}}]);return TranslationRecognitionEventArgs;}(Exports_js_1.RecognitionEventArgs);exports.TranslationRecognitionEventArgs=TranslationRecognitionEventArgs;/***/},/* 103 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.TranslationSynthesisEventArgs=void 0;var Exports_js_1=__webpack_require__(79);/**
 * Translation Synthesis event arguments
 * @class TranslationSynthesisEventArgs
 */var TranslationSynthesisEventArgs=/*#__PURE__*/function(_Exports_js_1$Session2){_inherits(TranslationSynthesisEventArgs,_Exports_js_1$Session2);var _super68=_createSuper(TranslationSynthesisEventArgs);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {TranslationSynthesisResult} result - The translation synthesis result.
     * @param {string} sessionId - The session id.
     */function TranslationSynthesisEventArgs(result,sessionId){var _this65;_classCallCheck(this,TranslationSynthesisEventArgs);_this65=_super68.call(this,sessionId);_this65.privResult=result;return _this65;}/**
     * Specifies the translation synthesis result.
     * @member TranslationSynthesisEventArgs.prototype.result
     * @function
     * @public
     * @returns {TranslationSynthesisResult} Specifies the translation synthesis result.
     */_createClass(TranslationSynthesisEventArgs,[{key:"result",get:function get(){return this.privResult;}}]);return TranslationSynthesisEventArgs;}(Exports_js_1.SessionEventArgs);exports.TranslationSynthesisEventArgs=TranslationSynthesisEventArgs;/***/},/* 104 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.TranslationRecognitionResult=void 0;var Exports_js_1=__webpack_require__(79);/**
 * Translation text result.
 * @class TranslationRecognitionResult
 */var TranslationRecognitionResult=/*#__PURE__*/function(_Exports_js_1$SpeechR2){_inherits(TranslationRecognitionResult,_Exports_js_1$SpeechR2);var _super69=_createSuper(TranslationRecognitionResult);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {Translations} translations - The translations.
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} language - Primary Language detected, if provided.
     * @param {string} languageDetectionConfidence - Primary Language confidence ("Unknown," "Low," "Medium," "High"...), if provided.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */function TranslationRecognitionResult(translations,resultId,reason,text,duration,offset,language,languageDetectionConfidence,errorDetails,json,properties){var _this66;_classCallCheck(this,TranslationRecognitionResult);_this66=_super69.call(this,resultId,reason,text,duration,offset,language,languageDetectionConfidence,undefined,errorDetails,json,properties);_this66.privTranslations=translations;return _this66;}_createClass(TranslationRecognitionResult,[{key:"translations",get:/**
     * Presents the translation results. Each item in the dictionary represents
     * a translation result in one of target languages, where the key is the name
     * of the target language, in BCP-47 format, and the value is the translation
     * text in the specified language.
     * @member TranslationRecognitionResult.prototype.translations
     * @function
     * @public
     * @returns {Translations} the current translation map that holds all translations requested.
     */function get(){return this.privTranslations;}}],[{key:"fromSpeechRecognitionResult",value:function fromSpeechRecognitionResult(result){return new TranslationRecognitionResult(undefined,result.resultId,result.reason,result.text,result.duration,result.offset,result.language,result.languageDetectionConfidence,result.errorDetails,result.json,result.properties);}}]);return TranslationRecognitionResult;}(Exports_js_1.SpeechRecognitionResult);exports.TranslationRecognitionResult=TranslationRecognitionResult;/***/},/* 105 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.TranslationSynthesisResult=void 0;/**
 * Defines translation synthesis result, i.e. the voice output of the translated
 * text in the target language.
 * @class TranslationSynthesisResult
 */var TranslationSynthesisResult=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {ResultReason} reason - The synthesis reason.
     * @param {ArrayBuffer} audio - The audio data.
     */function TranslationSynthesisResult(reason,audio){_classCallCheck(this,TranslationSynthesisResult);this.privReason=reason;this.privAudio=audio;}/**
     * Translated text in the target language.
     * @member TranslationSynthesisResult.prototype.audio
     * @function
     * @public
     * @returns {ArrayBuffer} Translated audio in the target language.
     */_createClass(TranslationSynthesisResult,[{key:"audio",get:function get(){return this.privAudio;}/**
     * The synthesis status.
     * @member TranslationSynthesisResult.prototype.reason
     * @function
     * @public
     * @returns {ResultReason} The synthesis status.
     */},{key:"reason",get:function get(){return this.privReason;}}]);return TranslationSynthesisResult;}();exports.TranslationSynthesisResult=TranslationSynthesisResult;/***/},/* 106 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ResultReason=void 0;/**
 * Defines the possible reasons a recognition result might be generated.
 * @class ResultReason
 */var ResultReason;(function(ResultReason){/**
     * Indicates speech could not be recognized. More details
     * can be found in the NoMatchDetails object.
     * @member ResultReason.NoMatch
     */ResultReason[ResultReason["NoMatch"]=0]="NoMatch";/**
     * Indicates that the recognition was canceled. More details
     * can be found using the CancellationDetails object.
     * @member ResultReason.Canceled
     */ResultReason[ResultReason["Canceled"]=1]="Canceled";/**
     * Indicates the speech result contains hypothesis text.
     * @member ResultReason.RecognizedSpeech
     */ResultReason[ResultReason["RecognizingSpeech"]=2]="RecognizingSpeech";/**
     * Indicates the speech result contains final text that has been recognized.
     * Speech Recognition is now complete for this phrase.
     * @member ResultReason.RecognizedSpeech
     */ResultReason[ResultReason["RecognizedSpeech"]=3]="RecognizedSpeech";/**
     * Indicates the speech result contains a finalized acceptance of a provided keyword.
     * Speech recognition will continue unless otherwise configured.
     * @member ResultReason.RecognizedKeyword
     */ResultReason[ResultReason["RecognizedKeyword"]=4]="RecognizedKeyword";/**
     * Indicates the intent result contains hypothesis text and intent.
     * @member ResultReason.RecognizingIntent
     */ResultReason[ResultReason["RecognizingIntent"]=5]="RecognizingIntent";/**
     * Indicates the intent result contains final text and intent.
     * Speech Recognition and Intent determination are now complete for this phrase.
     * @member ResultReason.RecognizedIntent
     */ResultReason[ResultReason["RecognizedIntent"]=6]="RecognizedIntent";/**
     * Indicates the translation result contains hypothesis text and its translation(s).
     * @member ResultReason.TranslatingSpeech
     */ResultReason[ResultReason["TranslatingSpeech"]=7]="TranslatingSpeech";/**
     * Indicates the translation result contains final text and corresponding translation(s).
     * Speech Recognition and Translation are now complete for this phrase.
     * @member ResultReason.TranslatedSpeech
     */ResultReason[ResultReason["TranslatedSpeech"]=8]="TranslatedSpeech";/**
     * Indicates the synthesized audio result contains a non-zero amount of audio data
     * @member ResultReason.SynthesizingAudio
     */ResultReason[ResultReason["SynthesizingAudio"]=9]="SynthesizingAudio";/**
     * Indicates the synthesized audio is now complete for this phrase.
     * @member ResultReason.SynthesizingAudioCompleted
     */ResultReason[ResultReason["SynthesizingAudioCompleted"]=10]="SynthesizingAudioCompleted";/**
     * Indicates the speech synthesis is now started
     * @member ResultReason.SynthesizingAudioStarted
     */ResultReason[ResultReason["SynthesizingAudioStarted"]=11]="SynthesizingAudioStarted";/**
     * Indicates the voice profile is being enrolled and customers need to send more audio to create a voice profile.
     * @member ResultReason.EnrollingVoiceProfile
     */ResultReason[ResultReason["EnrollingVoiceProfile"]=12]="EnrollingVoiceProfile";/**
     * Indicates the voice profile has been enrolled.
     * @member ResultReason.EnrolledVoiceProfile
     */ResultReason[ResultReason["EnrolledVoiceProfile"]=13]="EnrolledVoiceProfile";/**
     * Indicates successful identification of some speakers.
     * @member ResultReason.RecognizedSpeakers
     */ResultReason[ResultReason["RecognizedSpeakers"]=14]="RecognizedSpeakers";/**
     * Indicates successfully verified one speaker.
     * @member ResultReason.RecognizedSpeaker
     */ResultReason[ResultReason["RecognizedSpeaker"]=15]="RecognizedSpeaker";/**
     * Indicates a voice profile has been reset successfully.
     * @member ResultReason.ResetVoiceProfile
     */ResultReason[ResultReason["ResetVoiceProfile"]=16]="ResetVoiceProfile";/**
     * Indicates a voice profile has been deleted successfully.
     * @member ResultReason.DeletedVoiceProfile
     */ResultReason[ResultReason["DeletedVoiceProfile"]=17]="DeletedVoiceProfile";/**
     * Indicates synthesis voices list has been successfully retrieved.
     * @member ResultReason.VoicesListRetrieved
     */ResultReason[ResultReason["VoicesListRetrieved"]=18]="VoicesListRetrieved";/**
     * Indicates the transcription result contains hypothesis text and its translation(s) for
     * other participants in the conversation.
     * @member ResultReason.TranslatingParticipantSpeech
     */ResultReason[ResultReason["TranslatingParticipantSpeech"]=19]="TranslatingParticipantSpeech";/**
     * Indicates the transcription result contains final text and corresponding translation(s)
     * for other participants in the conversation. Speech Recognition and Translation are now
     * complete for this phrase.
     * @member ResultReason.TranslatedParticipantSpeech
     */ResultReason[ResultReason["TranslatedParticipantSpeech"]=20]="TranslatedParticipantSpeech";/**
     * <summary>
     * Indicates the transcription result contains the instant message and corresponding
     * translation(s).
     * @member ResultReason.TranslatedInstantMessage
     */ResultReason[ResultReason["TranslatedInstantMessage"]=21]="TranslatedInstantMessage";/**
     * Indicates the transcription result contains the instant message for other participants
     * in the conversation and corresponding translation(s).
     * @member ResultReason.TranslatedParticipantInstantMessage
     */ResultReason[ResultReason["TranslatedParticipantInstantMessage"]=22]="TranslatedParticipantInstantMessage";})(ResultReason=exports.ResultReason||(exports.ResultReason={}));/***/},/* 107 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechConfigImpl=exports.SpeechConfig=void 0;var Exports_js_1=__webpack_require__(2);var Contracts_js_1=__webpack_require__(64);var Exports_js_2=__webpack_require__(79);/**
 * Speech configuration.
 * @class SpeechConfig
 */var SpeechConfig=/*#__PURE__*/function(){/**
     * Creates and initializes an instance.
     * @constructor
     */function SpeechConfig(){_classCallCheck(this,SpeechConfig);return;}/**
     * Static instance of SpeechConfig returned by passing subscriptionKey and service region.
     * Note: Please use your LanguageUnderstanding subscription key in case you want to use the Intent recognizer.
     * @member SpeechConfig.fromSubscription
     * @function
     * @public
     * @param {string} subscriptionKey - The subscription key.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechConfig} The speech factory
     */_createClass(SpeechConfig,[{key:"close",value:/**
     * Closes the configuration.
     * @member SpeechConfig.prototype.close
     * @function
     * @public
     */ // eslint-disable-next-line @typescript-eslint/no-empty-function
function close(){}}],[{key:"fromSubscription",value:function fromSubscription(subscriptionKey,region){Contracts_js_1.Contracts.throwIfNullOrWhitespace(subscriptionKey,"subscriptionKey");Contracts_js_1.Contracts.throwIfNullOrWhitespace(region,"region");var speechImpl=new SpeechConfigImpl();speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region,region);speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_IntentRegion,region);speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Key,subscriptionKey);return speechImpl;}/**
     * Creates an instance of the speech config with specified endpoint and subscription key.
     * This method is intended only for users who use a non-standard service endpoint or parameters.
     * Note: Please use your LanguageUnderstanding subscription key in case you want to use the Intent recognizer.
     * Note: The query parameters specified in the endpoint URL are not changed, even if they are set by any other APIs.
     * For example, if language is defined in the uri as query parameter "language=de-DE", and also set by
     * SpeechConfig.speechRecognitionLanguage = "en-US", the language setting in uri takes precedence,
     * and the effective language is "de-DE". Only the parameters that are not specified in the
     * endpoint URL can be set by other APIs.
     * Note: To use authorization token with fromEndpoint, pass an empty string to the subscriptionKey in the
     * fromEndpoint method, and then set authorizationToken="token" on the created SpeechConfig instance to
     * use the authorization token.
     * @member SpeechConfig.fromEndpoint
     * @function
     * @public
     * @param {URL} endpoint - The service endpoint to connect to.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization token must be set.
     * @returns {SpeechConfig} A speech factory instance.
     */},{key:"fromEndpoint",value:function fromEndpoint(endpoint,subscriptionKey){Contracts_js_1.Contracts.throwIfNull(endpoint,"endpoint");var speechImpl=new SpeechConfigImpl();speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint,endpoint.href);if(undefined!==subscriptionKey){speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Key,subscriptionKey);}return speechImpl;}/**
     * Creates an instance of the speech config with specified host and subscription key.
     * This method is intended only for users who use a non-default service host. Standard resource path will be assumed.
     * For services with a non-standard resource path or no path at all, use fromEndpoint instead.
     * Note: Query parameters are not allowed in the host URI and must be set by other APIs.
     * Note: To use an authorization token with fromHost, use fromHost(URL),
     * and then set the AuthorizationToken property on the created SpeechConfig instance.
     * Note: Added in version 1.9.0.
     * @member SpeechConfig.fromHost
     * @function
     * @public
     * @param {URL} host - The service endpoint to connect to. Format is "protocol://host:port" where ":port" is optional.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization token must be set.
     * @returns {SpeechConfig} A speech factory instance.
     */},{key:"fromHost",value:function fromHost(hostName,subscriptionKey){Contracts_js_1.Contracts.throwIfNull(hostName,"hostName");var speechImpl=new SpeechConfigImpl();speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,hostName.protocol+"//"+hostName.hostname+(hostName.port===""?"":":"+hostName.port));if(undefined!==subscriptionKey){speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Key,subscriptionKey);}return speechImpl;}/**
     * Creates an instance of the speech factory with specified initial authorization token and region.
     * Note: The caller needs to ensure that the authorization token is valid. Before the authorization token
     * expires, the caller needs to refresh it by calling this setter with a new valid token.
     * Note: Please use a token derived from your LanguageUnderstanding subscription key in case you want
     * to use the Intent recognizer. As configuration values are copied when creating a new recognizer,
     * the new token value will not apply to recognizers that have already been created. For recognizers
     * that have been created before, you need to set authorization token of the corresponding recognizer
     * to refresh the token. Otherwise, the recognizers will encounter errors during recognition.
     * @member SpeechConfig.fromAuthorizationToken
     * @function
     * @public
     * @param {string} authorizationToken - The initial authorization token.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechConfig} A speech factory instance.
     */},{key:"fromAuthorizationToken",value:function fromAuthorizationToken(authorizationToken,region){Contracts_js_1.Contracts.throwIfNull(authorizationToken,"authorizationToken");Contracts_js_1.Contracts.throwIfNullOrWhitespace(region,"region");var speechImpl=new SpeechConfigImpl();speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region,region);speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_IntentRegion,region);speechImpl.authorizationToken=authorizationToken;return speechImpl;}}]);return SpeechConfig;}();exports.SpeechConfig=SpeechConfig;/**
 * @public
 * @class SpeechConfigImpl
 */var SpeechConfigImpl=/*#__PURE__*/function(_SpeechConfig){_inherits(SpeechConfigImpl,_SpeechConfig);var _super70=_createSuper(SpeechConfigImpl);function SpeechConfigImpl(){var _this67;_classCallCheck(this,SpeechConfigImpl);_this67=_super70.call(this);_this67.privProperties=new Exports_js_2.PropertyCollection();_this67.speechRecognitionLanguage="en-US";// Should we have a default?
_this67.outputFormat=Exports_js_2.OutputFormat.Simple;return _this67;}_createClass(SpeechConfigImpl,[{key:"properties",get:function get(){return this.privProperties;}},{key:"endPoint",get:function get(){return new URL(this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint));}},{key:"subscriptionKey",get:function get(){return this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Key);}},{key:"region",get:function get(){return this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region);}},{key:"authorizationToken",get:function get(){return this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token);},set:function set(value){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token,value);}},{key:"speechRecognitionLanguage",get:function get(){return this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage);},set:function set(value){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage,value);}},{key:"autoDetectSourceLanguages",get:function get(){return this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages);},set:function set(value){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,value);}},{key:"outputFormat",get:function get(){return Exports_js_2.OutputFormat[this.privProperties.getProperty(Exports_js_1.OutputFormatPropertyName,undefined)];},set:function set(value){this.privProperties.setProperty(Exports_js_1.OutputFormatPropertyName,Exports_js_2.OutputFormat[value]);}},{key:"endpointId",get:function get(){return this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_EndpointId);},set:function set(value){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_EndpointId,value);}},{key:"setProperty",value:function setProperty(name,value){Contracts_js_1.Contracts.throwIfNull(value,"value");this.privProperties.setProperty(name,value);}},{key:"getProperty",value:function getProperty(name,def){return this.privProperties.getProperty(name,def);}},{key:"setProxy",value:function setProxy(proxyHostName,proxyPort,proxyUserName,proxyPassword){this.setProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_ProxyHostName],proxyHostName);this.setProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_ProxyPort],proxyPort);this.setProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_ProxyUserName],proxyUserName);this.setProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_ProxyPassword],proxyPassword);}},{key:"setServiceProperty",value:function setServiceProperty(name,value){var currentProperties=JSON.parse(this.privProperties.getProperty(Exports_js_1.ServicePropertiesPropertyName,"{}"));currentProperties[name]=value;this.privProperties.setProperty(Exports_js_1.ServicePropertiesPropertyName,JSON.stringify(currentProperties));}},{key:"setProfanity",value:function setProfanity(profanity){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceResponse_ProfanityOption,Exports_js_2.ProfanityOption[profanity]);}},{key:"enableAudioLogging",value:function enableAudioLogging(){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true");}},{key:"requestWordLevelTimestamps",value:function requestWordLevelTimestamps(){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true");this.privProperties.setProperty(Exports_js_1.OutputFormatPropertyName,Exports_js_2.OutputFormat[Exports_js_2.OutputFormat.Detailed]);}},{key:"enableDictation",value:function enableDictation(){this.privProperties.setProperty(Exports_js_1.ForceDictationPropertyName,"true");}},{key:"clone",value:function clone(){var ret=new SpeechConfigImpl();ret.privProperties=this.privProperties.clone();return ret;}},{key:"speechSynthesisLanguage",get:function get(){return this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthLanguage);},set:function set(language){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthLanguage,language);}},{key:"speechSynthesisVoiceName",get:function get(){return this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthVoice);},set:function set(voice){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthVoice,voice);}},{key:"speechSynthesisOutputFormat",get:function get(){return Exports_js_2.SpeechSynthesisOutputFormat[this.privProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthOutputFormat,undefined)];},set:function set(format){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthOutputFormat,Exports_js_2.SpeechSynthesisOutputFormat[format]);}}]);return SpeechConfigImpl;}(SpeechConfig);exports.SpeechConfigImpl=SpeechConfigImpl;/***/},/* 108 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechTranslationConfigImpl=exports.SpeechTranslationConfig=void 0;/* eslint-disable max-classes-per-file */var Exports_js_1=__webpack_require__(2);var Contracts_js_1=__webpack_require__(64);var Exports_js_2=__webpack_require__(79);/**
 * Speech translation configuration.
 * @class SpeechTranslationConfig
 */var SpeechTranslationConfig=/*#__PURE__*/function(_Exports_js_2$SpeechC){_inherits(SpeechTranslationConfig,_Exports_js_2$SpeechC);var _super71=_createSuper(SpeechTranslationConfig);/**
     * Creates an instance of recognizer config.
     */function SpeechTranslationConfig(){_classCallCheck(this,SpeechTranslationConfig);return _super71.call(this);}/**
     * Static instance of SpeechTranslationConfig returned by passing a subscription key and service region.
     * @member SpeechTranslationConfig.fromSubscription
     * @function
     * @public
     * @param {string} subscriptionKey - The subscription key.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechTranslationConfig} The speech translation config.
     */_createClass(SpeechTranslationConfig,null,[{key:"fromSubscription",value:function fromSubscription(subscriptionKey,region){Contracts_js_1.Contracts.throwIfNullOrWhitespace(subscriptionKey,"subscriptionKey");Contracts_js_1.Contracts.throwIfNullOrWhitespace(region,"region");var ret=new SpeechTranslationConfigImpl();ret.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Key,subscriptionKey);ret.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region,region);return ret;}/**
     * Static instance of SpeechTranslationConfig returned by passing authorization token and service region.
     * Note: The caller needs to ensure that the authorization token is valid. Before the authorization token
     * expires, the caller needs to refresh it by setting the property authorizationToken with a new
     * valid token. Otherwise, all the recognizers created by this SpeechTranslationConfig instance
     * will encounter errors during recognition.
     * As configuration values are copied when creating a new recognizer, the new token value will not apply
     * to recognizers that have already been created.
     * For recognizers that have been created before, you need to set authorization token of the corresponding recognizer
     * to refresh the token. Otherwise, the recognizers will encounter errors during recognition.
     * @member SpeechTranslationConfig.fromAuthorizationToken
     * @function
     * @public
     * @param {string} authorizationToken - The authorization token.
     * @param {string} region - The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {SpeechTranslationConfig} The speech translation config.
     */},{key:"fromAuthorizationToken",value:function fromAuthorizationToken(authorizationToken,region){Contracts_js_1.Contracts.throwIfNullOrWhitespace(authorizationToken,"authorizationToken");Contracts_js_1.Contracts.throwIfNullOrWhitespace(region,"region");var ret=new SpeechTranslationConfigImpl();ret.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token,authorizationToken);ret.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region,region);return ret;}/**
     * Creates an instance of the speech config with specified host and subscription key.
     * This method is intended only for users who use a non-default service host. Standard resource path will be assumed.
     * For services with a non-standard resource path or no path at all, use fromEndpoint instead.
     * Note: Query parameters are not allowed in the host URI and must be set by other APIs.
     * Note: To use an authorization token with fromHost, use fromHost(URL),
     * and then set the AuthorizationToken property on the created SpeechConfig instance.
     * Note: Added in version 1.9.0.
     * @member SpeechConfig.fromHost
     * @function
     * @public
     * @param {URL} host - The service endpoint to connect to. Format is "protocol://host:port" where ":port" is optional.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization token must be set.
     * @returns {SpeechConfig} A speech factory instance.
     */},{key:"fromHost",value:function fromHost(hostName,subscriptionKey){Contracts_js_1.Contracts.throwIfNull(hostName,"hostName");var speechImpl=new SpeechTranslationConfigImpl();speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,hostName.protocol+"//"+hostName.hostname+(hostName.port===""?"":":"+hostName.port));if(undefined!==subscriptionKey){speechImpl.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Key,subscriptionKey);}return speechImpl;}/**
     * Creates an instance of the speech translation config with specified endpoint and subscription key.
     * This method is intended only for users who use a non-standard service endpoint or paramters.
     * Note: The query properties specified in the endpoint URL are not changed, even if they are
     * set by any other APIs. For example, if language is defined in the uri as query parameter
     * "language=de-DE", and also set by the speechRecognitionLanguage property, the language
     * setting in uri takes precedence, and the effective language is "de-DE".
     * Only the properties that are not specified in the endpoint URL can be set by other APIs.
     * Note: To use authorization token with fromEndpoint, pass an empty string to the subscriptionKey in the
     * fromEndpoint method, and then set authorizationToken="token" on the created SpeechConfig instance to
     * use the authorization token.
     * @member SpeechTranslationConfig.fromEndpoint
     * @function
     * @public
     * @param {URL} endpoint - The service endpoint to connect to.
     * @param {string} subscriptionKey - The subscription key.
     * @returns {SpeechTranslationConfig} A speech config instance.
     */},{key:"fromEndpoint",value:function fromEndpoint(endpoint,subscriptionKey){Contracts_js_1.Contracts.throwIfNull(endpoint,"endpoint");Contracts_js_1.Contracts.throwIfNull(subscriptionKey,"subscriptionKey");var ret=new SpeechTranslationConfigImpl();ret.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint,endpoint.href);ret.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Key,subscriptionKey);return ret;}}]);return SpeechTranslationConfig;}(Exports_js_2.SpeechConfig);exports.SpeechTranslationConfig=SpeechTranslationConfig;/**
 * @private
 * @class SpeechTranslationConfigImpl
 */var SpeechTranslationConfigImpl=/*#__PURE__*/function(_SpeechTranslationCon){_inherits(SpeechTranslationConfigImpl,_SpeechTranslationCon);var _super72=_createSuper(SpeechTranslationConfigImpl);function SpeechTranslationConfigImpl(){var _this68;_classCallCheck(this,SpeechTranslationConfigImpl);_this68=_super72.call(this);_this68.privSpeechProperties=new Exports_js_2.PropertyCollection();_this68.outputFormat=Exports_js_2.OutputFormat.Simple;return _this68;}/**
     * Gets/Sets the authorization token.
     * If this is set, subscription key is ignored.
     * User needs to make sure the provided authorization token is valid and not expired.
     * @member SpeechTranslationConfigImpl.prototype.authorizationToken
     * @function
     * @public
     * @param {string} value - The authorization token.
     */_createClass(SpeechTranslationConfigImpl,[{key:"authorizationToken",set:function set(value){Contracts_js_1.Contracts.throwIfNullOrWhitespace(value,"value");this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token,value);}/**
     * Sets the speech recognition language.
     * @member SpeechTranslationConfigImpl.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @param {string} value - The authorization token.
     */},{key:"speechRecognitionLanguage",get:/**
     * Gets the speech recognition language.
     * @member SpeechTranslationConfigImpl.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @return {string} The speechRecognitionLanguage.
     */function get(){return this.privSpeechProperties.getProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage]);}/**
     * @member SpeechTranslationConfigImpl.prototype.subscriptionKey
     * @function
     * @public
     */,set:function set(value){Contracts_js_1.Contracts.throwIfNullOrWhitespace(value,"value");this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage,value);}},{key:"subscriptionKey",get:function get(){return this.privSpeechProperties.getProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_Key]);}/**
     * Gets the output format
     * @member SpeechTranslationConfigImpl.prototype.outputFormat
     * @function
     * @public
     */},{key:"outputFormat",get:function get(){// eslint-disable-next-line
return Exports_js_2.OutputFormat[this.privSpeechProperties.getProperty(Exports_js_1.OutputFormatPropertyName,undefined)];}/**
     * Gets/Sets the output format
     * @member SpeechTranslationConfigImpl.prototype.outputFormat
     * @function
     * @public
     */,set:function set(value){this.privSpeechProperties.setProperty(Exports_js_1.OutputFormatPropertyName,Exports_js_2.OutputFormat[value]);}/**
     * Gets the endpoint id.
     * @member SpeechTranslationConfigImpl.prototype.endpointId
     * @function
     * @public
     */},{key:"endpointId",get:function get(){return this.privSpeechProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_EndpointId);}/**
     * Gets/Sets the endpoint id.
     * @member SpeechTranslationConfigImpl.prototype.endpointId
     * @function
     * @public
     */,set:function set(value){this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_EndpointId,value);}/**
     * Add a (text) target language to translate into.
     * @member SpeechTranslationConfigImpl.prototype.addTargetLanguage
     * @function
     * @public
     * @param {string} value - The language such as de-DE
     */},{key:"addTargetLanguage",value:function addTargetLanguage(value){Contracts_js_1.Contracts.throwIfNullOrWhitespace(value,"value");var languages=this.targetLanguages;if(!languages.includes(value)){languages.push(value);this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_TranslationToLanguages,languages.join(","));}}/**
     * Gets the (text) target language to translate into.
     * @member SpeechTranslationConfigImpl.prototype.targetLanguages
     * @function
     * @public
     * @param {string} value - The language such as de-DE
     */},{key:"targetLanguages",get:function get(){if(this.privSpeechProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_TranslationToLanguages,undefined)!==undefined){return this.privSpeechProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",");}else{return[];}}/**
     * Gets the voice name.
     * @member SpeechTranslationConfigImpl.prototype.voiceName
     * @function
     * @public
     */},{key:"voiceName",get:function get(){return this.getProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_TranslationVoice]);}/**
     * Gets/Sets the voice of the translated language, enable voice synthesis output.
     * @member SpeechTranslationConfigImpl.prototype.voiceName
     * @function
     * @public
     * @param {string} value - The name of the voice.
     */,set:function set(value){Contracts_js_1.Contracts.throwIfNullOrWhitespace(value,"value");this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_TranslationVoice,value);}/**
     * Provides the region.
     * @member SpeechTranslationConfigImpl.prototype.region
     * @function
     * @public
     * @returns {string} The region.
     */},{key:"region",get:function get(){return this.privSpeechProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region);}},{key:"setProxy",value:function setProxy(proxyHostName,proxyPort,proxyUserName,proxyPassword){this.setProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_ProxyHostName],proxyHostName);this.setProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_ProxyPort],proxyPort);this.setProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_ProxyUserName],proxyUserName);this.setProperty(Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_ProxyPassword],proxyPassword);}/**
     * Gets an arbitrary property value.
     * @member SpeechTranslationConfigImpl.prototype.getProperty
     * @function
     * @public
     * @param {string} name - The name of the property.
     * @param {string} def - The default value of the property in case it is not set.
     * @returns {string} The value of the property.
     */},{key:"getProperty",value:function getProperty(name,def){return this.privSpeechProperties.getProperty(name,def);}/**
     * Gets/Sets an arbitrary property value.
     * @member SpeechTranslationConfigImpl.prototype.setProperty
     * @function
     * @public
     * @param {string | PropertyId} name - The name of the property to set.
     * @param {string} value - The value of the property.
     */},{key:"setProperty",value:function setProperty(name,value){this.privSpeechProperties.setProperty(name,value);}/**
     * Provides access to custom properties.
     * @member SpeechTranslationConfigImpl.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The properties.
     */},{key:"properties",get:function get(){return this.privSpeechProperties;}/**
     * Dispose of associated resources.
     * @member SpeechTranslationConfigImpl.prototype.close
     * @function
     * @public
     */},{key:"close",value:function close(){return;}},{key:"setServiceProperty",value:function setServiceProperty(name,value){var currentProperties=JSON.parse(this.privSpeechProperties.getProperty(Exports_js_1.ServicePropertiesPropertyName,"{}"));currentProperties[name]=value;this.privSpeechProperties.setProperty(Exports_js_1.ServicePropertiesPropertyName,JSON.stringify(currentProperties));}},{key:"setProfanity",value:function setProfanity(profanity){this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceResponse_ProfanityOption,Exports_js_2.ProfanityOption[profanity]);}},{key:"enableAudioLogging",value:function enableAudioLogging(){this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true");}},{key:"requestWordLevelTimestamps",value:function requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true");}},{key:"enableDictation",value:function enableDictation(){this.privSpeechProperties.setProperty(Exports_js_1.ForceDictationPropertyName,"true");}},{key:"speechSynthesisLanguage",get:function get(){return this.privSpeechProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthLanguage);},set:function set(language){this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthLanguage,language);}},{key:"speechSynthesisVoiceName",get:function get(){return this.privSpeechProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthVoice);},set:function set(voice){this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthVoice,voice);}},{key:"speechSynthesisOutputFormat",get:function get(){// eslint-disable-next-line
return Exports_js_2.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthOutputFormat,undefined)];},set:function set(format){this.privSpeechProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SynthOutputFormat,Exports_js_2.SpeechSynthesisOutputFormat[format]);}}]);return SpeechTranslationConfigImpl;}(SpeechTranslationConfig);exports.SpeechTranslationConfigImpl=SpeechTranslationConfigImpl;/***/},/* 109 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.PropertyCollection=void 0;var Exports_js_1=__webpack_require__(79);/**
 * Represents collection of properties and their values.
 * @class PropertyCollection
 */var PropertyCollection=/*#__PURE__*/function(){function PropertyCollection(){_classCallCheck(this,PropertyCollection);this.privKeys=[];this.privValues=[];}/**
     * Returns the property value in type String.
     * Currently only String, int and bool are allowed.
     * If the name is not available, the specified defaultValue is returned.
     * @member PropertyCollection.prototype.getProperty
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string | number | boolean} def - The default value which is returned if the parameter
     * is not available in the collection.
     * @returns {string} value of the parameter.
     */_createClass(PropertyCollection,[{key:"getProperty",value:function getProperty(key,def){var keyToUse;if(typeof key==="string"){keyToUse=key;}else{keyToUse=Exports_js_1.PropertyId[key];}for(var n=0;n<this.privKeys.length;n++){if(this.privKeys[n]===keyToUse){return this.privValues[n];}}if(def===undefined){return undefined;}return String(def);}/**
     * Sets the String value of the parameter specified by name.
     * @member PropertyCollection.prototype.setProperty
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} value - The value of the parameter.
     */},{key:"setProperty",value:function setProperty(key,value){var keyToUse;if(typeof key==="string"){keyToUse=key;}else{keyToUse=Exports_js_1.PropertyId[key];}for(var n=0;n<this.privKeys.length;n++){if(this.privKeys[n]===keyToUse){this.privValues[n]=value;return;}}this.privKeys.push(keyToUse);this.privValues.push(value);}/**
     * Clones the collection.
     * @member PropertyCollection.prototype.clone
     * @function
     * @public
     * @returns {PropertyCollection} A copy of the collection.
     */},{key:"clone",value:function clone(){var clonedMap=new PropertyCollection();for(var n=0;n<this.privKeys.length;n++){clonedMap.privKeys.push(this.privKeys[n]);clonedMap.privValues.push(this.privValues[n]);}return clonedMap;}/**
     * Merges this set of properties into another, no overwrites.
     * @member PropertyCollection.prototype.mergeTo
     * @function
     * @public
     * @param {PropertyCollection}  destinationCollection - The collection to merge into.
     */},{key:"mergeTo",value:function mergeTo(destinationCollection){var _this69=this;this.privKeys.forEach(function(key){if(destinationCollection.getProperty(key,undefined)===undefined){var value=_this69.getProperty(key);destinationCollection.setProperty(key,value);}});}/**
     * Get the keys in Property Collection.
     * @member PropertyCollection.prototype.keys
     * @function
     * @public
     * @returns {string []} Keys in the collection.
     */},{key:"keys",get:function get(){return this.privKeys;}}]);return PropertyCollection;}();exports.PropertyCollection=PropertyCollection;/***/},/* 110 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.PropertyId=void 0;/**
 * Defines speech property ids.
 * @class PropertyId
 */var PropertyId;(function(PropertyId){/**
     * The Cognitive Services Speech Service subscription Key. If you are using an intent recognizer, you need to
     * specify the LUIS endpoint key for your particular LUIS app. Under normal circumstances, you shouldn't
     * have to use this property directly.
     * Instead, use [[SpeechConfig.fromSubscription]].
     * @member PropertyId.SpeechServiceConnection_Key
     */PropertyId[PropertyId["SpeechServiceConnection_Key"]=0]="SpeechServiceConnection_Key";/**
     * The Cognitive Services Speech Service endpoint (url). Under normal circumstances, you shouldn't
     * have to use this property directly.
     * Instead, use [[SpeechConfig.fromEndpoint]].
     * NOTE: This endpoint is not the same as the endpoint used to obtain an access token.
     * @member PropertyId.SpeechServiceConnection_Endpoint
     */PropertyId[PropertyId["SpeechServiceConnection_Endpoint"]=1]="SpeechServiceConnection_Endpoint";/**
     * The Cognitive Services Speech Service region. Under normal circumstances, you shouldn't have to
     * use this property directly.
     * Instead, use [[SpeechConfig.fromSubscription]], [[SpeechConfig.fromEndpoint]], [[SpeechConfig.fromAuthorizationToken]].
     * @member PropertyId.SpeechServiceConnection_Region
     */PropertyId[PropertyId["SpeechServiceConnection_Region"]=2]="SpeechServiceConnection_Region";/**
     * The Cognitive Services Speech Service authorization token (aka access token). Under normal circumstances,
     * you shouldn't have to use this property directly.
     * Instead, use [[SpeechConfig.fromAuthorizationToken]], [[SpeechRecognizer.authorizationToken]],
     * [[IntentRecognizer.authorizationToken]], [[TranslationRecognizer.authorizationToken]], [[SpeakerRecognizer.authorizationToken]].
     * @member PropertyId.SpeechServiceAuthorization_Token
     */PropertyId[PropertyId["SpeechServiceAuthorization_Token"]=3]="SpeechServiceAuthorization_Token";/**
     * The Cognitive Services Speech Service authorization type. Currently unused.
     * @member PropertyId.SpeechServiceAuthorization_Type
     */PropertyId[PropertyId["SpeechServiceAuthorization_Type"]=4]="SpeechServiceAuthorization_Type";/**
     * The Cognitive Services Speech Service endpoint id. Under normal circumstances, you shouldn't
     * have to use this property directly.
     * Instead, use [[SpeechConfig.endpointId]].
     * NOTE: The endpoint id is available in the Speech Portal, listed under Endpoint Details.
     * @member PropertyId.SpeechServiceConnection_EndpointId
     */PropertyId[PropertyId["SpeechServiceConnection_EndpointId"]=5]="SpeechServiceConnection_EndpointId";/**
     * The list of comma separated languages (BCP-47 format) used as target translation languages. Under normal circumstances,
     * you shouldn't have to use this property directly.
     * Instead use [[SpeechTranslationConfig.addTargetLanguage]],
     * [[SpeechTranslationConfig.targetLanguages]], [[TranslationRecognizer.targetLanguages]].
     * @member PropertyId.SpeechServiceConnection_TranslationToLanguages
     */PropertyId[PropertyId["SpeechServiceConnection_TranslationToLanguages"]=6]="SpeechServiceConnection_TranslationToLanguages";/**
     * The name of the Cognitive Service Text to Speech Service Voice. Under normal circumstances, you shouldn't have to use this
     * property directly.
     * Instead, use [[SpeechTranslationConfig.voiceName]].
     * NOTE: Valid voice names can be found <a href="https://aka.ms/csspeech/voicenames">here</a>.
     * @member PropertyId.SpeechServiceConnection_TranslationVoice
     */PropertyId[PropertyId["SpeechServiceConnection_TranslationVoice"]=7]="SpeechServiceConnection_TranslationVoice";/**
     * Translation features.
     * @member PropertyId.SpeechServiceConnection_TranslationFeatures
     */PropertyId[PropertyId["SpeechServiceConnection_TranslationFeatures"]=8]="SpeechServiceConnection_TranslationFeatures";/**
     * The Language Understanding Service Region. Under normal circumstances, you shouldn't have to use this property directly.
     * Instead, use [[LanguageUnderstandingModel]].
     * @member PropertyId.SpeechServiceConnection_IntentRegion
     */PropertyId[PropertyId["SpeechServiceConnection_IntentRegion"]=9]="SpeechServiceConnection_IntentRegion";/**
     * The host name of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */PropertyId[PropertyId["SpeechServiceConnection_ProxyHostName"]=10]="SpeechServiceConnection_ProxyHostName";/**
     * The port of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */PropertyId[PropertyId["SpeechServiceConnection_ProxyPort"]=11]="SpeechServiceConnection_ProxyPort";/**
     * The user name of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */PropertyId[PropertyId["SpeechServiceConnection_ProxyUserName"]=12]="SpeechServiceConnection_ProxyUserName";/**
     * The password of the proxy server used to connect to the Cognitive Services Speech Service. Only relevant in Node.js environments.
     * You shouldn't have to use this property directly.
     * Instead use <see cref="SpeechConfig.SetProxy(string,int,string,string)"/>.
     * Added in version 1.4.0.
     */PropertyId[PropertyId["SpeechServiceConnection_ProxyPassword"]=13]="SpeechServiceConnection_ProxyPassword";/**
     * The Cognitive Services Speech Service recognition Mode. Can be "INTERACTIVE", "CONVERSATION", "DICTATION".
     * This property is intended to be read-only. The SDK is using it internally.
     * @member PropertyId.SpeechServiceConnection_RecoMode
     */PropertyId[PropertyId["SpeechServiceConnection_RecoMode"]=14]="SpeechServiceConnection_RecoMode";/**
     * The spoken language to be recognized (in BCP-47 format). Under normal circumstances, you shouldn't have to use this property
     * directly.
     * Instead, use [[SpeechConfig.speechRecognitionLanguage]].
     * @member PropertyId.SpeechServiceConnection_RecoLanguage
     */PropertyId[PropertyId["SpeechServiceConnection_RecoLanguage"]=15]="SpeechServiceConnection_RecoLanguage";/**
     * The session id. This id is a universally unique identifier (aka UUID) representing a specific binding of an audio input stream
     * and the underlying speech recognition instance to which it is bound. Under normal circumstances, you shouldn't have to use this
     * property directly.
     * Instead use [[SessionEventArgs.sessionId]].
     * @member PropertyId.Speech_SessionId
     */PropertyId[PropertyId["Speech_SessionId"]=16]="Speech_SessionId";/**
     * The spoken language to be synthesized (e.g. en-US)
     * @member PropertyId.SpeechServiceConnection_SynthLanguage
     */PropertyId[PropertyId["SpeechServiceConnection_SynthLanguage"]=17]="SpeechServiceConnection_SynthLanguage";/**
     * The name of the TTS voice to be used for speech synthesis
     * @member PropertyId.SpeechServiceConnection_SynthVoice
     */PropertyId[PropertyId["SpeechServiceConnection_SynthVoice"]=18]="SpeechServiceConnection_SynthVoice";/**
     * The string to specify TTS output audio format
     * @member PropertyId.SpeechServiceConnection_SynthOutputFormat
     */PropertyId[PropertyId["SpeechServiceConnection_SynthOutputFormat"]=19]="SpeechServiceConnection_SynthOutputFormat";/**
     * The list of comma separated languages used as possible source languages
     * Added in version 1.13.0
     * @member PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages
     */PropertyId[PropertyId["SpeechServiceConnection_AutoDetectSourceLanguages"]=20]="SpeechServiceConnection_AutoDetectSourceLanguages";/**
     * The requested Cognitive Services Speech Service response output format (simple or detailed). Under normal circumstances, you shouldn't have
     * to use this property directly.
     * Instead use [[SpeechConfig.outputFormat]].
     * @member PropertyId.SpeechServiceResponse_RequestDetailedResultTrueFalse
     */PropertyId[PropertyId["SpeechServiceResponse_RequestDetailedResultTrueFalse"]=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse";/**
     * The requested Cognitive Services Speech Service response output profanity level. Currently unused.
     * @member PropertyId.SpeechServiceResponse_RequestProfanityFilterTrueFalse
     */PropertyId[PropertyId["SpeechServiceResponse_RequestProfanityFilterTrueFalse"]=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse";/**
     * The Cognitive Services Speech Service response output (in JSON format). This property is available on recognition result objects only.
     * @member PropertyId.SpeechServiceResponse_JsonResult
     */PropertyId[PropertyId["SpeechServiceResponse_JsonResult"]=23]="SpeechServiceResponse_JsonResult";/**
     * The Cognitive Services Speech Service error details (in JSON format). Under normal circumstances, you shouldn't have to
     * use this property directly. Instead use [[CancellationDetails.errorDetails]].
     * @member PropertyId.SpeechServiceResponse_JsonErrorDetails
     */PropertyId[PropertyId["SpeechServiceResponse_JsonErrorDetails"]=24]="SpeechServiceResponse_JsonErrorDetails";/**
     * The cancellation reason. Currently unused.
     * @member PropertyId.CancellationDetails_Reason
     */PropertyId[PropertyId["CancellationDetails_Reason"]=25]="CancellationDetails_Reason";/**
     * The cancellation text. Currently unused.
     * @member PropertyId.CancellationDetails_ReasonText
     */PropertyId[PropertyId["CancellationDetails_ReasonText"]=26]="CancellationDetails_ReasonText";/**
     * The Cancellation detailed text. Currently unused.
     * @member PropertyId.CancellationDetails_ReasonDetailedText
     */PropertyId[PropertyId["CancellationDetails_ReasonDetailedText"]=27]="CancellationDetails_ReasonDetailedText";/**
     * The Language Understanding Service response output (in JSON format). Available via [[IntentRecognitionResult]]
     * @member PropertyId.LanguageUnderstandingServiceResponse_JsonResult
     */PropertyId[PropertyId["LanguageUnderstandingServiceResponse_JsonResult"]=28]="LanguageUnderstandingServiceResponse_JsonResult";/**
     * The URL string built from speech configuration.
     * This property is intended to be read-only. The SDK is using it internally.
     * NOTE: Added in version 1.7.0.
     */PropertyId[PropertyId["SpeechServiceConnection_Url"]=29]="SpeechServiceConnection_Url";/**
     * The initial silence timeout value (in milliseconds) used by the service.
     * Added in version 1.7.0
     */PropertyId[PropertyId["SpeechServiceConnection_InitialSilenceTimeoutMs"]=30]="SpeechServiceConnection_InitialSilenceTimeoutMs";/**
     * The end silence timeout value (in milliseconds) used by the service.
     * Added in version 1.7.0
     */PropertyId[PropertyId["SpeechServiceConnection_EndSilenceTimeoutMs"]=31]="SpeechServiceConnection_EndSilenceTimeoutMs";/**
     * A duration of detected silence, measured in milliseconds, after which speech-to-text will determine a spoken
     * phrase has ended and generate a final Recognized result. Configuring this timeout may be helpful in situations
     * where spoken input is significantly faster or slower than usual and default segmentation behavior consistently
     * yields results that are too long or too short. Segmentation timeout values that are inappropriately high or low
     * can negatively affect speech-to-text accuracy; this property should be carefully configured and the resulting
     * behavior should be thoroughly validated as intended.
     *
     * For more information about timeout configuration that includes discussion of default behaviors, please visit
     * https://aka.ms/csspeech/timeouts.
     *
     * Added in version 1.21.0.
     */PropertyId[PropertyId["Speech_SegmentationSilenceTimeoutMs"]=32]="Speech_SegmentationSilenceTimeoutMs";/**
     * SegmentationMaximumTimeMs represents the maximum length of a spoken phrase when using the Time segmentation strategy.
     * As the length of a spoken phrase approaches this value, the @member Speech_SegmentationSilenceTimeoutMs will be reduced until either
     * the phrase silence timeout is reached or the phrase reaches the maximum length.
     *
     * Added in version 1.42.0.
     */PropertyId[PropertyId["Speech_SegmentationMaximumTimeMs"]=33]="Speech_SegmentationMaximumTimeMs";/**
     * SegmentationStrategy defines the strategy used to determine when a spoken phrase has ended and a final Recognized result should be generated.
     * Allowed values are "Default", "Time", and "Semantic".
     *
     * Valid values:
     * - "Default": Uses the default strategy and settings as determined by the Speech Service. Suitable for most situations.
     * - "Time": Uses a time-based strategy where the amount of silence between speech determines when to generate a final result.
     * - "Semantic": Uses an AI model to determine the end of a spoken phrase based on the phrase's content.
     *
     * Additional Notes:
     * - When using the Time strategy, @member Speech_SegmentationSilenceTimeoutMs can be adjusted to modify the required silence duration for ending a phrase,
     * and @member Speech_SegmentationMaximumTimeMs can be adjusted to set the maximum length of a spoken phrase.
     * - The Semantic strategy does not have any adjustable properties.
     *
     * Added in version 1.42.0.
     */PropertyId[PropertyId["Speech_SegmentationStrategy"]=34]="Speech_SegmentationStrategy";/**
     * A boolean value specifying whether audio logging is enabled in the service or not.
     * Audio and content logs are stored either in Microsoft-owned storage, or in your own storage account linked
     * to your Cognitive Services subscription (Bring Your Own Storage (BYOS) enabled Speech resource).
     * The logs will be removed after 30 days.
     * Added in version 1.7.0
     */PropertyId[PropertyId["SpeechServiceConnection_EnableAudioLogging"]=35]="SpeechServiceConnection_EnableAudioLogging";/**
     * The speech service connection language identifier mode.
     * Can be "AtStart" (the default), or "Continuous". See Language
     * Identification document https://aka.ms/speech/lid?pivots=programming-language-javascript
     * for more details.
     * Added in 1.25.0
     **/PropertyId[PropertyId["SpeechServiceConnection_LanguageIdMode"]=36]="SpeechServiceConnection_LanguageIdMode";/**
     * A string value representing the desired endpoint version to target for Speech Recognition.
     * Added in version 1.21.0
     */PropertyId[PropertyId["SpeechServiceConnection_RecognitionEndpointVersion"]=37]="SpeechServiceConnection_RecognitionEndpointVersion";/**
    /**
     * A string value the current speaker recognition scenario/mode (TextIndependentIdentification, etc.).
     * Added in version 1.23.0
     */PropertyId[PropertyId["SpeechServiceConnection_SpeakerIdMode"]=38]="SpeechServiceConnection_SpeakerIdMode";/**
     * The requested Cognitive Services Speech Service response output profanity setting.
     * Allowed values are "masked", "removed", and "raw".
     * Added in version 1.7.0.
     */PropertyId[PropertyId["SpeechServiceResponse_ProfanityOption"]=39]="SpeechServiceResponse_ProfanityOption";/**
     * A string value specifying which post processing option should be used by service.
     * Allowed values are "TrueText".
     * Added in version 1.7.0
     */PropertyId[PropertyId["SpeechServiceResponse_PostProcessingOption"]=40]="SpeechServiceResponse_PostProcessingOption";/**
     * A boolean value specifying whether to include word-level timestamps in the response result.
     * Added in version 1.7.0
     */PropertyId[PropertyId["SpeechServiceResponse_RequestWordLevelTimestamps"]=41]="SpeechServiceResponse_RequestWordLevelTimestamps";/**
     * The number of times a word has to be in partial results to be returned.
     * Added in version 1.7.0
     */PropertyId[PropertyId["SpeechServiceResponse_StablePartialResultThreshold"]=42]="SpeechServiceResponse_StablePartialResultThreshold";/**
     * A string value specifying the output format option in the response result. Internal use only.
     * Added in version 1.7.0.
     */PropertyId[PropertyId["SpeechServiceResponse_OutputFormatOption"]=43]="SpeechServiceResponse_OutputFormatOption";/**
     * A boolean value to request for stabilizing translation partial results by omitting words in the end.
     * Added in version 1.7.0.
     */PropertyId[PropertyId["SpeechServiceResponse_TranslationRequestStablePartialResult"]=44]="SpeechServiceResponse_TranslationRequestStablePartialResult";/**
     * A boolean value specifying whether to request WordBoundary events.
     * @member PropertyId.SpeechServiceResponse_RequestWordBoundary
     * Added in version 1.21.0.
     */PropertyId[PropertyId["SpeechServiceResponse_RequestWordBoundary"]=45]="SpeechServiceResponse_RequestWordBoundary";/**
     * A boolean value specifying whether to request punctuation boundary in WordBoundary Events. Default is true.
     * @member PropertyId.SpeechServiceResponse_RequestPunctuationBoundary
     * Added in version 1.21.0.
     */PropertyId[PropertyId["SpeechServiceResponse_RequestPunctuationBoundary"]=46]="SpeechServiceResponse_RequestPunctuationBoundary";/**
     * A boolean value specifying whether to request sentence boundary in WordBoundary Events. Default is false.
     * @member PropertyId.SpeechServiceResponse_RequestSentenceBoundary
     * Added in version 1.21.0.
     */PropertyId[PropertyId["SpeechServiceResponse_RequestSentenceBoundary"]=47]="SpeechServiceResponse_RequestSentenceBoundary";/**
     * Determines if intermediate results contain speaker identification.
     * Allowed values are "true" or "false". If set to "true", the intermediate results will contain speaker identification.
     * The default value if unset or set to an invalid value is "false".
     * This is currently only supported for scenarios using the ConversationTranscriber".
     * @member PropertyId.SpeechServiceResponse_DiarizeIntermediateResults
     * Adding in version 1.41.
     */PropertyId[PropertyId["SpeechServiceResponse_DiarizeIntermediateResults"]=48]="SpeechServiceResponse_DiarizeIntermediateResults";/**
     * Identifier used to connect to the backend service.
     * @member PropertyId.Conversation_ApplicationId
     */PropertyId[PropertyId["Conversation_ApplicationId"]=49]="Conversation_ApplicationId";/**
     * Type of dialog backend to connect to.
     * @member PropertyId.Conversation_DialogType
     */PropertyId[PropertyId["Conversation_DialogType"]=50]="Conversation_DialogType";/**
     * Silence timeout for listening
     * @member PropertyId.Conversation_Initial_Silence_Timeout
     */PropertyId[PropertyId["Conversation_Initial_Silence_Timeout"]=51]="Conversation_Initial_Silence_Timeout";/**
     * From Id to add to speech recognition activities.
     * @member PropertyId.Conversation_From_Id
     */PropertyId[PropertyId["Conversation_From_Id"]=52]="Conversation_From_Id";/**
     * ConversationId for the session.
     * @member PropertyId.Conversation_Conversation_Id
     */PropertyId[PropertyId["Conversation_Conversation_Id"]=53]="Conversation_Conversation_Id";/**
     * Comma separated list of custom voice deployment ids.
     * @member PropertyId.Conversation_Custom_Voice_Deployment_Ids
     */PropertyId[PropertyId["Conversation_Custom_Voice_Deployment_Ids"]=54]="Conversation_Custom_Voice_Deployment_Ids";/**
     * Speech activity template, stamp properties from the template on the activity generated by the service for speech.
     * @member PropertyId.Conversation_Speech_Activity_Template
     * Added in version 1.10.0.
     */PropertyId[PropertyId["Conversation_Speech_Activity_Template"]=55]="Conversation_Speech_Activity_Template";/**
     * Enables or disables the receipt of turn status messages as obtained on the turnStatusReceived event.
     * @member PropertyId.Conversation_Request_Bot_Status_Messages
     * Added in version 1.15.0.
     */PropertyId[PropertyId["Conversation_Request_Bot_Status_Messages"]=56]="Conversation_Request_Bot_Status_Messages";/**
     * Specifies the connection ID to be provided in the Agent configuration message, e.g. a Direct Line token for
     * channel authentication.
     * Added in version 1.15.1.
     */PropertyId[PropertyId["Conversation_Agent_Connection_Id"]=57]="Conversation_Agent_Connection_Id";/**
     * The Cognitive Services Speech Service host (url). Under normal circumstances, you shouldn't have to use this property directly.
     * Instead, use [[SpeechConfig.fromHost]].
     */PropertyId[PropertyId["SpeechServiceConnection_Host"]=58]="SpeechServiceConnection_Host";/**
     * Set the host for service calls to the Conversation Translator REST management and websocket calls.
     */PropertyId[PropertyId["ConversationTranslator_Host"]=59]="ConversationTranslator_Host";/**
     * Optionally set the the host's display name.
     * Used when joining a conversation.
     */PropertyId[PropertyId["ConversationTranslator_Name"]=60]="ConversationTranslator_Name";/**
     * Optionally set a value for the X-CorrelationId request header.
     * Used for troubleshooting errors in the server logs. It should be a valid guid.
     */PropertyId[PropertyId["ConversationTranslator_CorrelationId"]=61]="ConversationTranslator_CorrelationId";/**
     * Set the conversation token to be sent to the speech service. This enables the
     * service to service call from the speech service to the Conversation Translator service for relaying
     * recognitions. For internal use.
     */PropertyId[PropertyId["ConversationTranslator_Token"]=62]="ConversationTranslator_Token";/**
     * The reference text of the audio for pronunciation evaluation.
     * For this and the following pronunciation assessment parameters, see
     * https://docs.microsoft.com/azure/cognitive-services/speech-service/rest-speech-to-text#pronunciation-assessment-parameters for details.
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */PropertyId[PropertyId["PronunciationAssessment_ReferenceText"]=63]="PronunciationAssessment_ReferenceText";/**
     * The point system for pronunciation score calibration (FivePoint or HundredMark).
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */PropertyId[PropertyId["PronunciationAssessment_GradingSystem"]=64]="PronunciationAssessment_GradingSystem";/**
     * The pronunciation evaluation granularity (Phoneme, Word, or FullText).
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */PropertyId[PropertyId["PronunciationAssessment_Granularity"]=65]="PronunciationAssessment_Granularity";/**
     * Defines if enable miscue calculation.
     * With this enabled, the pronounced words will be compared to the reference text,
     * and will be marked with omission/insertion based on the comparison. The default setting is False.
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */PropertyId[PropertyId["PronunciationAssessment_EnableMiscue"]=66]="PronunciationAssessment_EnableMiscue";/**
     * The json string of pronunciation assessment parameters
     * Under normal circumstances, you shouldn't have to use this property directly.
     * Added in version 1.15.0
     */PropertyId[PropertyId["PronunciationAssessment_Json"]=67]="PronunciationAssessment_Json";/**
     * Pronunciation assessment parameters.
     * This property is intended to be read-only. The SDK is using it internally.
     * Added in version 1.15.0
     */PropertyId[PropertyId["PronunciationAssessment_Params"]=68]="PronunciationAssessment_Params";/**
     * Version of Speaker Recognition API to use.
     * Added in version 1.18.0
     */PropertyId[PropertyId["SpeakerRecognition_Api_Version"]=69]="SpeakerRecognition_Api_Version";/**
     * Specifies whether to allow load of data URL for web worker
     * Allowed values are "off" and "on". Default is "on".
     * Added in version 1.32.0
     */PropertyId[PropertyId["WebWorkerLoadType"]=70]="WebWorkerLoadType";/**
     * Talking avatar service WebRTC session description protocol.
     * This property is intended to be read-only. The SDK is using it internally.
     * Added in version 1.33.0
     */PropertyId[PropertyId["TalkingAvatarService_WebRTC_SDP"]=71]="TalkingAvatarService_WebRTC_SDP";})(PropertyId=exports.PropertyId||(exports.PropertyId={}));/***/},/* 111 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.Recognizer=void 0;var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(4);var Contracts_js_1=__webpack_require__(64);var Exports_js_3=__webpack_require__(79);/**
 * Defines the base class Recognizer which mainly contains common event handlers.
 * @class Recognizer
 */var Recognizer=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of a Recognizer
     * @constructor
     * @param {AudioConfig} audioInput - An optional audio input stream associated with the recognizer
     * @param {PropertyCollection} properties - A set of properties to set on the recognizer
     * @param {IConnectionFactory} connectionFactory - The factory class used to create a custom IConnection for the recognizer
     */function Recognizer(audioConfig,properties,connectionFactory){_classCallCheck(this,Recognizer);this.audioConfig=audioConfig!==undefined?audioConfig:Exports_js_3.AudioConfig.fromDefaultMicrophoneInput();this.privDisposed=false;this.privProperties=properties.clone();this.privConnectionFactory=connectionFactory;this.implCommonRecognizerSetup();}/**
     * Dispose of associated resources.
     * @member Recognizer.prototype.close
     * @function
     * @public
     */_createClass(Recognizer,[{key:"close",value:function close(cb,errorCb){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposed);Exports_js_2.marshalPromiseToCallbacks(this.dispose(true),cb,errorCb);}/**
     * @Internal
     * Internal data member to support fromRecognizer* pattern methods on other classes.
     * Do not use externally, object returned will change without warning or notice.
     */},{key:"internalData",get:function get(){return this.privReco;}/**
     * This method performs cleanup of resources.
     * The Boolean parameter disposing indicates whether the method is called
     * from Dispose (if disposing is true) or from the finalizer (if disposing is false).
     * Derived classes should override this method to dispose resource if needed.
     * @member Recognizer.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - Flag to request disposal.
     */},{key:"dispose",value:function(){var _dispose3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee18(disposing){return _regeneratorRuntime().wrap(function _callee18$(_context18){while(1)switch(_context18.prev=_context18.next){case 0:if(!this.privDisposed){_context18.next=2;break;}return _context18.abrupt("return");case 2:this.privDisposed=true;if(!disposing){_context18.next=9;break;}if(!this.privReco){_context18.next=9;break;}_context18.next=7;return this.privReco.audioSource.turnOff();case 7:_context18.next=9;return this.privReco.dispose();case 9:case"end":return _context18.stop();}},_callee18,this);}));function dispose(_x13){return _dispose3.apply(this,arguments);}return dispose;}()/**
     * This method returns the current state of the telemetry setting.
     * @member Recognizer.prototype.telemetryEnabled
     * @function
     * @public
     * @returns true if the telemetry is enabled, false otherwise.
     */},{key:"implCommonRecognizerSetup",value:// Does the generic recognizer setup that is common across all recognizer types.
function implCommonRecognizerSetup(){var osPlatform=typeof window!=="undefined"?"Browser":"Node";var osName="unknown";var osVersion="unknown";if(typeof navigator!=="undefined"){osPlatform=osPlatform+"/"+navigator.platform;osName=navigator.userAgent;osVersion=navigator.appVersion;}var recognizerConfig=this.createRecognizerConfig(new Exports_js_1.SpeechServiceConfig(new Exports_js_1.Context(new Exports_js_1.OS(osPlatform,osName,osVersion))));this.privReco=this.createServiceRecognizer(Recognizer.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,recognizerConfig);}},{key:"recognizeOnceAsyncImpl",value:function(){var _recognizeOnceAsyncImpl=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee19(recognitionMode){var ret,result;return _regeneratorRuntime().wrap(function _callee19$(_context19){while(1)switch(_context19.prev=_context19.next){case 0:Contracts_js_1.Contracts.throwIfDisposed(this.privDisposed);ret=new Exports_js_2.Deferred();_context19.next=4;return this.implRecognizerStop();case 4:_context19.next=6;return this.privReco.recognize(recognitionMode,ret.resolve,ret.reject);case 6:_context19.next=8;return ret.promise;case 8:result=_context19.sent;_context19.next=11;return this.implRecognizerStop();case 11:return _context19.abrupt("return",result);case 12:case"end":return _context19.stop();}},_callee19,this);}));function recognizeOnceAsyncImpl(_x14){return _recognizeOnceAsyncImpl.apply(this,arguments);}return recognizeOnceAsyncImpl;}()},{key:"startContinuousRecognitionAsyncImpl",value:function(){var _startContinuousRecognitionAsyncImpl=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee20(recognitionMode){return _regeneratorRuntime().wrap(function _callee20$(_context20){while(1)switch(_context20.prev=_context20.next){case 0:Contracts_js_1.Contracts.throwIfDisposed(this.privDisposed);_context20.next=3;return this.implRecognizerStop();case 3:_context20.next=5;return this.privReco.recognize(recognitionMode,undefined,undefined);case 5:case"end":return _context20.stop();}},_callee20,this);}));function startContinuousRecognitionAsyncImpl(_x15){return _startContinuousRecognitionAsyncImpl.apply(this,arguments);}return startContinuousRecognitionAsyncImpl;}()},{key:"stopContinuousRecognitionAsyncImpl",value:function(){var _stopContinuousRecognitionAsyncImpl=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee21(){return _regeneratorRuntime().wrap(function _callee21$(_context21){while(1)switch(_context21.prev=_context21.next){case 0:Contracts_js_1.Contracts.throwIfDisposed(this.privDisposed);_context21.next=3;return this.implRecognizerStop();case 3:case"end":return _context21.stop();}},_callee21,this);}));function stopContinuousRecognitionAsyncImpl(){return _stopContinuousRecognitionAsyncImpl.apply(this,arguments);}return stopContinuousRecognitionAsyncImpl;}()},{key:"implRecognizerStop",value:function(){var _implRecognizerStop=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee22(){return _regeneratorRuntime().wrap(function _callee22$(_context22){while(1)switch(_context22.prev=_context22.next){case 0:if(!this.privReco){_context22.next=3;break;}_context22.next=3;return this.privReco.stopRecognizing();case 3:return _context22.abrupt("return");case 4:case"end":return _context22.stop();}},_callee22,this);}));function implRecognizerStop(){return _implRecognizerStop.apply(this,arguments);}return implRecognizerStop;}()}],[{key:"telemetryEnabled",get:function get(){return Exports_js_1.ServiceRecognizerBase.telemetryDataEnabled;}/**
     * This method globally enables or disables telemetry.
     * @member Recognizer.prototype.enableTelemetry
     * @function
     * @public
     * @param enabled - Global setting for telemetry collection.
     * If set to true, telemetry information like microphone errors,
     * recognition errors are collected and sent to Microsoft.
     * If set to false, no telemetry is sent to Microsoft.
     */},{key:"enableTelemetry",value:function enableTelemetry(enabled){Exports_js_1.ServiceRecognizerBase.telemetryDataEnabled=enabled;}},{key:"getAuthFromProperties",value:function getAuthFromProperties(properties){var subscriptionKey=properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Key,undefined);var authentication=subscriptionKey&&subscriptionKey!==""?new Exports_js_1.CognitiveSubscriptionKeyAuthentication(subscriptionKey):new Exports_js_1.CognitiveTokenAuthentication(function(){var authorizationToken=properties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,undefined);return Promise.resolve(authorizationToken);},function(){var authorizationToken=properties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,undefined);return Promise.resolve(authorizationToken);});return authentication;}}]);return Recognizer;}();exports.Recognizer=Recognizer;/***/},/* 112 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechRecognizer=void 0;var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(4);var Contracts_js_1=__webpack_require__(64);var Exports_js_3=__webpack_require__(79);/**
 * Performs speech recognition from microphone, file, or other audio input streams, and gets transcribed text as result.
 * @class SpeechRecognizer
 */var SpeechRecognizer=/*#__PURE__*/function(_Exports_js_3$Recogni){_inherits(SpeechRecognizer,_Exports_js_3$Recogni);var _super73=_createSuper(SpeechRecognizer);/**
     * SpeechRecognizer constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - an set of initial properties for this recognizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */function SpeechRecognizer(speechConfig,audioConfig){var _this70;_classCallCheck(this,SpeechRecognizer);var speechConfigImpl=speechConfig;Contracts_js_1.Contracts.throwIfNull(speechConfigImpl,"speechConfig");Contracts_js_1.Contracts.throwIfNullOrWhitespace(speechConfigImpl.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage),Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage]);_this70=_super73.call(this,audioConfig,speechConfigImpl.properties,new Exports_js_1.SpeechConnectionFactory());_this70.privDisposedRecognizer=false;return _this70;}/**
     * SpeechRecognizer constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - an set of initial properties for this recognizer
     * @param {AutoDetectSourceLanguageConfig} autoDetectSourceLanguageConfig - An source language detection configuration associated with the recognizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */_createClass(SpeechRecognizer,[{key:"endpointId",get:/**
     * Gets the endpoint id of a customized speech model that is used for speech recognition.
     * @member SpeechRecognizer.prototype.endpointId
     * @function
     * @public
     * @returns {string} the endpoint id of a customized speech model that is used for speech recognition.
     */function get(){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer);return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000");}/**
     * Gets the authorization token used to communicate with the service.
     * @member SpeechRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */},{key:"authorizationToken",get:function get(){return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token);}/**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member SpeechRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */,set:function set(token){Contracts_js_1.Contracts.throwIfNullOrWhitespace(token,"token");this.properties.setProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,token);}/**
     * Gets the spoken language of recognition.
     * @member SpeechRecognizer.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @returns {string} The spoken language of recognition.
     */},{key:"speechRecognitionLanguage",get:function get(){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer);return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage);}/**
     * Gets the output format of recognition.
     * @member SpeechRecognizer.prototype.outputFormat
     * @function
     * @public
     * @returns {OutputFormat} The output format of recognition.
     */},{key:"outputFormat",get:function get(){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer);if(this.properties.getProperty(Exports_js_1.OutputFormatPropertyName,Exports_js_3.OutputFormat[Exports_js_3.OutputFormat.Simple])===Exports_js_3.OutputFormat[Exports_js_3.OutputFormat.Simple]){return Exports_js_3.OutputFormat.Simple;}else{return Exports_js_3.OutputFormat.Detailed;}}/**
     * The collection of properties and their values defined for this SpeechRecognizer.
     * @member SpeechRecognizer.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this SpeechRecognizer.
     */},{key:"properties",get:function get(){return this.privProperties;}/**
     * Starts speech recognition, and stops after the first utterance is recognized.
     * The task returns the recognition text as result.
     * Note: RecognizeOnceAsync() returns when the first utterance has been recognized,
     * so it is suitable only for single shot recognition
     * like command or query. For long-running recognition, use StartContinuousRecognitionAsync() instead.
     * @member SpeechRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the SpeechRecognitionResult.
     * @param err - Callback invoked in case of an error.
     */},{key:"recognizeOnceAsync",value:function recognizeOnceAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(Exports_js_1.RecognitionMode.Interactive),cb,err);}/**
     * Starts speech recognition, until stopContinuousRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * @member SpeechRecognizer.prototype.startContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */},{key:"startContinuousRecognitionAsync",value:function startContinuousRecognitionAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(Exports_js_1.RecognitionMode.Conversation),cb,err);}/**
     * Stops continuous speech recognition.
     * @member SpeechRecognizer.prototype.stopContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */},{key:"stopContinuousRecognitionAsync",value:function stopContinuousRecognitionAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),cb,err);}/**
     * Starts speech recognition with keyword spotting, until
     * stopKeywordRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * Note: Key word spotting functionality is only available on the
     * Speech Devices SDK. This functionality is currently not included in the SDK itself.
     * @member SpeechRecognizer.prototype.startKeywordRecognitionAsync
     * @function
     * @public
     * @param {KeywordRecognitionModel} model The keyword recognition model that
     * specifies the keyword to be recognized.
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */},{key:"startKeywordRecognitionAsync",value:function startKeywordRecognitionAsync(model,cb,err){Contracts_js_1.Contracts.throwIfNull(model,"model");if(!!err){err("Not yet implemented.");}}/**
     * Stops continuous speech recognition.
     * Note: Key word spotting functionality is only available on the
     * Speech Devices SDK. This functionality is currently not included in the SDK itself.
     * @member SpeechRecognizer.prototype.stopKeywordRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */},{key:"stopKeywordRecognitionAsync",value:function stopKeywordRecognitionAsync(cb){if(!!cb){cb();}}/**
     * closes all external resources held by an instance of this class.
     * @member SpeechRecognizer.prototype.close
     * @function
     * @public
     */},{key:"close",value:function close(cb,errorCb){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer);Exports_js_2.marshalPromiseToCallbacks(this.dispose(true),cb,errorCb);}/**
     * Disposes any resources held by the object.
     * @member SpeechRecognizer.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - true if disposing the object.
     */},{key:"dispose",value:function(){var _dispose4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee23(disposing){return _regeneratorRuntime().wrap(function _callee23$(_context23){while(1)switch(_context23.prev=_context23.next){case 0:if(!this.privDisposedRecognizer){_context23.next=2;break;}return _context23.abrupt("return");case 2:if(!disposing){_context23.next=6;break;}this.privDisposedRecognizer=true;_context23.next=6;return this.implRecognizerStop();case 6:_context23.next=8;return _get(_getPrototypeOf(SpeechRecognizer.prototype),"dispose",this).call(this,disposing);case 8:case"end":return _context23.stop();}},_callee23,this);}));function dispose(_x16){return _dispose4.apply(this,arguments);}return dispose;}()},{key:"createRecognizerConfig",value:function createRecognizerConfig(speechConfig){return new Exports_js_1.RecognizerConfig(speechConfig,this.privProperties);}},{key:"createServiceRecognizer",value:function createServiceRecognizer(authentication,connectionFactory,audioConfig,recognizerConfig){var configImpl=audioConfig;return new Exports_js_1.SpeechServiceRecognizer(authentication,connectionFactory,configImpl,recognizerConfig,this);}}],[{key:"FromConfig",value:function FromConfig(speechConfig,autoDetectSourceLanguageConfig,audioConfig){var speechConfigImpl=speechConfig;autoDetectSourceLanguageConfig.properties.mergeTo(speechConfigImpl.properties);var recognizer=new SpeechRecognizer(speechConfig,audioConfig);return recognizer;}}]);return SpeechRecognizer;}(Exports_js_3.Recognizer);exports.SpeechRecognizer=SpeechRecognizer;/***/},/* 113 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.IntentRecognizer=void 0;var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(4);var Contracts_js_1=__webpack_require__(64);var Exports_js_3=__webpack_require__(79);/**
 * Intent recognizer.
 * @class
 */var IntentRecognizer=/*#__PURE__*/function(_Exports_js_3$Recogni2){_inherits(IntentRecognizer,_Exports_js_3$Recogni2);var _super74=_createSuper(IntentRecognizer);/**
     * Initializes an instance of the IntentRecognizer.
     * @constructor
     * @param {SpeechConfig} speechConfig - The set of configuration properties.
     * @param {AudioConfig} audioConfig - An optional audio input config associated with the recognizer
     */function IntentRecognizer(speechConfig,audioConfig){var _this71;_classCallCheck(this,IntentRecognizer);Contracts_js_1.Contracts.throwIfNullOrUndefined(speechConfig,"speechConfig");var configImpl=speechConfig;Contracts_js_1.Contracts.throwIfNullOrUndefined(configImpl,"speechConfig");_this71=_super74.call(this,audioConfig,configImpl.properties,new Exports_js_1.IntentConnectionFactory());_this71.privAddedIntents=[];_this71.privAddedLmIntents={};_this71.privDisposedIntentRecognizer=false;_this71.privProperties=configImpl.properties;Contracts_js_1.Contracts.throwIfNullOrWhitespace(_this71.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage),Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage]);return _this71;}/**
     * Gets the spoken language of recognition.
     * @member IntentRecognizer.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @returns {string} the spoken language of recognition.
     */_createClass(IntentRecognizer,[{key:"speechRecognitionLanguage",get:function get(){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer);return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage);}/**
     * Gets the authorization token used to communicate with the service.
     * @member IntentRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */},{key:"authorizationToken",get:function get(){return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token);}/**
     * Gets/Sets the authorization token used to communicate with the service.
     * Note: Please use a token derived from your LanguageUnderstanding subscription key for the Intent recognizer.
     * @member IntentRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @param {string} value - Authorization token.
     */,set:function set(value){this.properties.setProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,value);}/**
     * The collection of properties and their values defined for this IntentRecognizer.
     * @member IntentRecognizer.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their
     * values defined for this IntentRecognizer.
     */},{key:"properties",get:function get(){return this.privProperties;}/**
     * Starts intent recognition, and stops after the first utterance is recognized.
     * The task returns the recognition text and intent as result.
     * Note: RecognizeOnceAsync() returns when the first utterance has been recognized,
     * so it is suitable only for single shot recognition like command or query.
     * For long-running recognition, use StartContinuousRecognitionAsync() instead.
     * @member IntentRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the recognition has finished with an IntentRecognitionResult.
     * @param err - Callback invoked in case of an error.
     */},{key:"recognizeOnceAsync",value:function recognizeOnceAsync(cb,err){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer);if(Object.keys(this.privAddedLmIntents).length!==0||undefined!==this.privUmbrellaIntent){var context=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",context.Intent);this.privReco.dynamicGrammar.addReferenceGrammar(context.ReferenceGrammars);var intentReco=this.privReco;intentReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent);}Exports_js_2.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(Exports_js_1.RecognitionMode.Interactive),cb,err);}/**
     * Starts speech recognition, until stopContinuousRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * @member IntentRecognizer.prototype.startContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */},{key:"startContinuousRecognitionAsync",value:function startContinuousRecognitionAsync(cb,err){if(Object.keys(this.privAddedLmIntents).length!==0||undefined!==this.privUmbrellaIntent){var context=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",context.Intent);this.privReco.dynamicGrammar.addReferenceGrammar(context.ReferenceGrammars);var intentReco=this.privReco;intentReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent);}Exports_js_2.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(Exports_js_1.RecognitionMode.Conversation),cb,err);}/**
     * Stops continuous intent recognition.
     * @member IntentRecognizer.prototype.stopContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */},{key:"stopContinuousRecognitionAsync",value:function stopContinuousRecognitionAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),cb,err);}/**
     * Starts speech recognition with keyword spotting, until stopKeywordRecognitionAsync() is called.
     * User must subscribe to events to receive recognition results.
     * Note: Key word spotting functionality is only available on the Speech Devices SDK.
     * This functionality is currently not included in the SDK itself.
     * @member IntentRecognizer.prototype.startKeywordRecognitionAsync
     * @function
     * @public
     * @param {KeywordRecognitionModel} model - The keyword recognition model that specifies the keyword to be recognized.
     * @param cb - Callback invoked once the recognition has started.
     * @param err - Callback invoked in case of an error.
     */},{key:"startKeywordRecognitionAsync",value:function startKeywordRecognitionAsync(model,cb,err){Contracts_js_1.Contracts.throwIfNull(model,"model");if(!!err){err("Not yet implemented.");}}/**
     * Stops continuous speech recognition.
     * Note: Key word spotting functionality is only available on the Speech Devices SDK.
     * This functionality is currently not included in the SDK itself.
     * @member IntentRecognizer.prototype.stopKeywordRecognitionAsync
     * @function
     * @public
     * @param cb - Callback invoked once the recognition has stopped.
     * @param err - Callback invoked in case of an error.
     */},{key:"stopKeywordRecognitionAsync",value:function stopKeywordRecognitionAsync(cb,err){if(!!cb){try{cb();}catch(e){if(!!err){err(e);}}}}/**
     * Adds a phrase that should be recognized as intent.
     * @member IntentRecognizer.prototype.addIntent
     * @function
     * @public
     * @param {string} intentId - A String that represents the identifier of the intent to be recognized.
     * @param {string} phrase - A String that specifies the phrase representing the intent.
     */},{key:"addIntent",value:function addIntent(simplePhrase,intentId){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer);Contracts_js_1.Contracts.throwIfNullOrWhitespace(intentId,"intentId");Contracts_js_1.Contracts.throwIfNullOrWhitespace(simplePhrase,"simplePhrase");this.privAddedIntents.push([intentId,simplePhrase]);}/**
     * Adds an intent from Language Understanding service for recognition.
     * @member IntentRecognizer.prototype.addIntentWithLanguageModel
     * @function
     * @public
     * @param {string} intentId - A String that represents the identifier of the intent
     * to be recognized. Ignored if intentName is empty.
     * @param {string} model - The intent model from Language Understanding service.
     * @param {string} intentName - The intent name defined in the intent model. If it
     * is empty, all intent names defined in the model will be added.
     */},{key:"addIntentWithLanguageModel",value:function addIntentWithLanguageModel(intentId,model,intentName){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer);Contracts_js_1.Contracts.throwIfNullOrWhitespace(intentId,"intentId");Contracts_js_1.Contracts.throwIfNull(model,"model");var modelImpl=model;Contracts_js_1.Contracts.throwIfNullOrWhitespace(modelImpl.appId,"model.appId");this.privAddedLmIntents[intentId]=new Exports_js_1.AddedLmIntent(modelImpl,intentName);}/**
     * @summary Adds all intents from the specified Language Understanding Model.
     * @member IntentRecognizer.prototype.addAllIntents
     * @function
     * @public
     * @function
     * @public
     * @param {LanguageUnderstandingModel} model - The language understanding model containing the intents.
     * @param {string} intentId - A custom id String to be returned in the IntentRecognitionResult's getIntentId() method.
     */},{key:"addAllIntents",value:function addAllIntents(model,intentId){Contracts_js_1.Contracts.throwIfNull(model,"model");var modelImpl=model;Contracts_js_1.Contracts.throwIfNullOrWhitespace(modelImpl.appId,"model.appId");this.privUmbrellaIntent=new Exports_js_1.AddedLmIntent(modelImpl,intentId);}/**
     * closes all external resources held by an instance of this class.
     * @member IntentRecognizer.prototype.close
     * @function
     * @public
     */},{key:"close",value:function close(cb,errorCb){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer);Exports_js_2.marshalPromiseToCallbacks(this.dispose(true),cb,errorCb);}},{key:"createRecognizerConfig",value:function createRecognizerConfig(speechConfig){return new Exports_js_1.RecognizerConfig(speechConfig,this.privProperties);}},{key:"createServiceRecognizer",value:function createServiceRecognizer(authentication,connectionFactory,audioConfig,recognizerConfig){var audioImpl=audioConfig;return new Exports_js_1.IntentServiceRecognizer(authentication,connectionFactory,audioImpl,recognizerConfig,this);}},{key:"dispose",value:function(){var _dispose5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee24(disposing){return _regeneratorRuntime().wrap(function _callee24$(_context24){while(1)switch(_context24.prev=_context24.next){case 0:if(!this.privDisposedIntentRecognizer){_context24.next=2;break;}return _context24.abrupt("return");case 2:if(!disposing){_context24.next=6;break;}this.privDisposedIntentRecognizer=true;_context24.next=6;return _get(_getPrototypeOf(IntentRecognizer.prototype),"dispose",this).call(this,disposing);case 6:case"end":return _context24.stop();}},_callee24,this);}));function dispose(_x17){return _dispose5.apply(this,arguments);}return dispose;}()},{key:"buildSpeechContext",value:function buildSpeechContext(){var appId;var region;var subscriptionKey;var refGrammers=[];if(undefined!==this.privUmbrellaIntent){appId=this.privUmbrellaIntent.modelImpl.appId;region=this.privUmbrellaIntent.modelImpl.region;subscriptionKey=this.privUmbrellaIntent.modelImpl.subscriptionKey;}// Build the reference grammer array.
for(var _i3=0,_Object$keys=Object.keys(this.privAddedLmIntents);_i3<_Object$keys.length;_i3++){var intentId=_Object$keys[_i3];var addedLmIntent=this.privAddedLmIntents[intentId];// validate all the same model, region, and key...
if(appId===undefined){appId=addedLmIntent.modelImpl.appId;}else{if(appId!==addedLmIntent.modelImpl.appId){throw new Error("Intents must all be from the same LUIS model");}}if(region===undefined){region=addedLmIntent.modelImpl.region;}else{if(region!==addedLmIntent.modelImpl.region){throw new Error("Intents must all be from the same LUIS model in a single region");}}if(subscriptionKey===undefined){subscriptionKey=addedLmIntent.modelImpl.subscriptionKey;}else{if(subscriptionKey!==addedLmIntent.modelImpl.subscriptionKey){throw new Error("Intents must all use the same subscription key");}}var grammer="luis/"+appId+"-PRODUCTION#"+intentId;refGrammers.push(grammer);}return{Intent:{id:appId,key:subscriptionKey===undefined?this.privProperties.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_Key]):subscriptionKey,provider:"LUIS"},ReferenceGrammars:undefined===this.privUmbrellaIntent?refGrammers:["luis/"+appId+"-PRODUCTION"]};}}]);return IntentRecognizer;}(Exports_js_3.Recognizer);exports.IntentRecognizer=IntentRecognizer;/***/},/* 114 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.VoiceProfileType=void 0;/**
 * Output format
 * @class VoiceProfileType
 */var VoiceProfileType;(function(VoiceProfileType){/**
     * Text independent speaker identification
     * @member VoiceProfileType.TextIndependentIdentification
     */VoiceProfileType[VoiceProfileType["TextIndependentIdentification"]=0]="TextIndependentIdentification";/**
     * Text dependent speaker verification
     * @member VoiceProfileType.TextDependentVerification
     */VoiceProfileType[VoiceProfileType["TextDependentVerification"]=1]="TextDependentVerification";/**
     * Text independent speaker verification
     * @member VoiceProfileType.TextIndependentVerification
     */VoiceProfileType[VoiceProfileType["TextIndependentVerification"]=2]="TextIndependentVerification";})(VoiceProfileType=exports.VoiceProfileType||(exports.VoiceProfileType={}));/***/},/* 115 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.TranslationRecognizer=void 0;var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(4);var Connection_js_1=__webpack_require__(116);var Contracts_js_1=__webpack_require__(64);var Exports_js_3=__webpack_require__(79);/**
 * Translation recognizer
 * @class TranslationRecognizer
 */var TranslationRecognizer=/*#__PURE__*/function(_Exports_js_3$Recogni3){_inherits(TranslationRecognizer,_Exports_js_3$Recogni3);var _super75=_createSuper(TranslationRecognizer);/**
     * Initializes an instance of the TranslationRecognizer.
     * @constructor
     * @param {SpeechTranslationConfig} speechConfig - Set of properties to configure this recognizer.
     * @param {AudioConfig} audioConfig - An optional audio config associated with the recognizer
     * @param {IConnectionFactory} connectionFactory - An optional connection factory to use to generate the endpoint URIs, headers to set, etc...
     */function TranslationRecognizer(speechConfig,audioConfig,connectionFactory){var _this72;_classCallCheck(this,TranslationRecognizer);var configImpl=speechConfig;Contracts_js_1.Contracts.throwIfNull(configImpl,"speechConfig");_this72=_super75.call(this,audioConfig,configImpl.properties,connectionFactory||new Exports_js_1.TranslationConnectionFactory());_this72.privDisposedTranslationRecognizer=false;if(_this72.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationVoice,undefined)!==undefined){Contracts_js_1.Contracts.throwIfNullOrWhitespace(_this72.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationVoice),Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_TranslationVoice]);}Contracts_js_1.Contracts.throwIfNullOrWhitespace(_this72.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages),Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages]);Contracts_js_1.Contracts.throwIfNullOrWhitespace(_this72.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage),Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage]);return _this72;}/**
     * TranslationRecognizer constructor.
     * @constructor
     * @param {SpeechTranslationConfig} speechTranslationConfig - an set of initial properties for this recognizer
     * @param {AutoDetectSourceLanguageConfig} autoDetectSourceLanguageConfig - An source language detection configuration associated with the recognizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */_createClass(TranslationRecognizer,[{key:"speechRecognitionLanguage",get:/**
     * Gets the language name that was set when the recognizer was created.
     * @member TranslationRecognizer.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @returns {string} Gets the language name that was set when the recognizer was created.
     */function get(){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer);return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage);}/**
     * Gets target languages for translation that were set when the recognizer was created.
     * The language is specified in BCP-47 format. The translation will provide translated text for each of language.
     * @member TranslationRecognizer.prototype.targetLanguages
     * @function
     * @public
     * @returns {string[]} Gets target languages for translation that were set when the recognizer was created.
     */},{key:"targetLanguages",get:function get(){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer);return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",");}/**
     * Gets the name of output voice.
     * @member TranslationRecognizer.prototype.voiceName
     * @function
     * @public
     * @returns {string} the name of output voice.
     */},{key:"voiceName",get:function get(){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer);return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationVoice,undefined);}/**
     * The collection of properties and their values defined for this TranslationRecognizer.
     * @member TranslationRecognizer.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this TranslationRecognizer.
     */},{key:"properties",get:function get(){return this.privProperties;}/**
     * Gets the authorization token used to communicate with the service.
     * @member TranslationRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */},{key:"authorizationToken",get:function get(){return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token);}/**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member TranslationRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @param {string} value - Authorization token.
     */,set:function set(value){this.properties.setProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,value);}/**
     * Starts recognition and translation, and stops after the first utterance is recognized.
     * The task returns the translation text as result.
     * Note: recognizeOnceAsync returns when the first utterance has been recognized, so it is suitable only
     * for single shot recognition like command or query. For long-running recognition,
     * use startContinuousRecognitionAsync() instead.
     * @member TranslationRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the result when the translation has completed.
     * @param err - Callback invoked in case of an error.
     */},{key:"recognizeOnceAsync",value:function recognizeOnceAsync(cb,err){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer);Exports_js_2.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(Exports_js_1.RecognitionMode.Interactive),cb,err);}/**
     * Starts recognition and translation, until stopContinuousRecognitionAsync() is called.
     * User must subscribe to events to receive translation results.
     * @member TranslationRecognizer.prototype.startContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback that received the translation has started.
     * @param err - Callback invoked in case of an error.
     */},{key:"startContinuousRecognitionAsync",value:function startContinuousRecognitionAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(Exports_js_1.RecognitionMode.Conversation),cb,err);}/**
     * Stops continuous recognition and translation.
     * @member TranslationRecognizer.prototype.stopContinuousRecognitionAsync
     * @function
     * @public
     * @param cb - Callback that received the translation has stopped.
     * @param err - Callback invoked in case of an error.
     */},{key:"stopContinuousRecognitionAsync",value:function stopContinuousRecognitionAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),cb,err);}/**
     * dynamically remove a language from list of target language
     * (can be used while recognition is ongoing)
     * @member TranslationRecognizer.prototype.removeTargetLanguage
     * @function
     * @param lang - language to be removed
     * @public
     */},{key:"removeTargetLanguage",value:function removeTargetLanguage(lang){Contracts_js_1.Contracts.throwIfNullOrUndefined(lang,"language to be removed");if(this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages,undefined)!==undefined){var languages=this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",");var index=languages.indexOf(lang);if(index>-1){languages.splice(index,1);this.properties.setProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages,languages.join(","));this.updateLanguages(languages);}}}/**
     * dynamically add a language to list of target language
     * (can be used while recognition is ongoing)
     * @member TranslationRecognizer.prototype.addTargetLanguage
     * @function
     * @param lang - language to be added
     * @public
     */},{key:"addTargetLanguage",value:function addTargetLanguage(lang){Contracts_js_1.Contracts.throwIfNullOrUndefined(lang,"language to be added");var languages=[];if(this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages,undefined)!==undefined){languages=this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",");if(!languages.includes(lang)){languages.push(lang);this.properties.setProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages,languages.join(","));}}else{this.properties.setProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages,lang);languages=[lang];}this.updateLanguages(languages);}/**
     * closes all external resources held by an instance of this class.
     * @member TranslationRecognizer.prototype.close
     * @function
     * @public
     */},{key:"close",value:function close(cb,errorCb){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer);Exports_js_2.marshalPromiseToCallbacks(this.dispose(true),cb,errorCb);}/**
     * handles ConnectionEstablishedEvent for conversation translation scenarios.
     * @member TranslationRecognizer.prototype.onConnection
     * @function
     * @public
     */ // eslint-disable-next-line @typescript-eslint/no-empty-function
},{key:"onConnection",value:function onConnection(){}},{key:"dispose",value:function(){var _dispose6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee25(disposing){return _regeneratorRuntime().wrap(function _callee25$(_context25){while(1)switch(_context25.prev=_context25.next){case 0:if(!this.privDisposedTranslationRecognizer){_context25.next=2;break;}return _context25.abrupt("return");case 2:this.privDisposedTranslationRecognizer=true;if(!disposing){_context25.next=8;break;}_context25.next=6;return this.implRecognizerStop();case 6:_context25.next=8;return _get(_getPrototypeOf(TranslationRecognizer.prototype),"dispose",this).call(this,disposing);case 8:case"end":return _context25.stop();}},_callee25,this);}));function dispose(_x18){return _dispose6.apply(this,arguments);}return dispose;}()},{key:"createRecognizerConfig",value:function createRecognizerConfig(speechConfig){return new Exports_js_1.RecognizerConfig(speechConfig,this.privProperties);}},{key:"createServiceRecognizer",value:function createServiceRecognizer(authentication,connectionFactory,audioConfig,recognizerConfig){var configImpl=audioConfig;return new Exports_js_1.TranslationServiceRecognizer(authentication,connectionFactory,configImpl,recognizerConfig,this);}},{key:"updateLanguages",value:function updateLanguages(languages){var conn=Connection_js_1.Connection.fromRecognizer(this);if(!!conn){conn.setMessageProperty("speech.context","translationcontext",{to:languages});conn.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:languages}));}}}],[{key:"FromConfig",value:function FromConfig(speechTranslationConfig,autoDetectSourceLanguageConfig,audioConfig){var speechTranslationConfigImpl=speechTranslationConfig;autoDetectSourceLanguageConfig.properties.mergeTo(speechTranslationConfigImpl.properties);return new TranslationRecognizer(speechTranslationConfig,audioConfig);}}]);return TranslationRecognizer;}(Exports_js_3.Recognizer);exports.TranslationRecognizer=TranslationRecognizer;/***/},/* 116 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//
Object.defineProperty(exports,"__esModule",{value:true});exports.Connection=void 0;var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(4);var ConnectionMessage_js_1=__webpack_require__(117);var Contracts_js_1=__webpack_require__(64);var Exports_js_3=__webpack_require__(79);/**
 * Connection is a proxy class for managing connection to the speech service of the specified Recognizer.
 * By default, a Recognizer autonomously manages connection to service when needed.
 * The Connection class provides additional methods for users to explicitly open or close a connection and
 * to subscribe to connection status changes.
 * The use of Connection is optional, and mainly for scenarios where fine tuning of application
 * behavior based on connection status is needed. Users can optionally call Open() to manually set up a connection
 * in advance before starting recognition on the Recognizer associated with this Connection.
 * If the Recognizer needs to connect or disconnect to service, it will
 * setup or shutdown the connection independently. In this case the Connection will be notified by change of connection
 * status via Connected/Disconnected events.
 * Added in version 1.2.1.
 */var Connection=/*#__PURE__*/function(){function Connection(){_classCallCheck(this,Connection);}_createClass(Connection,[{key:"openConnection",value:/**
     * Starts to set up connection to the service.
     * Users can optionally call openConnection() to manually set up a connection in advance before starting recognition on the
     * Recognizer associated with this Connection. After starting recognition, calling Open() will have no effect
     *
     * Note: On return, the connection might not be ready yet. Please subscribe to the Connected event to
     * be notified when the connection is established.
     */function openConnection(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.privInternalData.connect(),cb,err);}/**
     * Closes the connection the service.
     * Users can optionally call closeConnection() to manually shutdown the connection of the associated Recognizer.
     *
     * If closeConnection() is called during recognition, recognition will fail and cancel with an error.
     */},{key:"closeConnection",value:function closeConnection(cb,err){if(this.privInternalData instanceof Exports_js_1.SynthesisAdapterBase){throw new Error("Disconnecting a synthesizer's connection is currently not supported");}else{Exports_js_2.marshalPromiseToCallbacks(this.privInternalData.disconnect(),cb,err);}}/**
     * Appends a parameter in a message to service.
     * Added in version 1.12.1.
     * @param path The path of the network message.
     * @param propertyName Name of the property
     * @param propertyValue Value of the property. This is a json string.
     */},{key:"setMessageProperty",value:function setMessageProperty(path,propertyName,propertyValue){Contracts_js_1.Contracts.throwIfNullOrWhitespace(propertyName,"propertyName");if(this.privInternalData instanceof Exports_js_1.ServiceRecognizerBase){if(path.toLowerCase()!=="speech.context"){throw new Error("Only speech.context message property sets are currently supported for recognizer");}else{this.privInternalData.speechContext.setSection(propertyName,propertyValue);}}else if(this.privInternalData instanceof Exports_js_1.SynthesisAdapterBase){if(path.toLowerCase()!=="synthesis.context"){throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");}else{this.privInternalData.synthesisContext.setSection(propertyName,propertyValue);}}}/**
     * Sends a message to the speech service.
     * Added in version 1.13.0.
     * @param path The WebSocket path of the message
     * @param payload The payload of the message. This is a json string or a ArrayBuffer.
     * @param success A callback to indicate success.
     * @param error A callback to indicate an error.
     */},{key:"sendMessageAsync",value:function sendMessageAsync(path,payload,success,error){Exports_js_2.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(path,payload),success,error);}/**
     * Dispose of associated resources.
     */},{key:"close",value:function close(){/* eslint-disable no-empty */}},{key:"setupEvents",value:function setupEvents(){var _this73=this;this.privEventListener=this.privInternalData.connectionEvents.attach(function(connectionEvent){if(connectionEvent.name==="ConnectionEstablishedEvent"){if(!!_this73.connected){_this73.connected(new Exports_js_3.ConnectionEventArgs(connectionEvent.connectionId));}}else if(connectionEvent.name==="ConnectionClosedEvent"){if(!!_this73.disconnected){_this73.disconnected(new Exports_js_3.ConnectionEventArgs(connectionEvent.connectionId));}}else if(connectionEvent.name==="ConnectionMessageSentEvent"){if(!!_this73.messageSent){_this73.messageSent(new Exports_js_3.ConnectionMessageEventArgs(new ConnectionMessage_js_1.ConnectionMessageImpl(connectionEvent.message)));}}else if(connectionEvent.name==="ConnectionMessageReceivedEvent"){if(!!_this73.messageReceived){_this73.messageReceived(new Exports_js_3.ConnectionMessageEventArgs(new ConnectionMessage_js_1.ConnectionMessageImpl(connectionEvent.message)));}}});this.privServiceEventListener=this.privInternalData.serviceEvents.attach(function(e){if(!!_this73.receivedServiceMessage){_this73.receivedServiceMessage(new Exports_js_3.ServiceEventArgs(e.jsonString,e.name));}});}}],[{key:"fromRecognizer",value:/**
     * Gets the Connection instance from the specified recognizer.
     * @param recognizer The recognizer associated with the connection.
     * @return The Connection instance of the recognizer.
     */function fromRecognizer(recognizer){var recoBase=recognizer.internalData;var ret=new Connection();ret.privInternalData=recoBase;ret.setupEvents();return ret;}/**
     * Gets the Connection instance from the specified synthesizer.
     * @param synthesizer The synthesizer associated with the connection.
     * @return The Connection instance of the synthesizer.
     */},{key:"fromSynthesizer",value:function fromSynthesizer(synthesizer){var synthBase=synthesizer.internalData;var ret=new Connection();ret.privInternalData=synthBase;ret.setupEvents();return ret;}}]);return Connection;}();exports.Connection=Connection;/***/},/* 117 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//
Object.defineProperty(exports,"__esModule",{value:true});exports.ConnectionMessageImpl=exports.ConnectionMessage=void 0;// eslint-disable-next-line max-classes-per-file
var HeaderNames_js_1=__webpack_require__(54);var Exports_js_1=__webpack_require__(4);var PropertyCollection_js_1=__webpack_require__(109);var PropertyId_js_1=__webpack_require__(110);/**
 * ConnectionMessage represents implementation specific messages sent to and received from
 * the speech service. These messages are provided for debugging purposes and should not
 * be used for production use cases with the Azure Cognitive Services Speech Service.
 * Messages sent to and received from the Speech Service are subject to change without
 * notice. This includes message contents, headers, payloads, ordering, etc.
 * Added in version 1.11.0.
 */var ConnectionMessage=/*#__PURE__*/_createClass(function ConnectionMessage(){_classCallCheck(this,ConnectionMessage);});exports.ConnectionMessage=ConnectionMessage;var ConnectionMessageImpl=/*#__PURE__*/function(){function ConnectionMessageImpl(message){var _this74=this;_classCallCheck(this,ConnectionMessageImpl);this.privConnectionMessage=message;this.privProperties=new PropertyCollection_js_1.PropertyCollection();if(!!this.privConnectionMessage.headers[HeaderNames_js_1.HeaderNames.ConnectionId]){this.privProperties.setProperty(PropertyId_js_1.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[HeaderNames_js_1.HeaderNames.ConnectionId]);}Object.keys(this.privConnectionMessage.headers).forEach(function(header){_this74.privProperties.setProperty(header,_this74.privConnectionMessage.headers[header]);});}/**
     * The message path.
     */_createClass(ConnectionMessageImpl,[{key:"path",get:function get(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(function(key){return key.toLowerCase()==="path".toLowerCase();})];}/**
     * Checks to see if the ConnectionMessage is a text message.
     * See also IsBinaryMessage().
     */},{key:"isTextMessage",get:function get(){return this.privConnectionMessage.messageType===Exports_js_1.MessageType.Text;}/**
     * Checks to see if the ConnectionMessage is a binary message.
     * See also GetBinaryMessage().
     */},{key:"isBinaryMessage",get:function get(){return this.privConnectionMessage.messageType===Exports_js_1.MessageType.Binary;}/**
     * Gets the text message payload. Typically the text message content-type is
     * application/json. To determine other content-types use
     * Properties.GetProperty("Content-Type").
     */},{key:"TextMessage",get:function get(){return this.privConnectionMessage.textBody;}/**
     * Gets the binary message payload.
     */},{key:"binaryMessage",get:function get(){return this.privConnectionMessage.binaryBody;}/**
     * A collection of properties and their values defined for this <see cref="ConnectionMessage"/>.
     * Message headers can be accessed via this collection (e.g. "Content-Type").
     */},{key:"properties",get:function get(){return this.privProperties;}/**
     * Returns a string that represents the connection message.
     */},{key:"toString",value:function toString(){return"";}}]);return ConnectionMessageImpl;}();exports.ConnectionMessageImpl=ConnectionMessageImpl;/***/},/* 118 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.Translations=void 0;var Exports_js_1=__webpack_require__(79);/**
 * Represents collection of parameters and their values.
 * @class Translations
 */var Translations=/*#__PURE__*/function(){function Translations(){_classCallCheck(this,Translations);// Use an PropertyCollection internally, just wrapping it to hide the | enum syntax it has.
this.privMap=new Exports_js_1.PropertyCollection();}/**
     * Get the languages in the object in a String array.
     * @member Translations.prototype.languages
     * @function
     * @public
     * @returns {string[]} languages in translations object.
     */_createClass(Translations,[{key:"languages",get:function get(){return this.privMap.keys;}/**
     * Returns the parameter value in type String. The parameter must have the same type as String.
     * Currently only String, int and bool are allowed.
     * If the name is not available, the specified defaultValue is returned.
     * @member Translations.prototype.get
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} def - The default value which is returned if the parameter is not available in the collection.
     * @returns {string} value of the parameter.
     */},{key:"get",value:function get(key,def){return this.privMap.getProperty(key,def);}/**
     * Sets the String value of the parameter specified by name.
     * @member Translations.prototype.set
     * @function
     * @public
     * @param {string} key - The parameter name.
     * @param {string} value - The value of the parameter.
     */},{key:"set",value:function set(key,value){this.privMap.setProperty(key,value);}}]);return Translations;}();exports.Translations=Translations;/***/},/* 119 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.NoMatchReason=void 0;/**
 * Defines the possible reasons a recognition result might not be recognized.
 * @class NoMatchReason
 */var NoMatchReason;(function(NoMatchReason){/**
     * Indicates that speech was detected, but not recognized.
     * @member NoMatchReason.NotRecognized
     */NoMatchReason[NoMatchReason["NotRecognized"]=0]="NotRecognized";/**
     * Indicates that the start of the audio stream contained only silence,
     * and the service timed out waiting for speech.
     * @member NoMatchReason.InitialSilenceTimeout
     */NoMatchReason[NoMatchReason["InitialSilenceTimeout"]=1]="InitialSilenceTimeout";/**
     * Indicates that the start of the audio stream contained only noise,
     * and the service timed out waiting for speech.
     * @member NoMatchReason.InitialBabbleTimeout
     */NoMatchReason[NoMatchReason["InitialBabbleTimeout"]=2]="InitialBabbleTimeout";})(NoMatchReason=exports.NoMatchReason||(exports.NoMatchReason={}));/***/},/* 120 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.NoMatchDetails=void 0;var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(79);/**
 * Contains detailed information for NoMatch recognition results.
 * @class NoMatchDetails
 */var NoMatchDetails=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {NoMatchReason} reason - The no-match reason.
     */function NoMatchDetails(reason){_classCallCheck(this,NoMatchDetails);this.privReason=reason;}/**
     * Creates an instance of NoMatchDetails object for the NoMatch SpeechRecognitionResults.
     * @member NoMatchDetails.fromResult
     * @function
     * @public
     * @param {SpeechRecognitionResult | IntentRecognitionResult | TranslationRecognitionResult}
     * result - The recognition result that was not recognized.
     * @returns {NoMatchDetails} The no match details object being created.
     */_createClass(NoMatchDetails,[{key:"reason",get:/**
     * The reason the recognition was canceled.
     * @member NoMatchDetails.prototype.reason
     * @function
     * @public
     * @returns {NoMatchReason} Specifies the reason canceled.
     */function get(){return this.privReason;}}],[{key:"fromResult",value:function fromResult(result){var simpleSpeech=Exports_js_1.SimpleSpeechPhrase.fromJSON(result.json,0);// Offset fixups are already done.
var reason=Exports_js_2.NoMatchReason.NotRecognized;switch(simpleSpeech.RecognitionStatus){case Exports_js_1.RecognitionStatus.BabbleTimeout:reason=Exports_js_2.NoMatchReason.InitialBabbleTimeout;break;case Exports_js_1.RecognitionStatus.InitialSilenceTimeout:reason=Exports_js_2.NoMatchReason.InitialSilenceTimeout;break;default:reason=Exports_js_2.NoMatchReason.NotRecognized;break;}return new NoMatchDetails(reason);}}]);return NoMatchDetails;}();exports.NoMatchDetails=NoMatchDetails;/***/},/* 121 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.TranslationRecognitionCanceledEventArgs=void 0;/**
 * Define payload of speech recognition canceled result events.
 * @class TranslationRecognitionCanceledEventArgs
 */var TranslationRecognitionCanceledEventArgs=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} sessionid - The session id.
     * @param {CancellationReason} cancellationReason - The cancellation reason.
     * @param {string} errorDetails - Error details, if provided.
     * @param {TranslationRecognitionResult} result - The result.
     */function TranslationRecognitionCanceledEventArgs(sessionid,cancellationReason,errorDetails,errorCode,result){_classCallCheck(this,TranslationRecognitionCanceledEventArgs);this.privCancelReason=cancellationReason;this.privErrorDetails=errorDetails;this.privResult=result;this.privSessionId=sessionid;this.privErrorCode=errorCode;}/**
     * Specifies the recognition result.
     * @member TranslationRecognitionCanceledEventArgs.prototype.result
     * @function
     * @public
     * @returns {TranslationRecognitionResult} the recognition result.
     */_createClass(TranslationRecognitionCanceledEventArgs,[{key:"result",get:function get(){return this.privResult;}/**
     * Specifies the session identifier.
     * @member TranslationRecognitionCanceledEventArgs.prototype.sessionId
     * @function
     * @public
     * @returns {string} the session identifier.
     */},{key:"sessionId",get:function get(){return this.privSessionId;}/**
     * The reason the recognition was canceled.
     * @member TranslationRecognitionCanceledEventArgs.prototype.reason
     * @function
     * @public
     * @returns {CancellationReason} Specifies the reason canceled.
     */},{key:"reason",get:function get(){return this.privCancelReason;}/**
     * The error code in case of an unsuccessful recognition.
     * Added in version 1.1.0.
     * @return An error code that represents the error reason.
     */},{key:"errorCode",get:function get(){return this.privErrorCode;}/**
     * In case of an unsuccessful recognition, provides details of the occurred error.
     * @member TranslationRecognitionCanceledEventArgs.prototype.errorDetails
     * @function
     * @public
     * @returns {string} A String that represents the error details.
     */},{key:"errorDetails",get:function get(){return this.privErrorDetails;}}]);return TranslationRecognitionCanceledEventArgs;}();exports.TranslationRecognitionCanceledEventArgs=TranslationRecognitionCanceledEventArgs;/***/},/* 122 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.IntentRecognitionCanceledEventArgs=void 0;var Exports_js_1=__webpack_require__(79);/**
 * Define payload of intent recognition canceled result events.
 * @class IntentRecognitionCanceledEventArgs
 */var IntentRecognitionCanceledEventArgs=/*#__PURE__*/function(_Exports_js_1$IntentR){_inherits(IntentRecognitionCanceledEventArgs,_Exports_js_1$IntentR);var _super76=_createSuper(IntentRecognitionCanceledEventArgs);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {CancellationReason} result - The result of the intent recognition.
     * @param {string} offset - The offset.
     * @param {IntentRecognitionResult} sessionId - The session id.
     */function IntentRecognitionCanceledEventArgs(reason,errorDetails,errorCode,result,offset,sessionId){var _this75;_classCallCheck(this,IntentRecognitionCanceledEventArgs);_this75=_super76.call(this,result,offset,sessionId);_this75.privReason=reason;_this75.privErrorDetails=errorDetails;_this75.privErrorCode=errorCode;return _this75;}/**
     * The reason the recognition was canceled.
     * @member IntentRecognitionCanceledEventArgs.prototype.reason
     * @function
     * @public
     * @returns {CancellationReason} Specifies the reason canceled.
     */_createClass(IntentRecognitionCanceledEventArgs,[{key:"reason",get:function get(){return this.privReason;}/**
     * The error code in case of an unsuccessful recognition.
     * Added in version 1.1.0.
     * @return An error code that represents the error reason.
     */},{key:"errorCode",get:function get(){return this.privErrorCode;}/**
     * In case of an unsuccessful recognition, provides details of the occurred error.
     * @member IntentRecognitionCanceledEventArgs.prototype.errorDetails
     * @function
     * @public
     * @returns {string} A String that represents the error details.
     */},{key:"errorDetails",get:function get(){return this.privErrorDetails;}}]);return IntentRecognitionCanceledEventArgs;}(Exports_js_1.IntentRecognitionEventArgs);exports.IntentRecognitionCanceledEventArgs=IntentRecognitionCanceledEventArgs;/***/},/* 123 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.CancellationDetailsBase=void 0;/**
 * Contains detailed information about why a result was canceled.
 * @class CancellationDetailsBase
 */var CancellationDetailsBase=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {CancellationReason} reason - The cancellation reason.
     * @param {string} errorDetails - The error details, if provided.
     */function CancellationDetailsBase(reason,errorDetails,errorCode){_classCallCheck(this,CancellationDetailsBase);this.privReason=reason;this.privErrorDetails=errorDetails;this.privErrorCode=errorCode;}/**
     * The reason the recognition was canceled.
     * @member CancellationDetailsBase.prototype.reason
     * @function
     * @public
     * @returns {CancellationReason} Specifies the reason canceled.
     */_createClass(CancellationDetailsBase,[{key:"reason",get:function get(){return this.privReason;}/**
     * In case of an unsuccessful recognition, provides details of the occurred error.
     * @member CancellationDetailsBase.prototype.errorDetails
     * @function
     * @public
     * @returns {string} A String that represents the error details.
     */},{key:"errorDetails",get:function get(){return this.privErrorDetails;}/**
     * The error code in case of an unsuccessful recognition.
     * Added in version 1.1.0.
     * @return An error code that represents the error reason.
     */},{key:"ErrorCode",get:function get(){return this.privErrorCode;}}]);return CancellationDetailsBase;}();exports.CancellationDetailsBase=CancellationDetailsBase;/***/},/* 124 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.CancellationDetails=void 0;var Exports_js_1=__webpack_require__(2);var CancellationDetailsBase_js_1=__webpack_require__(123);var Exports_js_2=__webpack_require__(79);/**
 * Contains detailed information about why a result was canceled.
 * @class CancellationDetails
 */var CancellationDetails=/*#__PURE__*/function(_CancellationDetailsB){_inherits(CancellationDetails,_CancellationDetailsB);var _super77=_createSuper(CancellationDetails);function CancellationDetails(reason,errorDetails,errorCode){_classCallCheck(this,CancellationDetails);return _super77.call(this,reason,errorDetails,errorCode);}/**
     * Creates an instance of CancellationDetails object for the canceled RecognitionResult.
     * @member CancellationDetails.fromResult
     * @function
     * @public
     * @param {RecognitionResult | SpeechSynthesisResult} result - The result that was canceled.
     * @returns {CancellationDetails} The cancellation details object being created.
     */_createClass(CancellationDetails,null,[{key:"fromResult",value:function fromResult(result){var reason=Exports_js_2.CancellationReason.Error;var errorCode=Exports_js_2.CancellationErrorCode.NoError;if(result instanceof Exports_js_2.RecognitionResult&&!!result.json){var simpleSpeech=Exports_js_1.SimpleSpeechPhrase.fromJSON(result.json,0);// Offset fixups are already done.
reason=Exports_js_1.EnumTranslation.implTranslateCancelResult(simpleSpeech.RecognitionStatus);}if(!!result.properties){errorCode=Exports_js_2.CancellationErrorCode[result.properties.getProperty(Exports_js_1.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[Exports_js_2.CancellationErrorCode.NoError])];}return new CancellationDetails(reason,result.errorDetails||Exports_js_1.EnumTranslation.implTranslateErrorDetails(errorCode),errorCode);}}]);return CancellationDetails;}(CancellationDetailsBase_js_1.CancellationDetailsBase);exports.CancellationDetails=CancellationDetails;/***/},/* 125 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.CancellationErrorCode=void 0;/**
 * Defines error code in case that CancellationReason is Error.
 * Added in version 1.1.0.
 */var CancellationErrorCode;(function(CancellationErrorCode){/**
     * Indicates that no error occurred during speech recognition.
     */CancellationErrorCode[CancellationErrorCode["NoError"]=0]="NoError";/**
     * Indicates an authentication error.
     */CancellationErrorCode[CancellationErrorCode["AuthenticationFailure"]=1]="AuthenticationFailure";/**
     * Indicates that one or more recognition parameters are invalid.
     */CancellationErrorCode[CancellationErrorCode["BadRequestParameters"]=2]="BadRequestParameters";/**
     * Indicates that the number of parallel requests exceeded the number of allowed
     * concurrent transcriptions for the subscription.
     */CancellationErrorCode[CancellationErrorCode["TooManyRequests"]=3]="TooManyRequests";/**
     * Indicates a connection error.
     */CancellationErrorCode[CancellationErrorCode["ConnectionFailure"]=4]="ConnectionFailure";/**
     * Indicates a time-out error when waiting for response from service.
     */CancellationErrorCode[CancellationErrorCode["ServiceTimeout"]=5]="ServiceTimeout";/**
     * Indicates that an error is returned by the service.
     */CancellationErrorCode[CancellationErrorCode["ServiceError"]=6]="ServiceError";/**
     * Indicates an unexpected runtime error.
     */CancellationErrorCode[CancellationErrorCode["RuntimeError"]=7]="RuntimeError";/**
     * Indicates an quota overrun on existing key.
     */CancellationErrorCode[CancellationErrorCode["Forbidden"]=8]="Forbidden";})(CancellationErrorCode=exports.CancellationErrorCode||(exports.CancellationErrorCode={}));/***/},/* 126 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//
Object.defineProperty(exports,"__esModule",{value:true});exports.ConnectionEventArgs=void 0;var Exports_js_1=__webpack_require__(79);/**
 * Defines payload for connection events like Connected/Disconnected.
 * Added in version 1.2.0
 */var ConnectionEventArgs=/*#__PURE__*/function(_Exports_js_1$Session3){_inherits(ConnectionEventArgs,_Exports_js_1$Session3);var _super78=_createSuper(ConnectionEventArgs);function ConnectionEventArgs(){_classCallCheck(this,ConnectionEventArgs);return _super78.apply(this,arguments);}return _createClass(ConnectionEventArgs);}(Exports_js_1.SessionEventArgs);exports.ConnectionEventArgs=ConnectionEventArgs;/***/},/* 127 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//
Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceEventArgs=void 0;var Exports_js_1=__webpack_require__(79);/**
 * Defines payload for any Service message event
 * Added in version 1.9.0
 */var ServiceEventArgs=/*#__PURE__*/function(_Exports_js_1$Session4){_inherits(ServiceEventArgs,_Exports_js_1$Session4);var _super79=_createSuper(ServiceEventArgs);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} json - json payload of the USP message.
     */function ServiceEventArgs(json,name,sessionId){var _this76;_classCallCheck(this,ServiceEventArgs);_this76=_super79.call(this,sessionId);_this76.privJsonResult=json;_this76.privEventName=name;return _this76;}_createClass(ServiceEventArgs,[{key:"jsonString",get:function get(){return this.privJsonResult;}},{key:"eventName",get:function get(){return this.privEventName;}}]);return ServiceEventArgs;}(Exports_js_1.SessionEventArgs);exports.ServiceEventArgs=ServiceEventArgs;/***/},/* 128 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.PhraseListGrammar=void 0;/**
 * Allows additions of new phrases to improve speech recognition.
 *
 * Phrases added to the recognizer are effective at the start of the next recognition, or the next time the SpeechSDK must reconnect
 * to the speech service.
 */var PhraseListGrammar=/*#__PURE__*/function(){function PhraseListGrammar(recogBase){_classCallCheck(this,PhraseListGrammar);this.privGrammerBuilder=recogBase.dynamicGrammar;}/**
     * Creates a PhraseListGrammar from a given speech recognizer. Will accept any recognizer that derives from @class Recognizer.
     * @param recognizer The recognizer to add phrase lists to.
     */_createClass(PhraseListGrammar,[{key:"addPhrase",value:/**
     * Adds a single phrase to the current recognizer.
     * @param phrase Phrase to add.
     */function addPhrase(phrase){this.privGrammerBuilder.addPhrase(phrase);}/**
     * Adds multiple phrases to the current recognizer.
     * @param phrases Array of phrases to add.
     */},{key:"addPhrases",value:function addPhrases(phrases){this.privGrammerBuilder.addPhrase(phrases);}/**
     * Clears all phrases added to the current recognizer.
     */},{key:"clear",value:function clear(){this.privGrammerBuilder.clearPhrases();}}],[{key:"fromRecognizer",value:function fromRecognizer(recognizer){var recoBase=recognizer.internalData;return new PhraseListGrammar(recoBase);}}]);return PhraseListGrammar;}();exports.PhraseListGrammar=PhraseListGrammar;/***/},/* 129 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.DialogServiceConfigImpl=exports.DialogServiceConfig=void 0;/* eslint-disable max-classes-per-file */var Contracts_js_1=__webpack_require__(64);var Exports_js_1=__webpack_require__(79);/**
 * Class that defines base configurations for dialog service connector
 * @class DialogServiceConfig
 */var DialogServiceConfig=/*#__PURE__*/function(){/**
     * Creates an instance of DialogService config.
     * @constructor
     */function DialogServiceConfig(){_classCallCheck(this,DialogServiceConfig);return;}/**
     * Sets the corresponding backend application identifier.
     * @member DialogServiceConfig.prototype.Conversation_ApplicationId
     * @function
     * @public
     * @param {string} value - The application identifier to set.
     */ // eslint-disable-next-line @typescript-eslint/no-empty-function
_createClass(DialogServiceConfig,[{key:"applicationId",set:function set(value){}}],[{key:"DialogTypes",get:function get(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"};}}]);return DialogServiceConfig;}();exports.DialogServiceConfig=DialogServiceConfig;/**
 * Dialog Service configuration.
 * @class DialogServiceConfigImpl
 */var DialogServiceConfigImpl=/*#__PURE__*/function(_DialogServiceConfig){_inherits(DialogServiceConfigImpl,_DialogServiceConfig);var _super80=_createSuper(DialogServiceConfigImpl);/**
     * Creates an instance of dialogService config.
     */function DialogServiceConfigImpl(){var _this77;_classCallCheck(this,DialogServiceConfigImpl);_this77=_super80.call(this);_this77.privSpeechConfig=new Exports_js_1.SpeechConfigImpl();return _this77;}/**
     * Provides access to custom properties.
     * @member DialogServiceConfigImpl.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The properties.
     */_createClass(DialogServiceConfigImpl,[{key:"properties",get:function get(){return this.privSpeechConfig.properties;}/**
     * Gets the speech recognition language.
     * @member DialogServiceConfigImpl.prototype.speechRecognitionLanguage
     * @function
     * @public
     */},{key:"speechRecognitionLanguage",get:function get(){return this.privSpeechConfig.speechRecognitionLanguage;}/**
     * Sets the speech recognition language.
     * @member DialogServiceConfigImpl.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @param {string} value - The language to set.
     */,set:function set(value){Contracts_js_1.Contracts.throwIfNullOrWhitespace(value,"value");this.privSpeechConfig.speechRecognitionLanguage=value;}},{key:"outputFormat",get:function get(){return this.privSpeechConfig.outputFormat;},set:function set(value){this.privSpeechConfig.outputFormat=value;}/**
     * Sets a named property as value
     * @member DialogServiceConfigImpl.prototype.setProperty
     * @function
     * @public
     * @param {PropertyId | string} name - The property to set.
     * @param {string} value - The value.
     */},{key:"setProperty",value:function setProperty(name,value){this.privSpeechConfig.setProperty(name,value);}/**
     * Sets a named property as value
     * @member DialogServiceConfigImpl.prototype.getProperty
     * @function
     * @public
     * @param {PropertyId | string} name - The property to get.
     * @param {string} def - The default value to return in case the property is not known.
     * @returns {string} The current value, or provided default, of the given property.
     */},{key:"getProperty",value:function getProperty(name,def){void def;return this.privSpeechConfig.getProperty(name);}/**
     * Sets the proxy configuration.
     * Only relevant in Node.js environments.
     * Added in version 1.4.0.
     * @param proxyHostName The host name of the proxy server, without the protocol scheme (http://)
     * @param proxyPort The port number of the proxy server.
     * @param proxyUserName The user name of the proxy server.
     * @param proxyPassword The password of the proxy server.
     */},{key:"setProxy",value:function setProxy(proxyHostName,proxyPort,proxyUserName,proxyPassword){this.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_ProxyHostName,proxyHostName);this.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_ProxyPort,"".concat(proxyPort));if(proxyUserName){this.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_ProxyUserName,proxyUserName);}if(proxyPassword){this.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_ProxyPassword,proxyPassword);}}},{key:"setServiceProperty",value:function setServiceProperty(name,value,channel){void channel;this.privSpeechConfig.setServiceProperty(name,value);}/**
     * Dispose of associated resources.
     * @member DialogServiceConfigImpl.prototype.close
     * @function
     * @public
     */},{key:"close",value:function close(){return;}}]);return DialogServiceConfigImpl;}(DialogServiceConfig);exports.DialogServiceConfigImpl=DialogServiceConfigImpl;/***/},/* 130 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.BotFrameworkConfig=void 0;var Contracts_js_1=__webpack_require__(64);var DialogServiceConfig_js_1=__webpack_require__(129);var Exports_js_1=__webpack_require__(79);/**
 * Class that defines configurations for the dialog service connector object for using a Bot Framework backend.
 * @class BotFrameworkConfig
 */var BotFrameworkConfig=/*#__PURE__*/function(_DialogServiceConfig_){_inherits(BotFrameworkConfig,_DialogServiceConfig_);var _super81=_createSuper(BotFrameworkConfig);/**
     * Creates an instance of BotFrameworkConfig.
     */function BotFrameworkConfig(){_classCallCheck(this,BotFrameworkConfig);return _super81.call(this);}/**
     * Creates a bot framework configuration instance with the provided subscription information.
     * @member BotFrameworkConfig.fromSubscription
     * @function
     * @public
     * @param subscription Subscription key associated with the bot
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @param botId Optional. Identifier for using a specific bot within an Azure resource group. Equivalent to the
     * resource name.
     * @returns {BotFrameworkConfig} A new bot framework configuration instance.
     */_createClass(BotFrameworkConfig,null,[{key:"fromSubscription",value:function fromSubscription(subscription,region,botId){Contracts_js_1.Contracts.throwIfNullOrWhitespace(subscription,"subscription");Contracts_js_1.Contracts.throwIfNullOrWhitespace(region,"region");var botFrameworkConfig=new DialogServiceConfig_js_1.DialogServiceConfigImpl();botFrameworkConfig.setProperty(Exports_js_1.PropertyId.Conversation_DialogType,DialogServiceConfig_js_1.DialogServiceConfig.DialogTypes.BotFramework);botFrameworkConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Key,subscription);botFrameworkConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Region,region);if(botId){botFrameworkConfig.setProperty(Exports_js_1.PropertyId.Conversation_ApplicationId,botId);}return botFrameworkConfig;}/**
     * Creates a bot framework configuration instance for the specified authorization token and region.
     * Note: The caller must ensure that an authorization token is valid. Before an authorization token expires, the
     * caller must refresh it by setting the authorizationToken property on the corresponding
     * DialogServiceConnector instance created with this config. The contents of configuration objects are copied
     * when connectors are created, so setting authorizationToken on a DialogServiceConnector will not update the
     * original configuration's authorization token. Create a new configuration instance or set the
     * SpeechServiceAuthorization_Token property to update an existing instance if it will be used to create
     * further DialogServiceConnectors.
     * @member BotFrameworkConfig.fromAuthorizationToken
     * @function
     * @public
     * @param authorizationToken The authorization token associated with the bot
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @param botId Optional. Identifier for using a specific bot within an Azure resource group. Equivalent to the
     * resource name.
     * @returns {BotFrameworkConfig} A new bot framework configuration instance.
     */},{key:"fromAuthorizationToken",value:function fromAuthorizationToken(authorizationToken,region,botId){Contracts_js_1.Contracts.throwIfNullOrWhitespace(authorizationToken,"authorizationToken");Contracts_js_1.Contracts.throwIfNullOrWhitespace(region,"region");var botFrameworkConfig=new DialogServiceConfig_js_1.DialogServiceConfigImpl();botFrameworkConfig.setProperty(Exports_js_1.PropertyId.Conversation_DialogType,DialogServiceConfig_js_1.DialogServiceConfig.DialogTypes.BotFramework);botFrameworkConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceAuthorization_Token,authorizationToken);botFrameworkConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Region,region);if(botId){botFrameworkConfig.setProperty(Exports_js_1.PropertyId.Conversation_ApplicationId,botId);}return botFrameworkConfig;}/**
     * Creates an instance of a BotFrameworkConfig.
     * This method is intended only for users who use a non-default service host. The standard resource path will be
     * assumed. For services with a non-standard resource path or no path at all, use fromEndpoint instead.
     * Note: Query parameters are not allowed in the host URI and must be set by other APIs.
     * Note: To use an authorization token with fromHost, use fromHost(URL) and then set the AuthorizationToken
     * property on the created BotFrameworkConfig instance.
     * Note: Added in version 1.15.0.
     * @member BotFrameworkConfig.fromHost
     * @function
     * @public
     * @param {URL | string} host - If a URL is provided, the fully-qualified host with protocol (e.g.
     * wss://your.host.com:1234) will be used. If a string is provided, it will be embedded in
     * wss://{host}.convai.speech.azure.us.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization
     * token must be set.
     * @param botId Optional. Identifier for using a specific bot within an Azure resource group. Equivalent to the
     * resource name.
     * @returns {BotFrameworkConfig} A new bot framework configuration instance.
     */},{key:"fromHost",value:function fromHost(host,subscriptionKey,botId){void botId;Contracts_js_1.Contracts.throwIfNullOrUndefined(host,"host");var resolvedHost=host instanceof URL?host:new URL("wss://".concat(host,".convai.speech.azure.us"));Contracts_js_1.Contracts.throwIfNullOrUndefined(resolvedHost,"resolvedHost");var botFrameworkConfig=new DialogServiceConfig_js_1.DialogServiceConfigImpl();botFrameworkConfig.setProperty(Exports_js_1.PropertyId.Conversation_DialogType,DialogServiceConfig_js_1.DialogServiceConfig.DialogTypes.BotFramework);botFrameworkConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Host,resolvedHost.toString());if(undefined!==subscriptionKey){botFrameworkConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Key,subscriptionKey);}return botFrameworkConfig;}/**
     * Creates an instance of a BotFrameworkConfig.
     * This method is intended only for users who use a non-standard service endpoint or parameters.
     * Note: The query parameters specified in the endpoint URL are not changed, even if they are set by any other APIs.
     * Note: To use authorization token with fromEndpoint, pass an empty string to the subscriptionKey in the
     * fromEndpoint method, and then set authorizationToken="token" on the created BotFrameworkConfig instance to
     * use the authorization token.
     * Note: Added in version 1.15.0.
     * @member BotFrameworkConfig.fromEndpoint
     * @function
     * @public
     * @param {URL} endpoint - The service endpoint to connect to.
     * @param {string} subscriptionKey - The subscription key. If a subscription key is not specified, an authorization
     * token must be set.
     * @returns {BotFrameworkConfig} - A new bot framework configuration instance using the provided endpoint.
     */},{key:"fromEndpoint",value:function fromEndpoint(endpoint,subscriptionKey){Contracts_js_1.Contracts.throwIfNull(endpoint,"endpoint");var botFrameworkConfig=new DialogServiceConfig_js_1.DialogServiceConfigImpl();botFrameworkConfig.setProperty(Exports_js_1.PropertyId.Conversation_DialogType,DialogServiceConfig_js_1.DialogServiceConfig.DialogTypes.BotFramework);botFrameworkConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Endpoint,endpoint.toString());if(undefined!==subscriptionKey){botFrameworkConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Key,subscriptionKey);}return botFrameworkConfig;}}]);return BotFrameworkConfig;}(DialogServiceConfig_js_1.DialogServiceConfigImpl);exports.BotFrameworkConfig=BotFrameworkConfig;/***/},/* 131 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.CustomCommandsConfig=void 0;var Contracts_js_1=__webpack_require__(64);var DialogServiceConfig_js_1=__webpack_require__(129);var Exports_js_1=__webpack_require__(79);/**
 * Class that defines configurations for the dialog service connector object for using a CustomCommands backend.
 * @class CustomCommandsConfig
 */var CustomCommandsConfig=/*#__PURE__*/function(_DialogServiceConfig_2){_inherits(CustomCommandsConfig,_DialogServiceConfig_2);var _super82=_createSuper(CustomCommandsConfig);/**
     * Creates an instance of CustomCommandsConfig.
     */function CustomCommandsConfig(){_classCallCheck(this,CustomCommandsConfig);return _super82.call(this);}/**
     * Creates an instance of the bot framework config with the specified subscription and region.
     * @member CustomCommandsConfig.fromSubscription
     * @function
     * @public
     * @param applicationId Speech Commands application id.
     * @param subscription Subscription key associated with the bot
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {CustomCommandsConfig} A new bot framework config.
     */_createClass(CustomCommandsConfig,[{key:"applicationId",get:/**
     * Gets the corresponding backend application identifier.
     * @member CustomCommandsConfig.prototype.Conversation_ApplicationId
     * @function
     * @public
     * @param {string} value - The application identifier to get.
     */function get(){return this.getProperty(Exports_js_1.PropertyId.Conversation_ApplicationId);},set:/**
     * Sets the corresponding backend application identifier.
     * @member CustomCommandsConfig.prototype.Conversation_ApplicationId
     * @function
     * @public
     * @param {string} value - The application identifier to set.
     */function set(value){Contracts_js_1.Contracts.throwIfNullOrWhitespace(value,"value");this.setProperty(Exports_js_1.PropertyId.Conversation_ApplicationId,value);}}],[{key:"fromSubscription",value:function fromSubscription(applicationId,subscription,region){Contracts_js_1.Contracts.throwIfNullOrWhitespace(applicationId,"applicationId");Contracts_js_1.Contracts.throwIfNullOrWhitespace(subscription,"subscription");Contracts_js_1.Contracts.throwIfNullOrWhitespace(region,"region");var customCommandsConfig=new DialogServiceConfig_js_1.DialogServiceConfigImpl();customCommandsConfig.setProperty(Exports_js_1.PropertyId.Conversation_DialogType,DialogServiceConfig_js_1.DialogServiceConfig.DialogTypes.CustomCommands);customCommandsConfig.setProperty(Exports_js_1.PropertyId.Conversation_ApplicationId,applicationId);customCommandsConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Key,subscription);customCommandsConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Region,region);return customCommandsConfig;}/**
     * Creates an instance of the bot framework config with the specified Speech Commands application id, authorization token and region.
     * Note: The caller needs to ensure that the authorization token is valid. Before the authorization token
     * expires, the caller needs to refresh it by calling this setter with a new valid token.
     * As configuration values are copied when creating a new recognizer, the new token value will not apply to recognizers that have already been created.
     * For recognizers that have been created before, you need to set authorization token of the corresponding recognizer
     * to refresh the token. Otherwise, the recognizers will encounter errors during recognition.
     * @member CustomCommandsConfig.fromAuthorizationToken
     * @function
     * @public
     * @param applicationId Speech Commands application id.
     * @param authorizationToken The authorization token associated with the application.
     * @param region The region name (see the <a href="https://aka.ms/csspeech/region">region page</a>).
     * @returns {CustomCommandsConfig} A new speech commands config.
     */},{key:"fromAuthorizationToken",value:function fromAuthorizationToken(applicationId,authorizationToken,region){Contracts_js_1.Contracts.throwIfNullOrWhitespace(applicationId,"applicationId");Contracts_js_1.Contracts.throwIfNullOrWhitespace(authorizationToken,"authorizationToken");Contracts_js_1.Contracts.throwIfNullOrWhitespace(region,"region");var customCommandsConfig=new DialogServiceConfig_js_1.DialogServiceConfigImpl();customCommandsConfig.setProperty(Exports_js_1.PropertyId.Conversation_DialogType,DialogServiceConfig_js_1.DialogServiceConfig.DialogTypes.CustomCommands);customCommandsConfig.setProperty(Exports_js_1.PropertyId.Conversation_ApplicationId,applicationId);customCommandsConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceAuthorization_Token,authorizationToken);customCommandsConfig.setProperty(Exports_js_1.PropertyId.SpeechServiceConnection_Region,region);return customCommandsConfig;}}]);return CustomCommandsConfig;}(DialogServiceConfig_js_1.DialogServiceConfigImpl);exports.CustomCommandsConfig=CustomCommandsConfig;/***/},/* 132 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.DialogServiceConnector=void 0;var DialogConnectorFactory_js_1=__webpack_require__(133);var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(4);var Contracts_js_1=__webpack_require__(64);var Exports_js_3=__webpack_require__(79);var PropertyId_js_1=__webpack_require__(110);/**
 * Dialog Service Connector
 * @class DialogServiceConnector
 */var DialogServiceConnector=/*#__PURE__*/function(_Exports_js_3$Recogni4){_inherits(DialogServiceConnector,_Exports_js_3$Recogni4);var _super83=_createSuper(DialogServiceConnector);/**
     * Initializes an instance of the DialogServiceConnector.
     * @constructor
     * @param {DialogServiceConfig} dialogConfig - Set of properties to configure this recognizer.
     * @param {AudioConfig} audioConfig - An optional audio config associated with the recognizer
     */function DialogServiceConnector(dialogConfig,audioConfig){var _this78;_classCallCheck(this,DialogServiceConnector);var dialogServiceConfigImpl=dialogConfig;Contracts_js_1.Contracts.throwIfNull(dialogConfig,"dialogConfig");_this78=_super83.call(this,audioConfig,dialogServiceConfigImpl.properties,new DialogConnectorFactory_js_1.DialogConnectionFactory());_this78.isTurnComplete=true;_this78.privIsDisposed=false;_this78.privProperties=dialogServiceConfigImpl.properties.clone();var agentConfig=_this78.buildAgentConfig();_this78.privReco.agentConfig.set(agentConfig);return _this78;}/**
     * Starts a connection to the service.
     * Users can optionally call connect() to manually set up a connection in advance, before starting interactions.
     *
     * Note: On return, the connection might not be ready yet. Please subscribe to the Connected event to
     * be notified when the connection is established.
     * @member DialogServiceConnector.prototype.connect
     * @function
     * @public
     */_createClass(DialogServiceConnector,[{key:"connect",value:function connect(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.privReco.connect(),cb,err);}/**
     * Closes the connection the service.
     * Users can optionally call disconnect() to manually shutdown the connection of the associated DialogServiceConnector.
     *
     * If disconnect() is called during a recognition, recognition will fail and cancel with an error.
     */},{key:"disconnect",value:function disconnect(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.privReco.disconnect(),cb,err);}/**
     * Gets the authorization token used to communicate with the service.
     * @member DialogServiceConnector.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */},{key:"authorizationToken",get:function get(){return this.properties.getProperty(PropertyId_js_1.PropertyId.SpeechServiceAuthorization_Token);}/**
     * Sets the authorization token used to communicate with the service.
     * @member DialogServiceConnector.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */,set:function set(token){Contracts_js_1.Contracts.throwIfNullOrWhitespace(token,"token");this.properties.setProperty(PropertyId_js_1.PropertyId.SpeechServiceAuthorization_Token,token);}/**
     * The collection of properties and their values defined for this DialogServiceConnector.
     * @member DialogServiceConnector.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this DialogServiceConnector.
     */},{key:"properties",get:function get(){return this.privProperties;}/** Gets the template for the activity generated by service from speech.
     * Properties from the template will be stamped on the generated activity.
     * It can be empty
     */},{key:"speechActivityTemplate",get:function get(){return this.properties.getProperty(PropertyId_js_1.PropertyId.Conversation_Speech_Activity_Template);}/** Sets the template for the activity generated by service from speech.
     * Properties from the template will be stamped on the generated activity.
     * It can be null or empty.
     * Note: it has to be a valid Json object.
     */,set:function set(speechActivityTemplate){this.properties.setProperty(PropertyId_js_1.PropertyId.Conversation_Speech_Activity_Template,speechActivityTemplate);}/**
     * Starts recognition and stops after the first utterance is recognized.
     * @member DialogServiceConnector.prototype.listenOnceAsync
     * @function
     * @public
     * @param cb - Callback that received the result when the reco has completed.
     * @param err - Callback invoked in case of an error.
     */},{key:"listenOnceAsync",value:function listenOnceAsync(cb,err){var _this79=this;if(this.isTurnComplete){Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);var callbackHolder=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee26(){var ret,e;return _regeneratorRuntime().wrap(function _callee26$(_context26){while(1)switch(_context26.prev=_context26.next){case 0:_context26.next=2;return _this79.privReco.connect();case 2:_context26.next=4;return _this79.implRecognizerStop();case 4:_this79.isTurnComplete=false;ret=new Exports_js_2.Deferred();_context26.next=8;return _this79.privReco.recognize(Exports_js_1.RecognitionMode.Conversation,ret.resolve,ret.reject);case 8:_context26.next=10;return ret.promise;case 10:e=_context26.sent;_context26.next=13;return _this79.implRecognizerStop();case 13:return _context26.abrupt("return",e);case 14:case"end":return _context26.stop();}},_callee26);}));return function callbackHolder(){return _ref3.apply(this,arguments);};}();var retPromise=callbackHolder();retPromise["catch"](function(){// Destroy the recognizer.
// We've done all we can here.
// eslint-disable-next-line @typescript-eslint/no-empty-function
_this79.dispose(true)["catch"](function(){});});Exports_js_2.marshalPromiseToCallbacks(retPromise["finally"](function(){_this79.isTurnComplete=true;}),cb,err);}}},{key:"sendActivityAsync",value:function sendActivityAsync(activity,cb,errCb){Exports_js_2.marshalPromiseToCallbacks(this.privReco.sendMessage(activity),cb,errCb);}/**
     * closes all external resources held by an instance of this class.
     * @member DialogServiceConnector.prototype.close
     * @function
     * @public
     */},{key:"close",value:function close(cb,err){Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Exports_js_2.marshalPromiseToCallbacks(this.dispose(true),cb,err);}},{key:"dispose",value:function(){var _dispose7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee27(disposing){return _regeneratorRuntime().wrap(function _callee27$(_context27){while(1)switch(_context27.prev=_context27.next){case 0:if(!this.privIsDisposed){_context27.next=2;break;}return _context27.abrupt("return");case 2:if(!disposing){_context27.next=8;break;}this.privIsDisposed=true;_context27.next=6;return this.implRecognizerStop();case 6:_context27.next=8;return _get(_getPrototypeOf(DialogServiceConnector.prototype),"dispose",this).call(this,disposing);case 8:case"end":return _context27.stop();}},_callee27,this);}));function dispose(_x19){return _dispose7.apply(this,arguments);}return dispose;}()},{key:"createRecognizerConfig",value:function createRecognizerConfig(speechConfig){return new Exports_js_1.RecognizerConfig(speechConfig,this.privProperties);}},{key:"createServiceRecognizer",value:function createServiceRecognizer(authentication,connectionFactory,audioConfig,recognizerConfig){var audioSource=audioConfig;return new Exports_js_1.DialogServiceAdapter(authentication,connectionFactory,audioSource,recognizerConfig,this);}},{key:"buildAgentConfig",value:function buildAgentConfig(){var communicationType=this.properties.getProperty("Conversation_Communication_Type","Default");return{botInfo:{commType:communicationType,commandsCulture:undefined,connectionId:this.properties.getProperty(PropertyId_js_1.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(PropertyId_js_1.PropertyId.Conversation_Conversation_Id,undefined),fromId:this.properties.getProperty(PropertyId_js_1.PropertyId.Conversation_From_Id,undefined),ttsAudioFormat:this.properties.getProperty(PropertyId_js_1.PropertyId.SpeechServiceConnection_SynthOutputFormat,undefined)},version:0.2};}}]);return DialogServiceConnector;}(Exports_js_3.Recognizer);exports.DialogServiceConnector=DialogServiceConnector;/***/},/* 133 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.DialogConnectionFactory=void 0;/* eslint-disable max-classes-per-file */var Exports_js_1=__webpack_require__(60);var Exports_js_2=__webpack_require__(2);var Exports_js_3=__webpack_require__(79);var ConnectionFactoryBase_js_1=__webpack_require__(134);var Exports_js_4=__webpack_require__(2);var HeaderNames_js_1=__webpack_require__(54);var QueryParameterNames_js_1=__webpack_require__(135);var DialogConnectionFactory=/*#__PURE__*/function(_ConnectionFactoryBas2){_inherits(DialogConnectionFactory,_ConnectionFactoryBas2);var _super84=_createSuper(DialogConnectionFactory);function DialogConnectionFactory(){_classCallCheck(this,DialogConnectionFactory);return _super84.apply(this,arguments);}_createClass(DialogConnectionFactory,[{key:"create",value:function create(config,authInfo,connectionId){var applicationId=config.parameters.getProperty(Exports_js_3.PropertyId.Conversation_ApplicationId,"");var dialogType=config.parameters.getProperty(Exports_js_3.PropertyId.Conversation_DialogType);var region=config.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Region);var language=config.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US");var requestTurnStatus=config.parameters.getProperty(Exports_js_3.PropertyId.Conversation_Request_Bot_Status_Messages,"true");var queryParams={};queryParams[HeaderNames_js_1.HeaderNames.ConnectionId]=connectionId;queryParams[QueryParameterNames_js_1.QueryParameterNames.Format]=config.parameters.getProperty(Exports_js_2.OutputFormatPropertyName,Exports_js_3.OutputFormat[Exports_js_3.OutputFormat.Simple]).toLowerCase();queryParams[QueryParameterNames_js_1.QueryParameterNames.Language]=language;queryParams[QueryParameterNames_js_1.QueryParameterNames.RequestBotStatusMessages]=requestTurnStatus;if(applicationId){queryParams[QueryParameterNames_js_1.QueryParameterNames.BotId]=applicationId;if(dialogType===Exports_js_3.DialogServiceConfig.DialogTypes.CustomCommands){queryParams[HeaderNames_js_1.HeaderNames.CustomCommandsAppId]=applicationId;}}var resourceInfix=dialogType===Exports_js_3.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"";var version=dialogType===Exports_js_3.DialogServiceConfig.DialogTypes.CustomCommands?"v1":dialogType===Exports_js_3.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0";var headers={};if(authInfo.token!=null&&authInfo.token!==""){headers[authInfo.headerName]=authInfo.token;}// The URL used for connection is chosen in a priority order of specification:
//  1. If a custom endpoint is provided, that URL is used verbatim.
//  2. If a custom host is provided (e.g. "wss://my.custom.endpoint.com:1123"), a URL is constructed from it.
//  3. If no custom connection details are provided, a URL is constructed from default values.
var endpoint=config.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Endpoint,"");if(!endpoint){var hostSuffix=ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region);var host=config.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Host,"wss://".concat(region,".").concat(DialogConnectionFactory.BaseUrl).concat(hostSuffix));var standardizedHost=host.endsWith("/")?host:host+"/";endpoint="".concat(standardizedHost).concat(resourceInfix).concat(DialogConnectionFactory.ApiKey,"/").concat(version);}this.setCommonUrlParams(config,queryParams,endpoint);var enableCompression=config.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new Exports_js_1.WebsocketConnection(endpoint,queryParams,headers,new Exports_js_4.WebsocketMessageFormatter(),Exports_js_1.ProxyInfo.fromRecognizerConfig(config),enableCompression,connectionId);}}]);return DialogConnectionFactory;}(ConnectionFactoryBase_js_1.ConnectionFactoryBase);exports.DialogConnectionFactory=DialogConnectionFactory;DialogConnectionFactory.ApiKey="api";DialogConnectionFactory.BaseUrl="convai.speech";/***/},/* 134 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConnectionFactoryBase=void 0;var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(79);var QueryParameterNames_js_1=__webpack_require__(135);var ConnectionFactoryBase=/*#__PURE__*/function(){function ConnectionFactoryBase(){_classCallCheck(this,ConnectionFactoryBase);}_createClass(ConnectionFactoryBase,[{key:"setCommonUrlParams",value:function setCommonUrlParams(config,queryParams,endpoint){var _this80=this;var propertyIdToParameterMap=new Map([[Exports_js_2.PropertyId.Speech_SegmentationSilenceTimeoutMs,QueryParameterNames_js_1.QueryParameterNames.SegmentationSilenceTimeoutMs],[Exports_js_2.PropertyId.SpeechServiceConnection_EnableAudioLogging,QueryParameterNames_js_1.QueryParameterNames.EnableAudioLogging],[Exports_js_2.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,QueryParameterNames_js_1.QueryParameterNames.EndSilenceTimeoutMs],[Exports_js_2.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,QueryParameterNames_js_1.QueryParameterNames.InitialSilenceTimeoutMs],[Exports_js_2.PropertyId.SpeechServiceResponse_PostProcessingOption,QueryParameterNames_js_1.QueryParameterNames.Postprocessing],[Exports_js_2.PropertyId.SpeechServiceResponse_ProfanityOption,QueryParameterNames_js_1.QueryParameterNames.Profanity],[Exports_js_2.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,QueryParameterNames_js_1.QueryParameterNames.EnableWordLevelTimestamps],[Exports_js_2.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,QueryParameterNames_js_1.QueryParameterNames.StableIntermediateThreshold]]);propertyIdToParameterMap.forEach(function(parameterName,propertyId){_this80.setUrlParameter(propertyId,parameterName,config,queryParams,endpoint);});var serviceProperties=JSON.parse(config.parameters.getProperty(Exports_js_1.ServicePropertiesPropertyName,"{}"));Object.keys(serviceProperties).forEach(function(value){queryParams[value]=serviceProperties[value];});}},{key:"setUrlParameter",value:function setUrlParameter(propId,parameterName,config,queryParams,endpoint){var value=config.parameters.getProperty(propId,undefined);// FIXME: The .search() check will incorrectly match parameter name anywhere in the string
//        including e.g. the path portion, or even as a substring of other query parameters
if(value&&(!endpoint||endpoint.search(parameterName)===-1)){queryParams[parameterName]=value.toLocaleLowerCase();}}}],[{key:"getHostSuffix",value:function getHostSuffix(region){if(!!region){if(region.toLowerCase().startsWith("china")){return".azure.cn";}if(region.toLowerCase().startsWith("usgov")){return".azure.us";}}return".microsoft.com";}}]);return ConnectionFactoryBase;}();exports.ConnectionFactoryBase=ConnectionFactoryBase;/***/},/* 135 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.QueryParameterNames=void 0;var QueryParameterNames=/*#__PURE__*/_createClass(function QueryParameterNames(){_classCallCheck(this,QueryParameterNames);});exports.QueryParameterNames=QueryParameterNames;QueryParameterNames.BotId="botid";QueryParameterNames.CustomSpeechDeploymentId="cid";QueryParameterNames.CustomVoiceDeploymentId="deploymentId";QueryParameterNames.EnableAudioLogging="storeAudio";QueryParameterNames.EnableLanguageId="lidEnabled";QueryParameterNames.EnableWordLevelTimestamps="wordLevelTimestamps";QueryParameterNames.EndSilenceTimeoutMs="endSilenceTimeoutMs";QueryParameterNames.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs";QueryParameterNames.SegmentationMaximumTimeMs="segmentationMaximumTimeMs";QueryParameterNames.SegmentationStrategy="segmentationStrategy";QueryParameterNames.Format="format";QueryParameterNames.InitialSilenceTimeoutMs="initialSilenceTimeoutMs";QueryParameterNames.Language="language";QueryParameterNames.Profanity="profanity";QueryParameterNames.RequestBotStatusMessages="enableBotMessageStatus";QueryParameterNames.StableIntermediateThreshold="stableIntermediateThreshold";QueryParameterNames.StableTranslation="stableTranslation";QueryParameterNames.TestHooks="testhooks";QueryParameterNames.Postprocessing="postprocessing";QueryParameterNames.CtsMeetingId="meetingId";QueryParameterNames.CtsDeviceId="deviceId";QueryParameterNames.CtsIsParticipant="isParticipant";QueryParameterNames.EnableAvatar="enableTalkingAvatar";/***/},/* 136 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ActivityReceivedEventArgs=void 0;/**
 * Defines contents of received message/events.
 * @class ActivityReceivedEventArgs
 */var ActivityReceivedEventArgs=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {any} activity - The activity..
     */function ActivityReceivedEventArgs(activity,audioStream){_classCallCheck(this,ActivityReceivedEventArgs);this.privActivity=activity;this.privAudioStream=audioStream;}/**
     * Gets the received activity
     * @member ActivityReceivedEventArgs.prototype.activity
     * @function
     * @public
     * @returns {any} the received activity.
     */_createClass(ActivityReceivedEventArgs,[{key:"activity",get:function get(){return this.privActivity;}},{key:"audioStream",get:function get(){return this.privAudioStream;}}]);return ActivityReceivedEventArgs;}();exports.ActivityReceivedEventArgs=ActivityReceivedEventArgs;/***/},/* 137 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.TurnStatusReceivedEventArgs=void 0;var TurnStatusPayload_js_1=__webpack_require__(138);/**
 * Defines contents of received message/events.
 * @class TurnStatusReceivedEventArgs
 */var TurnStatusReceivedEventArgs=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} turnStatus - The JSON-encoded turn status message.
     */function TurnStatusReceivedEventArgs(turnStatus){_classCallCheck(this,TurnStatusReceivedEventArgs);this.privTurnStatus=TurnStatusPayload_js_1.TurnStatusResponsePayload.fromJSON(turnStatus);}/**
     * Gets the interaction identifier associated with this turn status event.
     * @member TurnStatusReceivedEventArgs.prototype.interactionId
     * @function
     * @public
     * @returns {any} the received interaction id.
     */_createClass(TurnStatusReceivedEventArgs,[{key:"interactionId",get:function get(){return this.privTurnStatus.interactionId;}/**
     * Gets the conversation identifier associated with this turn status event.
     * @member TurnStatusReceivedEventArgs.prototype.conversationId
     * @function
     * @public
     * @returns {any} the received conversation id.
     */},{key:"conversationId",get:function get(){return this.privTurnStatus.conversationId;}/**
     * Gets the received turn status code.
     * @member TurnStatusReceivedEventArgs.prototype.statusCode
     * @function
     * @public
     * @returns {number} the received turn status.
     */},{key:"statusCode",get:function get(){return this.privTurnStatus.statusCode;// eslint-disable-line @typescript-eslint/no-unsafe-return
}}]);return TurnStatusReceivedEventArgs;}();exports.TurnStatusReceivedEventArgs=TurnStatusReceivedEventArgs;/***/},/* 138 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.TurnStatusResponsePayload=void 0;var TurnStatusResponsePayload=/*#__PURE__*/function(){function TurnStatusResponsePayload(json){_classCallCheck(this,TurnStatusResponsePayload);this.privMessageStatusResponse=JSON.parse(json);}_createClass(TurnStatusResponsePayload,[{key:"interactionId",get:function get(){return this.privMessageStatusResponse.interactionId;}},{key:"conversationId",get:function get(){return this.privMessageStatusResponse.conversationId;}},{key:"statusCode",get:function get(){// Payloads may contain a limited set of textual representations or a numeric status
// code. The textual values are here converted into numeric ones.
switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:// eslint-disable-next-line @typescript-eslint/no-unsafe-return
return this.privMessageStatusResponse.statusCode;}}}],[{key:"fromJSON",value:function fromJSON(json){return new TurnStatusResponsePayload(json);}}]);return TurnStatusResponsePayload;}();exports.TurnStatusResponsePayload=TurnStatusResponsePayload;/***/},/* 139 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ServicePropertyChannel=void 0;/**
 * Defines channels used to pass property settings to service.
 * Added in version 1.7.0.
 */var ServicePropertyChannel;(function(ServicePropertyChannel){/**
     * Uses URI query parameter to pass property settings to service.
     */ServicePropertyChannel[ServicePropertyChannel["UriQueryParameter"]=0]="UriQueryParameter";})(ServicePropertyChannel=exports.ServicePropertyChannel||(exports.ServicePropertyChannel={}));/***/},/* 140 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ProfanityOption=void 0;/**
 * Profanity option.
 * Added in version 1.7.0.
 */var ProfanityOption;(function(ProfanityOption){ProfanityOption[ProfanityOption["Masked"]=0]="Masked";ProfanityOption[ProfanityOption["Removed"]=1]="Removed";ProfanityOption[ProfanityOption["Raw"]=2]="Raw";})(ProfanityOption=exports.ProfanityOption||(exports.ProfanityOption={}));/***/},/* 141 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.BaseAudioPlayer=void 0;var Error_js_1=__webpack_require__(26);var Exports_js_1=__webpack_require__(79);var AudioStreamFormat_js_1=__webpack_require__(67);/**
 * Base audio player class
 * TODO: Plays only PCM for now.
 * @class
 */var BaseAudioPlayer=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {AudioStreamFormat} audioFormat audio stream format recognized by the player.
     */function BaseAudioPlayer(audioFormat){_classCallCheck(this,BaseAudioPlayer);this.audioContext=null;this.gainNode=null;this.autoUpdateBufferTimer=0;if(audioFormat===undefined){audioFormat=Exports_js_1.AudioStreamFormat.getDefaultInputFormat();}this.init(audioFormat);}/**
     * play Audio sample
     * @param newAudioData audio data to be played.
     */_createClass(BaseAudioPlayer,[{key:"playAudioSample",value:function playAudioSample(newAudioData,cb,err){try{this.ensureInitializedContext();var audioData=this.formatAudioData(newAudioData);var newSamplesData=new Float32Array(this.samples.length+audioData.length);newSamplesData.set(this.samples,0);newSamplesData.set(audioData,this.samples.length);this.samples=newSamplesData;if(!!cb){cb();}}catch(e){if(!!err){err(e);}}}/**
     * stops audio and clears the buffers
     */},{key:"stopAudio",value:function stopAudio(cb,err){if(this.audioContext!==null){this.samples=new Float32Array();// eslint-disable-next-line @typescript-eslint/no-unsafe-argument
clearInterval(this.autoUpdateBufferTimer);this.audioContext.close().then(function(){if(!!cb){cb();}},function(error){if(!!err){err(error);}});this.audioContext=null;}}},{key:"init",value:function init(audioFormat){this.audioFormat=audioFormat;this.samples=new Float32Array();}},{key:"ensureInitializedContext",value:function ensureInitializedContext(){var _this81=this;if(this.audioContext===null){this.createAudioContext();var timerPeriod=200;this.autoUpdateBufferTimer=setInterval(function(){_this81.updateAudioBuffer();},timerPeriod);}}},{key:"createAudioContext",value:function createAudioContext(){// new ((window as any).AudioContext || (window as any).webkitAudioContext)();
this.audioContext=AudioStreamFormat_js_1.AudioStreamFormatImpl.getAudioContext();// TODO: Various examples shows this gain node, it does not seem to be needed unless we plan
// to control the volume, not likely
this.gainNode=this.audioContext.createGain();this.gainNode.gain.value=1;this.gainNode.connect(this.audioContext.destination);this.startTime=this.audioContext.currentTime;}},{key:"formatAudioData",value:function formatAudioData(audioData){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(audioData),128);case 16:return this.formatArrayBuffer(new Int16Array(audioData),32768);case 32:return this.formatArrayBuffer(new Int32Array(audioData),2147483648);default:throw new Error_js_1.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time");}}},{key:"formatArrayBuffer",value:function formatArrayBuffer(audioData,maxValue){var float32Data=new Float32Array(audioData.length);for(var i=0;i<audioData.length;i++){float32Data[i]=audioData[i]/maxValue;}return float32Data;}},{key:"updateAudioBuffer",value:function updateAudioBuffer(){if(this.samples.length===0){return;}var channelCount=this.audioFormat.channels;var bufferSource=this.audioContext.createBufferSource();var frameCount=this.samples.length/channelCount;var audioBuffer=this.audioContext.createBuffer(channelCount,frameCount,this.audioFormat.samplesPerSec);// TODO: Should we do the conversion in the pushAudioSample instead?
for(var channel=0;channel<channelCount;channel++){// Fill in individual channel data
var channelOffset=channel;var audioData=audioBuffer.getChannelData(channel);for(var i=0;i<this.samples.length;i++,channelOffset+=channelCount){audioData[i]=this.samples[channelOffset];}}if(this.startTime<this.audioContext.currentTime){this.startTime=this.audioContext.currentTime;}bufferSource.buffer=audioBuffer;bufferSource.connect(this.gainNode);bufferSource.start(this.startTime);// Make sure we play the next sample after the current one.
this.startTime+=audioBuffer.duration;// Clear the samples for the next pushed data.
this.samples=new Float32Array();}},{key:"playAudio",value:function(){var _playAudio=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee28(audioData){var source,destination;return _regeneratorRuntime().wrap(function _callee28$(_context28){while(1)switch(_context28.prev=_context28.next){case 0:if(this.audioContext===null){this.createAudioContext();}source=this.audioContext.createBufferSource();destination=this.audioContext.destination;_context28.next=5;return this.audioContext.decodeAudioData(audioData,function(newBuffer){source.buffer=newBuffer;source.connect(destination);source.start(0);});case 5:case"end":return _context28.stop();}},_callee28,this);}));function playAudio(_x20){return _playAudio.apply(this,arguments);}return playAudio;}()}]);return BaseAudioPlayer;}();exports.BaseAudioPlayer=BaseAudioPlayer;/***/},/* 142 */ /***/function(__unused_webpack_module,exports){"use strict";//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//
Object.defineProperty(exports,"__esModule",{value:true});exports.ConnectionMessageEventArgs=void 0;var ConnectionMessageEventArgs=/*#__PURE__*/function(){function ConnectionMessageEventArgs(message){_classCallCheck(this,ConnectionMessageEventArgs);this.privConnectionMessage=message;}/**
     * Gets the <see cref="ConnectionMessage"/> associated with this <see cref="ConnectionMessageEventArgs"/>.
     */_createClass(ConnectionMessageEventArgs,[{key:"message",get:function get(){return this.privConnectionMessage;}/**
     * Returns a string that represents the connection message event.
     */},{key:"toString",value:function toString(){return"Message: "+this.privConnectionMessage.toString();}}]);return ConnectionMessageEventArgs;}();exports.ConnectionMessageEventArgs=ConnectionMessageEventArgs;/***/},/* 143 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.VoiceProfile=void 0;/**
 * Defines Voice Profile class for Speaker Recognition
 * @class VoiceProfile
 */var VoiceProfile=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} profileId - profileId of this Voice Profile.
     * @param {VoiceProfileType} profileType - profileType of this Voice Profile.
     */function VoiceProfile(profileId,profileType){_classCallCheck(this,VoiceProfile);this.privId=profileId;this.privProfileType=profileType;}/**
     * profileId of this Voice Profile instance
     * @member VoiceProfile.prototype.profileId
     * @function
     * @public
     * @returns {string} profileId of this Voice Profile instance.
     */_createClass(VoiceProfile,[{key:"profileId",get:function get(){return this.privId;}/**
     * profileType of this Voice Profile instance
     * @member VoiceProfile.prototype.profileType
     * @function
     * @public
     * @returns {VoiceProfileType} profile type of this Voice Profile instance.
     */},{key:"profileType",get:function get(){return this.privProfileType;}}]);return VoiceProfile;}();exports.VoiceProfile=VoiceProfile;/***/},/* 144 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.VoiceProfileEnrollmentCancellationDetails=exports.VoiceProfileEnrollmentResult=void 0;/* eslint-disable max-classes-per-file */var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(79);/**
 * Output format
 * @class VoiceProfileEnrollmentResult
 */var VoiceProfileEnrollmentResult=/*#__PURE__*/function(){function VoiceProfileEnrollmentResult(reason,json,statusText){_classCallCheck(this,VoiceProfileEnrollmentResult);this.privReason=reason;this.privProperties=new Exports_js_2.PropertyCollection();if(this.privReason!==Exports_js_2.ResultReason.Canceled){if(!!json){this.privDetails=JSON.parse(json);if(this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"){this.privReason=Exports_js_2.ResultReason.EnrollingVoiceProfile;}}}else{this.privErrorDetails=statusText;this.privProperties.setProperty(Exports_js_1.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[Exports_js_2.CancellationErrorCode.ServiceError]);}}_createClass(VoiceProfileEnrollmentResult,[{key:"reason",get:function get(){return this.privReason;}},{key:"enrollmentsCount",get:function get(){return this.privDetails.enrollmentsCount;}},{key:"enrollmentsLength",get:function get(){return this.privDetails.enrollmentsLength;}},{key:"properties",get:function get(){return this.privProperties;}},{key:"enrollmentResultDetails",get:function get(){return this.privDetails;}},{key:"errorDetails",get:function get(){return this.privErrorDetails;}}],[{key:"FromIdentificationProfileList",value:function FromIdentificationProfileList(json){var results=[];var _iterator7=_createForOfIteratorHelper(json.value),_step7;try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var item=_step7.value;var reason=item.enrollmentStatus.toLowerCase()==="enrolling"?Exports_js_2.ResultReason.EnrollingVoiceProfile:item.enrollmentStatus.toLowerCase()==="enrolled"?Exports_js_2.ResultReason.EnrolledVoiceProfile:Exports_js_2.ResultReason.Canceled;var result=new VoiceProfileEnrollmentResult(reason,null,null);result.privDetails=this.getIdentificationDetails(item);results.push(result);}}catch(err){_iterator7.e(err);}finally{_iterator7.f();}return results;}},{key:"FromVerificationProfileList",value:function FromVerificationProfileList(json){var results=[];var _iterator8=_createForOfIteratorHelper(json.value),_step8;try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var item=_step8.value;var reason=item.enrollmentStatus.toLowerCase()==="enrolling"?Exports_js_2.ResultReason.EnrollingVoiceProfile:item.enrollmentStatus.toLowerCase()==="enrolled"?Exports_js_2.ResultReason.EnrolledVoiceProfile:Exports_js_2.ResultReason.Canceled;var result=new VoiceProfileEnrollmentResult(reason,null,null);result.privDetails=this.getVerificationDetails(item);results.push(result);}}catch(err){_iterator8.e(err);}finally{_iterator8.f();}return results;}},{key:"getIdentificationDetails",value:function getIdentificationDetails(json){return{audioLength:json.audioLength?parseFloat(json.audioLength):0,audioSpeechLength:json.audioSpeechLength?parseFloat(json.audioSpeechLength):0,enrollmentStatus:json.enrollmentStatus,enrollmentsCount:json.enrollmentsCount||0,enrollmentsLength:json.enrollmentsLength?parseFloat(json.enrollmentsLength):0,enrollmentsSpeechLength:json.enrollmentsSpeechLength?parseFloat(json.enrollmentsSpeechLength):0,profileId:json.profileId||json.identificationProfileId,remainingEnrollmentsSpeechLength:json.remainingEnrollmentsSpeechLength?parseFloat(json.remainingEnrollmentsSpeechLength):0};}},{key:"getVerificationDetails",value:function getVerificationDetails(json){return{audioLength:json.audioLength?parseFloat(json.audioLength):0,audioSpeechLength:json.audioSpeechLength?parseFloat(json.audioSpeechLength):0,enrollmentStatus:json.enrollmentStatus,enrollmentsCount:json.enrollmentsCount,enrollmentsLength:json.enrollmentsLength?parseFloat(json.enrollmentsLength):0,enrollmentsSpeechLength:json.enrollmentsSpeechLength?parseFloat(json.enrollmentsSpeechLength):0,profileId:json.profileId||json.verificationProfileId,remainingEnrollmentsCount:json.remainingEnrollments||json.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:json.remainingEnrollmentsSpeechLength?parseFloat(json.remainingEnrollmentsSpeechLength):0};}}]);return VoiceProfileEnrollmentResult;}();exports.VoiceProfileEnrollmentResult=VoiceProfileEnrollmentResult;/**
 * @class VoiceProfileEnrollmentCancellationDetails
 */var VoiceProfileEnrollmentCancellationDetails=/*#__PURE__*/function(_Exports_js_2$Cancell){_inherits(VoiceProfileEnrollmentCancellationDetails,_Exports_js_2$Cancell);var _super85=_createSuper(VoiceProfileEnrollmentCancellationDetails);function VoiceProfileEnrollmentCancellationDetails(reason,errorDetails,errorCode){_classCallCheck(this,VoiceProfileEnrollmentCancellationDetails);return _super85.call(this,reason,errorDetails,errorCode);}/**
     * Creates an instance of VoiceProfileEnrollmentCancellationDetails object for the canceled VoiceProfileEnrollmentResult.
     * @member VoiceProfileEnrollmentCancellationDetails.fromResult
     * @function
     * @public
     * @param {VoiceProfileEnrollmentResult} result - The result that was canceled.
     * @returns {VoiceProfileEnrollmentCancellationDetails} The cancellation details object being created.
     */_createClass(VoiceProfileEnrollmentCancellationDetails,null,[{key:"fromResult",value:function fromResult(result){var reason=Exports_js_2.CancellationReason.Error;var errorCode=Exports_js_2.CancellationErrorCode.NoError;if(!!result.properties){errorCode=Exports_js_2.CancellationErrorCode[result.properties.getProperty(Exports_js_1.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[Exports_js_2.CancellationErrorCode.NoError])];//eslint-disable-line
}return new VoiceProfileEnrollmentCancellationDetails(reason,result.errorDetails,errorCode);}}]);return VoiceProfileEnrollmentCancellationDetails;}(Exports_js_2.CancellationDetailsBase);exports.VoiceProfileEnrollmentCancellationDetails=VoiceProfileEnrollmentCancellationDetails;/***/},/* 145 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.VoiceProfileCancellationDetails=exports.VoiceProfileResult=void 0;/* eslint-disable max-classes-per-file */var Exports_js_1=__webpack_require__(2);var Contracts_js_1=__webpack_require__(64);var Exports_js_2=__webpack_require__(79);/**
 * Output format
 * @class VoiceProfileResult
 */var VoiceProfileResult=/*#__PURE__*/function(){function VoiceProfileResult(reason,statusText){_classCallCheck(this,VoiceProfileResult);this.privReason=reason;this.privProperties=new Exports_js_2.PropertyCollection();if(reason===Exports_js_2.ResultReason.Canceled){Contracts_js_1.Contracts.throwIfNullOrUndefined(statusText,"statusText");this.privErrorDetails=statusText;this.privProperties.setProperty(Exports_js_1.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[Exports_js_2.CancellationErrorCode.ServiceError]);}}_createClass(VoiceProfileResult,[{key:"reason",get:function get(){return this.privReason;}},{key:"properties",get:function get(){return this.privProperties;}},{key:"errorDetails",get:function get(){return this.privErrorDetails;}}]);return VoiceProfileResult;}();exports.VoiceProfileResult=VoiceProfileResult;/**
 * @class VoiceProfileCancellationDetails
 */var VoiceProfileCancellationDetails=/*#__PURE__*/function(_Exports_js_2$Cancell2){_inherits(VoiceProfileCancellationDetails,_Exports_js_2$Cancell2);var _super86=_createSuper(VoiceProfileCancellationDetails);function VoiceProfileCancellationDetails(reason,errorDetails,errorCode){_classCallCheck(this,VoiceProfileCancellationDetails);return _super86.call(this,reason,errorDetails,errorCode);}/**
     * Creates an instance of VoiceProfileCancellationDetails object for the canceled VoiceProfileResult.
     * @member VoiceProfileCancellationDetails.fromResult
     * @function
     * @public
     * @param {VoiceProfileResult} result - The result that was canceled.
     * @returns {VoiceProfileCancellationDetails} The cancellation details object being created.
     */_createClass(VoiceProfileCancellationDetails,null,[{key:"fromResult",value:function fromResult(result){var reason=Exports_js_2.CancellationReason.Error;var errorCode=Exports_js_2.CancellationErrorCode.NoError;if(!!result.properties){errorCode=Exports_js_2.CancellationErrorCode[result.properties.getProperty(Exports_js_1.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[Exports_js_2.CancellationErrorCode.NoError])];//eslint-disable-line
}return new VoiceProfileCancellationDetails(reason,result.errorDetails,errorCode);}}]);return VoiceProfileCancellationDetails;}(Exports_js_2.CancellationDetailsBase);exports.VoiceProfileCancellationDetails=VoiceProfileCancellationDetails;/***/},/* 146 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.VoiceProfilePhraseResult=void 0;var Contracts_js_1=__webpack_require__(64);var Exports_js_1=__webpack_require__(79);/**
 * Output format
 * @class VoiceProfilePhraseResult
 */var VoiceProfilePhraseResult=/*#__PURE__*/function(_Exports_js_1$VoicePr){_inherits(VoiceProfilePhraseResult,_Exports_js_1$VoicePr);var _super87=_createSuper(VoiceProfilePhraseResult);function VoiceProfilePhraseResult(reason,statusText,type,phraseArray){var _this82;_classCallCheck(this,VoiceProfilePhraseResult);_this82=_super87.call(this,reason,statusText);_this82.privPhrases=[];Contracts_js_1.Contracts.throwIfNullOrUndefined(phraseArray,"phrase array");_this82.privType=type;if(!!phraseArray&&!!phraseArray[0]){_this82.privPhrases=phraseArray;}return _this82;}_createClass(VoiceProfilePhraseResult,[{key:"phrases",get:function get(){return this.privPhrases;}},{key:"type",get:function get(){return this.privType;}}]);return VoiceProfilePhraseResult;}(Exports_js_1.VoiceProfileResult);exports.VoiceProfilePhraseResult=VoiceProfilePhraseResult;/***/},/* 147 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.VoiceProfileClient=void 0;var Exports_js_1=__webpack_require__(2);var AudioConfig_js_1=__webpack_require__(80);var Contracts_js_1=__webpack_require__(64);var Exports_js_2=__webpack_require__(79);/**
 * Defines VoiceProfileClient class for Speaker Recognition
 * Handles operations from user for Voice Profile operations (e.g. createProfile, deleteProfile)
 * @class VoiceProfileClient
 */var VoiceProfileClient=/*#__PURE__*/function(_Exports_js_2$Recogni){_inherits(VoiceProfileClient,_Exports_js_2$Recogni);var _super88=_createSuper(VoiceProfileClient);/**
     * VoiceProfileClient constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - An set of initial properties for this synthesizer (authentication key, region, &c)
     */function VoiceProfileClient(speechConfig){var _this83;_classCallCheck(this,VoiceProfileClient);Contracts_js_1.Contracts.throwIfNullOrUndefined(speechConfig,"speechConfig");var speechConfigImpl=speechConfig;Contracts_js_1.Contracts.throwIfNull(speechConfigImpl,"speechConfig");_this83=_super88.call(this,AudioConfig_js_1.AudioConfig.fromStreamInput(Exports_js_2.AudioInputStream.createPushStream()),speechConfigImpl.properties,new Exports_js_1.VoiceProfileConnectionFactory());_this83.privProperties=speechConfigImpl.properties.clone();_this83.privVoiceAdapter=_this83.privReco;_this83.privDisposedVoiceAdapter=false;return _this83;}/**
     * The collection of properties and their values defined for this VoiceProfileClient.
     * @member VoiceProfileClient.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this VoiceProfileClient.
     */_createClass(VoiceProfileClient,[{key:"properties",get:function get(){return this.privProperties;}/**
     * Gets the authorization token used to communicate with the service.
     * @member VoiceProfileClient.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */},{key:"authorizationToken",get:function get(){return this.properties.getProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token);}/**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member VoiceProfileClient.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */,set:function set(token){Contracts_js_1.Contracts.throwIfNullOrWhitespace(token,"token");this.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token,token);}/**
     * Create a speaker recognition voice profile
     * @member VoiceProfileClient.prototype.createProfileAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfileType} profileType Type of Voice Profile to be created
     * @param {string} lang Language string (locale) for Voice Profile
     * @return {Promise<VoiceProfile>} - Promise of a VoiceProfile.
     */},{key:"createProfileAsync",value:function(){var _createProfileAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee29(profileType,lang){var profileIds;return _regeneratorRuntime().wrap(function _callee29$(_context29){while(1)switch(_context29.prev=_context29.next){case 0:_context29.next=2;return this.privVoiceAdapter.createProfile(profileType,lang);case 2:profileIds=_context29.sent;return _context29.abrupt("return",new Exports_js_2.VoiceProfile(profileIds[0],profileType));case 4:case"end":return _context29.stop();}},_callee29,this);}));function createProfileAsync(_x21,_x22){return _createProfileAsync.apply(this,arguments);}return createProfileAsync;}()/**
     * Get current information of a voice profile
     * @member VoiceProfileClient.prototype.retrieveEnrollmentResultAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfile} profile Voice Profile to retrieve info for
     * @return {Promise<VoiceProfileEnrollmentResult>} - Promise of a VoiceProfileEnrollmentResult.
     */},{key:"retrieveEnrollmentResultAsync",value:function(){var _retrieveEnrollmentResultAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee30(profile){return _regeneratorRuntime().wrap(function _callee30$(_context30){while(1)switch(_context30.prev=_context30.next){case 0:return _context30.abrupt("return",this.privVoiceAdapter.retrieveEnrollmentResult(profile));case 1:case"end":return _context30.stop();}},_callee30,this);}));function retrieveEnrollmentResultAsync(_x23){return _retrieveEnrollmentResultAsync.apply(this,arguments);}return retrieveEnrollmentResultAsync;}()/**
     * Get all voice profiles on account with given voice profile type
     * @member VoiceProfileClient.prototype.getAllProfilesAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfileType} profileType profile type (identification/verification) for which to list profiles
     * @return {Promise<VoiceProfileEnrollmentResult[]>} - Promise of an array of VoiceProfileEnrollmentResults.
     */},{key:"getAllProfilesAsync",value:function(){var _getAllProfilesAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee31(profileType){return _regeneratorRuntime().wrap(function _callee31$(_context31){while(1)switch(_context31.prev=_context31.next){case 0:return _context31.abrupt("return",this.privVoiceAdapter.getAllProfiles(profileType));case 1:case"end":return _context31.stop();}},_callee31,this);}));function getAllProfilesAsync(_x24){return _getAllProfilesAsync.apply(this,arguments);}return getAllProfilesAsync;}()/**
     * Get valid authorization phrases for voice profile enrollment
     * @member VoiceProfileClient.prototype.getActivationPhrasesAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfileType} profileType Profile Type to get activation phrases for
     * @param {string} lang Language string (locale) for Voice Profile
     */},{key:"getActivationPhrasesAsync",value:function(){var _getActivationPhrasesAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee32(profileType,lang){return _regeneratorRuntime().wrap(function _callee32$(_context32){while(1)switch(_context32.prev=_context32.next){case 0:return _context32.abrupt("return",this.privVoiceAdapter.getActivationPhrases(profileType,lang));case 1:case"end":return _context32.stop();}},_callee32,this);}));function getActivationPhrasesAsync(_x25,_x26){return _getActivationPhrasesAsync.apply(this,arguments);}return getActivationPhrasesAsync;}()/**
     * Create a speaker recognition voice profile
     * @member VoiceProfileClient.prototype.enrollProfileAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfile} profile Voice Profile to create enrollment for
     * @param {AudioConfig} audioConfig source info from which to create enrollment
     * @return {Promise<VoiceProfileEnrollmentResult>} - Promise of a VoiceProfileEnrollmentResult.
     */},{key:"enrollProfileAsync",value:function(){var _enrollProfileAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee33(profile,audioConfig){var configImpl;return _regeneratorRuntime().wrap(function _callee33$(_context33){while(1)switch(_context33.prev=_context33.next){case 0:configImpl=audioConfig;Contracts_js_1.Contracts.throwIfNullOrUndefined(configImpl,"audioConfig");this.audioConfig=audioConfig;this.privVoiceAdapter.SpeakerAudioSource=configImpl;return _context33.abrupt("return",this.privVoiceAdapter.enrollProfile(profile));case 5:case"end":return _context33.stop();}},_callee33,this);}));function enrollProfileAsync(_x27,_x28){return _enrollProfileAsync.apply(this,arguments);}return enrollProfileAsync;}()/**
     * Delete a speaker recognition voice profile
     * @member VoiceProfileClient.prototype.deleteProfileAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfile} profile Voice Profile to be deleted
     * @return {Promise<VoiceProfileResult>} - Promise of a VoiceProfileResult.
     */},{key:"deleteProfileAsync",value:function(){var _deleteProfileAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee34(profile){return _regeneratorRuntime().wrap(function _callee34$(_context34){while(1)switch(_context34.prev=_context34.next){case 0:return _context34.abrupt("return",this.privVoiceAdapter.deleteProfile(profile));case 1:case"end":return _context34.stop();}},_callee34,this);}));function deleteProfileAsync(_x29){return _deleteProfileAsync.apply(this,arguments);}return deleteProfileAsync;}()/**
     * Remove all enrollments for a speaker recognition voice profile
     * @member VoiceProfileClient.prototype.resetProfileAsync
     * @function
     * @public
     * @async
     * @param {VoiceProfile} profile Voice Profile to be reset
     * @return {Promise<VoiceProfileResult>} - Promise of a VoiceProfileResult.
     */},{key:"resetProfileAsync",value:function(){var _resetProfileAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee35(profile){return _regeneratorRuntime().wrap(function _callee35$(_context35){while(1)switch(_context35.prev=_context35.next){case 0:return _context35.abrupt("return",this.privVoiceAdapter.resetProfile(profile));case 1:case"end":return _context35.stop();}},_callee35,this);}));function resetProfileAsync(_x30){return _resetProfileAsync.apply(this,arguments);}return resetProfileAsync;}()/**
     * Clean up object and close underlying connection
     * @member VoiceProfileClient.prototype.close
     * @function
     * @async
     * @public
     */},{key:"close",value:function(){var _close=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee36(){return _regeneratorRuntime().wrap(function _callee36$(_context36){while(1)switch(_context36.prev=_context36.next){case 0:_context36.next=2;return this.dispose(true);case 2:case"end":return _context36.stop();}},_callee36,this);}));function close(){return _close.apply(this,arguments);}return close;}()},{key:"createServiceRecognizer",value:function createServiceRecognizer(authentication,connectionFactory,audioConfig,recognizerConfig){var audioImpl=audioConfig;return new Exports_js_1.VoiceServiceRecognizer(authentication,connectionFactory,audioImpl,recognizerConfig,this);}},{key:"dispose",value:function(){var _dispose8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee37(disposing){return _regeneratorRuntime().wrap(function _callee37$(_context37){while(1)switch(_context37.prev=_context37.next){case 0:if(!this.privDisposedVoiceAdapter){_context37.next=2;break;}return _context37.abrupt("return");case 2:this.privDisposedVoiceAdapter=true;if(!disposing){_context37.next=6;break;}_context37.next=6;return _get(_getPrototypeOf(VoiceProfileClient.prototype),"dispose",this).call(this,disposing);case 6:case"end":return _context37.stop();}},_callee37,this);}));function dispose(_x31){return _dispose8.apply(this,arguments);}return dispose;}()},{key:"createRecognizerConfig",value:function createRecognizerConfig(speechConfig){return new Exports_js_1.RecognizerConfig(speechConfig,this.properties);}},{key:"getResult",value:function getResult(result,successReason){var response=new Exports_js_2.VoiceProfileResult(result.ok?successReason:Exports_js_2.ResultReason.Canceled,result.statusText);return response;}}]);return VoiceProfileClient;}(Exports_js_2.Recognizer);exports.VoiceProfileClient=VoiceProfileClient;/***/},/* 148 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeakerRecognizer=void 0;var Exports_js_1=__webpack_require__(2);var Contracts_js_1=__webpack_require__(64);var Exports_js_2=__webpack_require__(79);/**
 * Defines SpeakerRecognizer class for Speaker Recognition
 * Handles operations from user for Voice Profile operations (e.g. createProfile, deleteProfile)
 * @class SpeakerRecognizer
 */var SpeakerRecognizer=/*#__PURE__*/function(_Exports_js_2$Recogni2){_inherits(SpeakerRecognizer,_Exports_js_2$Recogni2);var _super89=_createSuper(SpeakerRecognizer);/**
     * Initializes an instance of the SpeakerRecognizer.
     * @constructor
     * @param {SpeechConfig} speechConfig - The set of configuration properties.
     * @param {AudioConfig} audioConfig - An optional audio input config associated with the recognizer
     */function SpeakerRecognizer(speechConfig,audioConfig){var _this84;_classCallCheck(this,SpeakerRecognizer);Contracts_js_1.Contracts.throwIfNullOrUndefined(speechConfig,"speechConfig");var configImpl=speechConfig;Contracts_js_1.Contracts.throwIfNullOrUndefined(configImpl,"speechConfig");_this84=_super89.call(this,audioConfig,configImpl.properties,new Exports_js_1.SpeakerRecognitionConnectionFactory());_this84.privAudioConfigImpl=audioConfig;Contracts_js_1.Contracts.throwIfNull(_this84.privAudioConfigImpl,"audioConfig");_this84.privDisposedSpeakerRecognizer=false;_this84.privProperties=configImpl.properties;return _this84;}/**
     * Gets the authorization token used to communicate with the service.
     * @member SpeakerRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */_createClass(SpeakerRecognizer,[{key:"authorizationToken",get:function get(){return this.properties.getProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token);}/**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member SpeakerRecognizer.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */,set:function set(token){Contracts_js_1.Contracts.throwIfNullOrWhitespace(token,"token");this.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token,token);}/**
     * The collection of properties and their values defined for this SpeakerRecognizer.
     * @member SpeakerRecognizer.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this SpeakerRecognizer.
     */},{key:"properties",get:function get(){return this.privProperties;}/**
     * Get recognition result for model using given audio
     * @member SpeakerRecognizer.prototype.recognizeOnceAsync
     * @function
     * @public
     * @async
     * @param {SpeakerIdentificationModel | SpeakerVerificationModel} model Model containing Voice Profiles to be identified
     * @param cb - Callback invoked once result is returned.
     * @param err - Callback invoked in case of an error.
     */},{key:"recognizeOnceAsync",value:function(){var _recognizeOnceAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee38(model){return _regeneratorRuntime().wrap(function _callee38$(_context38){while(1)switch(_context38.prev=_context38.next){case 0:Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer);return _context38.abrupt("return",this.recognizeSpeakerOnceAsyncImpl(model));case 2:case"end":return _context38.stop();}},_callee38,this);}));function recognizeOnceAsync(_x32){return _recognizeOnceAsync.apply(this,arguments);}return recognizeOnceAsync;}()/**
     * Included for compatibility
     * @member SpeakerRecognizer.prototype.close
     * @function
     * @public
     * @async
     */},{key:"close",value:function(){var _close2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee39(){return _regeneratorRuntime().wrap(function _callee39$(_context39){while(1)switch(_context39.prev=_context39.next){case 0:Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer);_context39.next=3;return this.dispose(true);case 3:case"end":return _context39.stop();}},_callee39,this);}));function close(){return _close2.apply(this,arguments);}return close;}()},{key:"recognizeSpeakerOnceAsyncImpl",value:function(){var _recognizeSpeakerOnceAsyncImpl=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee40(model){var result;return _regeneratorRuntime().wrap(function _callee40$(_context40){while(1)switch(_context40.prev=_context40.next){case 0:Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer);_context40.next=3;return this.implRecognizerStop();case 3:_context40.next=5;return this.privReco.recognizeSpeaker(model);case 5:result=_context40.sent;_context40.next=8;return this.implRecognizerStop();case 8:return _context40.abrupt("return",result);case 9:case"end":return _context40.stop();}},_callee40,this);}));function recognizeSpeakerOnceAsyncImpl(_x33){return _recognizeSpeakerOnceAsyncImpl.apply(this,arguments);}return recognizeSpeakerOnceAsyncImpl;}()},{key:"implRecognizerStop",value:function(){var _implRecognizerStop2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee41(){return _regeneratorRuntime().wrap(function _callee41$(_context41){while(1)switch(_context41.prev=_context41.next){case 0:if(!this.privReco){_context41.next=3;break;}_context41.next=3;return this.privReco.stopRecognizing();case 3:return _context41.abrupt("return");case 4:case"end":return _context41.stop();}},_callee41,this);}));function implRecognizerStop(){return _implRecognizerStop2.apply(this,arguments);}return implRecognizerStop;}()},{key:"createRecognizerConfig",value:function createRecognizerConfig(speechConfig){return new Exports_js_1.RecognizerConfig(speechConfig,this.privProperties);}},{key:"createServiceRecognizer",value:function createServiceRecognizer(authentication,connectionFactory,audioConfig,recognizerConfig){var audioImpl=audioConfig;return new Exports_js_1.SpeakerServiceRecognizer(authentication,connectionFactory,audioImpl,recognizerConfig,this);}},{key:"dispose",value:function(){var _dispose9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee42(disposing){return _regeneratorRuntime().wrap(function _callee42$(_context42){while(1)switch(_context42.prev=_context42.next){case 0:if(!this.privDisposedSpeakerRecognizer){_context42.next=2;break;}return _context42.abrupt("return");case 2:if(!disposing){_context42.next=6;break;}this.privDisposedSpeakerRecognizer=true;_context42.next=6;return _get(_getPrototypeOf(SpeakerRecognizer.prototype),"dispose",this).call(this,disposing);case 6:case"end":return _context42.stop();}},_callee42,this);}));function dispose(_x34){return _dispose9.apply(this,arguments);}return dispose;}()}]);return SpeakerRecognizer;}(Exports_js_2.Recognizer);exports.SpeakerRecognizer=SpeakerRecognizer;/***/},/* 149 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeakerIdentificationModel=void 0;var Contracts_js_1=__webpack_require__(64);var Exports_js_1=__webpack_require__(79);/**
 * Defines SpeakerIdentificationModel class for Speaker Recognition
 * Model contains a set of profiles against which to identify speaker(s)
 * @class SpeakerIdentificationModel
 */var SpeakerIdentificationModel=/*#__PURE__*/function(){function SpeakerIdentificationModel(profiles){_classCallCheck(this,SpeakerIdentificationModel);this.privVoiceProfiles=[];this.privProfileIds=[];Contracts_js_1.Contracts.throwIfNullOrUndefined(profiles,"VoiceProfiles");if(profiles.length===0){throw new Error("Empty Voice Profiles array");}var _iterator9=_createForOfIteratorHelper(profiles),_step9;try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var profile=_step9.value;if(profile.profileType!==Exports_js_1.VoiceProfileType.TextIndependentIdentification){throw new Error("Identification model can only be created from Identification profile: "+profile.profileId);}this.privVoiceProfiles.push(profile);this.privProfileIds.push(profile.profileId);}}catch(err){_iterator9.e(err);}finally{_iterator9.f();}}_createClass(SpeakerIdentificationModel,[{key:"voiceProfileIds",get:function get(){return this.privProfileIds.join(",");}},{key:"profileIds",get:function get(){return this.privProfileIds;}},{key:"scenario",get:function get(){return"TextIndependentIdentification";}}],[{key:"fromProfiles",value:function fromProfiles(profiles){return new SpeakerIdentificationModel(profiles);}}]);return SpeakerIdentificationModel;}();exports.SpeakerIdentificationModel=SpeakerIdentificationModel;/***/},/* 150 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeakerVerificationModel=void 0;var Contracts_js_1=__webpack_require__(64);var Exports_js_1=__webpack_require__(79);/**
 * Defines SpeakerVerificationModel class for Speaker Recognition
 * Model contains a profile against which to verify a speaker
 * @class SpeakerVerificationModel
 */var SpeakerVerificationModel=/*#__PURE__*/function(){function SpeakerVerificationModel(profile){_classCallCheck(this,SpeakerVerificationModel);Contracts_js_1.Contracts.throwIfNullOrUndefined(profile,"VoiceProfile");if(profile.profileType===Exports_js_1.VoiceProfileType.TextIndependentIdentification){throw new Error("Verification model cannot be created from Identification profile");}this.privVoiceProfile=profile;}_createClass(SpeakerVerificationModel,[{key:"voiceProfile",get:function get(){return this.privVoiceProfile;}},{key:"profileIds",get:function get(){return[this.voiceProfile.profileId];}},{key:"scenario",get:function get(){if(this.voiceProfile.profileType===Exports_js_1.VoiceProfileType.TextDependentVerification){return"TextDependentVerification";}else{return"TextIndependentVerification";}}}],[{key:"fromProfile",value:function fromProfile(profile){return new SpeakerVerificationModel(profile);}}]);return SpeakerVerificationModel;}();exports.SpeakerVerificationModel=SpeakerVerificationModel;/***/},/* 151 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.AutoDetectSourceLanguageConfig=void 0;var Exports_js_1=__webpack_require__(2);var Contracts_js_1=__webpack_require__(64);var Exports_js_2=__webpack_require__(79);var LanguageIdMode_js_1=__webpack_require__(152);/**
 * Language auto detect configuration.
 * @class AutoDetectSourceLanguageConfig
 * Added in version 1.13.0.
 */var AutoDetectSourceLanguageConfig=/*#__PURE__*/function(){function AutoDetectSourceLanguageConfig(){_classCallCheck(this,AutoDetectSourceLanguageConfig);this.privProperties=new Exports_js_2.PropertyCollection();this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart");this.privLanguageIdMode=LanguageIdMode_js_1.LanguageIdMode.AtStart;}/**
     * @member AutoDetectSourceLanguageConfig.fromOpenRange
     * @function
     * @public
     * @return {AutoDetectSourceLanguageConfig} Instance of AutoDetectSourceLanguageConfig
     * @summary Creates an instance of the AutoDetectSourceLanguageConfig with open range.
     * Only [[SpeechSynthesizer]] supports source language auto detection from open range,
     * for [[Recognizer]], please use AutoDetectSourceLanguageConfig with specific source languages.
     */_createClass(AutoDetectSourceLanguageConfig,[{key:"properties",get:/**
     * @member AutoDetectSourceLanguageConfig.prototype.properties
     * @function
     * @public
     * @return {PropertyCollection} Properties of the config.
     * @summary Gets an auto detected language config properties
     */function get(){return this.privProperties;}/**
     * @member AutoDetectSourceLanguageConfig.prototype.mode
     * @function
     * @public
     * @param {LanguageIdMode} mode LID mode desired.
     * @summary Sets LID operation to desired mode
     */},{key:"mode",set:function set(mode){if(mode===LanguageIdMode_js_1.LanguageIdMode.Continuous){this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2");this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous");}else{// LanguageIdMode.AtStart
this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1");this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart");}this.privLanguageIdMode=mode;}}],[{key:"fromOpenRange",value:function fromOpenRange(){var config=new AutoDetectSourceLanguageConfig();config.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,Exports_js_1.AutoDetectSourceLanguagesOpenRangeOptionName);return config;}/**
     * @member AutoDetectSourceLanguageConfig.fromLanguages
     * @function
     * @public
     * @param {string[]} languages Comma-separated string of languages (eg. "en-US,fr-FR") to populate properties of config.
     * @return {AutoDetectSourceLanguageConfig} Instance of AutoDetectSourceLanguageConfig
     * @summary Creates an instance of the AutoDetectSourceLanguageConfig with given languages.
     */},{key:"fromLanguages",value:function fromLanguages(languages){Contracts_js_1.Contracts.throwIfArrayEmptyOrWhitespace(languages,"languages");var config=new AutoDetectSourceLanguageConfig();config.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,languages.join());return config;}/**
     * @member AutoDetectSourceLanguageConfig.fromSourceLanguageConfigs
     * @function
     * @public
     * @param {SourceLanguageConfig[]} configs SourceLanguageConfigs to populate properties of config.
     * @return {AutoDetectSourceLanguageConfig} Instance of AutoDetectSourceLanguageConfig
     * @summary Creates an instance of the AutoDetectSourceLanguageConfig with given SourceLanguageConfigs.
     */},{key:"fromSourceLanguageConfigs",value:function fromSourceLanguageConfigs(configs){if(configs.length<1){throw new Error("Expected non-empty SourceLanguageConfig array.");}var autoConfig=new AutoDetectSourceLanguageConfig();var langs=[];configs.forEach(function(config){langs.push(config.language);if(config.endpointId!==undefined&&config.endpointId!==""){var customProperty=config.language+Exports_js_2.PropertyId.SpeechServiceConnection_EndpointId.toString();autoConfig.properties.setProperty(customProperty,config.endpointId);}});autoConfig.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,langs.join());return autoConfig;}}]);return AutoDetectSourceLanguageConfig;}();exports.AutoDetectSourceLanguageConfig=AutoDetectSourceLanguageConfig;/***/},/* 152 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.LanguageIdMode=void 0;/**
 * Language Identification mode
 * @class LanguageIdMode
 */var LanguageIdMode;(function(LanguageIdMode){/**
     * Detect language at audio start
     * @member LanguageIdMode.AtStart
     */LanguageIdMode[LanguageIdMode["AtStart"]=0]="AtStart";/**
     * Continuously detect language
     * @member LanguageIdMode.Continuous
     */LanguageIdMode[LanguageIdMode["Continuous"]=1]="Continuous";})(LanguageIdMode=exports.LanguageIdMode||(exports.LanguageIdMode={}));/***/},/* 153 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.AutoDetectSourceLanguageResult=void 0;var Contracts_js_1=__webpack_require__(64);/**
 * Output format
 * @class AutoDetectSourceLanguageResult
 */var AutoDetectSourceLanguageResult=/*#__PURE__*/function(){function AutoDetectSourceLanguageResult(language,languageDetectionConfidence){_classCallCheck(this,AutoDetectSourceLanguageResult);Contracts_js_1.Contracts.throwIfNullOrUndefined(language,"language");Contracts_js_1.Contracts.throwIfNullOrUndefined(languageDetectionConfidence,"languageDetectionConfidence");this.privLanguage=language;this.privLanguageDetectionConfidence=languageDetectionConfidence;}/**
     * Creates an instance of AutoDetectSourceLanguageResult object from a SpeechRecognitionResult instance.
     * @member AutoDetectSourceLanguageResult.fromResult
     * @function
     * @public
     * @param {SpeechRecognitionResult} result - The recognition result.
     * @returns {AutoDetectSourceLanguageResult} AutoDetectSourceLanguageResult object being created.
     */_createClass(AutoDetectSourceLanguageResult,[{key:"language",get:function get(){return this.privLanguage;}},{key:"languageDetectionConfidence",get:function get(){return this.privLanguageDetectionConfidence;}}],[{key:"fromResult",value:function fromResult(result){return new AutoDetectSourceLanguageResult(result.language,result.languageDetectionConfidence);}/**
     * Creates an instance of AutoDetectSourceLanguageResult object from a ConversationTranscriptionResult instance.
     * @member AutoDetectSourceLanguageResult.fromConversationTranscriptionResult
     * @function
     * @public
     * @param {ConversationTranscriptionResult} result - The transcription result.
     * @returns {AutoDetectSourceLanguageResult} AutoDetectSourceLanguageResult object being created.
     */},{key:"fromConversationTranscriptionResult",value:function fromConversationTranscriptionResult(result){return new AutoDetectSourceLanguageResult(result.language,result.languageDetectionConfidence);}}]);return AutoDetectSourceLanguageResult;}();exports.AutoDetectSourceLanguageResult=AutoDetectSourceLanguageResult;/***/},/* 154 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SourceLanguageConfig=void 0;var Contracts_js_1=__webpack_require__(64);/**
 * Source Language configuration.
 * @class SourceLanguageConfig
 */var SourceLanguageConfig=/*#__PURE__*/function(){function SourceLanguageConfig(language,endpointId){_classCallCheck(this,SourceLanguageConfig);Contracts_js_1.Contracts.throwIfNullOrUndefined(language,"language");this.privLanguage=language;this.privEndpointId=endpointId;}/**
     * @member SourceLanguageConfig.fromLanguage
     * @function
     * @public
     * @param {string} language language (eg. "en-US") value of config.
     * @param {string?} endpointId endpointId of model bound to given language of config.
     * @return {SourceLanguageConfig} Instance of SourceLanguageConfig
     * @summary Creates an instance of the SourceLanguageConfig with the given language and optional endpointId.
     * Added in version 1.13.0.
     */_createClass(SourceLanguageConfig,[{key:"language",get:function get(){return this.privLanguage;}},{key:"endpointId",get:function get(){return this.privEndpointId;}}],[{key:"fromLanguage",value:function fromLanguage(language,endpointId){return new SourceLanguageConfig(language,endpointId);}}]);return SourceLanguageConfig;}();exports.SourceLanguageConfig=SourceLanguageConfig;/***/},/* 155 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeakerRecognitionCancellationDetails=exports.SpeakerRecognitionResult=exports.SpeakerRecognitionResultType=void 0;/* eslint-disable max-classes-per-file */var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(79);var SpeakerRecognitionResultType;(function(SpeakerRecognitionResultType){SpeakerRecognitionResultType[SpeakerRecognitionResultType["Verify"]=0]="Verify";SpeakerRecognitionResultType[SpeakerRecognitionResultType["Identify"]=1]="Identify";})(SpeakerRecognitionResultType=exports.SpeakerRecognitionResultType||(exports.SpeakerRecognitionResultType={}));/**
 * Output format
 * @class SpeakerRecognitionResult
 */var SpeakerRecognitionResult=/*#__PURE__*/function(){function SpeakerRecognitionResult(response){var resultReason=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Exports_js_2.ResultReason.RecognizedSpeaker;var cancellationErrorCode=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Exports_js_2.CancellationErrorCode.NoError;var errorDetails=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";_classCallCheck(this,SpeakerRecognitionResult);this.privProperties=new Exports_js_2.PropertyCollection();var resultType=response.scenario==="TextIndependentIdentification"?SpeakerRecognitionResultType.Identify:SpeakerRecognitionResultType.Verify;this.privReason=resultReason;if(this.privReason!==Exports_js_2.ResultReason.Canceled){if(resultType===SpeakerRecognitionResultType.Identify){this.privProfileId=response.identificationResult.identifiedProfile.profileId;this.privScore=response.identificationResult.identifiedProfile.score;this.privReason=Exports_js_2.ResultReason.RecognizedSpeakers;}else{this.privScore=response.verificationResult.score;if(response.verificationResult.recognitionResult.toLowerCase()!=="accept"){this.privReason=Exports_js_2.ResultReason.NoMatch;}if(response.verificationResult.profileId!==undefined&&response.verificationResult.profileId!==""){this.privProfileId=response.verificationResult.profileId;}}}else{this.privErrorDetails=errorDetails;this.privProperties.setProperty(Exports_js_1.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[cancellationErrorCode]);}this.privProperties.setProperty(Exports_js_2.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(response));}_createClass(SpeakerRecognitionResult,[{key:"properties",get:function get(){return this.privProperties;}},{key:"reason",get:function get(){return this.privReason;}},{key:"profileId",get:function get(){return this.privProfileId;}},{key:"errorDetails",get:function get(){return this.privErrorDetails;}},{key:"score",get:function get(){return this.privScore;}}]);return SpeakerRecognitionResult;}();exports.SpeakerRecognitionResult=SpeakerRecognitionResult;/**
 * @class SpeakerRecognitionCancellationDetails
 */var SpeakerRecognitionCancellationDetails=/*#__PURE__*/function(_Exports_js_2$Cancell3){_inherits(SpeakerRecognitionCancellationDetails,_Exports_js_2$Cancell3);var _super90=_createSuper(SpeakerRecognitionCancellationDetails);function SpeakerRecognitionCancellationDetails(reason,errorDetails,errorCode){_classCallCheck(this,SpeakerRecognitionCancellationDetails);return _super90.call(this,reason,errorDetails,errorCode);}/**
     * Creates an instance of SpeakerRecognitionCancellationDetails object for the canceled SpeakerRecognitionResult
     * @member SpeakerRecognitionCancellationDetails.fromResult
     * @function
     * @public
     * @param {SpeakerRecognitionResult} result - The result that was canceled.
     * @returns {SpeakerRecognitionCancellationDetails} The cancellation details object being created.
     */_createClass(SpeakerRecognitionCancellationDetails,null,[{key:"fromResult",value:function fromResult(result){var reason=Exports_js_2.CancellationReason.Error;var errorCode=Exports_js_2.CancellationErrorCode.NoError;if(!!result.properties){errorCode=Exports_js_2.CancellationErrorCode[result.properties.getProperty(Exports_js_1.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[Exports_js_2.CancellationErrorCode.NoError])];}return new SpeakerRecognitionCancellationDetails(reason,result.errorDetails,errorCode);}}]);return SpeakerRecognitionCancellationDetails;}(Exports_js_2.CancellationDetailsBase);exports.SpeakerRecognitionCancellationDetails=SpeakerRecognitionCancellationDetails;/***/},/* 156 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
Object.defineProperty(exports,"__esModule",{value:true});var Conversation_js_1=__webpack_require__(157);Object.defineProperty(exports,"Conversation",{enumerable:true,get:function get(){return Conversation_js_1.Conversation;}});Object.defineProperty(exports,"ConversationImpl",{enumerable:true,get:function get(){return Conversation_js_1.ConversationImpl;}});var ConversationCommon_js_1=__webpack_require__(158);Object.defineProperty(exports,"ConversationCommon",{enumerable:true,get:function get(){return ConversationCommon_js_1.ConversationCommon;}});var ConversationExpirationEventArgs_js_1=__webpack_require__(159);Object.defineProperty(exports,"ConversationExpirationEventArgs",{enumerable:true,get:function get(){return ConversationExpirationEventArgs_js_1.ConversationExpirationEventArgs;}});var ConversationParticipantsChangedEventArgs_js_1=__webpack_require__(160);Object.defineProperty(exports,"ConversationParticipantsChangedEventArgs",{enumerable:true,get:function get(){return ConversationParticipantsChangedEventArgs_js_1.ConversationParticipantsChangedEventArgs;}});var ConversationTranslationCanceledEventArgs_js_1=__webpack_require__(161);Object.defineProperty(exports,"ConversationTranslationCanceledEventArgs",{enumerable:true,get:function get(){return ConversationTranslationCanceledEventArgs_js_1.ConversationTranslationCanceledEventArgs;}});var ConversationTranslationEventArgs_js_1=__webpack_require__(162);Object.defineProperty(exports,"ConversationTranslationEventArgs",{enumerable:true,get:function get(){return ConversationTranslationEventArgs_js_1.ConversationTranslationEventArgs;}});var ConversationTranslationResult_js_1=__webpack_require__(163);Object.defineProperty(exports,"ConversationTranslationResult",{enumerable:true,get:function get(){return ConversationTranslationResult_js_1.ConversationTranslationResult;}});var ConversationTranslator_js_1=__webpack_require__(164);Object.defineProperty(exports,"ConversationTranslator",{enumerable:true,get:function get(){return ConversationTranslator_js_1.ConversationTranslator;}});var ConversationTranscriber_js_1=__webpack_require__(167);Object.defineProperty(exports,"ConversationTranscriber",{enumerable:true,get:function get(){return ConversationTranscriber_js_1.ConversationTranscriber;}});var IParticipant_js_1=__webpack_require__(168);Object.defineProperty(exports,"Participant",{enumerable:true,get:function get(){return IParticipant_js_1.Participant;}});Object.defineProperty(exports,"User",{enumerable:true,get:function get(){return IParticipant_js_1.User;}});var ParticipantChangedReason_js_1=__webpack_require__(169);Object.defineProperty(exports,"ParticipantChangedReason",{enumerable:true,get:function get(){return ParticipantChangedReason_js_1.ParticipantChangedReason;}});var Meeting_js_1=__webpack_require__(170);Object.defineProperty(exports,"Meeting",{enumerable:true,get:function get(){return Meeting_js_1.Meeting;}});Object.defineProperty(exports,"MeetingImpl",{enumerable:true,get:function get(){return Meeting_js_1.MeetingImpl;}});var MeetingTranscriptionCanceledEventArgs_js_1=__webpack_require__(171);Object.defineProperty(exports,"MeetingTranscriptionCanceledEventArgs",{enumerable:true,get:function get(){return MeetingTranscriptionCanceledEventArgs_js_1.MeetingTranscriptionCanceledEventArgs;}});var MeetingTranscriber_js_1=__webpack_require__(172);Object.defineProperty(exports,"MeetingTranscriber",{enumerable:true,get:function get(){return MeetingTranscriber_js_1.MeetingTranscriber;}});var ConversationTranscriptionResult_js_1=__webpack_require__(173);Object.defineProperty(exports,"ConversationTranscriptionResult",{enumerable:true,get:function get(){return ConversationTranscriptionResult_js_1.ConversationTranscriptionResult;}});/***/},/* 157 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationImpl=exports.Conversation=void 0;/* eslint-disable max-classes-per-file */var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(4);var Contracts_js_1=__webpack_require__(64);var Exports_js_3=__webpack_require__(79);var Conversation=/*#__PURE__*/function(){function Conversation(){_classCallCheck(this,Conversation);return;}/**
     * Create a conversation
     * @param speechConfig
     * @param cb
     * @param err
     */_createClass(Conversation,null,[{key:"createConversationAsync",value:function createConversationAsync(speechConfig,arg2,arg3,arg4){Contracts_js_1.Contracts.throwIfNullOrUndefined(speechConfig,Exports_js_1.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config"));Contracts_js_1.Contracts.throwIfNullOrUndefined(speechConfig.region,Exports_js_1.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region"));if(!speechConfig.subscriptionKey&&!speechConfig.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceAuthorization_Token])){Contracts_js_1.Contracts.throwIfNullOrUndefined(speechConfig.subscriptionKey,Exports_js_1.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));}var conversationImpl;var cb;var err;if(typeof arg2==="string"){conversationImpl=new ConversationImpl(speechConfig,arg2);// eslint-disable-next-line @typescript-eslint/no-empty-function
Exports_js_2.marshalPromiseToCallbacks(_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee43(){return _regeneratorRuntime().wrap(function _callee43$(_context43){while(1)switch(_context43.prev=_context43.next){case 0:case"end":return _context43.stop();}},_callee43);}))(),arg3,arg4);}else{conversationImpl=new ConversationImpl(speechConfig);cb=arg2;err=arg3;conversationImpl.createConversationAsync(function(){if(!!cb){cb();}},function(error){if(!!err){err(error);}});}return conversationImpl;}}]);return Conversation;}();exports.Conversation=Conversation;var ConversationImpl=/*#__PURE__*/function(_Conversation){_inherits(ConversationImpl,_Conversation);var _super91=_createSuper(ConversationImpl);/**
     * Create a conversation impl
     * @param speechConfig
     * @param {string} id - optional conversationId
     */function ConversationImpl(speechConfig,id){var _this85;_classCallCheck(this,ConversationImpl);_this85=_super91.call(this);_this85.privErrors=Exports_js_1.ConversationConnectionConfig.restErrors;/** websocket callbacks */ /* eslint-disable @typescript-eslint/typedef */_this85.onConnected=function(e){_this85.privIsConnected=true;try{var _this85$privConversat;if(!!((_this85$privConversat=_this85.privConversationTranslator)!==null&&_this85$privConversat!==void 0&&_this85$privConversat.sessionStarted)){_this85.privConversationTranslator.sessionStarted(_this85.privConversationTranslator,e);}}catch(e){//
}};_this85.onDisconnected=function(e){try{var _this85$privConversat2;if(!!((_this85$privConversat2=_this85.privConversationTranslator)!==null&&_this85$privConversat2!==void 0&&_this85$privConversat2.sessionStopped)){_this85.privConversationTranslator.sessionStopped(_this85.privConversationTranslator,e);}}catch(e){//
}finally{void _this85.close(false);}};_this85.onCanceled=function(r,e){try{var _this85$privConversat3;if(!!((_this85$privConversat3=_this85.privConversationTranslator)!==null&&_this85$privConversat3!==void 0&&_this85$privConversat3.canceled)){_this85.privConversationTranslator.canceled(_this85.privConversationTranslator,e);}}catch(e){//
}};_this85.onParticipantUpdateCommandReceived=function(r,e){try{var updatedParticipant=_this85.privParticipants.getParticipant(e.id);if(updatedParticipant!==undefined){switch(e.key){case Exports_js_1.ConversationTranslatorCommandTypes.changeNickname:updatedParticipant.displayName=e.value;break;case Exports_js_1.ConversationTranslatorCommandTypes.setUseTTS:updatedParticipant.isUsingTts=e.value;break;case Exports_js_1.ConversationTranslatorCommandTypes.setProfanityFiltering:updatedParticipant.profanity=e.value;break;case Exports_js_1.ConversationTranslatorCommandTypes.setMute:updatedParticipant.isMuted=e.value;break;case Exports_js_1.ConversationTranslatorCommandTypes.setTranslateToLanguages:updatedParticipant.translateToLanguages=e.value;break;}_this85.privParticipants.addOrUpdateParticipant(updatedParticipant);if(!!_this85.privConversationTranslator){_this85.privConversationTranslator.participantsChanged(_this85.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.Updated,[_this85.toParticipant(updatedParticipant)],e.sessionId));}}}catch(e){//
}};_this85.onLockRoomCommandReceived=function(){// TODO
};_this85.onMuteAllCommandReceived=function(r,e){try{_this85.privParticipants.participants.forEach(function(p){return p.isMuted=p.isHost?false:e.isMuted;});if(!!_this85.privConversationTranslator){_this85.privConversationTranslator.participantsChanged(_this85.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.Updated,_this85.toParticipants(false),e.sessionId));}}catch(e){//
}};_this85.onParticipantJoinCommandReceived=function(r,e){try{var newParticipant=_this85.privParticipants.addOrUpdateParticipant(e.participant);if(newParticipant!==undefined){if(!!_this85.privConversationTranslator){_this85.privConversationTranslator.participantsChanged(_this85.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.JoinedConversation,[_this85.toParticipant(newParticipant)],e.sessionId));}}}catch(e){//
}};_this85.onParticipantLeaveCommandReceived=function(r,e){try{var ejectedParticipant=_this85.privParticipants.getParticipant(e.participant.id);if(ejectedParticipant!==undefined){// remove the participant from the internal participants list
_this85.privParticipants.deleteParticipant(e.participant.id);if(!!_this85.privConversationTranslator){// notify subscribers that the participant has left the conversation
_this85.privConversationTranslator.participantsChanged(_this85.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.LeftConversation,[_this85.toParticipant(ejectedParticipant)],e.sessionId));}}}catch(e){//
}};_this85.onTranslationReceived=function(r,e){try{switch(e.command){case Exports_js_1.ConversationTranslatorMessageTypes["final"]:if(!!_this85.privConversationTranslator){_this85.privConversationTranslator.transcribed(_this85.privConversationTranslator,new Exports_js_3.ConversationTranslationEventArgs(e.payload,undefined,e.sessionId));}break;case Exports_js_1.ConversationTranslatorMessageTypes.partial:if(!!_this85.privConversationTranslator){_this85.privConversationTranslator.transcribing(_this85.privConversationTranslator,new Exports_js_3.ConversationTranslationEventArgs(e.payload,undefined,e.sessionId));}break;case Exports_js_1.ConversationTranslatorMessageTypes.instantMessage:if(!!_this85.privConversationTranslator){_this85.privConversationTranslator.textMessageReceived(_this85.privConversationTranslator,new Exports_js_3.ConversationTranslationEventArgs(e.payload,undefined,e.sessionId));}break;}}catch(e){//
}};_this85.onParticipantsListReceived=function(r,e){try{// check if the session token needs to be updated
if(e.sessionToken!==undefined&&e.sessionToken!==null){_this85.privRoom.token=e.sessionToken;}// save the participants
_this85.privParticipants.participants=_toConsumableArray(e.participants);// enable the conversation
if(_this85.privParticipants.me!==undefined){_this85.privIsReady=true;}if(!!_this85.privConversationTranslator){_this85.privConversationTranslator.participantsChanged(_this85.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.JoinedConversation,_this85.toParticipants(true),e.sessionId));}// if this is the host, update the nickname if needed
if(_this85.me.isHost){var _this85$privConversat4;var nickname=(_this85$privConversat4=_this85.privConversationTranslator)===null||_this85$privConversat4===void 0?void 0:_this85$privConversat4.properties.getProperty(Exports_js_3.PropertyId.ConversationTranslator_Name);if(nickname!==undefined&&nickname.length>0&&nickname!==_this85.me.displayName){// issue a change nickname request
_this85.changeNicknameAsync(nickname);}}}catch(e){//
}};_this85.onConversationExpiration=function(r,e){try{if(!!_this85.privConversationTranslator){_this85.privConversationTranslator.conversationExpiration(_this85.privConversationTranslator,e);}}catch(e){//
}};_this85.privIsConnected=false;_this85.privIsDisposed=false;_this85.privConversationId="";_this85.privProperties=new Exports_js_3.PropertyCollection();_this85.privManager=new Exports_js_1.ConversationManager();// check the speech language
var language=speechConfig.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage]);if(!language){speechConfig.setProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage],Exports_js_1.ConversationConnectionConfig.defaultLanguageCode);}_this85.privLanguage=speechConfig.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage]);if(!id){// check the target language(s)
if(speechConfig.targetLanguages.length===0){speechConfig.addTargetLanguage(_this85.privLanguage);}// check the profanity setting: speech and conversationTranslator should be in sync
var profanity=speechConfig.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceResponse_ProfanityOption]);if(!profanity){speechConfig.setProfanity(Exports_js_3.ProfanityOption.Masked);}// check the nickname: it should pass this regex: ^\w+([\s-][\w\(\)]+)*$"
// TODO: specify the regex required. Nicknames must be unique or get the duplicate nickname error
// TODO: check what the max length is and if a truncation is required or if the service handles it without an error
var hostNickname=speechConfig.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.ConversationTranslator_Name]);if(hostNickname===undefined||hostNickname===null){hostNickname="Host";}Contracts_js_1.Contracts.throwIfNullOrTooLong(hostNickname,"nickname",50);Contracts_js_1.Contracts.throwIfNullOrTooShort(hostNickname,"nickname",2);speechConfig.setProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.ConversationTranslator_Name],hostNickname);}else{_this85.privConversationId=id;}// save the speech config for future usage
_this85.privConfig=speechConfig;// save the config properties
var configImpl=speechConfig;Contracts_js_1.Contracts.throwIfNull(configImpl,"speechConfig");_this85.privProperties=configImpl.properties.clone();_this85.privIsConnected=false;_this85.privParticipants=new Exports_js_1.InternalParticipants();_this85.privIsReady=false;_this85.privTextMessageMaxLength=1000;return _this85;}// get the internal data about a conversation
_createClass(ConversationImpl,[{key:"room",get:function get(){return this.privRoom;}// get the wrapper for connecting to the websockets
},{key:"connection",get:function get(){return this.privConversationRecognizer;// this.privConnection;
}// get the config
},{key:"config",get:function get(){return this.privConfig;}// get the conversation Id
},{key:"conversationId",get:function get(){return this.privRoom?this.privRoom.roomId:this.privConversationId;}// get the properties
},{key:"properties",get:function get(){return this.privProperties;}// get the speech language
},{key:"speechRecognitionLanguage",get:function get(){return this.privLanguage;}},{key:"isMutedByHost",get:function get(){var _this$privParticipant,_this$privParticipant2;return(_this$privParticipant=this.privParticipants.me)!==null&&_this$privParticipant!==void 0&&_this$privParticipant.isHost?false:(_this$privParticipant2=this.privParticipants.me)===null||_this$privParticipant2===void 0?void 0:_this$privParticipant2.isMuted;}},{key:"isConnected",get:function get(){return this.privIsConnected&&this.privIsReady;}},{key:"participants",get:function get(){return this.toParticipants(true);}},{key:"me",get:function get(){return this.toParticipant(this.privParticipants.me);}},{key:"host",get:function get(){return this.toParticipant(this.privParticipants.host);}},{key:"transcriberRecognizer",get:function get(){return this.privTranscriberRecognizer;}},{key:"conversationInfo",get:function get(){var convId=this.conversationId;var p=this.participants.map(function(part){return{id:part.id,preferredLanguage:part.preferredLanguage,voice:part.voice};});var props={};var _iterator10=_createForOfIteratorHelper(Exports_js_1.ConversationConnectionConfig.transcriptionEventKeys),_step10;try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var key=_step10.value;var val=this.properties.getProperty(key,"");if(val!==""){props[key]=val;}}}catch(err){_iterator10.e(err);}finally{_iterator10.f();}var info={id:convId,participants:p,conversationProperties:props};return info;}},{key:"canSend",get:function get(){var _this$privParticipant3;return this.privIsConnected&&!((_this$privParticipant3=this.privParticipants.me)!==null&&_this$privParticipant3!==void 0&&_this$privParticipant3.isMuted);}},{key:"canSendAsHost",get:function get(){var _this$privParticipant4;return this.privIsConnected&&((_this$privParticipant4=this.privParticipants.me)===null||_this$privParticipant4===void 0?void 0:_this$privParticipant4.isHost);}// get / set the speech auth token
// eslint-disable-next-line @typescript-eslint/member-ordering
},{key:"authorizationToken",get:function get(){return this.privToken;},set:function set(value){Contracts_js_1.Contracts.throwIfNullOrWhitespace(value,"authorizationToken");this.privToken=value;}},{key:"conversationTranslator",set:function set(conversationTranslator){this.privConversationTranslator=conversationTranslator;}},{key:"onToken",value:function onToken(token){this.privConversationTranslator.onToken(token);}/**
     * Create a new conversation as Host
     * @param cb
     * @param err
     */},{key:"createConversationAsync",value:function createConversationAsync(cb,err){var _this86=this;try{if(!!this.privConversationRecognizer){this.handleError(new Error(this.privErrors.permissionDeniedStart),err);}this.privManager.createOrJoin(this.privProperties,undefined,function(room){if(!room){_this86.handleError(new Error(_this86.privErrors.permissionDeniedConnect),err);}_this86.privRoom=room;_this86.handleCallback(cb,err);},function(error){_this86.handleError(error,err);});}catch(error){this.handleError(error,err);}}/**
     * Starts a new conversation as host.
     * @param cb
     * @param err
     */},{key:"startConversationAsync",value:function startConversationAsync(cb,err){var _this87=this;try{// check if there is already a recognizer
if(!!this.privConversationRecognizer){this.handleError(new Error(this.privErrors.permissionDeniedStart),err);}// check if there is conversation data available
Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect);// connect to the conversation websocket
this.privParticipants.meId=this.privRoom.participantId;this.privConversationRecognizer=Exports_js_1.ConversationRecognizerFactory.fromConfig(this,this.privConfig);// Because ConversationTranslator manually sets up and manages the connection, Conversation
// has to forward serviceRecognizer connection events that usually get passed automatically
this.privConversationRecognizer.connected=this.onConnected;this.privConversationRecognizer.disconnected=this.onDisconnected;this.privConversationRecognizer.canceled=this.onCanceled;this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived;this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived;this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived;this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived;this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived;this.privConversationRecognizer.translationReceived=this.onTranslationReceived;this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived;this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration;this.privConversationRecognizer.connect(this.privRoom.token,function(){_this87.handleCallback(cb,err);},function(error){_this87.handleError(error,err);});}catch(error){this.handleError(error,err);}}/**
     * Join a conversation as a participant.
     * @param { IParticipant } participant - participant to add
     * @param cb
     * @param err
     */},{key:"addParticipantAsync",value:function addParticipantAsync(participant,cb,err){Contracts_js_1.Contracts.throwIfNullOrUndefined(participant,"Participant");Exports_js_2.marshalPromiseToCallbacks(this.addParticipantImplAsync(participant),cb,err);}/**
     * Join a conversation as a participant.
     * @param conversation
     * @param nickname
     * @param lang
     * @param cb
     * @param err
     */},{key:"joinConversationAsync",value:function joinConversationAsync(conversationId,nickname,lang,cb,err){var _this88=this;try{// TODO
// if (!!this.privConversationRecognizer) {
//     throw new Error(this.privErrors.permissionDeniedStart);
// }
Contracts_js_1.Contracts.throwIfNullOrWhitespace(conversationId,this.privErrors.invalidArgs.replace("{arg}","conversationId"));Contracts_js_1.Contracts.throwIfNullOrWhitespace(nickname,this.privErrors.invalidArgs.replace("{arg}","nickname"));Contracts_js_1.Contracts.throwIfNullOrWhitespace(lang,this.privErrors.invalidArgs.replace("{arg}","language"));// join the conversation
this.privManager.createOrJoin(this.privProperties,conversationId,function(room){Contracts_js_1.Contracts.throwIfNullOrUndefined(room,_this88.privErrors.permissionDeniedConnect);_this88.privRoom=room;_this88.privConfig.authorizationToken=room.cognitiveSpeechAuthToken;// join callback
if(!!cb){cb(room.cognitiveSpeechAuthToken);}},function(error){_this88.handleError(error,err);});}catch(error){this.handleError(error,err);}}/**
     * Deletes a conversation
     * @param cb
     * @param err
     */},{key:"deleteConversationAsync",value:function deleteConversationAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),cb,err);}},{key:"deleteConversationImplAsync",value:function(){var _deleteConversationImplAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee44(){return _regeneratorRuntime().wrap(function _callee44$(_context44){while(1)switch(_context44.prev=_context44.next){case 0:Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect);Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect);_context44.next=4;return this.privManager.leave(this.privProperties,this.privRoom.token);case 4:this.dispose();case 5:case"end":return _context44.stop();}},_callee44,this);}));function deleteConversationImplAsync(){return _deleteConversationImplAsync.apply(this,arguments);}return deleteConversationImplAsync;}()/**
     * Issues a request to close the client websockets
     * @param cb
     * @param err
     */},{key:"endConversationAsync",value:function endConversationAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.endConversationImplAsync(),cb,err);}},{key:"endConversationImplAsync",value:function endConversationImplAsync(){return this.close(true);}/**
     * Issues a request to lock the conversation
     * @param cb
     * @param err
     */},{key:"lockConversationAsync",value:function lockConversationAsync(cb,err){var _this89=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);if(!this.canSendAsHost){this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getLockCommand(true),function(){_this89.handleCallback(cb,err);},function(error){_this89.handleError(error,err);});}}catch(error){this.handleError(error,err);}}/**
     * Issues a request to mute the conversation
     * @param cb
     * @param err
     */},{key:"muteAllParticipantsAsync",value:function muteAllParticipantsAsync(cb,err){var _this90=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend);Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);// check the user's permissions
if(!this.canSendAsHost){this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(true),function(){_this90.handleCallback(cb,err);},function(error){_this90.handleError(error,err);});}}catch(error){this.handleError(error,err);}}/**
     * Issues a request to mute a participant in the conversation
     * @param userId
     * @param cb
     * @param err
     */},{key:"muteParticipantAsync",value:function muteParticipantAsync(userId,cb,err){var _this91=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfNullOrWhitespace(userId,this.privErrors.invalidArgs.replace("{arg}","userId"));Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);// check the connection is open (host + participant can perform the mute command)
if(!this.canSend){this.handleError(new Error(this.privErrors.permissionDeniedSend),err);}// if not host, check the participant is not muting another participant
if(!this.me.isHost&&this.me.id!==userId){this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),err);}// check the user exists
var exists=this.privParticipants.getParticipantIndex(userId);if(exists===-1){this.handleError(new Error(this.privErrors.invalidParticipantRequest),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getMuteCommand(userId,true),function(){_this91.handleCallback(cb,err);},function(error){_this91.handleError(error,err);});}}catch(error){this.handleError(error,err);}}/**
     * Issues a request to remove a participant from the conversation
     * @param userId
     * @param cb
     * @param err
     */},{key:"removeParticipantAsync",value:function removeParticipantAsync(userId,cb,err){var _this92=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);if(!!this.privTranscriberRecognizer&&userId.hasOwnProperty("id")){// Assume this is a transcription participant
Exports_js_2.marshalPromiseToCallbacks(this.removeParticipantImplAsync(userId),cb,err);}else{Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);if(!this.canSendAsHost){this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),err);}var participantId="";if(typeof userId==="string"){participantId=userId;}else if(userId.hasOwnProperty("id")){var participant=userId;participantId=participant.id;}else if(userId.hasOwnProperty("userId")){var user=userId;participantId=user.userId;}Contracts_js_1.Contracts.throwIfNullOrWhitespace(participantId,this.privErrors.invalidArgs.replace("{arg}","userId"));// check the participant exists
var index=this.participants.findIndex(function(p){return p.id===participantId;});if(index===-1){this.handleError(new Error(this.privErrors.invalidParticipantRequest),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getEjectCommand(participantId),function(){_this92.handleCallback(cb,err);},function(error){_this92.handleError(error,err);});}}}catch(error){this.handleError(error,err);}}/**
     * Issues a request to unlock the conversation
     * @param cb
     * @param err
     */},{key:"unlockConversationAsync",value:function unlockConversationAsync(cb,err){var _this93=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);if(!this.canSendAsHost){this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getLockCommand(false),function(){_this93.handleCallback(cb,err);},function(error){_this93.handleError(error,err);});}}catch(error){this.handleError(error,err);}}/**
     * Issues a request to unmute all participants in the conversation
     * @param cb
     * @param err
     */},{key:"unmuteAllParticipantsAsync",value:function unmuteAllParticipantsAsync(cb,err){var _this94=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);if(!this.canSendAsHost){this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(false),function(){_this94.handleCallback(cb,err);},function(error){_this94.handleError(error,err);});}}catch(error){this.handleError(error,err);}}/**
     * Issues a request to unmute a participant in the conversation
     * @param userId
     * @param cb
     * @param err
     */},{key:"unmuteParticipantAsync",value:function unmuteParticipantAsync(userId,cb,err){var _this95=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfNullOrWhitespace(userId,this.privErrors.invalidArgs.replace("{arg}","userId"));Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);// check the connection is open (host + participant can perform the mute command)
if(!this.canSend){this.handleError(new Error(this.privErrors.permissionDeniedSend),err);}// if not host, check the participant is not muting another participant
if(!this.me.isHost&&this.me.id!==userId){this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),err);}// check the user exists
var exists=this.privParticipants.getParticipantIndex(userId);if(exists===-1){this.handleError(new Error(this.privErrors.invalidParticipantRequest),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getMuteCommand(userId,false),function(){_this95.handleCallback(cb,err);},function(error){_this95.handleError(error,err);});}}catch(error){this.handleError(error,err);}}/**
     * Send a text message
     * @param message
     * @param cb
     * @param err
     */},{key:"sendTextMessageAsync",value:function sendTextMessageAsync(message,cb,err){var _this96=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfNullOrWhitespace(message,this.privErrors.invalidArgs.replace("{arg}","message"));Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);if(!this.canSend){this.handleError(new Error(this.privErrors.permissionDeniedSend),err);}// TODO: is a max length check required?
if(message.length>this.privTextMessageMaxLength){this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getMessageCommand(message),function(){_this96.handleCallback(cb,err);},function(error){_this96.handleError(error,err);});}}catch(error){this.handleError(error,err);}}/**
     * Set translated to languages
     * @param {string[]} languages - languages to translate to
     * @param cb
     * @param err
     */},{key:"setTranslatedLanguagesAsync",value:function setTranslatedLanguagesAsync(languages,cb,err){var _this97=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfArrayEmptyOrWhitespace(languages,this.privErrors.invalidArgs.replace("{arg}","languages"));Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);if(!this.canSend){this.handleError(new Error(this.privErrors.permissionDeniedSend),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(languages),function(){_this97.handleCallback(cb,err);},function(error){_this97.handleError(error,err);});}}catch(error){this.handleError(error,err);}}/**
     * Change nickname
     * @param {string} nickname - new nickname for the room
     * @param cb
     * @param err
     */},{key:"changeNicknameAsync",value:function changeNicknameAsync(nickname,cb,err){var _this98=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfNullOrWhitespace(nickname,this.privErrors.invalidArgs.replace("{arg}","nickname"));Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);if(!this.canSend){this.handleError(new Error(this.privErrors.permissionDeniedSend),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(nickname),function(){_this98.handleCallback(cb,err);},function(error){_this98.handleError(error,err);});}}catch(error){this.handleError(error,err);}}},{key:"isDisposed",value:function isDisposed(){return this.privIsDisposed;}},{key:"dispose",value:function dispose(){if(this.isDisposed){return;}this.privIsDisposed=true;if(!!this.config){this.config.close();}this.privConfig=undefined;this.privLanguage=undefined;this.privProperties=undefined;this.privRoom=undefined;this.privToken=undefined;this.privManager=undefined;this.privIsConnected=false;this.privIsReady=false;this.privParticipants=undefined;}},{key:"connectTranscriberRecognizer",value:function(){var _connectTranscriberRecognizer=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee45(recognizer){return _regeneratorRuntime().wrap(function _callee45$(_context45){while(1)switch(_context45.prev=_context45.next){case 0:if(!this.privTranscriberRecognizer){_context45.next=3;break;}_context45.next=3;return this.privTranscriberRecognizer.close();case 3:_context45.next=5;return recognizer.enforceAudioGating();case 5:this.privTranscriberRecognizer=recognizer;this.privTranscriberRecognizer.conversation=this;case 7:case"end":return _context45.stop();}},_callee45,this);}));function connectTranscriberRecognizer(_x35){return _connectTranscriberRecognizer.apply(this,arguments);}return connectTranscriberRecognizer;}()},{key:"getKeepAlive",value:function getKeepAlive(){var nickname=!!this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:nickname,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.keepAlive});}/* eslint-enable @typescript-eslint/typedef */},{key:"addParticipantImplAsync",value:function addParticipantImplAsync(participant){var newParticipant=this.privParticipants.addOrUpdateParticipant(participant);if(newParticipant!==undefined){if(!!this.privTranscriberRecognizer){var conversationInfo=this.conversationInfo;conversationInfo.participants=[participant];return this.privTranscriberRecognizer.pushConversationEvent(conversationInfo,"join");}}}},{key:"removeParticipantImplAsync",value:function removeParticipantImplAsync(participant){this.privParticipants.deleteParticipant(participant.id);var conversationInfo=this.conversationInfo;conversationInfo.participants=[participant];return this.privTranscriberRecognizer.pushConversationEvent(conversationInfo,"leave");}},{key:"close",value:function(){var _close3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee46(dispose){var _this$privConversatio;return _regeneratorRuntime().wrap(function _callee46$(_context46){while(1)switch(_context46.prev=_context46.next){case 0:_context46.prev=0;this.privIsConnected=false;_context46.next=4;return(_this$privConversatio=this.privConversationRecognizer)===null||_this$privConversatio===void 0?void 0:_this$privConversatio.close();case 4:this.privConversationRecognizer=undefined;if(!!this.privConversationTranslator){this.privConversationTranslator.dispose();}_context46.next=11;break;case 8:_context46.prev=8;_context46.t0=_context46["catch"](0);throw _context46.t0;case 11:if(dispose){this.dispose();}case 12:case"end":return _context46.stop();}},_callee46,this,[[0,8]]);}));function close(_x36){return _close3.apply(this,arguments);}return close;}()/** Helpers */},{key:"handleCallback",value:function handleCallback(cb,err){if(!!cb){try{cb();}catch(e){if(!!err){err(e);}}cb=undefined;}}},{key:"handleError",value:function handleError(error,err){if(!!err){if(error instanceof Error){var typedError=error;err(typedError.name+": "+typedError.message);}else{err(error);}}}/** Participant Helpers */},{key:"toParticipants",value:function toParticipants(includeHost){var _this99=this;var participants=this.privParticipants.participants.map(function(p){return _this99.toParticipant(p);});if(!includeHost){return participants.filter(function(p){return p.isHost===false;});}else{return participants;}}},{key:"toParticipant",value:function toParticipant(p){return new Exports_js_3.Participant(p.id,p.avatar,p.displayName,p.isHost,p.isMuted,p.isUsingTts,p.preferredLanguage,p.voice);}},{key:"getMuteAllCommand",value:function getMuteAllCommand(isMuted){Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId");Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId");return JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:isMuted});}},{key:"getMuteCommand",value:function getMuteCommand(participantId,isMuted){Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId");Contracts_js_1.Contracts.throwIfNullOrWhitespace(participantId,"participantId");return JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.setMute,// eslint-disable-next-line object-shorthand
participantId:participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:isMuted});}},{key:"getLockCommand",value:function getLockCommand(isLocked){Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId");Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId");return JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:isLocked});}},{key:"getEjectCommand",value:function getEjectCommand(participantId){Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId");Contracts_js_1.Contracts.throwIfNullOrWhitespace(participantId,"participantId");return JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.ejectParticipant,// eslint-disable-next-line object-shorthand
participantId:participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand});}},{key:"getSetTranslateToLanguagesCommand",value:function getSetTranslateToLanguagesCommand(languages){Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId");Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId");return JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:languages});}},{key:"getChangeNicknameCommand",value:function getChangeNicknameCommand(nickname){Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId");Contracts_js_1.Contracts.throwIfNullOrWhitespace(nickname,"nickname");Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId");return JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.changeNickname,nickname:nickname,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:nickname});}},{key:"getMessageCommand",value:function getMessageCommand(message){Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId");Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId");Contracts_js_1.Contracts.throwIfNullOrWhitespace(message,"message");return JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:message,type:Exports_js_1.ConversationTranslatorMessageTypes.instantMessage});}}]);return ConversationImpl;}(Conversation);exports.ConversationImpl=ConversationImpl;/***/},/* 158 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationCommon=void 0;var ConversationCommon=/*#__PURE__*/function(){function ConversationCommon(audioConfig){_classCallCheck(this,ConversationCommon);this.privAudioConfig=audioConfig;}_createClass(ConversationCommon,[{key:"handleCallback",value:function handleCallback(cb,err){if(!!cb){try{cb();}catch(e){if(!!err){err(e);}}cb=undefined;}}},{key:"handleError",value:function handleError(error,err){if(!!err){if(error instanceof Error){var typedError=error;err(typedError.name+": "+typedError.message);}else{err(error);}}}}]);return ConversationCommon;}();exports.ConversationCommon=ConversationCommon;/***/},/* 159 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationExpirationEventArgs=void 0;var Exports_js_1=__webpack_require__(79);var ConversationExpirationEventArgs=/*#__PURE__*/function(_Exports_js_1$Session5){_inherits(ConversationExpirationEventArgs,_Exports_js_1$Session5);var _super92=_createSuper(ConversationExpirationEventArgs);function ConversationExpirationEventArgs(expirationTime,sessionId){var _this100;_classCallCheck(this,ConversationExpirationEventArgs);_this100=_super92.call(this,sessionId);_this100.privExpirationTime=expirationTime;return _this100;}/** How much longer until the conversation expires (in minutes). */_createClass(ConversationExpirationEventArgs,[{key:"expirationTime",get:function get(){return this.privExpirationTime;}}]);return ConversationExpirationEventArgs;}(Exports_js_1.SessionEventArgs);exports.ConversationExpirationEventArgs=ConversationExpirationEventArgs;/***/},/* 160 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationParticipantsChangedEventArgs=void 0;var Exports_js_1=__webpack_require__(79);var ConversationParticipantsChangedEventArgs=/*#__PURE__*/function(_Exports_js_1$Session6){_inherits(ConversationParticipantsChangedEventArgs,_Exports_js_1$Session6);var _super93=_createSuper(ConversationParticipantsChangedEventArgs);function ConversationParticipantsChangedEventArgs(reason,participants,sessionId){var _this101;_classCallCheck(this,ConversationParticipantsChangedEventArgs);_this101=_super93.call(this,sessionId);_this101.privReason=reason;_this101.privParticipant=participants;return _this101;}_createClass(ConversationParticipantsChangedEventArgs,[{key:"reason",get:function get(){return this.privReason;}},{key:"participants",get:function get(){return this.privParticipant;}}]);return ConversationParticipantsChangedEventArgs;}(Exports_js_1.SessionEventArgs);exports.ConversationParticipantsChangedEventArgs=ConversationParticipantsChangedEventArgs;/***/},/* 161 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationTranslationCanceledEventArgs=void 0;var CancellationEventArgsBase_js_1=__webpack_require__(101);var ConversationTranslationCanceledEventArgs=/*#__PURE__*/function(_CancellationEventArg2){_inherits(ConversationTranslationCanceledEventArgs,_CancellationEventArg2);var _super94=_createSuper(ConversationTranslationCanceledEventArgs);function ConversationTranslationCanceledEventArgs(){_classCallCheck(this,ConversationTranslationCanceledEventArgs);return _super94.apply(this,arguments);}return _createClass(ConversationTranslationCanceledEventArgs);}(CancellationEventArgsBase_js_1.CancellationEventArgsBase);exports.ConversationTranslationCanceledEventArgs=ConversationTranslationCanceledEventArgs;/***/},/* 162 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationTranslationEventArgs=void 0;var Exports_js_1=__webpack_require__(79);var ConversationTranslationEventArgs=/*#__PURE__*/function(_Exports_js_1$Recogni7){_inherits(ConversationTranslationEventArgs,_Exports_js_1$Recogni7);var _super95=_createSuper(ConversationTranslationEventArgs);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {ConversationTranslationResult} result - The translation recognition result.
     * @param {number} offset - The offset.
     * @param {string} sessionId - The session id.
     */function ConversationTranslationEventArgs(result,offset,sessionId){var _this102;_classCallCheck(this,ConversationTranslationEventArgs);_this102=_super95.call(this,offset,sessionId);_this102.privResult=result;return _this102;}/**
     * Specifies the recognition result.
     * @returns {ConversationTranslationResult} the recognition result.
     */_createClass(ConversationTranslationEventArgs,[{key:"result",get:function get(){return this.privResult;}}]);return ConversationTranslationEventArgs;}(Exports_js_1.RecognitionEventArgs);exports.ConversationTranslationEventArgs=ConversationTranslationEventArgs;/***/},/* 163 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationTranslationResult=void 0;var TranslationRecognitionResult_js_1=__webpack_require__(104);var ConversationTranslationResult=/*#__PURE__*/function(_TranslationRecogniti){_inherits(ConversationTranslationResult,_TranslationRecogniti);var _super96=_createSuper(ConversationTranslationResult);function ConversationTranslationResult(participantId,translations,originalLanguage,resultId,reason,text,duration,offset,errorDetails,json,properties){var _this103;_classCallCheck(this,ConversationTranslationResult);_this103=_super96.call(this,translations,resultId,reason,text,duration,offset,undefined,undefined,errorDetails,json,properties);_this103.privId=participantId;_this103.privOrigLang=originalLanguage;return _this103;}/**
     * The unique identifier for the participant this result is for.
     */_createClass(ConversationTranslationResult,[{key:"participantId",get:function get(){return this.privId;}/**
     * The original language this result was in.
     */},{key:"originalLang",get:function get(){return this.privOrigLang;}}]);return ConversationTranslationResult;}(TranslationRecognitionResult_js_1.TranslationRecognitionResult);exports.ConversationTranslationResult=ConversationTranslationResult;/***/},/* 164 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationTranslator=exports.SpeechState=void 0;/* eslint-disable max-classes-per-file */var Exports_js_1=__webpack_require__(2);var ConversationTranslatorConnectionFactory_js_1=__webpack_require__(165);var Exports_js_2=__webpack_require__(4);var Contracts_js_1=__webpack_require__(64);var Exports_js_3=__webpack_require__(79);var Conversation_js_1=__webpack_require__(157);var Exports_js_4=__webpack_require__(156);var SpeechState;(function(SpeechState){SpeechState[SpeechState["Inactive"]=0]="Inactive";SpeechState[SpeechState["Connecting"]=1]="Connecting";SpeechState[SpeechState["Connected"]=2]="Connected";})(SpeechState=exports.SpeechState||(exports.SpeechState={}));// child class of TranslationRecognizer meant only for use with ConversationTranslator
var ConversationTranslationRecognizer=/*#__PURE__*/function(_Exports_js_3$Transla){_inherits(ConversationTranslationRecognizer,_Exports_js_3$Transla);var _super97=_createSuper(ConversationTranslationRecognizer);function ConversationTranslationRecognizer(speechConfig,audioConfig,translator,convGetter){var _this104;_classCallCheck(this,ConversationTranslationRecognizer);_this104=_super97.call(this,speechConfig,audioConfig,new ConversationTranslatorConnectionFactory_js_1.ConversationTranslatorConnectionFactory(convGetter));_this104.privSpeechState=SpeechState.Inactive;if(!!translator){_this104.privTranslator=translator;_this104.sessionStarted=function(){_this104.privSpeechState=SpeechState.Connected;};_this104.sessionStopped=function(){_this104.privSpeechState=SpeechState.Inactive;};_this104.recognizing=function(tr,e){if(!!_this104.privTranslator.recognizing){_this104.privTranslator.recognizing(_this104.privTranslator,e);}};// eslint-disable-next-line @typescript-eslint/no-misused-promises
_this104.recognized=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee47(tr,e){var _e$result;return _regeneratorRuntime().wrap(function _callee47$(_context47){while(1)switch(_context47.prev=_context47.next){case 0:if(!((_e$result=e.result)!==null&&_e$result!==void 0&&_e$result.errorDetails)){_context47.next=6;break;}_context47.next=3;return _this104.cancelSpeech();case 3:// TODO: format the error message contained in 'errorDetails'
_this104.fireCancelEvent(e.result.errorDetails);_context47.next=7;break;case 6:if(!!_this104.privTranslator.recognized){_this104.privTranslator.recognized(_this104.privTranslator,e);}case 7:return _context47.abrupt("return");case 8:case"end":return _context47.stop();}},_callee47);}));return function(_x37,_x38){return _ref5.apply(this,arguments);};}();// eslint-disable-next-line @typescript-eslint/no-misused-promises
_this104.canceled=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee48(){return _regeneratorRuntime().wrap(function _callee48$(_context48){while(1)switch(_context48.prev=_context48.next){case 0:if(!(_this104.privSpeechState!==SpeechState.Inactive)){_context48.next=9;break;}_context48.prev=1;_context48.next=4;return _this104.cancelSpeech();case 4:_context48.next=9;break;case 6:_context48.prev=6;_context48.t0=_context48["catch"](1);_this104.privSpeechState=SpeechState.Inactive;case 9:case"end":return _context48.stop();}},_callee48,null,[[1,6]]);}));}return _this104;}_createClass(ConversationTranslationRecognizer,[{key:"state",get:function get(){return this.privSpeechState;},set:function set(newState){this.privSpeechState=newState;}},{key:"authentication",set:function set(token){this.privReco.authentication=token;}},{key:"onConnection",value:function onConnection(){this.privSpeechState=SpeechState.Connected;}},{key:"onCancelSpeech",value:function(){var _onCancelSpeech=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee49(){return _regeneratorRuntime().wrap(function _callee49$(_context49){while(1)switch(_context49.prev=_context49.next){case 0:this.privSpeechState=SpeechState.Inactive;_context49.next=3;return this.cancelSpeech();case 3:case"end":return _context49.stop();}},_callee49,this);}));function onCancelSpeech(){return _onCancelSpeech.apply(this,arguments);}return onCancelSpeech;}()/**
     * Fire a cancel event
     * @param error
     */},{key:"fireCancelEvent",value:function fireCancelEvent(error){try{if(!!this.privTranslator.canceled){var cancelEvent=new Exports_js_4.ConversationTranslationCanceledEventArgs(Exports_js_3.CancellationReason.Error,error,Exports_js_3.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,cancelEvent);}}catch(e){//
}}},{key:"cancelSpeech",value:function(){var _cancelSpeech=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee50(){var _this$privReco;return _regeneratorRuntime().wrap(function _callee50$(_context50){while(1)switch(_context50.prev=_context50.next){case 0:_context50.prev=0;this.stopContinuousRecognitionAsync();_context50.next=4;return(_this$privReco=this.privReco)===null||_this$privReco===void 0?void 0:_this$privReco.disconnect();case 4:this.privSpeechState=SpeechState.Inactive;_context50.next=9;break;case 7:_context50.prev=7;_context50.t0=_context50["catch"](0);case 9:case"end":return _context50.stop();}},_callee50,this,[[0,7]]);}));function cancelSpeech(){return _cancelSpeech.apply(this,arguments);}return cancelSpeech;}()}]);return ConversationTranslationRecognizer;}(Exports_js_3.TranslationRecognizer);/**
 * Join, leave or connect to a conversation.
 */var ConversationTranslator=/*#__PURE__*/function(_Exports_js_4$Convers){_inherits(ConversationTranslator,_Exports_js_4$Convers);var _super98=_createSuper(ConversationTranslator);function ConversationTranslator(audioConfig){var _this105;_classCallCheck(this,ConversationTranslator);_this105=_super98.call(this,audioConfig);_this105.privErrors=Exports_js_1.ConversationConnectionConfig.restErrors;_this105.privIsDisposed=false;_this105.privIsSpeaking=false;_this105.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345";_this105.privPlaceholderRegion="westus";_this105.privProperties=new Exports_js_3.PropertyCollection();return _this105;}_createClass(ConversationTranslator,[{key:"properties",get:function get(){return this.privProperties;}},{key:"speechRecognitionLanguage",get:function get(){return this.privSpeechRecognitionLanguage;}},{key:"participants",get:function get(){var _this$privConversatio2;return(_this$privConversatio2=this.privConversation)===null||_this$privConversatio2===void 0?void 0:_this$privConversatio2.participants;}},{key:"canSpeak",get:function get(){// is there a Conversation websocket available and has the Recognizer been set up
if(!this.privConversation.isConnected||!this.privCTRecognizer){return false;}// is the user already speaking
if(this.privIsSpeaking||this.privCTRecognizer.state===SpeechState.Connected||this.privCTRecognizer.state===SpeechState.Connecting){return false;}// is the user muted
if(this.privConversation.isMutedByHost){return false;}return true;}},{key:"onToken",value:function onToken(token){this.privCTRecognizer.authentication=token;}},{key:"setServiceProperty",value:function setServiceProperty(name,value){var currentProperties=JSON.parse(this.privProperties.getProperty(Exports_js_1.ServicePropertiesPropertyName,"{}"));currentProperties[name]=value;this.privProperties.setProperty(Exports_js_1.ServicePropertiesPropertyName,JSON.stringify(currentProperties));}},{key:"joinConversationAsync",value:function joinConversationAsync(conversation,nickname,param1,param2,param3){var _this106=this;try{if(typeof conversation==="string"){Contracts_js_1.Contracts.throwIfNullOrUndefined(conversation,this.privErrors.invalidArgs.replace("{arg}","conversation id"));Contracts_js_1.Contracts.throwIfNullOrWhitespace(nickname,this.privErrors.invalidArgs.replace("{arg}","nickname"));if(!!this.privConversation){this.handleError(new Error(this.privErrors.permissionDeniedStart),param3);}var lang=param1;if(lang===undefined||lang===null||lang===""){lang=Exports_js_1.ConversationConnectionConfig.defaultLanguageCode;}// create a placeholder config
this.privSpeechTranslationConfig=Exports_js_3.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion);this.privSpeechTranslationConfig.setProfanity(Exports_js_3.ProfanityOption.Masked);this.privSpeechTranslationConfig.addTargetLanguage(lang);this.privSpeechTranslationConfig.setProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage],lang);this.privSpeechTranslationConfig.setProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.ConversationTranslator_Name],nickname);var propertyIdsToCopy=[Exports_js_3.PropertyId.SpeechServiceConnection_Host,Exports_js_3.PropertyId.ConversationTranslator_Host,Exports_js_3.PropertyId.SpeechServiceConnection_Endpoint,Exports_js_3.PropertyId.SpeechServiceConnection_ProxyHostName,Exports_js_3.PropertyId.SpeechServiceConnection_ProxyPassword,Exports_js_3.PropertyId.SpeechServiceConnection_ProxyPort,Exports_js_3.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(var _i4=0,_propertyIdsToCopy=propertyIdsToCopy;_i4<_propertyIdsToCopy.length;_i4++){var prop=_propertyIdsToCopy[_i4];var value=this.privProperties.getProperty(prop);if(value){var key=typeof prop==="string"?prop:Exports_js_3.PropertyId[prop];this.privSpeechTranslationConfig.setProperty(key,value);}}var currentProperties=JSON.parse(this.privProperties.getProperty(Exports_js_1.ServicePropertiesPropertyName,"{}"));for(var _i5=0,_Object$keys2=Object.keys(currentProperties);_i5<_Object$keys2.length;_i5++){var _prop=_Object$keys2[_i5];this.privSpeechTranslationConfig.setServiceProperty(_prop,currentProperties[_prop],Exports_js_3.ServicePropertyChannel.UriQueryParameter);}// join the conversation
this.privConversation=new Conversation_js_1.ConversationImpl(this.privSpeechTranslationConfig);this.privConversation.conversationTranslator=this;this.privConversation.joinConversationAsync(conversation,nickname,lang,function(result){if(!result){_this106.handleError(new Error(_this106.privErrors.permissionDeniedConnect),param3);}_this106.privSpeechTranslationConfig.authorizationToken=result;_this106.privConversation.room.isHost=false;// connect to the ws
_this106.privConversation.startConversationAsync(function(){_this106.handleCallback(param2,param3);},function(error){_this106.handleError(error,param3);});},function(error){_this106.handleError(error,param3);});}else if(_typeof(conversation)==="object"){Contracts_js_1.Contracts.throwIfNullOrUndefined(conversation,this.privErrors.invalidArgs.replace("{arg}","conversation id"));Contracts_js_1.Contracts.throwIfNullOrWhitespace(nickname,this.privErrors.invalidArgs.replace("{arg}","nickname"));// save the nickname
this.privProperties.setProperty(Exports_js_3.PropertyId.ConversationTranslator_Name,nickname);// ref the conversation object
this.privConversation=conversation;// ref the conversation translator object
this.privConversation.conversationTranslator=this;this.privConversation.room.isHost=true;Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect);Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect);this.privSpeechTranslationConfig=conversation.config;this.handleCallback(param1,param2);}else{this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),param2);}}catch(error){this.handleError(error,typeof param1==="string"?param3:param2);}}/**
     * Leave the conversation
     * @param cb
     * @param err
     */},{key:"leaveConversationAsync",value:function leaveConversationAsync(cb,err){var _this107=this;Exports_js_2.marshalPromiseToCallbacks(_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee51(){return _regeneratorRuntime().wrap(function _callee51$(_context51){while(1)switch(_context51.prev=_context51.next){case 0:_context51.next=2;return _this107.cancelSpeech();case 2:_context51.next=4;return _this107.privConversation.endConversationImplAsync();case 4:_context51.next=6;return _this107.privConversation.deleteConversationImplAsync();case 6:_this107.dispose();case 7:case"end":return _context51.stop();}},_callee51);}))(),cb,err);}/**
     * Send a text message
     * @param message
     * @param cb
     * @param err
     */},{key:"sendTextMessageAsync",value:function sendTextMessageAsync(message,cb,err){try{Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend);Contracts_js_1.Contracts.throwIfNullOrWhitespace(message,this.privErrors.invalidArgs.replace("{arg}",message));this.privConversation.sendTextMessageAsync(message,cb,err);}catch(error){this.handleError(error,err);}}/**
     * Start speaking
     * @param cb
     * @param err
     */},{key:"startTranscribingAsync",value:function startTranscribingAsync(cb,err){var _this108=this;Exports_js_2.marshalPromiseToCallbacks(_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee52(){return _regeneratorRuntime().wrap(function _callee52$(_context52){while(1)switch(_context52.prev=_context52.next){case 0:_context52.prev=0;Contracts_js_1.Contracts.throwIfNullOrUndefined(_this108.privConversation,_this108.privErrors.permissionDeniedSend);Contracts_js_1.Contracts.throwIfNullOrUndefined(_this108.privConversation.room.token,_this108.privErrors.permissionDeniedConnect);if(!(_this108.privCTRecognizer===undefined)){_context52.next=6;break;}_context52.next=6;return _this108.connectTranslatorRecognizer();case 6:Contracts_js_1.Contracts.throwIfNullOrUndefined(_this108.privCTRecognizer,_this108.privErrors.permissionDeniedSend);if(!_this108.canSpeak){_this108.handleError(new Error(_this108.privErrors.permissionDeniedSend),err);}_context52.next=10;return _this108.startContinuousRecognition();case 10:_this108.privIsSpeaking=true;_context52.next=19;break;case 13:_context52.prev=13;_context52.t0=_context52["catch"](0);_this108.privIsSpeaking=false;_context52.next=18;return _this108.cancelSpeech();case 18:throw _context52.t0;case 19:case"end":return _context52.stop();}},_callee52,null,[[0,13]]);}))(),cb,err);}/**
     * Stop speaking
     * @param cb
     * @param err
     */},{key:"stopTranscribingAsync",value:function stopTranscribingAsync(cb,err){var _this109=this;Exports_js_2.marshalPromiseToCallbacks(_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee53(){return _regeneratorRuntime().wrap(function _callee53$(_context53){while(1)switch(_context53.prev=_context53.next){case 0:_context53.prev=0;if(_this109.privIsSpeaking){_context53.next=5;break;}_context53.next=4;return _this109.cancelSpeech();case 4:return _context53.abrupt("return");case 5:// stop the recognition but leave the websocket open
_this109.privIsSpeaking=false;_context53.next=8;return new Promise(function(resolve,reject){_this109.privCTRecognizer.stopContinuousRecognitionAsync(resolve,reject);});case 8:_context53.next=14;break;case 10:_context53.prev=10;_context53.t0=_context53["catch"](0);_context53.next=14;return _this109.cancelSpeech();case 14:case"end":return _context53.stop();}},_callee53,null,[[0,10]]);}))(),cb,err);}},{key:"isDisposed",value:function isDisposed(){return this.privIsDisposed;}},{key:"dispose",value:function dispose(reason,success,err){var _this110=this;Exports_js_2.marshalPromiseToCallbacks(_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee54(){return _regeneratorRuntime().wrap(function _callee54$(_context54){while(1)switch(_context54.prev=_context54.next){case 0:if(!(_this110.isDisposed&&!_this110.privIsSpeaking)){_context54.next=2;break;}return _context54.abrupt("return");case 2:_context54.next=4;return _this110.cancelSpeech();case 4:_this110.privIsDisposed=true;_this110.privSpeechTranslationConfig.close();_this110.privSpeechRecognitionLanguage=undefined;_this110.privProperties=undefined;_this110.privAudioConfig=undefined;_this110.privSpeechTranslationConfig=undefined;_this110.privConversation.dispose();_this110.privConversation=undefined;case 12:case"end":return _context54.stop();}},_callee54);}))(),success,err);}/**
     * Cancel the speech websocket
     */},{key:"cancelSpeech",value:function(){var _cancelSpeech2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee55(){var _this$privCTRecognize;return _regeneratorRuntime().wrap(function _callee55$(_context55){while(1)switch(_context55.prev=_context55.next){case 0:_context55.prev=0;this.privIsSpeaking=false;_context55.next=4;return(_this$privCTRecognize=this.privCTRecognizer)===null||_this$privCTRecognize===void 0?void 0:_this$privCTRecognize.onCancelSpeech();case 4:this.privCTRecognizer=undefined;_context55.next=9;break;case 7:_context55.prev=7;_context55.t0=_context55["catch"](0);case 9:case"end":return _context55.stop();}},_callee55,this,[[0,7]]);}));function cancelSpeech(){return _cancelSpeech2.apply(this,arguments);}return cancelSpeech;}()/**
     * Connect to the speech translation recognizer.
     * Currently there is no language validation performed before sending the SpeechLanguage code to the service.
     * If it's an invalid language the raw error will be: 'Error during WebSocket handshake: Unexpected response code: 400'
     * e.g. pass in 'fr' instead of 'fr-FR', or a text-only language 'cy'
     */},{key:"connectTranslatorRecognizer",value:function(){var _connectTranslatorRecognizer=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee56(){var _this111=this;var convGetter;return _regeneratorRuntime().wrap(function _callee56$(_context56){while(1)switch(_context56.prev=_context56.next){case 0:_context56.prev=0;if(this.privAudioConfig===undefined){this.privAudioConfig=Exports_js_3.AudioConfig.fromDefaultMicrophoneInput();}// clear the temp subscription key if it's a participant joining
if(this.privSpeechTranslationConfig.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey){this.privSpeechTranslationConfig.setProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_Key],"");}convGetter=function convGetter(){return _this111.privConversation;};this.privCTRecognizer=new ConversationTranslationRecognizer(this.privSpeechTranslationConfig,this.privAudioConfig,this,convGetter);_context56.next=12;break;case 7:_context56.prev=7;_context56.t0=_context56["catch"](0);_context56.next=11;return this.cancelSpeech();case 11:throw _context56.t0;case 12:case"end":return _context56.stop();}},_callee56,this,[[0,7]]);}));function connectTranslatorRecognizer(){return _connectTranslatorRecognizer.apply(this,arguments);}return connectTranslatorRecognizer;}()/**
     * Handle the start speaking request
     */},{key:"startContinuousRecognition",value:function startContinuousRecognition(){var _this112=this;return new Promise(function(resolve,reject){_this112.privCTRecognizer.startContinuousRecognitionAsync(resolve,reject);});}}]);return ConversationTranslator;}(Exports_js_4.ConversationCommon);exports.ConversationTranslator=ConversationTranslator;/***/},/* 165 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationTranslatorConnectionFactory=void 0;var Exports_js_1=__webpack_require__(60);var StringUtils_js_1=__webpack_require__(166);var Contracts_js_1=__webpack_require__(64);var Exports_js_2=__webpack_require__(79);var HeaderNames_js_1=__webpack_require__(54);var QueryParameterNames_js_1=__webpack_require__(135);var ConnectionFactoryBase_js_1=__webpack_require__(134);var Exports_js_3=__webpack_require__(2);/**
 * Connection factory for the conversation translator. Handles connecting to the regular translator endpoint,
 * as well as the virtual microphone array transcription endpoint
 */var ConversationTranslatorConnectionFactory=/*#__PURE__*/function(_ConnectionFactoryBas3){_inherits(ConversationTranslatorConnectionFactory,_ConnectionFactoryBas3);var _super99=_createSuper(ConversationTranslatorConnectionFactory);function ConversationTranslatorConnectionFactory(convGetter){var _this113;_classCallCheck(this,ConversationTranslatorConnectionFactory);_this113=_super99.call(this);Contracts_js_1.Contracts.throwIfNullOrUndefined(convGetter,"convGetter");_this113.privConvGetter=convGetter;return _this113;}_createClass(ConversationTranslatorConnectionFactory,[{key:"create",value:function create(config,authInfo,connectionId){var isVirtMicArrayEndpoint=config.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE";var convInfo=this.privConvGetter().room;var region=convInfo.cognitiveSpeechRegion||config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region,"");var replacementValues={hostSuffix:ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region),path:ConversationTranslatorConnectionFactory.CTS_VIRT_MIC_PATH,region:encodeURIComponent(region)};replacementValues[QueryParameterNames_js_1.QueryParameterNames.Language]=encodeURIComponent(config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage,""));replacementValues[QueryParameterNames_js_1.QueryParameterNames.CtsMeetingId]=encodeURIComponent(convInfo.roomId);replacementValues[QueryParameterNames_js_1.QueryParameterNames.CtsDeviceId]=encodeURIComponent(convInfo.participantId);replacementValues[QueryParameterNames_js_1.QueryParameterNames.CtsIsParticipant]=convInfo.isHost?"":"&"+QueryParameterNames_js_1.QueryParameterNames.CtsIsParticipant;var endpointUrl="";var queryParams={};var headers={};if(isVirtMicArrayEndpoint){// connecting to the conversation transcription virtual microphone array endpoint
endpointUrl=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint);if(!endpointUrl){var hostName=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}");endpointUrl="wss://"+hostName+"{path}";}// because the region can change during a session, we support being passed a format string which we can then
// replace with the correct information.
endpointUrl=StringUtils_js_1.StringUtils.formatString(endpointUrl,replacementValues);var parsedUrl=new URL(endpointUrl);parsedUrl.searchParams.forEach(function(val,key){queryParams[key]=val;});var connFactory=new Exports_js_3.TranscriberConnectionFactory();connFactory.setQueryParams(queryParams,config,endpointUrl);// Some query parameters are required for the CTS endpoint, let's explicity set them here
queryParams[QueryParameterNames_js_1.QueryParameterNames.CtsMeetingId]=replacementValues[QueryParameterNames_js_1.QueryParameterNames.CtsMeetingId];queryParams[QueryParameterNames_js_1.QueryParameterNames.CtsDeviceId]=replacementValues[QueryParameterNames_js_1.QueryParameterNames.CtsDeviceId];if(!convInfo.isHost){queryParams[QueryParameterNames_js_1.QueryParameterNames.CtsIsParticipant]="";// this doesn't have a value so set to an empty string
}if(!(QueryParameterNames_js_1.QueryParameterNames.Format in queryParams)){queryParams[QueryParameterNames_js_1.QueryParameterNames.Format]="simple";}parsedUrl.searchParams.forEach(function(val,key){parsedUrl.searchParams.set(key,queryParams[key]);delete queryParams[key];});endpointUrl=parsedUrl.toString();}else{// connecting to regular translation endpoint
var _connFactory=new Exports_js_3.TranslationConnectionFactory();endpointUrl=_connFactory.getEndpointUrl(config,true);endpointUrl=StringUtils_js_1.StringUtils.formatString(endpointUrl,replacementValues);_connFactory.setQueryParams(queryParams,config,endpointUrl);}headers[HeaderNames_js_1.HeaderNames.ConnectionId]=connectionId;headers[Exports_js_1.RestConfigBase.configParams.token]=convInfo.token;if(!!authInfo.token){headers[authInfo.headerName]=authInfo.token;}var enableCompression=config.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return new Exports_js_1.WebsocketConnection(endpointUrl,queryParams,headers,new Exports_js_3.WebsocketMessageFormatter(),Exports_js_1.ProxyInfo.fromRecognizerConfig(config),enableCompression,connectionId);}}]);return ConversationTranslatorConnectionFactory;}(ConnectionFactoryBase_js_1.ConnectionFactoryBase);exports.ConversationTranslatorConnectionFactory=ConversationTranslatorConnectionFactory;ConversationTranslatorConnectionFactory.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio";/***/},/* 166 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.StringUtils=void 0;/**
 * String helper functions
 */var StringUtils=/*#__PURE__*/function(){function StringUtils(){_classCallCheck(this,StringUtils);}_createClass(StringUtils,null,[{key:"formatString",value:/**
     * Formats a string by replacing the named {keys} in the string with the values contained in the replacement dictionary.
     * @param format The format string that contains the parts to replace surrounded by {}. For example: "wss://{region}.cts.speech.microsoft.com".
     * If your string needs to contain a { or } you can use the {{ and }} escape sequences respectively.
     * @param replacements The dictionary of replacements. If a replacement is not found, it is replaced with an empty string
     * @returns The formatted string. If you pass in a null or undefined format string, an empty string will be returned
     */function formatString(format,replacements){if(!format){return"";}if(!replacements){return format;}var formatted="";var key="";var appendToFormatted=function appendToFormatted(str){formatted+=str;};var appendToKey=function appendToKey(str){key+=str;};var appendFunc=appendToFormatted;for(var i=0;i<format.length;i++){var c=format[i];var next=i+1<format.length?format[i+1]:"";switch(c){case"{":if(next==="{"){appendFunc("{");i++;}else{appendFunc=appendToKey;}break;case"}":if(next==="}"){appendFunc("}");i++;}else{if(replacements.hasOwnProperty(key)){formatted+=replacements[key];}appendFunc=appendToFormatted;key="";}break;default:appendFunc(c);break;}}return formatted;}}]);return StringUtils;}();exports.StringUtils=StringUtils;/***/},/* 167 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationTranscriber=void 0;var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(4);var Contracts_js_1=__webpack_require__(64);var Exports_js_3=__webpack_require__(79);/**
 * Performs speech recognition with speaker separation from microphone, file, or other audio input streams, and gets transcribed text as result.
 * @class ConversationTranscriber
 */var ConversationTranscriber=/*#__PURE__*/function(_Exports_js_3$Recogni5){_inherits(ConversationTranscriber,_Exports_js_3$Recogni5);var _super100=_createSuper(ConversationTranscriber);/**
     * ConversationTranscriber constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - an set of initial properties for this recognizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */function ConversationTranscriber(speechConfig,audioConfig){var _this114;_classCallCheck(this,ConversationTranscriber);var speechConfigImpl=speechConfig;Contracts_js_1.Contracts.throwIfNull(speechConfigImpl,"speechConfig");Contracts_js_1.Contracts.throwIfNullOrWhitespace(speechConfigImpl.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage),Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage]);_this114=_super100.call(this,audioConfig,speechConfigImpl.properties,new Exports_js_1.ConversationTranscriberConnectionFactory());_this114.privProperties.setProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2");_this114.privDisposedRecognizer=false;return _this114;}/**
     * ConversationTranscriber constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - an set of initial properties for this recognizer
     * @param {AutoDetectSourceLanguageConfig} autoDetectSourceLanguageConfig - An source language detection configuration associated with the recognizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */_createClass(ConversationTranscriber,[{key:"endpointId",get:/**
     * Gets the endpoint id of a customized speech model that is used for transcription.
     * @member ConversationTranscriber.prototype.endpointId
     * @function
     * @public
     * @returns {string} the endpoint id of a customized speech model that is used for speech recognition.
     */function get(){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer);return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000");}/**
     * Gets the authorization token used to communicate with the service.
     * @member ConversationTranscriber.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */},{key:"authorizationToken",get:function get(){return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token);}/**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member ConversationTranscriber.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */,set:function set(token){Contracts_js_1.Contracts.throwIfNullOrWhitespace(token,"token");this.properties.setProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,token);}/**
     * Gets the spoken language of transcription.
     * @member ConversationTranscriber.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @returns {string} The spoken language of transcription.
     */},{key:"speechRecognitionLanguage",get:function get(){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer);return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage);}/**
     * Gets the output format of transcription.
     * @member ConversationTranscriber.prototype.outputFormat
     * @function
     * @public
     * @returns {OutputFormat} The output format of transcription.
     */},{key:"outputFormat",get:function get(){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer);if(this.properties.getProperty(Exports_js_1.OutputFormatPropertyName,Exports_js_3.OutputFormat[Exports_js_3.OutputFormat.Simple])===Exports_js_3.OutputFormat[Exports_js_3.OutputFormat.Simple]){return Exports_js_3.OutputFormat.Simple;}else{return Exports_js_3.OutputFormat.Detailed;}}/**
     * The collection of properties and their values defined for this conversation transcriber.
     * @member ConversationTranscriber.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this SpeechRecognizer.
     */},{key:"properties",get:function get(){return this.privProperties;}/**
     * Starts conversation transcription, until stopTranscribingAsync() is called.
     * User must subscribe to events to receive transcription results.
     * @member ConversationTranscriber.prototype.startTranscribingAsync
     * @function
     * @public
     * @param cb - Callback invoked once the transcription has started.
     * @param err - Callback invoked in case of an error.
     */},{key:"startTranscribingAsync",value:function startTranscribingAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(Exports_js_1.RecognitionMode.Conversation),cb,err);}/**
     * Stops conversation transcription.
     * @member ConversationTranscriber.prototype.stopTranscribingAsync
     * @function
     * @public
     * @param cb - Callback invoked once the transcription has stopped.
     * @param err - Callback invoked in case of an error.
     */},{key:"stopTranscribingAsync",value:function stopTranscribingAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),cb,err);}/**
     * closes all external resources held by an instance of this class.
     * @member ConversationTranscriber.prototype.close
     * @function
     * @public
     */},{key:"close",value:function close(cb,errorCb){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer);Exports_js_2.marshalPromiseToCallbacks(this.dispose(true),cb,errorCb);}/**
     * Disposes any resources held by the object.
     * @member SpeechRecognizer.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - true if disposing the object.
     */},{key:"dispose",value:function(){var _dispose10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee57(disposing){return _regeneratorRuntime().wrap(function _callee57$(_context57){while(1)switch(_context57.prev=_context57.next){case 0:if(!this.privDisposedRecognizer){_context57.next=2;break;}return _context57.abrupt("return");case 2:if(!disposing){_context57.next=6;break;}this.privDisposedRecognizer=true;_context57.next=6;return this.implRecognizerStop();case 6:_context57.next=8;return _get(_getPrototypeOf(ConversationTranscriber.prototype),"dispose",this).call(this,disposing);case 8:case"end":return _context57.stop();}},_callee57,this);}));function dispose(_x39){return _dispose10.apply(this,arguments);}return dispose;}()},{key:"createRecognizerConfig",value:function createRecognizerConfig(speechConfig){return new Exports_js_1.RecognizerConfig(speechConfig,this.privProperties);}},{key:"createServiceRecognizer",value:function createServiceRecognizer(authentication,connectionFactory,audioConfig,recognizerConfig){var configImpl=audioConfig;recognizerConfig.isSpeakerDiarizationEnabled=true;return new Exports_js_1.ConversationTranscriptionServiceRecognizer(authentication,connectionFactory,configImpl,recognizerConfig,this);}}],[{key:"FromConfig",value:function FromConfig(speechConfig,autoDetectSourceLanguageConfig,audioConfig){var speechConfigImpl=speechConfig;autoDetectSourceLanguageConfig.properties.mergeTo(speechConfigImpl.properties);var recognizer=new ConversationTranscriber(speechConfig,audioConfig);return recognizer;}}]);return ConversationTranscriber;}(Exports_js_3.Recognizer);exports.ConversationTranscriber=ConversationTranscriber;/***/},/* 168 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
Object.defineProperty(exports,"__esModule",{value:true});exports.Participant=exports.User=void 0;/* eslint-disable max-classes-per-file */var Exports_js_1=__webpack_require__(79);var User=/*#__PURE__*/function(){function User(userId){_classCallCheck(this,User);this.privUserId=userId;}_createClass(User,[{key:"userId",get:function get(){return this.privUserId;}}]);return User;}();exports.User=User;var Participant=/*#__PURE__*/function(){function Participant(id,avatar,displayName,isHost,isMuted,isUsingTts,preferredLanguage,voice){_classCallCheck(this,Participant);this.privId=id;this.privAvatar=avatar;this.privDisplayName=displayName;this.privIsHost=isHost;this.privIsMuted=isMuted;this.privIsUsingTts=isUsingTts;this.privPreferredLanguage=preferredLanguage;this.privVoice=voice;this.privProperties=new Exports_js_1.PropertyCollection();}_createClass(Participant,[{key:"avatar",get:function get(){return this.privAvatar;}},{key:"displayName",get:function get(){return this.privDisplayName;}},{key:"id",get:function get(){return this.privId;}},{key:"preferredLanguage",get:function get(){return this.privPreferredLanguage;}},{key:"isHost",get:function get(){return this.privIsHost;}},{key:"isMuted",get:function get(){return this.privIsMuted;}},{key:"isUsingTts",get:function get(){return this.privIsUsingTts;}},{key:"voice",get:function get(){return this.privVoice;}},{key:"properties",get:function get(){return this.privProperties;}}],[{key:"From",value:function From(id,language,voice){return new Participant(id,"",id,false,false,false,language,voice);}}]);return Participant;}();exports.Participant=Participant;/***/},/* 169 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
Object.defineProperty(exports,"__esModule",{value:true});exports.ParticipantChangedReason=void 0;var ParticipantChangedReason;(function(ParticipantChangedReason){/** Participant has joined the conversation. */ParticipantChangedReason[ParticipantChangedReason["JoinedConversation"]=0]="JoinedConversation";/** Participant has left the conversation. This could be voluntary, or involuntary
     * (e.g. they are experiencing networking issues).
     */ParticipantChangedReason[ParticipantChangedReason["LeftConversation"]=1]="LeftConversation";/** The participants' state has changed (e.g. they became muted, changed their nickname). */ParticipantChangedReason[ParticipantChangedReason["Updated"]=2]="Updated";})(ParticipantChangedReason=exports.ParticipantChangedReason||(exports.ParticipantChangedReason={}));/***/},/* 170 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
Object.defineProperty(exports,"__esModule",{value:true});exports.MeetingImpl=exports.Meeting=void 0;/* eslint-disable max-classes-per-file */var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(4);var Contracts_js_1=__webpack_require__(64);var Exports_js_3=__webpack_require__(79);var Meeting=/*#__PURE__*/function(){function Meeting(){_classCallCheck(this,Meeting);return;}/**
     * Create a meeting
     * @param speechConfig
     * @param meetingId
     * @param cb
     * @param err
     */_createClass(Meeting,null,[{key:"createMeetingAsync",value:function createMeetingAsync(speechConfig,meetingId,arg3,arg4){Contracts_js_1.Contracts.throwIfNullOrUndefined(speechConfig,Exports_js_1.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config"));Contracts_js_1.Contracts.throwIfNullOrUndefined(speechConfig.region,Exports_js_1.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region"));Contracts_js_1.Contracts.throwIfNull(meetingId,"meetingId");if(meetingId.length===0){throw new Error("meetingId cannot be empty");}if(!speechConfig.subscriptionKey&&!speechConfig.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceAuthorization_Token])){Contracts_js_1.Contracts.throwIfNullOrUndefined(speechConfig.subscriptionKey,Exports_js_1.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));}var meetingImpl=new MeetingImpl(speechConfig,meetingId);// eslint-disable-next-line @typescript-eslint/no-empty-function
Exports_js_2.marshalPromiseToCallbacks(_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee58(){return _regeneratorRuntime().wrap(function _callee58$(_context58){while(1)switch(_context58.prev=_context58.next){case 0:case"end":return _context58.stop();}},_callee58);}))(),arg3,arg4);return meetingImpl;}}]);return Meeting;}();exports.Meeting=Meeting;var MeetingImpl=/*#__PURE__*/function(_Meeting){_inherits(MeetingImpl,_Meeting);var _super101=_createSuper(MeetingImpl);/**
     * Create a Meeting impl
     * @param speechConfig
     * @param {string} id - optional conversationId
     */function MeetingImpl(speechConfig,id){var _this115;_classCallCheck(this,MeetingImpl);_this115=_super101.call(this);_this115.privErrors=Exports_js_1.ConversationConnectionConfig.restErrors;/** websocket callbacks */ /* eslint-disable @typescript-eslint/typedef */_this115.onConnected=function(e){_this115.privIsConnected=true;try{var _this115$privConversa;if(!!((_this115$privConversa=_this115.privConversationTranslator)!==null&&_this115$privConversa!==void 0&&_this115$privConversa.sessionStarted)){_this115.privConversationTranslator.sessionStarted(_this115.privConversationTranslator,e);}}catch(e){//
}};_this115.onDisconnected=function(e){try{var _this115$privConversa2;if(!!((_this115$privConversa2=_this115.privConversationTranslator)!==null&&_this115$privConversa2!==void 0&&_this115$privConversa2.sessionStopped)){_this115.privConversationTranslator.sessionStopped(_this115.privConversationTranslator,e);}}catch(e){//
}finally{void _this115.close(false);}};_this115.onCanceled=function(r,e){try{var _this115$privConversa3;if(!!((_this115$privConversa3=_this115.privConversationTranslator)!==null&&_this115$privConversa3!==void 0&&_this115$privConversa3.canceled)){_this115.privConversationTranslator.canceled(_this115.privConversationTranslator,e);}}catch(e){//
}};_this115.onParticipantUpdateCommandReceived=function(r,e){try{var updatedParticipant=_this115.privParticipants.getParticipant(e.id);if(updatedParticipant!==undefined){switch(e.key){case Exports_js_1.ConversationTranslatorCommandTypes.changeNickname:updatedParticipant.displayName=e.value;break;case Exports_js_1.ConversationTranslatorCommandTypes.setUseTTS:updatedParticipant.isUsingTts=e.value;break;case Exports_js_1.ConversationTranslatorCommandTypes.setProfanityFiltering:updatedParticipant.profanity=e.value;break;case Exports_js_1.ConversationTranslatorCommandTypes.setMute:updatedParticipant.isMuted=e.value;break;case Exports_js_1.ConversationTranslatorCommandTypes.setTranslateToLanguages:updatedParticipant.translateToLanguages=e.value;break;}_this115.privParticipants.addOrUpdateParticipant(updatedParticipant);if(!!_this115.privConversationTranslator){_this115.privConversationTranslator.participantsChanged(_this115.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.Updated,[_this115.toParticipant(updatedParticipant)],e.sessionId));}}}catch(e){//
}};_this115.onLockRoomCommandReceived=function(){// TODO
};_this115.onMuteAllCommandReceived=function(r,e){try{_this115.privParticipants.participants.forEach(function(p){return p.isMuted=p.isHost?false:e.isMuted;});if(!!_this115.privConversationTranslator){_this115.privConversationTranslator.participantsChanged(_this115.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.Updated,_this115.toParticipants(false),e.sessionId));}}catch(e){//
}};_this115.onParticipantJoinCommandReceived=function(r,e){try{var newParticipant=_this115.privParticipants.addOrUpdateParticipant(e.participant);if(newParticipant!==undefined){if(!!_this115.privConversationTranslator){_this115.privConversationTranslator.participantsChanged(_this115.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.JoinedConversation,[_this115.toParticipant(newParticipant)],e.sessionId));}}}catch(e){//
}};_this115.onParticipantLeaveCommandReceived=function(r,e){try{var ejectedParticipant=_this115.privParticipants.getParticipant(e.participant.id);if(ejectedParticipant!==undefined){// remove the participant from the internal participants list
_this115.privParticipants.deleteParticipant(e.participant.id);if(!!_this115.privConversationTranslator){// notify subscribers that the participant has left the conversation
_this115.privConversationTranslator.participantsChanged(_this115.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.LeftConversation,[_this115.toParticipant(ejectedParticipant)],e.sessionId));}}}catch(e){//
}};_this115.onTranslationReceived=function(r,e){try{switch(e.command){case Exports_js_1.ConversationTranslatorMessageTypes["final"]:if(!!_this115.privConversationTranslator){_this115.privConversationTranslator.transcribed(_this115.privConversationTranslator,new Exports_js_3.ConversationTranslationEventArgs(e.payload,undefined,e.sessionId));}break;case Exports_js_1.ConversationTranslatorMessageTypes.partial:if(!!_this115.privConversationTranslator){_this115.privConversationTranslator.transcribing(_this115.privConversationTranslator,new Exports_js_3.ConversationTranslationEventArgs(e.payload,undefined,e.sessionId));}break;case Exports_js_1.ConversationTranslatorMessageTypes.instantMessage:if(!!_this115.privConversationTranslator){_this115.privConversationTranslator.textMessageReceived(_this115.privConversationTranslator,new Exports_js_3.ConversationTranslationEventArgs(e.payload,undefined,e.sessionId));}break;}}catch(e){//
}};_this115.onParticipantsListReceived=function(r,e){try{// check if the session token needs to be updated
if(e.sessionToken!==undefined&&e.sessionToken!==null){_this115.privRoom.token=e.sessionToken;}// save the participants
_this115.privParticipants.participants=_toConsumableArray(e.participants);// enable the conversation
if(_this115.privParticipants.me!==undefined){_this115.privIsReady=true;}if(!!_this115.privConversationTranslator){_this115.privConversationTranslator.participantsChanged(_this115.privConversationTranslator,new Exports_js_3.ConversationParticipantsChangedEventArgs(Exports_js_3.ParticipantChangedReason.JoinedConversation,_this115.toParticipants(true),e.sessionId));}// if this is the host, update the nickname if needed
if(_this115.me.isHost){var _this115$privConversa4;var nickname=(_this115$privConversa4=_this115.privConversationTranslator)===null||_this115$privConversa4===void 0?void 0:_this115$privConversa4.properties.getProperty(Exports_js_3.PropertyId.ConversationTranslator_Name);if(nickname!==undefined&&nickname.length>0&&nickname!==_this115.me.displayName){// issue a change nickname request
_this115.changeNicknameAsync(nickname);}}}catch(e){//
}};_this115.onConversationExpiration=function(r,e){try{if(!!_this115.privConversationTranslator){_this115.privConversationTranslator.conversationExpiration(_this115.privConversationTranslator,e);}}catch(e){//
}};_this115.privIsConnected=false;_this115.privIsDisposed=false;_this115.privConversationId="";_this115.privProperties=new Exports_js_3.PropertyCollection();_this115.privManager=new Exports_js_1.ConversationManager();// check the speech language
var language=speechConfig.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage]);if(!language){speechConfig.setProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage],Exports_js_1.ConversationConnectionConfig.defaultLanguageCode);}_this115.privLanguage=speechConfig.getProperty(Exports_js_3.PropertyId[Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage]);_this115.privConversationId=id;// save the speech config for future usage
_this115.privConfig=speechConfig;// save the config properties
var configImpl=speechConfig;Contracts_js_1.Contracts.throwIfNull(configImpl,"speechConfig");_this115.privProperties=configImpl.properties.clone();_this115.privIsConnected=false;_this115.privParticipants=new Exports_js_1.InternalParticipants();_this115.privIsReady=false;_this115.privTextMessageMaxLength=1000;return _this115;}// get the internal data about a conversation
_createClass(MeetingImpl,[{key:"room",get:function get(){return this.privRoom;}// get the wrapper for connecting to the websockets
},{key:"connection",get:function get(){return this.privConversationRecognizer;// this.privConnection;
}// get the config
},{key:"config",get:function get(){return this.privConfig;}// get the meeting Id
},{key:"meetingId",get:function get(){return this.privRoom?this.privRoom.roomId:this.privConversationId;}// get the properties
},{key:"properties",get:function get(){return this.privProperties;}// get the speech language
},{key:"speechRecognitionLanguage",get:function get(){return this.privLanguage;}},{key:"isMutedByHost",get:function get(){var _this$privParticipant5,_this$privParticipant6;return(_this$privParticipant5=this.privParticipants.me)!==null&&_this$privParticipant5!==void 0&&_this$privParticipant5.isHost?false:(_this$privParticipant6=this.privParticipants.me)===null||_this$privParticipant6===void 0?void 0:_this$privParticipant6.isMuted;}},{key:"isConnected",get:function get(){return this.privIsConnected&&this.privIsReady;}},{key:"participants",get:function get(){return this.toParticipants(true);}},{key:"me",get:function get(){return this.toParticipant(this.privParticipants.me);}},{key:"host",get:function get(){return this.toParticipant(this.privParticipants.host);}},{key:"transcriberRecognizer",get:function get(){return this.privTranscriberRecognizer;}},{key:"meetingInfo",get:function get(){var convId=this.meetingId;var p=this.participants.map(function(part){return{id:part.id,preferredLanguage:part.preferredLanguage,voice:part.voice};});var props={};var _iterator11=_createForOfIteratorHelper(Exports_js_1.ConversationConnectionConfig.transcriptionEventKeys),_step11;try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var key=_step11.value;var val=this.properties.getProperty(key,"");if(val!==""){props[key]=val;}}}catch(err){_iterator11.e(err);}finally{_iterator11.f();}var info={id:convId,participants:p,meetingProperties:props};return info;}},{key:"canSend",get:function get(){var _this$privParticipant7;return this.privIsConnected&&!((_this$privParticipant7=this.privParticipants.me)!==null&&_this$privParticipant7!==void 0&&_this$privParticipant7.isMuted);}},{key:"canSendAsHost",get:function get(){var _this$privParticipant8;return this.privIsConnected&&((_this$privParticipant8=this.privParticipants.me)===null||_this$privParticipant8===void 0?void 0:_this$privParticipant8.isHost);}// get / set the speech auth token
// eslint-disable-next-line @typescript-eslint/member-ordering
},{key:"authorizationToken",get:function get(){return this.privToken;},set:function set(value){Contracts_js_1.Contracts.throwIfNullOrWhitespace(value,"authorizationToken");this.privToken=value;}/**
     * Create a new meeting as Host
     * @param cb
     * @param err
     */},{key:"createMeetingAsync",value:function createMeetingAsync(cb,err){var _this116=this;try{if(!!this.privConversationRecognizer){this.handleError(new Error(this.privErrors.permissionDeniedStart),err);}this.privManager.createOrJoin(this.privProperties,undefined,function(room){if(!room){_this116.handleError(new Error(_this116.privErrors.permissionDeniedConnect),err);}_this116.privRoom=room;_this116.handleCallback(cb,err);},function(error){_this116.handleError(error,err);});}catch(error){this.handleError(error,err);}}/**
     * Starts a new meeting as host.
     * @param cb
     * @param err
     */},{key:"startMeetingAsync",value:function startMeetingAsync(cb,err){var _this117=this;try{// check if there is already a recognizer
if(!!this.privConversationRecognizer){this.handleError(new Error(this.privErrors.permissionDeniedStart),err);}// check if there is conversation data available
Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect);// connect to the conversation websocket
this.privParticipants.meId=this.privRoom.participantId;// Because ConversationTranslator manually sets up and manages the connection, Conversation
// has to forward serviceRecognizer connection events that usually get passed automatically
this.privConversationRecognizer.connected=this.onConnected;this.privConversationRecognizer.disconnected=this.onDisconnected;this.privConversationRecognizer.canceled=this.onCanceled;this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived;this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived;this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived;this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived;this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived;this.privConversationRecognizer.translationReceived=this.onTranslationReceived;this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived;this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration;this.privConversationRecognizer.connect(this.privRoom.token,function(){_this117.handleCallback(cb,err);},function(error){_this117.handleError(error,err);});}catch(error){this.handleError(error,err);}}/**
     * Join a meeting as a participant.
     * @param { IParticipant } participant - participant to add
     * @param cb
     * @param err
     */},{key:"addParticipantAsync",value:function addParticipantAsync(participant,cb,err){Contracts_js_1.Contracts.throwIfNullOrUndefined(participant,"Participant");Exports_js_2.marshalPromiseToCallbacks(this.addParticipantImplAsync(participant),cb,err);}/**
     * Join a meeting as a participant.
     * @param meeting
     * @param nickname
     * @param lang
     * @param cb
     * @param err
     */},{key:"joinMeetingAsync",value:function joinMeetingAsync(meetingId,nickname,lang,cb,err){var _this118=this;try{// TODO
// if (!!this.privConversationRecognizer) {
//     throw new Error(this.privErrors.permissionDeniedStart);
// }
Contracts_js_1.Contracts.throwIfNullOrWhitespace(meetingId,this.privErrors.invalidArgs.replace("{arg}","conversationId"));Contracts_js_1.Contracts.throwIfNullOrWhitespace(nickname,this.privErrors.invalidArgs.replace("{arg}","nickname"));Contracts_js_1.Contracts.throwIfNullOrWhitespace(lang,this.privErrors.invalidArgs.replace("{arg}","language"));// join the conversation
this.privManager.createOrJoin(this.privProperties,meetingId,function(room){Contracts_js_1.Contracts.throwIfNullOrUndefined(room,_this118.privErrors.permissionDeniedConnect);_this118.privRoom=room;_this118.privConfig.authorizationToken=room.cognitiveSpeechAuthToken;// join callback
if(!!cb){cb(room.cognitiveSpeechAuthToken);}},function(error){_this118.handleError(error,err);});}catch(error){this.handleError(error,err);}}/**
     * Deletes a meeting
     * @param cb
     * @param err
     */},{key:"deleteMeetingAsync",value:function deleteMeetingAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),cb,err);}},{key:"deleteMeetingImplAsync",value:function(){var _deleteMeetingImplAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee59(){return _regeneratorRuntime().wrap(function _callee59$(_context59){while(1)switch(_context59.prev=_context59.next){case 0:Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect);Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect);_context59.next=4;return this.privManager.leave(this.privProperties,this.privRoom.token);case 4:this.dispose();case 5:case"end":return _context59.stop();}},_callee59,this);}));function deleteMeetingImplAsync(){return _deleteMeetingImplAsync.apply(this,arguments);}return deleteMeetingImplAsync;}()/**
     * Issues a request to close the client websockets
     * @param cb
     * @param err
     */},{key:"endMeetingAsync",value:function endMeetingAsync(cb,err){Exports_js_2.marshalPromiseToCallbacks(this.endMeetingImplAsync(),cb,err);}},{key:"endMeetingImplAsync",value:function endMeetingImplAsync(){return this.close(true);}/**
     * Issues a request to lock the conversation
     * @param cb
     * @param err
     */},{key:"lockMeetingAsync",value:function lockMeetingAsync(cb,err){var _this119=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);if(!this.canSendAsHost){this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getLockCommand(true),function(){_this119.handleCallback(cb,err);},function(error){_this119.handleError(error,err);});}}catch(error){this.handleError(error,err);}}/**
     * Issues a request to mute the meeting
     * @param cb
     * @param err
     */},{key:"muteAllParticipantsAsync",value:function muteAllParticipantsAsync(cb,err){var _this120=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend);Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);// check the user's permissions
if(!this.canSendAsHost){this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(true),function(){_this120.handleCallback(cb,err);},function(error){_this120.handleError(error,err);});}}catch(error){this.handleError(error,err);}}/**
     * Issues a request to mute a participant in the meeting
     * @param userId
     * @param cb
     * @param err
     */},{key:"muteParticipantAsync",value:function muteParticipantAsync(userId,cb,err){var _this121=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfNullOrWhitespace(userId,this.privErrors.invalidArgs.replace("{arg}","userId"));Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);// check the connection is open (host + participant can perform the mute command)
if(!this.canSend){this.handleError(new Error(this.privErrors.permissionDeniedSend),err);}// if not host, check the participant is not muting another participant
if(!this.me.isHost&&this.me.id!==userId){this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),err);}// check the user exists
var exists=this.privParticipants.getParticipantIndex(userId);if(exists===-1){this.handleError(new Error(this.privErrors.invalidParticipantRequest),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getMuteCommand(userId,true),function(){_this121.handleCallback(cb,err);},function(error){_this121.handleError(error,err);});}}catch(error){this.handleError(error,err);}}/**
     * Issues a request to remove a participant from the conversation
     * @param userId
     * @param cb
     * @param err
     */},{key:"removeParticipantAsync",value:function removeParticipantAsync(userId,cb,err){var _this122=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);if(!!this.privTranscriberRecognizer&&userId.hasOwnProperty("id")){// Assume this is a transcription participant
Exports_js_2.marshalPromiseToCallbacks(this.removeParticipantImplAsync(userId),cb,err);}else{Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);if(!this.canSendAsHost){this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),err);}var participantId="";if(typeof userId==="string"){participantId=userId;}else if(userId.hasOwnProperty("id")){var participant=userId;participantId=participant.id;}else if(userId.hasOwnProperty("userId")){var user=userId;participantId=user.userId;}Contracts_js_1.Contracts.throwIfNullOrWhitespace(participantId,this.privErrors.invalidArgs.replace("{arg}","userId"));// check the participant exists
var index=this.participants.findIndex(function(p){return p.id===participantId;});if(index===-1){this.handleError(new Error(this.privErrors.invalidParticipantRequest),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getEjectCommand(participantId),function(){_this122.handleCallback(cb,err);},function(error){_this122.handleError(error,err);});}}}catch(error){this.handleError(error,err);}}/**
     * Issues a request to unlock the meeting
     * @param cb
     * @param err
     */},{key:"unlockMeetingAsync",value:function unlockMeetingAsync(cb,err){var _this123=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);if(!this.canSendAsHost){this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getLockCommand(false),function(){_this123.handleCallback(cb,err);},function(error){_this123.handleError(error,err);});}}catch(error){this.handleError(error,err);}}/**
     * Issues a request to unmute all participants in the meeting
     * @param cb
     * @param err
     */},{key:"unmuteAllParticipantsAsync",value:function unmuteAllParticipantsAsync(cb,err){var _this124=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);if(!this.canSendAsHost){this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(false),function(){_this124.handleCallback(cb,err);},function(error){_this124.handleError(error,err);});}}catch(error){this.handleError(error,err);}}/**
     * Issues a request to unmute a participant in the meeting
     * @param userId
     * @param cb
     * @param err
     */},{key:"unmuteParticipantAsync",value:function unmuteParticipantAsync(userId,cb,err){var _this125=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfNullOrWhitespace(userId,this.privErrors.invalidArgs.replace("{arg}","userId"));Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);// check the connection is open (host + participant can perform the mute command)
if(!this.canSend){this.handleError(new Error(this.privErrors.permissionDeniedSend),err);}// if not host, check the participant is not muting another participant
if(!this.me.isHost&&this.me.id!==userId){this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),err);}// check the user exists
var exists=this.privParticipants.getParticipantIndex(userId);if(exists===-1){this.handleError(new Error(this.privErrors.invalidParticipantRequest),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getMuteCommand(userId,false),function(){_this125.handleCallback(cb,err);},function(error){_this125.handleError(error,err);});}}catch(error){this.handleError(error,err);}}/**
     * Send a text message
     * @param message
     * @param cb
     * @param err
     */},{key:"sendTextMessageAsync",value:function sendTextMessageAsync(message,cb,err){var _this126=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfNullOrWhitespace(message,this.privErrors.invalidArgs.replace("{arg}","message"));Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);if(!this.canSend){this.handleError(new Error(this.privErrors.permissionDeniedSend),err);}// TODO: is a max length check required?
if(message.length>this.privTextMessageMaxLength){this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getMessageCommand(message),function(){_this126.handleCallback(cb,err);},function(error){_this126.handleError(error,err);});}}catch(error){this.handleError(error,err);}}/**
     * Set translated to languages
     * @param {string[]} languages - languages to translate to
     * @param cb
     * @param err
     */},{key:"setTranslatedLanguagesAsync",value:function setTranslatedLanguagesAsync(languages,cb,err){var _this127=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfArrayEmptyOrWhitespace(languages,this.privErrors.invalidArgs.replace("{arg}","languages"));Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);if(!this.canSend){this.handleError(new Error(this.privErrors.permissionDeniedSend),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(languages),function(){_this127.handleCallback(cb,err);},function(error){_this127.handleError(error,err);});}}catch(error){this.handleError(error,err);}}/**
     * Change nickname
     * @param {string} nickname - new nickname for the room
     * @param cb
     * @param err
     */},{key:"changeNicknameAsync",value:function changeNicknameAsync(nickname,cb,err){var _this128=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Contracts_js_1.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed());Contracts_js_1.Contracts.throwIfNullOrWhitespace(nickname,this.privErrors.invalidArgs.replace("{arg}","nickname"));Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend);if(!this.canSend){this.handleError(new Error(this.privErrors.permissionDeniedSend),err);}if(!!this.privConversationRecognizer){this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(nickname),function(){_this128.handleCallback(cb,err);},function(error){_this128.handleError(error,err);});}}catch(error){this.handleError(error,err);}}},{key:"isDisposed",value:function isDisposed(){return this.privIsDisposed;}},{key:"dispose",value:function dispose(){if(this.isDisposed){return;}this.privIsDisposed=true;if(!!this.config){this.config.close();}this.privConfig=undefined;this.privLanguage=undefined;this.privProperties=undefined;this.privRoom=undefined;this.privToken=undefined;this.privManager=undefined;this.privIsConnected=false;this.privIsReady=false;this.privParticipants=undefined;}},{key:"connectTranscriberRecognizer",value:function(){var _connectTranscriberRecognizer2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee60(recognizer){return _regeneratorRuntime().wrap(function _callee60$(_context60){while(1)switch(_context60.prev=_context60.next){case 0:if(!this.privTranscriberRecognizer){_context60.next=3;break;}_context60.next=3;return this.privTranscriberRecognizer.close();case 3:_context60.next=5;return recognizer.enforceAudioGating();case 5:this.privTranscriberRecognizer=recognizer;this.privTranscriberRecognizer.meeting=this;case 7:case"end":return _context60.stop();}},_callee60,this);}));function connectTranscriberRecognizer(_x40){return _connectTranscriberRecognizer2.apply(this,arguments);}return connectTranscriberRecognizer;}()},{key:"getKeepAlive",value:function getKeepAlive(){var nickname=!!this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:nickname,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.keepAlive});}/* eslint-enable @typescript-eslint/typedef */},{key:"addParticipantImplAsync",value:function addParticipantImplAsync(participant){var newParticipant=this.privParticipants.addOrUpdateParticipant(participant);if(newParticipant!==undefined){if(!!this.privTranscriberRecognizer){var meetingInfo=this.meetingInfo;meetingInfo.participants=[participant];return this.privTranscriberRecognizer.pushMeetingEvent(meetingInfo,"join");}}}},{key:"removeParticipantImplAsync",value:function removeParticipantImplAsync(participant){this.privParticipants.deleteParticipant(participant.id);var meetingInfo=this.meetingInfo;meetingInfo.participants=[participant];return this.privTranscriberRecognizer.pushMeetingEvent(meetingInfo,"leave");}},{key:"close",value:function(){var _close4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee61(dispose){var _this$privConversatio3;return _regeneratorRuntime().wrap(function _callee61$(_context61){while(1)switch(_context61.prev=_context61.next){case 0:_context61.prev=0;this.privIsConnected=false;_context61.next=4;return(_this$privConversatio3=this.privConversationRecognizer)===null||_this$privConversatio3===void 0?void 0:_this$privConversatio3.close();case 4:this.privConversationRecognizer=undefined;if(!!this.privConversationTranslator){this.privConversationTranslator.dispose();}_context61.next=11;break;case 8:_context61.prev=8;_context61.t0=_context61["catch"](0);throw _context61.t0;case 11:if(dispose){this.dispose();}case 12:case"end":return _context61.stop();}},_callee61,this,[[0,8]]);}));function close(_x41){return _close4.apply(this,arguments);}return close;}()/** Helpers */},{key:"handleCallback",value:function handleCallback(cb,err){if(!!cb){try{cb();}catch(e){if(!!err){err(e);}}cb=undefined;}}},{key:"handleError",value:function handleError(error,err){if(!!err){if(error instanceof Error){var typedError=error;err(typedError.name+": "+typedError.message);}else{err(error);}}}/** Participant Helpers */},{key:"toParticipants",value:function toParticipants(includeHost){var _this129=this;var participants=this.privParticipants.participants.map(function(p){return _this129.toParticipant(p);});if(!includeHost){return participants.filter(function(p){return p.isHost===false;});}else{return participants;}}},{key:"toParticipant",value:function toParticipant(p){return new Exports_js_3.Participant(p.id,p.avatar,p.displayName,p.isHost,p.isMuted,p.isUsingTts,p.preferredLanguage,p.voice);}},{key:"getMuteAllCommand",value:function getMuteAllCommand(isMuted){Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd");Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId");return JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:isMuted});}},{key:"getMuteCommand",value:function getMuteCommand(participantId,isMuted){Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId");Contracts_js_1.Contracts.throwIfNullOrWhitespace(participantId,"participantId");return JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.setMute,// eslint-disable-next-line object-shorthand
participantId:participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:isMuted});}},{key:"getLockCommand",value:function getLockCommand(isLocked){Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId");Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId");return JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:isLocked});}},{key:"getEjectCommand",value:function getEjectCommand(participantId){Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId");Contracts_js_1.Contracts.throwIfNullOrWhitespace(participantId,"participantId");return JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.ejectParticipant,// eslint-disable-next-line object-shorthand
participantId:participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand});}},{key:"getSetTranslateToLanguagesCommand",value:function getSetTranslateToLanguagesCommand(languages){Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId");Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId");return JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:languages});}},{key:"getChangeNicknameCommand",value:function getChangeNicknameCommand(nickname){Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId");Contracts_js_1.Contracts.throwIfNullOrWhitespace(nickname,"nickname");Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId");return JSON.stringify({command:Exports_js_1.ConversationTranslatorCommandTypes.changeNickname,nickname:nickname,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Exports_js_1.ConversationTranslatorMessageTypes.participantCommand,value:nickname});}},{key:"getMessageCommand",value:function getMessageCommand(message){Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId");Contracts_js_1.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId");Contracts_js_1.Contracts.throwIfNullOrWhitespace(message,"message");return JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:message,type:Exports_js_1.ConversationTranslatorMessageTypes.instantMessage});}}]);return MeetingImpl;}(Meeting);exports.MeetingImpl=MeetingImpl;/***/},/* 171 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// Multi-device Conversation is a Preview feature.
Object.defineProperty(exports,"__esModule",{value:true});exports.MeetingTranscriptionCanceledEventArgs=void 0;var CancellationEventArgsBase_js_1=__webpack_require__(101);var MeetingTranscriptionCanceledEventArgs=/*#__PURE__*/function(_CancellationEventArg3){_inherits(MeetingTranscriptionCanceledEventArgs,_CancellationEventArg3);var _super102=_createSuper(MeetingTranscriptionCanceledEventArgs);function MeetingTranscriptionCanceledEventArgs(){_classCallCheck(this,MeetingTranscriptionCanceledEventArgs);return _super102.apply(this,arguments);}return _createClass(MeetingTranscriptionCanceledEventArgs);}(CancellationEventArgsBase_js_1.CancellationEventArgsBase);exports.MeetingTranscriptionCanceledEventArgs=MeetingTranscriptionCanceledEventArgs;/***/},/* 172 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.MeetingTranscriber=void 0;var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(4);var Contracts_js_1=__webpack_require__(64);var Exports_js_3=__webpack_require__(79);var Exports_js_4=__webpack_require__(156);var MeetingTranscriber=/*#__PURE__*/function(){/**
     * MeetingTranscriber constructor.
     * @constructor
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the recognizer
     */function MeetingTranscriber(audioConfig){_classCallCheck(this,MeetingTranscriber);this.privAudioConfig=audioConfig;this.privProperties=new Exports_js_3.PropertyCollection();this.privRecognizer=undefined;this.privDisposedRecognizer=false;}/**
     * Gets the spoken language of recognition.
     * @member MeetingTranscriber.prototype.speechRecognitionLanguage
     * @function
     * @public
     * @returns {string} The spoken language of recognition.
     */_createClass(MeetingTranscriber,[{key:"speechRecognitionLanguage",get:function get(){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer);return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage);}/**
     * The collection of properties and their values defined for this MeetingTranscriber.
     * @member MeetingTranscriber.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this MeetingTranscriber.
     */},{key:"properties",get:function get(){return this.privProperties;}/**
     * @Internal
     * Internal data member to support fromRecognizer* pattern methods on other classes.
     * Do not use externally, object returned will change without warning or notice.
     */},{key:"internalData",get:function get(){return this.privRecognizer.internalData;}/**
     * @Deprecated
     * @Obsolete
     * Please use the Connection.fromRecognizer pattern to obtain a connection object
     */},{key:"connection",get:function get(){return Exports_js_3.Connection.fromRecognizer(this.privRecognizer);}/**
     * Gets the authorization token used to communicate with the service.
     * @member MeetingTranscriber.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */},{key:"authorizationToken",get:function get(){return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token);}/**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member MeetingTranscriber.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */,set:function set(token){Contracts_js_1.Contracts.throwIfNullOrWhitespace(token,"token");this.properties.setProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,token);}/**
     * @param {Meeting} meeting - meeting to be recognized
     */},{key:"joinMeetingAsync",value:function joinMeetingAsync(meeting,cb,err){/* eslint-disable no-console */ // console.log(">> MeetingTranscriber::joinMeetingAsync");
/* eslint-enable no-console */var meetingImpl=meeting;Contracts_js_1.Contracts.throwIfNullOrUndefined(Exports_js_4.MeetingImpl,"Meeting");// ref the meeting object
// create recognizer and subscribe to recognizer events
this.privRecognizer=new Exports_js_1.TranscriberRecognizer(meeting.config,this.privAudioConfig);Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer");this.privRecognizer.connectMeetingCallbacks(this);Exports_js_2.marshalPromiseToCallbacks(meetingImpl.connectTranscriberRecognizer(this.privRecognizer),cb,err);}/**
     * Starts meeting transcription, until stopTranscribingAsync() is called.
     * User must subscribe to events to receive transcription results.
     * @member MeetingTranscriber.prototype.startTranscribingAsync
     * @function
     * @public
     * @param cb - Callback invoked once the transcription has started.
     * @param err - Callback invoked in case of an error.
     */},{key:"startTranscribingAsync",value:function startTranscribingAsync(cb,err){this.privRecognizer.startContinuousRecognitionAsync(cb,err);}/**
     * Starts meeting transcription, until stopTranscribingAsync() is called.
     * User must subscribe to events to receive transcription results.
     * @member MeetingTranscriber.prototype.stopTranscribingAsync
     * @function
     * @public
     * @param cb - Callback invoked once the transcription has started.
     * @param err - Callback invoked in case of an error.
     */},{key:"stopTranscribingAsync",value:function stopTranscribingAsync(cb,err){this.privRecognizer.stopContinuousRecognitionAsync(cb,err);}/**
     * Leave the current meeting. After this is called, you will no longer receive any events.
     */},{key:"leaveMeetingAsync",value:function leaveMeetingAsync(cb,err){this.privRecognizer.disconnectCallbacks();// eslint-disable-next-line
Exports_js_2.marshalPromiseToCallbacks(_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee62(){return _regeneratorRuntime().wrap(function _callee62$(_context62){while(1)switch(_context62.prev=_context62.next){case 0:return _context62.abrupt("return");case 1:case"end":return _context62.stop();}},_callee62);}))(),cb,err);}/**
     * closes all external resources held by an instance of this class.
     * @member MeetingTranscriber.prototype.close
     * @function
     * @public
     */},{key:"close",value:function close(cb,errorCb){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer);Exports_js_2.marshalPromiseToCallbacks(this.dispose(true),cb,errorCb);}/**
     * Disposes any resources held by the object.
     * @member MeetingTranscriber.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - true if disposing the object.
     */},{key:"dispose",value:function(){var _dispose11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee63(disposing){return _regeneratorRuntime().wrap(function _callee63$(_context63){while(1)switch(_context63.prev=_context63.next){case 0:if(!this.privDisposedRecognizer){_context63.next=2;break;}return _context63.abrupt("return");case 2:if(!this.privRecognizer){_context63.next=6;break;}_context63.next=5;return this.privRecognizer.close();case 5:this.privRecognizer=undefined;case 6:if(disposing){this.privDisposedRecognizer=true;}case 7:case"end":return _context63.stop();}},_callee63,this);}));function dispose(_x42){return _dispose11.apply(this,arguments);}return dispose;}()}]);return MeetingTranscriber;}();exports.MeetingTranscriber=MeetingTranscriber;/***/},/* 173 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationTranscriptionResult=void 0;var Exports_js_1=__webpack_require__(79);/**
 * Defines result of conversation transcription.
 * @class ConversationTranscriptionResult
 */var ConversationTranscriptionResult=/*#__PURE__*/function(_Exports_js_1$Recogni8){_inherits(ConversationTranscriptionResult,_Exports_js_1$Recogni8);var _super103=_createSuper(ConversationTranscriptionResult);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @public
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} text - The recognized text.
     * @param {number} duration - The duration.
     * @param {number} offset - The offset into the stream.
     * @param {string} language - Primary Language detected, if provided.
     * @param {string} languageDetectionConfidence - Primary Language confidence ("Unknown," "Low," "Medium," "High"...), if provided.
     * @param {string} speakerId - speaker id for conversation transcription.
     * @param {string} errorDetails - Error details, if provided.
     * @param {string} json - Additional Json, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */function ConversationTranscriptionResult(resultId,reason,text,duration,offset,language,languageDetectionConfidence,speakerId,errorDetails,json,properties){var _this130;_classCallCheck(this,ConversationTranscriptionResult);_this130=_super103.call(this,resultId,reason,text,duration,offset,language,languageDetectionConfidence,errorDetails,json,properties);_this130.privSpeakerId=speakerId;return _this130;}/**
     * speaker id
     * @member ConversationTranscriptionResult.prototype.speakerId
     * @function
     * @public
     * @returns {string} id of speaker in given result
     */_createClass(ConversationTranscriptionResult,[{key:"speakerId",get:function get(){return this.privSpeakerId;}}]);return ConversationTranscriptionResult;}(Exports_js_1.RecognitionResult);exports.ConversationTranscriptionResult=ConversationTranscriptionResult;/***/},/* 174 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SynthesisRequest=exports.Synthesizer=void 0;/* eslint-disable max-classes-per-file */var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(4);var Contracts_js_1=__webpack_require__(64);var Exports_js_3=__webpack_require__(79);var Synthesizer=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of a Recognizer
     * @constructor
     * @param {SpeechConfig} speechConfig - The speech config to initialize the synthesizer.
     */function Synthesizer(speechConfig){_classCallCheck(this,Synthesizer);var speechConfigImpl=speechConfig;Contracts_js_1.Contracts.throwIfNull(speechConfigImpl,"speechConfig");this.privProperties=speechConfigImpl.properties.clone();this.privDisposed=false;this.privSynthesizing=false;this.synthesisRequestQueue=new Exports_js_2.Queue();}/**
     * Gets the authorization token used to communicate with the service.
     * @member Synthesizer.prototype.authorizationToken
     * @function
     * @public
     * @returns {string} Authorization token.
     */_createClass(Synthesizer,[{key:"authorizationToken",get:function get(){return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token);}/**
     * Gets/Sets the authorization token used to communicate with the service.
     * @member Synthesizer.prototype.authorizationToken
     * @function
     * @public
     * @param {string} token - Authorization token.
     */,set:function set(token){Contracts_js_1.Contracts.throwIfNullOrWhitespace(token,"token");this.properties.setProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,token);}/**
     * The collection of properties and their values defined for this Synthesizer.
     * @member Synthesizer.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The collection of properties and their values defined for this SpeechSynthesizer.
     */},{key:"properties",get:function get(){return this.privProperties;}/**
     * Indicates if auto detect source language is enabled
     * @member Synthesizer.prototype.autoDetectSourceLanguage
     * @function
     * @public
     * @returns {boolean} if auto detect source language is enabled
     */},{key:"autoDetectSourceLanguage",get:function get(){return this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===Exports_js_1.AutoDetectSourceLanguagesOpenRangeOptionName;}},{key:"buildSsml",value:function buildSsml(text){var _languageToDefaultVoi;var languageToDefaultVoice=(_languageToDefaultVoi={},_defineProperty(_languageToDefaultVoi,"af-ZA","af-ZA-AdriNeural"),_defineProperty(_languageToDefaultVoi,"am-ET","am-ET-AmehaNeural"),_defineProperty(_languageToDefaultVoi,"ar-AE","ar-AE-FatimaNeural"),_defineProperty(_languageToDefaultVoi,"ar-BH","ar-BH-AliNeural"),_defineProperty(_languageToDefaultVoi,"ar-DZ","ar-DZ-AminaNeural"),_defineProperty(_languageToDefaultVoi,"ar-EG","ar-EG-SalmaNeural"),_defineProperty(_languageToDefaultVoi,"ar-IQ","ar-IQ-BasselNeural"),_defineProperty(_languageToDefaultVoi,"ar-JO","ar-JO-SanaNeural"),_defineProperty(_languageToDefaultVoi,"ar-KW","ar-KW-FahedNeural"),_defineProperty(_languageToDefaultVoi,"ar-LY","ar-LY-ImanNeural"),_defineProperty(_languageToDefaultVoi,"ar-MA","ar-MA-JamalNeural"),_defineProperty(_languageToDefaultVoi,"ar-QA","ar-QA-AmalNeural"),_defineProperty(_languageToDefaultVoi,"ar-SA","ar-SA-HamedNeural"),_defineProperty(_languageToDefaultVoi,"ar-SY","ar-SY-AmanyNeural"),_defineProperty(_languageToDefaultVoi,"ar-TN","ar-TN-HediNeural"),_defineProperty(_languageToDefaultVoi,"ar-YE","ar-YE-MaryamNeural"),_defineProperty(_languageToDefaultVoi,"bg-BG","bg-BG-BorislavNeural"),_defineProperty(_languageToDefaultVoi,"bn-BD","bn-BD-NabanitaNeural"),_defineProperty(_languageToDefaultVoi,"bn-IN","bn-IN-BashkarNeural"),_defineProperty(_languageToDefaultVoi,"ca-ES","ca-ES-JoanaNeural"),_defineProperty(_languageToDefaultVoi,"cs-CZ","cs-CZ-AntoninNeural"),_defineProperty(_languageToDefaultVoi,"cy-GB","cy-GB-AledNeural"),_defineProperty(_languageToDefaultVoi,"da-DK","da-DK-ChristelNeural"),_defineProperty(_languageToDefaultVoi,"de-AT","de-AT-IngridNeural"),_defineProperty(_languageToDefaultVoi,"de-CH","de-CH-JanNeural"),_defineProperty(_languageToDefaultVoi,"de-DE","de-DE-KatjaNeural"),_defineProperty(_languageToDefaultVoi,"el-GR","el-GR-AthinaNeural"),_defineProperty(_languageToDefaultVoi,"en-AU","en-AU-NatashaNeural"),_defineProperty(_languageToDefaultVoi,"en-CA","en-CA-ClaraNeural"),_defineProperty(_languageToDefaultVoi,"en-GB","en-GB-LibbyNeural"),_defineProperty(_languageToDefaultVoi,"en-HK","en-HK-SamNeural"),_defineProperty(_languageToDefaultVoi,"en-IE","en-IE-ConnorNeural"),_defineProperty(_languageToDefaultVoi,"en-IN","en-IN-NeerjaNeural"),_defineProperty(_languageToDefaultVoi,"en-KE","en-KE-AsiliaNeural"),_defineProperty(_languageToDefaultVoi,"en-NG","en-NG-AbeoNeural"),_defineProperty(_languageToDefaultVoi,"en-NZ","en-NZ-MitchellNeural"),_defineProperty(_languageToDefaultVoi,"en-PH","en-PH-JamesNeural"),_defineProperty(_languageToDefaultVoi,"en-SG","en-SG-LunaNeural"),_defineProperty(_languageToDefaultVoi,"en-TZ","en-TZ-ElimuNeural"),_defineProperty(_languageToDefaultVoi,"en-US","en-US-AvaMultilingualNeural"),_defineProperty(_languageToDefaultVoi,"en-ZA","en-ZA-LeahNeural"),_defineProperty(_languageToDefaultVoi,"es-AR","es-AR-ElenaNeural"),_defineProperty(_languageToDefaultVoi,"es-BO","es-BO-MarceloNeural"),_defineProperty(_languageToDefaultVoi,"es-CL","es-CL-CatalinaNeural"),_defineProperty(_languageToDefaultVoi,"es-CO","es-CO-GonzaloNeural"),_defineProperty(_languageToDefaultVoi,"es-CR","es-CR-JuanNeural"),_defineProperty(_languageToDefaultVoi,"es-CU","es-CU-BelkysNeural"),_defineProperty(_languageToDefaultVoi,"es-DO","es-DO-EmilioNeural"),_defineProperty(_languageToDefaultVoi,"es-EC","es-EC-AndreaNeural"),_defineProperty(_languageToDefaultVoi,"es-ES","es-ES-AlvaroNeural"),_defineProperty(_languageToDefaultVoi,"es-GQ","es-GQ-JavierNeural"),_defineProperty(_languageToDefaultVoi,"es-GT","es-GT-AndresNeural"),_defineProperty(_languageToDefaultVoi,"es-HN","es-HN-CarlosNeural"),_defineProperty(_languageToDefaultVoi,"es-MX","es-MX-DaliaNeural"),_defineProperty(_languageToDefaultVoi,"es-NI","es-NI-FedericoNeural"),_defineProperty(_languageToDefaultVoi,"es-PA","es-PA-MargaritaNeural"),_defineProperty(_languageToDefaultVoi,"es-PE","es-PE-AlexNeural"),_defineProperty(_languageToDefaultVoi,"es-PR","es-PR-KarinaNeural"),_defineProperty(_languageToDefaultVoi,"es-PY","es-PY-MarioNeural"),_defineProperty(_languageToDefaultVoi,"es-SV","es-SV-LorenaNeural"),_defineProperty(_languageToDefaultVoi,"es-US","es-US-AlonsoNeural"),_defineProperty(_languageToDefaultVoi,"es-UY","es-UY-MateoNeural"),_defineProperty(_languageToDefaultVoi,"es-VE","es-VE-PaolaNeural"),_defineProperty(_languageToDefaultVoi,"et-EE","et-EE-AnuNeural"),_defineProperty(_languageToDefaultVoi,"fa-IR","fa-IR-DilaraNeural"),_defineProperty(_languageToDefaultVoi,"fi-FI","fi-FI-SelmaNeural"),_defineProperty(_languageToDefaultVoi,"fil-PH","fil-PH-AngeloNeural"),_defineProperty(_languageToDefaultVoi,"fr-BE","fr-BE-CharlineNeural"),_defineProperty(_languageToDefaultVoi,"fr-CA","fr-CA-SylvieNeural"),_defineProperty(_languageToDefaultVoi,"fr-CH","fr-CH-ArianeNeural"),_defineProperty(_languageToDefaultVoi,"fr-FR","fr-FR-DeniseNeural"),_defineProperty(_languageToDefaultVoi,"ga-IE","ga-IE-ColmNeural"),_defineProperty(_languageToDefaultVoi,"gl-ES","gl-ES-RoiNeural"),_defineProperty(_languageToDefaultVoi,"gu-IN","gu-IN-DhwaniNeural"),_defineProperty(_languageToDefaultVoi,"he-IL","he-IL-AvriNeural"),_defineProperty(_languageToDefaultVoi,"hi-IN","hi-IN-MadhurNeural"),_defineProperty(_languageToDefaultVoi,"hr-HR","hr-HR-GabrijelaNeural"),_defineProperty(_languageToDefaultVoi,"hu-HU","hu-HU-NoemiNeural"),_defineProperty(_languageToDefaultVoi,"id-ID","id-ID-ArdiNeural"),_defineProperty(_languageToDefaultVoi,"is-IS","is-IS-GudrunNeural"),_defineProperty(_languageToDefaultVoi,"it-IT","it-IT-IsabellaNeural"),_defineProperty(_languageToDefaultVoi,"ja-JP","ja-JP-NanamiNeural"),_defineProperty(_languageToDefaultVoi,"jv-ID","jv-ID-DimasNeural"),_defineProperty(_languageToDefaultVoi,"kk-KZ","kk-KZ-AigulNeural"),_defineProperty(_languageToDefaultVoi,"km-KH","km-KH-PisethNeural"),_defineProperty(_languageToDefaultVoi,"kn-IN","kn-IN-GaganNeural"),_defineProperty(_languageToDefaultVoi,"ko-KR","ko-KR-SunHiNeural"),_defineProperty(_languageToDefaultVoi,"lo-LA","lo-LA-ChanthavongNeural"),_defineProperty(_languageToDefaultVoi,"lt-LT","lt-LT-LeonasNeural"),_defineProperty(_languageToDefaultVoi,"lv-LV","lv-LV-EveritaNeural"),_defineProperty(_languageToDefaultVoi,"mk-MK","mk-MK-AleksandarNeural"),_defineProperty(_languageToDefaultVoi,"ml-IN","ml-IN-MidhunNeural"),_defineProperty(_languageToDefaultVoi,"mr-IN","mr-IN-AarohiNeural"),_defineProperty(_languageToDefaultVoi,"ms-MY","ms-MY-OsmanNeural"),_defineProperty(_languageToDefaultVoi,"mt-MT","mt-MT-GraceNeural"),_defineProperty(_languageToDefaultVoi,"my-MM","my-MM-NilarNeural"),_defineProperty(_languageToDefaultVoi,"nb-NO","nb-NO-PernilleNeural"),_defineProperty(_languageToDefaultVoi,"nl-BE","nl-BE-ArnaudNeural"),_defineProperty(_languageToDefaultVoi,"nl-NL","nl-NL-ColetteNeural"),_defineProperty(_languageToDefaultVoi,"pl-PL","pl-PL-AgnieszkaNeural"),_defineProperty(_languageToDefaultVoi,"ps-AF","ps-AF-GulNawazNeural"),_defineProperty(_languageToDefaultVoi,"pt-BR","pt-BR-FranciscaNeural"),_defineProperty(_languageToDefaultVoi,"pt-PT","pt-PT-DuarteNeural"),_defineProperty(_languageToDefaultVoi,"ro-RO","ro-RO-AlinaNeural"),_defineProperty(_languageToDefaultVoi,"ru-RU","ru-RU-SvetlanaNeural"),_defineProperty(_languageToDefaultVoi,"si-LK","si-LK-SameeraNeural"),_defineProperty(_languageToDefaultVoi,"sk-SK","sk-SK-LukasNeural"),_defineProperty(_languageToDefaultVoi,"sl-SI","sl-SI-PetraNeural"),_defineProperty(_languageToDefaultVoi,"so-SO","so-SO-MuuseNeural"),_defineProperty(_languageToDefaultVoi,"sr-RS","sr-RS-NicholasNeural"),_defineProperty(_languageToDefaultVoi,"su-ID","su-ID-JajangNeural"),_defineProperty(_languageToDefaultVoi,"sv-SE","sv-SE-SofieNeural"),_defineProperty(_languageToDefaultVoi,"sw-KE","sw-KE-RafikiNeural"),_defineProperty(_languageToDefaultVoi,"sw-TZ","sw-TZ-DaudiNeural"),_defineProperty(_languageToDefaultVoi,"ta-IN","ta-IN-PallaviNeural"),_defineProperty(_languageToDefaultVoi,"ta-LK","ta-LK-KumarNeural"),_defineProperty(_languageToDefaultVoi,"ta-SG","ta-SG-AnbuNeural"),_defineProperty(_languageToDefaultVoi,"te-IN","te-IN-MohanNeural"),_defineProperty(_languageToDefaultVoi,"th-TH","th-TH-PremwadeeNeural"),_defineProperty(_languageToDefaultVoi,"tr-TR","tr-TR-AhmetNeural"),_defineProperty(_languageToDefaultVoi,"uk-UA","uk-UA-OstapNeural"),_defineProperty(_languageToDefaultVoi,"ur-IN","ur-IN-GulNeural"),_defineProperty(_languageToDefaultVoi,"ur-PK","ur-PK-AsadNeural"),_defineProperty(_languageToDefaultVoi,"uz-UZ","uz-UZ-MadinaNeural"),_defineProperty(_languageToDefaultVoi,"vi-VN","vi-VN-HoaiMyNeural"),_defineProperty(_languageToDefaultVoi,"zh-CN","zh-CN-XiaoxiaoNeural"),_defineProperty(_languageToDefaultVoi,"zh-HK","zh-HK-HiuMaanNeural"),_defineProperty(_languageToDefaultVoi,"zh-TW","zh-TW-HsiaoChenNeural"),_defineProperty(_languageToDefaultVoi,"zu-ZA","zu-ZA-ThandoNeural"),_languageToDefaultVoi);var language=this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US");var voice=this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_SynthVoice,"");var ssml=Synthesizer.XMLEncode(text);if(this.autoDetectSourceLanguage){language="en-US";}else{voice=voice||languageToDefaultVoice[language];}if(voice){ssml="<voice name='".concat(voice,"'>").concat(ssml,"</voice>");}ssml="<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='".concat(language,"'>").concat(ssml,"</speak>");return ssml;}/**
     * This method performs cleanup of resources.
     * The Boolean parameter disposing indicates whether the method is called
     * from Dispose (if disposing is true) or from the finalizer (if disposing is false).
     * Derived classes should override this method to dispose resource if needed.
     * @member Synthesizer.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - Flag to request disposal.
     */},{key:"dispose",value:function(){var _dispose12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee64(disposing){return _regeneratorRuntime().wrap(function _callee64$(_context64){while(1)switch(_context64.prev=_context64.next){case 0:if(!this.privDisposed){_context64.next=2;break;}return _context64.abrupt("return");case 2:if(!disposing){_context64.next=6;break;}if(!this.privAdapter){_context64.next=6;break;}_context64.next=6;return this.privAdapter.dispose();case 6:this.privDisposed=true;case 7:case"end":return _context64.stop();}},_callee64,this);}));function dispose(_x43){return _dispose12.apply(this,arguments);}return dispose;}()},{key:"adapterSpeak",value:function(){var _adapterSpeak=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee65(){var request;return _regeneratorRuntime().wrap(function _callee65$(_context65){while(1)switch(_context65.prev=_context65.next){case 0:if(!(!this.privDisposed&&!this.privSynthesizing)){_context65.next=6;break;}this.privSynthesizing=true;_context65.next=4;return this.synthesisRequestQueue.dequeue();case 4:request=_context65.sent;return _context65.abrupt("return",this.privAdapter.Speak(request.text,request.isSSML,request.requestId,request.cb,request.err,request.dataStream));case 6:case"end":return _context65.stop();}},_callee65,this);}));function adapterSpeak(){return _adapterSpeak.apply(this,arguments);}return adapterSpeak;}()},{key:"createSynthesizerConfig",value:function createSynthesizerConfig(speechConfig){return new Exports_js_1.SynthesizerConfig(speechConfig,this.privProperties);}// Does the generic synthesizer setup that is common across all synthesizer types.
},{key:"implCommonSynthesizeSetup",value:function implCommonSynthesizeSetup(){var _this131=this;var osPlatform=typeof window!=="undefined"?"Browser":"Node";var osName="unknown";var osVersion="unknown";if(typeof navigator!=="undefined"){osPlatform=osPlatform+"/"+navigator.platform;osName=navigator.userAgent;osVersion=navigator.appVersion;}var synthesizerConfig=this.createSynthesizerConfig(new Exports_js_1.SpeechServiceConfig(new Exports_js_1.Context(new Exports_js_1.OS(osPlatform,osName,osVersion))));var subscriptionKey=this.privProperties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Key,undefined);var authentication=subscriptionKey&&subscriptionKey!==""?new Exports_js_1.CognitiveSubscriptionKeyAuthentication(subscriptionKey):new Exports_js_1.CognitiveTokenAuthentication(function(){var authorizationToken=_this131.privProperties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,undefined);return Promise.resolve(authorizationToken);},function(){var authorizationToken=_this131.privProperties.getProperty(Exports_js_3.PropertyId.SpeechServiceAuthorization_Token,undefined);return Promise.resolve(authorizationToken);});this.privAdapter=this.createSynthesisAdapter(authentication,this.privConnectionFactory,synthesizerConfig);this.privRestAdapter=this.createRestSynthesisAdapter(authentication,synthesizerConfig);}}],[{key:"XMLEncode",value:function XMLEncode(text){return text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");}}]);return Synthesizer;}();exports.Synthesizer=Synthesizer;var SynthesisRequest=/*#__PURE__*/_createClass(function SynthesisRequest(requestId,text,isSSML,cb,err,dataStream){_classCallCheck(this,SynthesisRequest);this.requestId=requestId;this.text=text;this.isSSML=isSSML;this.cb=cb;this.err=err;this.dataStream=dataStream;});exports.SynthesisRequest=SynthesisRequest;/***/},/* 175 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechSynthesizer=void 0;var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(4);var AudioFileWriter_js_1=__webpack_require__(81);var AudioOutputFormat_js_1=__webpack_require__(85);var AudioOutputStream_js_1=__webpack_require__(84);var Contracts_js_1=__webpack_require__(64);var Exports_js_3=__webpack_require__(79);var Synthesizer_js_1=__webpack_require__(174);/**
 * Defines the class SpeechSynthesizer for text to speech.
 * Updated in version 1.16.0
 * @class SpeechSynthesizer
 */var SpeechSynthesizer=/*#__PURE__*/function(_Exports_js_3$Synthes){_inherits(SpeechSynthesizer,_Exports_js_3$Synthes);var _super104=_createSuper(SpeechSynthesizer);/**
     * SpeechSynthesizer constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - An set of initial properties for this synthesizer.
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the synthesizer.
     */function SpeechSynthesizer(speechConfig,audioConfig){var _this132;_classCallCheck(this,SpeechSynthesizer);_this132=_super104.call(this,speechConfig);if(audioConfig!==null){if(audioConfig===undefined){_this132.audioConfig=typeof window==="undefined"?undefined:Exports_js_3.AudioConfig.fromDefaultSpeakerOutput();}else{_this132.audioConfig=audioConfig;}}_this132.privConnectionFactory=new Exports_js_1.SpeechSynthesisConnectionFactory();_this132.implCommonSynthesizeSetup();return _this132;}/**
     * SpeechSynthesizer constructor.
     * @constructor
     * @param {SpeechConfig} speechConfig - an set of initial properties for this synthesizer
     * @param {AutoDetectSourceLanguageConfig} autoDetectSourceLanguageConfig - An source language detection configuration associated with the synthesizer
     * @param {AudioConfig} audioConfig - An optional audio configuration associated with the synthesizer
     */_createClass(SpeechSynthesizer,[{key:"speakTextAsync",value:/**
     * Executes speech synthesis on plain text.
     * The task returns the synthesis result.
     * @member SpeechSynthesizer.prototype.speakTextAsync
     * @function
     * @public
     * @param text - Text to be synthesized.
     * @param cb - Callback that received the SpeechSynthesisResult.
     * @param err - Callback invoked in case of an error.
     * @param stream - AudioOutputStream to receive the synthesized audio.
     */function speakTextAsync(text,cb,err,stream){this.speakImpl(text,false,cb,err,stream);}/**
     * Executes speech synthesis on SSML.
     * The task returns the synthesis result.
     * @member SpeechSynthesizer.prototype.speakSsmlAsync
     * @function
     * @public
     * @param ssml - SSML to be synthesized.
     * @param cb - Callback that received the SpeechSynthesisResult.
     * @param err - Callback invoked in case of an error.
     * @param stream - AudioOutputStream to receive the synthesized audio.
     */},{key:"speakSsmlAsync",value:function speakSsmlAsync(ssml,cb,err,stream){this.speakImpl(ssml,true,cb,err,stream);}/**
     * Get list of synthesis voices available.
     * The task returns the synthesis voice result.
     * @member SpeechSynthesizer.prototype.getVoicesAsync
     * @function
     * @async
     * @public
     * @param locale - Locale of voices in BCP-47 format; if left empty, get all available voices.
     * @return {Promise<SynthesisVoicesResult>} - Promise of a SynthesisVoicesResult.
     */},{key:"getVoicesAsync",value:function(){var _getVoicesAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee66(){var locale,_args66=arguments;return _regeneratorRuntime().wrap(function _callee66$(_context66){while(1)switch(_context66.prev=_context66.next){case 0:locale=_args66.length>0&&_args66[0]!==undefined?_args66[0]:"";return _context66.abrupt("return",this.getVoices(locale));case 2:case"end":return _context66.stop();}},_callee66,this);}));function getVoicesAsync(){return _getVoicesAsync.apply(this,arguments);}return getVoicesAsync;}()/**
     * Dispose of associated resources.
     * @member SpeechSynthesizer.prototype.close
     * @function
     * @public
     */},{key:"close",value:function close(cb,err){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposed);Exports_js_2.marshalPromiseToCallbacks(this.dispose(true),cb,err);}/**
     * @Internal
     * Do not use externally, object returned will change without warning or notice.
     */},{key:"internalData",get:function get(){return this.privAdapter;}//
// ################################################################################################################
// IMPLEMENTATION.
// ################################################################################################################
//
// Creates the synthesis adapter
},{key:"createSynthesisAdapter",value:function createSynthesisAdapter(authentication,connectionFactory,synthesizerConfig){return new Exports_js_1.SpeechSynthesisAdapter(authentication,connectionFactory,synthesizerConfig,this,this.audioConfig);}},{key:"createRestSynthesisAdapter",value:function createRestSynthesisAdapter(authentication,synthesizerConfig){return new Exports_js_1.SynthesisRestAdapter(synthesizerConfig,authentication);}},{key:"implCommonSynthesizeSetup",value:function implCommonSynthesizeSetup(){_get(_getPrototypeOf(SpeechSynthesizer.prototype),"implCommonSynthesizeSetup",this).call(this);this.privAdapter.audioOutputFormat=AudioOutputFormat_js_1.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(Exports_js_3.SpeechSynthesisOutputFormat[this.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_SynthOutputFormat,undefined)]);}},{key:"speakImpl",value:function speakImpl(text,IsSsml,cb,err,dataStream){var _this133=this;try{Contracts_js_1.Contracts.throwIfDisposed(this.privDisposed);var requestId=Exports_js_2.createNoDashGuid();var audioDestination;if(dataStream instanceof Exports_js_3.PushAudioOutputStreamCallback){audioDestination=new AudioOutputStream_js_1.PushAudioOutputStreamImpl(dataStream);}else if(dataStream instanceof Exports_js_3.PullAudioOutputStream){audioDestination=dataStream;}else if(dataStream!==undefined){audioDestination=new AudioFileWriter_js_1.AudioFileWriter(dataStream);}else{audioDestination=undefined;}this.synthesisRequestQueue.enqueue(new Synthesizer_js_1.SynthesisRequest(requestId,text,IsSsml,function(e){_this133.privSynthesizing=false;if(!!cb){try{cb(e);}catch(e){if(!!err){err(e);}}}cb=undefined;/* eslint-disable no-empty */_this133.adapterSpeak()["catch"](function(){});},function(e){if(!!err){err(e);}},audioDestination));/* eslint-disable no-empty-function */this.adapterSpeak()["catch"](function(){});}catch(error){if(!!err){if(error instanceof Error){var typedError=error;err(typedError.name+": "+typedError.message);}else{err(error);}}// Destroy the synthesizer.
/* eslint-disable no-empty */this.dispose(true)["catch"](function(){});}}},{key:"getVoices",value:function(){var _getVoices=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee67(locale){var requestId,response,json;return _regeneratorRuntime().wrap(function _callee67$(_context67){while(1)switch(_context67.prev=_context67.next){case 0:requestId=Exports_js_2.createNoDashGuid();_context67.next=3;return this.privRestAdapter.getVoicesList(requestId);case 3:response=_context67.sent;if(!(response.ok&&Array.isArray(response.json))){_context67.next=10;break;}json=response.json;if(!!locale&&locale.length>0){json=json.filter(function(item){return!!item.Locale&&item.Locale.toLowerCase()===locale.toLowerCase();});}return _context67.abrupt("return",new Exports_js_3.SynthesisVoicesResult(requestId,json,undefined));case 10:return _context67.abrupt("return",new Exports_js_3.SynthesisVoicesResult(requestId,undefined,"Error: ".concat(response.status,": ").concat(response.statusText)));case 11:case"end":return _context67.stop();}},_callee67,this);}));function getVoices(_x44){return _getVoices.apply(this,arguments);}return getVoices;}()}],[{key:"FromConfig",value:function FromConfig(speechConfig,autoDetectSourceLanguageConfig,audioConfig){var speechConfigImpl=speechConfig;autoDetectSourceLanguageConfig.properties.mergeTo(speechConfigImpl.properties);return new SpeechSynthesizer(speechConfig,audioConfig);}}]);return SpeechSynthesizer;}(Exports_js_3.Synthesizer);exports.SpeechSynthesizer=SpeechSynthesizer;/***/},/* 176 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SynthesisResult=void 0;/**
 * Base class for synthesis results
 * @class SynthesisResult
 * Added in version 1.20.0
 */var SynthesisResult=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} errorDetails - Error details, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */function SynthesisResult(resultId,reason,errorDetails,properties){_classCallCheck(this,SynthesisResult);this.privResultId=resultId;this.privReason=reason;this.privErrorDetails=errorDetails;this.privProperties=properties;}/**
     * Specifies the result identifier.
     * @member SynthesisResult.prototype.resultId
     * @function
     * @public
     * @returns {string} Specifies the result identifier.
     */_createClass(SynthesisResult,[{key:"resultId",get:function get(){return this.privResultId;}/**
     * Specifies status of the result.
     * @member SynthesisResult.prototype.reason
     * @function
     * @public
     * @returns {ResultReason} Specifies status of the result.
     */},{key:"reason",get:function get(){return this.privReason;}/**
     * In case of an unsuccessful synthesis, provides details of the occurred error.
     * @member SynthesisResult.prototype.errorDetails
     * @function
     * @public
     * @returns {string} a brief description of an error.
     */},{key:"errorDetails",get:function get(){return this.privErrorDetails;}/**
     * The set of properties exposed in the result.
     * @member SynthesisResult.prototype.properties
     * @function
     * @public
     * @returns {PropertyCollection} The set of properties exposed in the result.
     */},{key:"properties",get:function get(){return this.privProperties;}}]);return SynthesisResult;}();exports.SynthesisResult=SynthesisResult;/***/},/* 177 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechSynthesisResult=void 0;var Exports_js_1=__webpack_require__(79);/**
 * Defines result of speech synthesis.
 * @class SpeechSynthesisResult
 * Added in version 1.11.0
 */var SpeechSynthesisResult=/*#__PURE__*/function(_Exports_js_1$Synthes){_inherits(SpeechSynthesisResult,_Exports_js_1$Synthes);var _super105=_createSuper(SpeechSynthesisResult);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {ArrayBuffer} audioData - The synthesized audio binary.
     * @param {string} errorDetails - Error details, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     * @param {number} audioDuration - The audio duration.
     */function SpeechSynthesisResult(resultId,reason,audioData,errorDetails,properties,audioDuration){var _this134;_classCallCheck(this,SpeechSynthesisResult);_this134=_super105.call(this,resultId,reason,errorDetails,properties);_this134.privAudioData=audioData;_this134.privAudioDuration=audioDuration;return _this134;}/**
     * The synthesized audio data
     * @member SpeechSynthesisResult.prototype.audioData
     * @function
     * @public
     * @returns {ArrayBuffer} The synthesized audio data.
     */_createClass(SpeechSynthesisResult,[{key:"audioData",get:function get(){return this.privAudioData;}/**
     * The time duration of synthesized audio, in ticks (100 nanoseconds).
     * @member SpeechSynthesisResult.prototype.audioDuration
     * @function
     * @public
     * @returns {number} The time duration of synthesized audio.
     */},{key:"audioDuration",get:function get(){return this.privAudioDuration;}}]);return SpeechSynthesisResult;}(Exports_js_1.SynthesisResult);exports.SpeechSynthesisResult=SpeechSynthesisResult;/***/},/* 178 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechSynthesisEventArgs=void 0;/**
 * Defines contents of speech synthesis events.
 * @class SpeechSynthesisEventArgs
 * Added in version 1.11.0
 */var SpeechSynthesisEventArgs=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {SpeechSynthesisResult} result - The speech synthesis result.
     */function SpeechSynthesisEventArgs(result){_classCallCheck(this,SpeechSynthesisEventArgs);this.privResult=result;}/**
     * Specifies the synthesis result.
     * @member SpeechSynthesisEventArgs.prototype.result
     * @function
     * @public
     * @returns {SpeechSynthesisResult} the synthesis result.
     */_createClass(SpeechSynthesisEventArgs,[{key:"result",get:function get(){return this.privResult;}}]);return SpeechSynthesisEventArgs;}();exports.SpeechSynthesisEventArgs=SpeechSynthesisEventArgs;/***/},/* 179 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechSynthesisWordBoundaryEventArgs=void 0;/**
 * Defines contents of speech synthesis word boundary event.
 * @class SpeechSynthesisWordBoundaryEventArgs
 * Added in version 1.11.0
 */var SpeechSynthesisWordBoundaryEventArgs=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {number} audioOffset - The audio offset.
     * @param {number} duration - The audio duration.
     * @param {string} text - The text.
     * @param {number} wordLength - The length of the word.
     * @param {number} textOffset - The text offset.
     * @param {SpeechSynthesisBoundaryType} boundaryType - The boundary type
     */function SpeechSynthesisWordBoundaryEventArgs(audioOffset,duration,text,wordLength,textOffset,boundaryType){_classCallCheck(this,SpeechSynthesisWordBoundaryEventArgs);this.privAudioOffset=audioOffset;this.privDuration=duration;this.privText=text;this.privWordLength=wordLength;this.privTextOffset=textOffset;this.privBoundaryType=boundaryType;}/**
     * Specifies the audio offset.
     * @member SpeechSynthesisWordBoundaryEventArgs.prototype.audioOffset
     * @function
     * @public
     * @returns {number} the audio offset.
     */_createClass(SpeechSynthesisWordBoundaryEventArgs,[{key:"audioOffset",get:function get(){return this.privAudioOffset;}/**
     * Specifies the duration, in ticks (100 nanoseconds).
     * @member SpeechSynthesisWordBoundaryEventArgs.prototype.duration
     * @function
     * @public
     * @returns {number} Duration in 100 nanosecond increments.
     */},{key:"duration",get:function get(){return this.privDuration;}/**
     * Specifies the text of the word boundary event.
     * @member SpeechSynthesisWordBoundaryEventArgs.prototype.text
     * @function
     * @public
     * @returns {string} the text.
     */},{key:"text",get:function get(){return this.privText;}/**
     * Specifies the word length
     * @member SpeechSynthesisWordBoundaryEventArgs.prototype.wordLength
     * @function
     * @public
     * @returns {number} the word length
     */},{key:"wordLength",get:function get(){return this.privWordLength;}/**
     * Specifies the text offset.
     * @member SpeechSynthesisWordBoundaryEventArgs.prototype.textOffset
     * @function
     * @public
     * @returns {number} the text offset.
     */},{key:"textOffset",get:function get(){return this.privTextOffset;}/**
     * Specifies the boundary type.
     * @member SpeechSynthesisWordBoundaryEventArgs.prototype.boundaryType
     * @function
     * @public
     * @returns {SpeechSynthesisBoundaryType} the boundary type.
     */},{key:"boundaryType",get:function get(){return this.privBoundaryType;}}]);return SpeechSynthesisWordBoundaryEventArgs;}();exports.SpeechSynthesisWordBoundaryEventArgs=SpeechSynthesisWordBoundaryEventArgs;/***/},/* 180 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechSynthesisBookmarkEventArgs=void 0;/**
 * Defines contents of speech synthesis bookmark event.
 * @class SpeechSynthesisBookmarkEventArgs
 * Added in version 1.16.0
 */var SpeechSynthesisBookmarkEventArgs=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {number} audioOffset - The audio offset.
     * @param {string} text - The bookmark text.
     */function SpeechSynthesisBookmarkEventArgs(audioOffset,text){_classCallCheck(this,SpeechSynthesisBookmarkEventArgs);this.privAudioOffset=audioOffset;this.privText=text;}/**
     * Specifies the audio offset.
     * @member SpeechSynthesisBookmarkEventArgs.prototype.audioOffset
     * @function
     * @public
     * @returns {number} the audio offset.
     */_createClass(SpeechSynthesisBookmarkEventArgs,[{key:"audioOffset",get:function get(){return this.privAudioOffset;}/**
     * Specifies the bookmark.
     * @member SpeechSynthesisBookmarkEventArgs.prototype.text
     * @function
     * @public
     * @returns {string} the bookmark text.
     */},{key:"text",get:function get(){return this.privText;}}]);return SpeechSynthesisBookmarkEventArgs;}();exports.SpeechSynthesisBookmarkEventArgs=SpeechSynthesisBookmarkEventArgs;/***/},/* 181 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechSynthesisVisemeEventArgs=void 0;/**
 * Defines contents of speech synthesis viseme event.
 * @class SpeechSynthesisVisemeEventArgs
 * Added in version 1.16.0
 */var SpeechSynthesisVisemeEventArgs=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {number} audioOffset - The audio offset.
     * @param {number} visemeId - The viseme ID.
     * @param {string} animation - The animation, could be in svg or other format.
     */function SpeechSynthesisVisemeEventArgs(audioOffset,visemeId,animation){_classCallCheck(this,SpeechSynthesisVisemeEventArgs);this.privAudioOffset=audioOffset;this.privVisemeId=visemeId;this.privAnimation=animation;}/**
     * Specifies the audio offset.
     * @member SpeechSynthesisVisemeEventArgs.prototype.audioOffset
     * @function
     * @public
     * @returns {number} the audio offset.
     */_createClass(SpeechSynthesisVisemeEventArgs,[{key:"audioOffset",get:function get(){return this.privAudioOffset;}/**
     * Specifies the viseme ID.
     * @member SpeechSynthesisVisemeEventArgs.prototype.visemeId
     * @function
     * @public
     * @returns {number} the viseme ID.
     */},{key:"visemeId",get:function get(){return this.privVisemeId;}/**
     * Specifies the animation.
     * @member SpeechSynthesisVisemeEventArgs.prototype.animation
     * @function
     * @public
     * @returns {string} the animation, could be in svg or other format.
     */},{key:"animation",get:function get(){return this.privAnimation;}}]);return SpeechSynthesisVisemeEventArgs;}();exports.SpeechSynthesisVisemeEventArgs=SpeechSynthesisVisemeEventArgs;/***/},/* 182 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechSynthesisBoundaryType=void 0;/**
 * Defines the boundary type of speech synthesis boundary event.
 * @class SpeechSynthesisBoundaryType
 * Added in version 1.21.0
 */var SpeechSynthesisBoundaryType;(function(SpeechSynthesisBoundaryType){/**
     * Indicates the boundary text is a word.
     * @member SpeechSynthesisBoundaryType.Word
     */SpeechSynthesisBoundaryType["Word"]="WordBoundary";/**
     * Indicates the boundary text is a punctuation.
     * @member SpeechSynthesisBoundaryType.Punctuation
     */SpeechSynthesisBoundaryType["Punctuation"]="PunctuationBoundary";/**
     * Indicates the boundary text is a sentence.
     * @member SpeechSynthesisBoundaryType.Sentence
     */SpeechSynthesisBoundaryType["Sentence"]="SentenceBoundary";})(SpeechSynthesisBoundaryType=exports.SpeechSynthesisBoundaryType||(exports.SpeechSynthesisBoundaryType={}));/***/},/* 183 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SynthesisVoicesResult=void 0;var Exports_js_1=__webpack_require__(79);/**
 * Defines result of speech synthesis.
 * @class SynthesisVoicesResult
 * Added in version 1.20.0
 */var SynthesisVoicesResult=/*#__PURE__*/function(_Exports_js_1$Synthes2){_inherits(SynthesisVoicesResult,_Exports_js_1$Synthes2);var _super106=_createSuper(SynthesisVoicesResult);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param requestId - result id for request.
     * @param json - json payload from endpoint.
     */function SynthesisVoicesResult(requestId,json,errorDetails){var _this135;_classCallCheck(this,SynthesisVoicesResult);if(Array.isArray(json)){_this135=_super106.call(this,requestId,Exports_js_1.ResultReason.VoicesListRetrieved,undefined,new Exports_js_1.PropertyCollection());_this135.privVoices=[];var _iterator12=_createForOfIteratorHelper(json),_step12;try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var item=_step12.value;_this135.privVoices.push(new Exports_js_1.VoiceInfo(item));}}catch(err){_iterator12.e(err);}finally{_iterator12.f();}}else{_this135=_super106.call(this,requestId,Exports_js_1.ResultReason.Canceled,errorDetails?errorDetails:"Error information unavailable",new Exports_js_1.PropertyCollection());}return _possibleConstructorReturn(_this135);}/**
     * The list of voices
     * @member SynthesisVoicesResult.prototype.voices
     * @function
     * @public
     * @returns {VoiceInfo[]} List of synthesized voices.
     */_createClass(SynthesisVoicesResult,[{key:"voices",get:function get(){return this.privVoices;}}]);return SynthesisVoicesResult;}(Exports_js_1.SynthesisResult);exports.SynthesisVoicesResult=SynthesisVoicesResult;/***/},/* 184 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var _GENDER_LOOKUP;Object.defineProperty(exports,"__esModule",{value:true});exports.VoiceInfo=exports.SynthesisVoiceType=exports.SynthesisVoiceGender=void 0;/**
 * Defines the gender of synthesis voices.
 * Added in version 1.20.0.
 */var SynthesisVoiceGender;(function(SynthesisVoiceGender){/** Gender unknown */SynthesisVoiceGender[SynthesisVoiceGender["Unknown"]=0]="Unknown";/** Female voice */SynthesisVoiceGender[SynthesisVoiceGender["Female"]=1]="Female";/** Male voice */SynthesisVoiceGender[SynthesisVoiceGender["Male"]=2]="Male";/** Neutral voice */SynthesisVoiceGender[SynthesisVoiceGender["Neutral"]=3]="Neutral";})(SynthesisVoiceGender=exports.SynthesisVoiceGender||(exports.SynthesisVoiceGender={}));var SynthesisVoiceType;(function(SynthesisVoiceType){/**
     * Voice type is not known.
     */SynthesisVoiceType[SynthesisVoiceType["Unknown"]=0]="Unknown";/**
     * Online neural voices.
     */SynthesisVoiceType[SynthesisVoiceType["OnlineNeural"]=1]="OnlineNeural";/**
     * Online standard voices. These voices are deprecated.
     */SynthesisVoiceType[SynthesisVoiceType["OnlineStandard"]=2]="OnlineStandard";/**
     * Offline neural voices.
     */SynthesisVoiceType[SynthesisVoiceType["OfflineNeural"]=3]="OfflineNeural";/**
     * Offline standard voices.
     */SynthesisVoiceType[SynthesisVoiceType["OfflineStandard"]=4]="OfflineStandard";/**
     * High definition (HD) voices. Refer to https://learn.microsoft.com/azure/ai-services/speech-service/high-definition-voices
     */SynthesisVoiceType[SynthesisVoiceType["OnlineNeuralHD"]=5]="OnlineNeuralHD";})(SynthesisVoiceType=exports.SynthesisVoiceType||(exports.SynthesisVoiceType={}));var GENDER_LOOKUP=(_GENDER_LOOKUP={},_defineProperty(_GENDER_LOOKUP,SynthesisVoiceGender[SynthesisVoiceGender.Neutral],SynthesisVoiceGender.Neutral),_defineProperty(_GENDER_LOOKUP,SynthesisVoiceGender[SynthesisVoiceGender.Male],SynthesisVoiceGender.Male),_defineProperty(_GENDER_LOOKUP,SynthesisVoiceGender[SynthesisVoiceGender.Female],SynthesisVoiceGender.Female),_GENDER_LOOKUP);var VOICE_TYPE_LOOKUP={Neural:SynthesisVoiceType.OnlineNeural,NeuralHD:SynthesisVoiceType.OnlineNeuralHD};/**
 * Information about Speech Synthesis voice
 * Added in version 1.20.0.
 * @class VoiceInfo
 */var VoiceInfo=/*#__PURE__*/function(){function VoiceInfo(json){_classCallCheck(this,VoiceInfo);this.privStyleList=[];if(!!json){this.privName=json.Name;this.privLocale=json.Locale;this.privShortName=json.ShortName;this.privLocaleName=json.LocaleName;this.privDisplayName=json.DisplayName;this.privLocalName=json.LocalName;this.privVoiceType=VOICE_TYPE_LOOKUP[json.VoiceType]||SynthesisVoiceType.Unknown;this.privGender=GENDER_LOOKUP[json.Gender]||SynthesisVoiceGender.Unknown;if(!!json.StyleList&&Array.isArray(json.StyleList)){var _iterator13=_createForOfIteratorHelper(json.StyleList),_step13;try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var style=_step13.value;this.privStyleList.push(style);}}catch(err){_iterator13.e(err);}finally{_iterator13.f();}}this.privSampleRateHertz=json.SampleRateHertz;this.privStatus=json.Status;if(json.ExtendedPropertyMap){// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
this.privExtendedPropertyMap=json.ExtendedPropertyMap;}this.privWordsPerMinute=json.WordsPerMinute;if(Array.isArray(json.SecondaryLocaleList)){this.privSecondaryLocaleList=_toConsumableArray(json.SecondaryLocaleList);}if(Array.isArray(json.RolePlayList)){this.privRolePlayList=_toConsumableArray(json.RolePlayList);}if(json.VoiceTag){this.privVoiceTag=json.VoiceTag;}}}_createClass(VoiceInfo,[{key:"name",get:function get(){return this.privName;}},{key:"locale",get:function get(){return this.privLocale;}},{key:"shortName",get:function get(){return this.privShortName;}},{key:"displayName",get:function get(){return this.privDisplayName;}},{key:"localName",get:function get(){return this.privLocalName;}},{key:"localeName",get:function get(){return this.privLocaleName;}},{key:"gender",get:function get(){return this.privGender;}},{key:"voiceType",get:function get(){return this.privVoiceType;}},{key:"styleList",get:function get(){return this.privStyleList;}},{key:"sampleRateHertz",get:function get(){return this.privSampleRateHertz;}},{key:"status",get:function get(){return this.privStatus;}},{key:"extendedPropertyMap",get:function get(){// eslint-disable-next-line @typescript-eslint/no-unsafe-return
return this.privExtendedPropertyMap;}},{key:"wordsPerMinute",get:function get(){return this.privWordsPerMinute;}},{key:"secondaryLocaleList",get:function get(){return this.privSecondaryLocaleList;}},{key:"rolePlayList",get:function get(){return this.privRolePlayList;}},{key:"voiceTag",get:function get(){return this.privVoiceTag;}}]);return VoiceInfo;}();exports.VoiceInfo=VoiceInfo;/***/},/* 185 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var _AudioFormatToMimeTyp;Object.defineProperty(exports,"__esModule",{value:true});exports.SpeakerAudioDestination=void 0;var Exports_js_1=__webpack_require__(4);var AudioOutputStream_js_1=__webpack_require__(84);var AudioStreamFormat_js_1=__webpack_require__(67);var MediaDurationPlaceholderSeconds=60*30;var AudioFormatToMimeType=(_AudioFormatToMimeTyp={},_defineProperty(_AudioFormatToMimeTyp,AudioStreamFormat_js_1.AudioFormatTag.PCM,"audio/wav"),_defineProperty(_AudioFormatToMimeTyp,AudioStreamFormat_js_1.AudioFormatTag.MuLaw,"audio/x-wav"),_defineProperty(_AudioFormatToMimeTyp,AudioStreamFormat_js_1.AudioFormatTag.MP3,"audio/mpeg"),_defineProperty(_AudioFormatToMimeTyp,AudioStreamFormat_js_1.AudioFormatTag.OGG_OPUS,"audio/ogg"),_defineProperty(_AudioFormatToMimeTyp,AudioStreamFormat_js_1.AudioFormatTag.WEBM_OPUS,"audio/webm; codecs=opus"),_defineProperty(_AudioFormatToMimeTyp,AudioStreamFormat_js_1.AudioFormatTag.ALaw,"audio/x-wav"),_defineProperty(_AudioFormatToMimeTyp,AudioStreamFormat_js_1.AudioFormatTag.FLAC,"audio/flac"),_defineProperty(_AudioFormatToMimeTyp,AudioStreamFormat_js_1.AudioFormatTag.AMR_WB,"audio/amr-wb"),_defineProperty(_AudioFormatToMimeTyp,AudioStreamFormat_js_1.AudioFormatTag.G722,"audio/G722"),_AudioFormatToMimeTyp);/**
 * Represents the speaker playback audio destination, which only works in browser.
 * Note: the SDK will try to use <a href="https://www.w3.org/TR/media-source/">Media Source Extensions</a> to play audio.
 * Mp3 format has better supports on Microsoft Edge, Chrome and Safari (desktop), so, it's better to specify mp3 format for playback.
 * @class SpeakerAudioDestination
 * Updated in version 1.17.0
 */var SpeakerAudioDestination=/*#__PURE__*/function(){function SpeakerAudioDestination(audioDestinationId){_classCallCheck(this,SpeakerAudioDestination);this.privPlaybackStarted=false;this.privAppendingToBuffer=false;this.privMediaSourceOpened=false;this.privBytesReceived=0;this.privId=audioDestinationId?audioDestinationId:Exports_js_1.createNoDashGuid();this.privIsPaused=false;this.privIsClosed=false;}_createClass(SpeakerAudioDestination,[{key:"id",value:function id(){return this.privId;}},{key:"write",value:function write(buffer,cb,err){if(this.privAudioBuffer!==undefined){this.privAudioBuffer.push(buffer);this.updateSourceBuffer().then(function(){if(!!cb){cb();}},function(error){if(!!err){err(error);}});}else if(this.privAudioOutputStream!==undefined){this.privAudioOutputStream.write(buffer);this.privBytesReceived+=buffer.byteLength;}}},{key:"close",value:function close(cb,err){var _this136=this;this.privIsClosed=true;if(this.privSourceBuffer!==undefined){this.handleSourceBufferUpdateEnd().then(function(){if(!!cb){cb();}},function(error){if(!!err){err(error);}});}else if(this.privAudioOutputStream!==undefined&&typeof window!=="undefined"){if((this.privFormat.formatTag===AudioStreamFormat_js_1.AudioFormatTag.PCM||this.privFormat.formatTag===AudioStreamFormat_js_1.AudioFormatTag.MuLaw||this.privFormat.formatTag===AudioStreamFormat_js_1.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===false){// eslint-disable-next-line no-console
console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header.");if(!!this.onAudioEnd){this.onAudioEnd(this);}}else{var receivedAudio=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(receivedAudio).then(function(){receivedAudio=_this136.privFormat.addHeader(receivedAudio);var audioBlob=new Blob([receivedAudio],{type:AudioFormatToMimeType[_this136.privFormat.formatTag]});_this136.privAudio.src=window.URL.createObjectURL(audioBlob);_this136.notifyPlayback().then(function(){if(!!cb){cb();}},function(error){if(!!err){err(error);}});},function(error){if(!!err){err(error);}});}}else{// unsupported format, call onAudioEnd directly.
if(!!this.onAudioEnd){this.onAudioEnd(this);}}}},{key:"format",set:function set(format){var _this137=this;// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
if(typeof AudioContext!=="undefined"||typeof window!=="undefined"&&typeof window.webkitAudioContext!=="undefined"){this.privFormat=format;var mimeType=AudioFormatToMimeType[this.privFormat.formatTag];if(mimeType===undefined){// eslint-disable-next-line no-console
console.warn("Unknown mimeType for format ".concat(AudioStreamFormat_js_1.AudioFormatTag[this.privFormat.formatTag],"; playback is not supported."));}else if(typeof MediaSource!=="undefined"&&MediaSource.isTypeSupported(mimeType)){this.privAudio=new Audio();this.privAudioBuffer=[];this.privMediaSource=new MediaSource();this.privAudio.src=URL.createObjectURL(this.privMediaSource);this.privAudio.load();this.privMediaSource.onsourceopen=function(){_this137.privMediaSourceOpened=true;_this137.privMediaSource.duration=MediaDurationPlaceholderSeconds;_this137.privSourceBuffer=_this137.privMediaSource.addSourceBuffer(mimeType);_this137.privSourceBuffer.onupdate=function(){_this137.updateSourceBuffer()["catch"](function(reason){Exports_js_1.Events.instance.onEvent(new Exports_js_1.BackgroundEvent(reason));});};_this137.privSourceBuffer.onupdateend=function(){_this137.handleSourceBufferUpdateEnd()["catch"](function(reason){Exports_js_1.Events.instance.onEvent(new Exports_js_1.BackgroundEvent(reason));});};_this137.privSourceBuffer.onupdatestart=function(){_this137.privAppendingToBuffer=false;};};this.updateSourceBuffer()["catch"](function(reason){Exports_js_1.Events.instance.onEvent(new Exports_js_1.BackgroundEvent(reason));});}else{// eslint-disable-next-line no-console
console.warn("Format ".concat(AudioStreamFormat_js_1.AudioFormatTag[this.privFormat.formatTag]," could not be played by MSE, streaming playback is not enabled."));this.privAudioOutputStream=new AudioOutputStream_js_1.PullAudioOutputStreamImpl();this.privAudioOutputStream.format=this.privFormat;this.privAudio=new Audio();}}}},{key:"volume",get:function get(){var _this$privAudio$volum,_this$privAudio;return(_this$privAudio$volum=(_this$privAudio=this.privAudio)===null||_this$privAudio===void 0?void 0:_this$privAudio.volume)!==null&&_this$privAudio$volum!==void 0?_this$privAudio$volum:-1;},set:function set(volume){if(!!this.privAudio){this.privAudio.volume=volume;}}},{key:"mute",value:function mute(){if(!!this.privAudio){this.privAudio.muted=true;}}},{key:"unmute",value:function unmute(){if(!!this.privAudio){this.privAudio.muted=false;}}},{key:"isClosed",get:function get(){return this.privIsClosed;}},{key:"currentTime",get:function get(){if(this.privAudio!==undefined){return this.privAudio.currentTime;}return-1;}},{key:"pause",value:function pause(){if(!this.privIsPaused&&this.privAudio!==undefined){this.privAudio.pause();this.privIsPaused=true;}}},{key:"resume",value:function resume(cb,err){if(this.privIsPaused&&this.privAudio!==undefined){this.privAudio.play().then(function(){if(!!cb){cb();}},function(error){if(!!err){err(error);}});this.privIsPaused=false;}}},{key:"internalAudio",get:function get(){return this.privAudio;}},{key:"updateSourceBuffer",value:function(){var _updateSourceBuffer=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee68(){var binary;return _regeneratorRuntime().wrap(function _callee68$(_context68){while(1)switch(_context68.prev=_context68.next){case 0:if(!(this.privAudioBuffer!==undefined&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable())){_context68.next=16;break;}this.privAppendingToBuffer=true;binary=this.privAudioBuffer.shift();_context68.prev=3;this.privSourceBuffer.appendBuffer(binary);_context68.next=12;break;case 7:_context68.prev=7;_context68.t0=_context68["catch"](3);this.privAudioBuffer.unshift(binary);// eslint-disable-next-line no-console
console.log("buffer filled, pausing addition of binaries until space is made");return _context68.abrupt("return");case 12:_context68.next=14;return this.notifyPlayback();case 14:_context68.next=19;break;case 16:if(!this.canEndStream()){_context68.next=19;break;}_context68.next=19;return this.handleSourceBufferUpdateEnd();case 19:case"end":return _context68.stop();}},_callee68,this,[[3,7]]);}));function updateSourceBuffer(){return _updateSourceBuffer.apply(this,arguments);}return updateSourceBuffer;}()},{key:"handleSourceBufferUpdateEnd",value:function(){var _handleSourceBufferUpdateEnd=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee69(){return _regeneratorRuntime().wrap(function _callee69$(_context69){while(1)switch(_context69.prev=_context69.next){case 0:if(!(this.canEndStream()&&this.sourceBufferAvailable())){_context69.next=4;break;}this.privMediaSource.endOfStream();_context69.next=4;return this.notifyPlayback();case 4:case"end":return _context69.stop();}},_callee69,this);}));function handleSourceBufferUpdateEnd(){return _handleSourceBufferUpdateEnd.apply(this,arguments);}return handleSourceBufferUpdateEnd;}()},{key:"notifyPlayback",value:function(){var _notifyPlayback=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee70(){var _this138=this;return _regeneratorRuntime().wrap(function _callee70$(_context70){while(1)switch(_context70.prev=_context70.next){case 0:if(!(!this.privPlaybackStarted&&this.privAudio!==undefined)){_context70.next=7;break;}this.privPlaybackStarted=true;if(!!this.onAudioStart){this.onAudioStart(this);}this.privAudio.onended=function(){if(!!_this138.onAudioEnd){_this138.onAudioEnd(_this138);}};if(this.privIsPaused){_context70.next=7;break;}_context70.next=7;return this.privAudio.play();case 7:case"end":return _context70.stop();}},_callee70,this);}));function notifyPlayback(){return _notifyPlayback.apply(this,arguments);}return notifyPlayback;}()},{key:"canEndStream",value:function canEndStream(){return this.isClosed&&this.privSourceBuffer!==undefined&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open";}},{key:"sourceBufferAvailable",value:function sourceBufferAvailable(){return this.privSourceBuffer!==undefined&&!this.privSourceBuffer.updating;}}]);return SpeakerAudioDestination;}();exports.SpeakerAudioDestination=SpeakerAudioDestination;/***/},/* 186 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationTranscriptionCanceledEventArgs=void 0;var CancellationEventArgsBase_js_1=__webpack_require__(101);/**
 * Defines content of a RecognitionErrorEvent.
 * @class ConversationTranscriptionCanceledEventArgs
 */var ConversationTranscriptionCanceledEventArgs=/*#__PURE__*/function(_CancellationEventArg4){_inherits(ConversationTranscriptionCanceledEventArgs,_CancellationEventArg4);var _super107=_createSuper(ConversationTranscriptionCanceledEventArgs);function ConversationTranscriptionCanceledEventArgs(){_classCallCheck(this,ConversationTranscriptionCanceledEventArgs);return _super107.apply(this,arguments);}return _createClass(ConversationTranscriptionCanceledEventArgs);}(CancellationEventArgsBase_js_1.CancellationEventArgsBase);exports.ConversationTranscriptionCanceledEventArgs=ConversationTranscriptionCanceledEventArgs;/***/},/* 187 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.MeetingTranscriptionCanceledEventArgs=void 0;var CancellationEventArgsBase_js_1=__webpack_require__(101);/**
 * Defines content of a MeetingTranscriptionCanceledEvent.
 * @class MeetingTranscriptionCanceledEventArgs
 */var MeetingTranscriptionCanceledEventArgs=/*#__PURE__*/function(_CancellationEventArg5){_inherits(MeetingTranscriptionCanceledEventArgs,_CancellationEventArg5);var _super108=_createSuper(MeetingTranscriptionCanceledEventArgs);function MeetingTranscriptionCanceledEventArgs(){_classCallCheck(this,MeetingTranscriptionCanceledEventArgs);return _super108.apply(this,arguments);}return _createClass(MeetingTranscriptionCanceledEventArgs);}(CancellationEventArgsBase_js_1.CancellationEventArgsBase);exports.MeetingTranscriptionCanceledEventArgs=MeetingTranscriptionCanceledEventArgs;/***/},/* 188 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.PronunciationAssessmentGradingSystem=void 0;/**
 * Defines the point system for pronunciation score calibration; default value is FivePoint.
 * Added in version 1.15.0
 * @class PronunciationAssessmentGradingSystem
 */var PronunciationAssessmentGradingSystem;(function(PronunciationAssessmentGradingSystem){/**
     * Five point calibration
     * @member PronunciationAssessmentGradingSystem.FivePoint
     */PronunciationAssessmentGradingSystem[PronunciationAssessmentGradingSystem["FivePoint"]=1]="FivePoint";/**
     * Hundred mark
     * @member PronunciationAssessmentGradingSystem.HundredMark
     */PronunciationAssessmentGradingSystem[PronunciationAssessmentGradingSystem["HundredMark"]=2]="HundredMark";})(PronunciationAssessmentGradingSystem=exports.PronunciationAssessmentGradingSystem||(exports.PronunciationAssessmentGradingSystem={}));/***/},/* 189 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.PronunciationAssessmentGranularity=void 0;/**
 * Defines the pronunciation evaluation granularity; default value is Phoneme.
 * Added in version 1.15.0
 * @class PronunciationAssessmentGranularity
 */var PronunciationAssessmentGranularity;(function(PronunciationAssessmentGranularity){/**
     * Shows the score on the full text, word and phoneme level
     * @member PronunciationAssessmentGranularity.Phoneme
     */PronunciationAssessmentGranularity[PronunciationAssessmentGranularity["Phoneme"]=1]="Phoneme";/**
     * Shows the score on the full text and word level
     * @member PronunciationAssessmentGranularity.Word
     */PronunciationAssessmentGranularity[PronunciationAssessmentGranularity["Word"]=2]="Word";/**
     * Shows the score on the full text level only
     * @member PronunciationAssessmentGranularity.FullText
     */PronunciationAssessmentGranularity[PronunciationAssessmentGranularity["FullText"]=3]="FullText";})(PronunciationAssessmentGranularity=exports.PronunciationAssessmentGranularity||(exports.PronunciationAssessmentGranularity={}));/***/},/* 190 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.PronunciationAssessmentConfig=void 0;var Contracts_js_1=__webpack_require__(64);var Exports_js_1=__webpack_require__(79);/**
 * Pronunciation assessment configuration.
 * @class PronunciationAssessmentConfig
 * Added in version 1.15.0.
 */var PronunciationAssessmentConfig=/*#__PURE__*/function(){/**
     * PronunciationAssessmentConfig constructor.
     * @constructor
     * @param {string} referenceText
     * @param gradingSystem
     * @param granularity
     * @param enableMiscue
     */function PronunciationAssessmentConfig(referenceText){var gradingSystem=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Exports_js_1.PronunciationAssessmentGradingSystem.FivePoint;var granularity=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Exports_js_1.PronunciationAssessmentGranularity.Phoneme;var enableMiscue=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;_classCallCheck(this,PronunciationAssessmentConfig);Contracts_js_1.Contracts.throwIfNullOrUndefined(referenceText,"referenceText");this.privProperties=new Exports_js_1.PropertyCollection();this.privProperties.setProperty(Exports_js_1.PropertyId.PronunciationAssessment_ReferenceText,referenceText);this.privProperties.setProperty(Exports_js_1.PropertyId.PronunciationAssessment_GradingSystem,Exports_js_1.PronunciationAssessmentGradingSystem[gradingSystem]);this.privProperties.setProperty(Exports_js_1.PropertyId.PronunciationAssessment_Granularity,Exports_js_1.PronunciationAssessmentGranularity[granularity]);this.privProperties.setProperty(Exports_js_1.PropertyId.PronunciationAssessment_EnableMiscue,String(enableMiscue));}/**
     * @member PronunciationAssessmentConfig.fromJSON
     * @function
     * @public
     * @param {string} json The json string containing the pronunciation assessment parameters.
     * @return {PronunciationAssessmentConfig} Instance of PronunciationAssessmentConfig
     * @summary Creates an instance of the PronunciationAssessmentConfig from json.
     * This method is designed to support the pronunciation assessment parameters still in preview.
     * Under normal circumstances, use the constructor instead.
     */_createClass(PronunciationAssessmentConfig,[{key:"toJSON",value:function toJSON(){this.updateJson();return this.privProperties.getProperty(Exports_js_1.PropertyId.PronunciationAssessment_Params);}},{key:"applyTo",value:function applyTo(recognizer){this.updateJson();var recoBase=recognizer.internalData;recoBase.expectContentAssessmentResponse=!!this.privContentAssessmentTopic;recoBase.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(Exports_js_1.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,recoBase.isSpeakerDiarizationEnabled);}/**
     * Gets the reference text.
     * @member PronunciationAssessmentConfig.prototype.referenceText
     * @function
     * @public
     * @returns {string} Reference text.
     */},{key:"referenceText",get:function get(){return this.properties.getProperty(Exports_js_1.PropertyId.PronunciationAssessment_ReferenceText);}/**
     * Gets/Sets the reference text.
     * @member PronunciationAssessmentConfig.prototype.referenceText
     * @function
     * @public
     * @param {string} referenceText - Reference text.
     */,set:function set(referenceText){Contracts_js_1.Contracts.throwIfNullOrWhitespace(referenceText,"referenceText");this.properties.setProperty(Exports_js_1.PropertyId.PronunciationAssessment_ReferenceText,referenceText);}/**
     * Sets the phoneme alphabet.
     * The valid values are "SAPI" (default) and "IPA".
     * Added in version 1.20.0
     * @member PronunciationAssessmentConfig.prototype.phonemeAlphabet
     * @function
     * @public
     * @param {string} phonemeAlphabet - Phoneme alphabet.
     */},{key:"phonemeAlphabet",set:function set(phonemeAlphabet){Contracts_js_1.Contracts.throwIfNullOrWhitespace(phonemeAlphabet,"phonemeAlphabet");this.privPhonemeAlphabet=phonemeAlphabet;}/**
     * Sets the boolean enableMiscue property.
     * Added in version 1.26.0
     * @member PronunciationAssessmentConfig.prototype.enableMiscue
     * @function
     * @public
     * @param {boolean} enableMiscue - enable miscue.
     */},{key:"enableMiscue",get:/**
     * Gets the boolean enableMiscue property.
     * Added in version 1.26.0
     * @member PronunciationAssessmentConfig.prototype.enableMiscue
     * @function
     * @public
     * @return {boolean} enableMiscue - enable miscue.
     */function get(){var enableMiscueString=this.properties.getProperty(Exports_js_1.PropertyId.PronunciationAssessment_EnableMiscue,"false");return enableMiscueString.toLowerCase()==="true";}/**
     * Sets the nbest phoneme count
     * Added in version 1.20.0
     * @member PronunciationAssessmentConfig.prototype.nbestPhonemeCount
     * @function
     * @public
     * @param {number} nbestPhonemeCount - NBest phoneme count.
     */,set:function set(enableMiscue){var enableMiscueString=enableMiscue?"true":"false";this.properties.setProperty(Exports_js_1.PropertyId.PronunciationAssessment_EnableMiscue,enableMiscueString);}},{key:"nbestPhonemeCount",set:function set(nbestPhonemeCount){this.privNBestPhonemeCount=nbestPhonemeCount;}/**
     * Enables the prosody assessment.
     * Added in version 1.34.0
     * @member PronunciationAssessmentConfig.prototype.enableProsodyAssessment
     * @function
     * @public
     * @param {boolean} enableProsodyAssessment - enable prosody assessment.
     */},{key:"enableProsodyAssessment",set:function set(enableProsodyAssessment){this.privEnableProsodyAssessment=enableProsodyAssessment;}/**
     * Enables content assessment and sets the topic.
     * Added in version 1.34.0
     * @member PronunciationAssessmentConfig.prototype.enableContentAssessmentWithTopic
     * @function
     * @public
     * @param {string} topic - Topic for content assessment.
     */},{key:"enableContentAssessmentWithTopic",value:function enableContentAssessmentWithTopic(topic){this.privContentAssessmentTopic=topic;}/**
     * @member PronunciationAssessmentConfig.prototype.properties
     * @function
     * @public
     * @return {PropertyCollection} Properties of the config.
     * @summary Gets a pronunciation assessment config properties
     */},{key:"properties",get:function get(){return this.privProperties;}},{key:"updateJson",value:function updateJson(){var jsonString=this.privProperties.getProperty(Exports_js_1.PropertyId.PronunciationAssessment_Json,"{}");var paramsJson=JSON.parse(jsonString);var referenceText=this.privProperties.getProperty(Exports_js_1.PropertyId.PronunciationAssessment_ReferenceText);if(referenceText){paramsJson.referenceText=referenceText;}var gradingSystem=this.privProperties.getProperty(Exports_js_1.PropertyId.PronunciationAssessment_GradingSystem);if(gradingSystem){paramsJson.gradingSystem=gradingSystem;}var granularity=this.privProperties.getProperty(Exports_js_1.PropertyId.PronunciationAssessment_Granularity);if(granularity){paramsJson.granularity=granularity;}if(this.privPhonemeAlphabet){paramsJson.phonemeAlphabet=this.privPhonemeAlphabet;}if(this.privNBestPhonemeCount){paramsJson.nbestPhonemeCount=this.privNBestPhonemeCount;}paramsJson.enableProsodyAssessment=this.privEnableProsodyAssessment;// always set dimension to Comprehensive
paramsJson.dimension="Comprehensive";var enableMiscueString=this.privProperties.getProperty(Exports_js_1.PropertyId.PronunciationAssessment_EnableMiscue);if(enableMiscueString){paramsJson.enableMiscue=this.enableMiscue;}this.privProperties.setProperty(Exports_js_1.PropertyId.PronunciationAssessment_Params,JSON.stringify(paramsJson));}}],[{key:"fromJSON",value:function fromJSON(json){Contracts_js_1.Contracts.throwIfNullOrUndefined(json,"json");var config=new PronunciationAssessmentConfig("");config.privProperties=new Exports_js_1.PropertyCollection();config.properties.setProperty(Exports_js_1.PropertyId.PronunciationAssessment_Json,json);return config;}}]);return PronunciationAssessmentConfig;}();exports.PronunciationAssessmentConfig=PronunciationAssessmentConfig;/***/},/* 191 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.PronunciationAssessmentResult=exports.ContentAssessmentResult=void 0;/* eslint-disable max-classes-per-file */var Contracts_js_1=__webpack_require__(64);var Exports_js_1=__webpack_require__(79);var ContentAssessmentResult=/*#__PURE__*/function(){/**
     * @Internal
     * Do not use externally.
     */function ContentAssessmentResult(detailResult){_classCallCheck(this,ContentAssessmentResult);this.privPronJson=detailResult;}/**
     * Correctness in using grammar and variety of sentence patterns.
     * Grammatical errors are jointly evaluated by lexical accuracy,
     * grammatical accuracy and diversity of sentence structures.
     * @member ContentAssessmentResult.prototype.grammarScore
     * @function
     * @public
     * @returns {number} Grammar score.
     */_createClass(ContentAssessmentResult,[{key:"grammarScore",get:function get(){return this.privPronJson.ContentAssessment.GrammarScore;}/**
     * Proficiency in lexical usage. It evaluates the speaker's effective usage
     * of words and their appropriateness within the given context to express
     * ideas accurately, as well as level of lexical complexity.
     * @member ContentAssessmentResult.prototype.vocabularyScore
     * @function
     * @public
     * @returns {number} Vocabulary score.
     */},{key:"vocabularyScore",get:function get(){return this.privPronJson.ContentAssessment.VocabularyScore;}/**
     * Level of understanding and engagement with the topic, which provides
     * insights into the speakerâ€™s ability to express their thoughts and ideas
     * effectively and the ability to engage with the topic.
     * @member ContentAssessmentResult.prototype.topicScore
     * @function
     * @public
     * @returns {number} Topic score.
     */},{key:"topicScore",get:function get(){return this.privPronJson.ContentAssessment.TopicScore;}}]);return ContentAssessmentResult;}();exports.ContentAssessmentResult=ContentAssessmentResult;/**
 * Pronunciation assessment results.
 * @class PronunciationAssessmentResult
 * Added in version 1.15.0.
 */var PronunciationAssessmentResult=/*#__PURE__*/function(){function PronunciationAssessmentResult(jsonString){_classCallCheck(this,PronunciationAssessmentResult);var j=JSON.parse(jsonString);Contracts_js_1.Contracts.throwIfNullOrUndefined(j.NBest[0],"NBest");this.privPronJson=j.NBest[0];}/**
     * @member PronunciationAssessmentResult.fromResult
     * @function
     * @public
     * @param {RecognitionResult} result The recognition result.
     * @return {PronunciationAssessmentConfig} Instance of PronunciationAssessmentConfig
     * @summary Creates an instance of the PronunciationAssessmentResult from recognition result.
     */_createClass(PronunciationAssessmentResult,[{key:"detailResult",get:/**
     * Gets the detail result of pronunciation assessment.
     * @member PronunciationAssessmentConfig.prototype.detailResult
     * @function
     * @public
     * @returns {DetailResult} detail result.
     */function get(){return this.privPronJson;}/**
     * The score indicating the pronunciation accuracy of the given speech, which indicates
     * how closely the phonemes match a native speaker's pronunciation.
     * @member PronunciationAssessmentResult.prototype.accuracyScore
     * @function
     * @public
     * @returns {number} Accuracy score.
     */},{key:"accuracyScore",get:function get(){var _this$detailResult$Pr;return(_this$detailResult$Pr=this.detailResult.PronunciationAssessment)===null||_this$detailResult$Pr===void 0?void 0:_this$detailResult$Pr.AccuracyScore;}/**
     * The overall score indicating the pronunciation quality of the given speech.
     * This is calculated from AccuracyScore, FluencyScore and CompletenessScore with weight.
     * @member PronunciationAssessmentResult.prototype.pronunciationScore
     * @function
     * @public
     * @returns {number} Pronunciation score.
     */},{key:"pronunciationScore",get:function get(){var _this$detailResult$Pr2;return(_this$detailResult$Pr2=this.detailResult.PronunciationAssessment)===null||_this$detailResult$Pr2===void 0?void 0:_this$detailResult$Pr2.PronScore;}/**
     * The score indicating the completeness of the given speech by calculating the ratio of pronounced words towards entire input.
     * @member PronunciationAssessmentResult.prototype.completenessScore
     * @function
     * @public
     * @returns {number} Completeness score.
     */},{key:"completenessScore",get:function get(){var _this$detailResult$Pr3;return(_this$detailResult$Pr3=this.detailResult.PronunciationAssessment)===null||_this$detailResult$Pr3===void 0?void 0:_this$detailResult$Pr3.CompletenessScore;}/**
     * The score indicating the fluency of the given speech.
     * @member PronunciationAssessmentResult.prototype.fluencyScore
     * @function
     * @public
     * @returns {number} Fluency score.
     */},{key:"fluencyScore",get:function get(){var _this$detailResult$Pr4;return(_this$detailResult$Pr4=this.detailResult.PronunciationAssessment)===null||_this$detailResult$Pr4===void 0?void 0:_this$detailResult$Pr4.FluencyScore;}/**
     * The prosody score, which indicates how nature of the given speech, including stress, intonation, speaking speed and rhythm.
     * @member PronunciationAssessmentResult.prototype.prosodyScore
     * @function
     * @public
     * @returns {number} Prosody score.
     */},{key:"prosodyScore",get:function get(){var _this$detailResult$Pr5;return(_this$detailResult$Pr5=this.detailResult.PronunciationAssessment)===null||_this$detailResult$Pr5===void 0?void 0:_this$detailResult$Pr5.ProsodyScore;}/**
     * The concent assessment result.
     * Only available when content assessment is enabled.
     * @member PronunciationAssessmentResult.prototype.contentAssessmentResult
     * @function
     * @public
     * @returns {ContentAssessmentResult} Content assessment result.
     */},{key:"contentAssessmentResult",get:function get(){if(this.detailResult.ContentAssessment===undefined){return undefined;}return new ContentAssessmentResult(this.detailResult);}}],[{key:"fromResult",value:function fromResult(result){Contracts_js_1.Contracts.throwIfNullOrUndefined(result,"result");var json=result.properties.getProperty(Exports_js_1.PropertyId.SpeechServiceResponse_JsonResult);Contracts_js_1.Contracts.throwIfNullOrUndefined(json,"json");return new PronunciationAssessmentResult(json);}}]);return PronunciationAssessmentResult;}();exports.PronunciationAssessmentResult=PronunciationAssessmentResult;/***/},/* 192 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.AvatarConfig=void 0;var Contracts_js_1=__webpack_require__(64);var Exports_js_1=__webpack_require__(79);/**
 * Defines the talking avatar configuration.
 * @class AvatarConfig
 * Added in version 1.33.0
 *
 * @experimental This feature is experimental and might change or have limited support.
 */var AvatarConfig=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} character - The avatar character.
     * @param {string} style - The avatar style.
     * @param {AvatarVideoFormat} videoFormat - The talking avatar output video format.
     */function AvatarConfig(character,style,videoFormat){_classCallCheck(this,AvatarConfig);this.privCustomized=false;this.privUseBuiltInVoice=false;Contracts_js_1.Contracts.throwIfNullOrWhitespace(character,"character");this.character=character;this.style=style;if(videoFormat===undefined){videoFormat=new Exports_js_1.AvatarVideoFormat();}this.videoFormat=videoFormat;}/**
     * Indicates if the talking avatar is customized.
     */_createClass(AvatarConfig,[{key:"customized",get:function get(){return this.privCustomized;}/**
     * Sets if the talking avatar is customized.
     */,set:function set(value){this.privCustomized=value;}/**
     * Indicates whether to use built-in voice for custom avatar.
     */},{key:"useBuiltInVoice",get:function get(){return this.privUseBuiltInVoice;}/**
     * Sets whether to use built-in voice for custom avatar.
     */,set:function set(value){this.privUseBuiltInVoice=value;}/**
     * Gets the background color.
     */},{key:"backgroundColor",get:function get(){return this.privBackgroundColor;}/**
     * Sets the background color.
     */,set:function set(value){this.privBackgroundColor=value;}/**
     * Gets the background image.
     */},{key:"backgroundImage",get:function get(){return this.privBackgroundImage;}/**
     * Sets the background image.
     * @param {URL} value - The background image.
     */,set:function set(value){this.privBackgroundImage=value;}/**
     * Gets the remote ICE servers.
     * @remarks This method is designed to be used internally in the SDK.
     * @returns {RTCIceServer[]} The remote ICE servers.
     */},{key:"remoteIceServers",get:function get(){return this.privRemoteIceServers;}/**
     * Sets the remote ICE servers.
     * @remarks Normally, the ICE servers are gathered from the PeerConnection,
     * set this property to override the ICE servers. E.g., the ICE servers are
     * different in client and server side.
     * @param {RTCIceServer[]} value - The remote ICE servers.
     */,set:function set(value){this.privRemoteIceServers=value;}}]);return AvatarConfig;}();exports.AvatarConfig=AvatarConfig;/***/},/* 193 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.AvatarEventArgs=exports.AvatarEventTypes=void 0;var AvatarEventTypes;(function(AvatarEventTypes){AvatarEventTypes["SwitchedToSpeaking"]="SwitchedToSpeaking";AvatarEventTypes["SwitchedToIdle"]="SwitchedToIdle";AvatarEventTypes["SessionClosed"]="SessionClosed";})(AvatarEventTypes=exports.AvatarEventTypes||(exports.AvatarEventTypes={}));/**
 * Defines content for talking avatar events.
 * @class AvatarEventArgs
 * Added in version 1.33.0
 *
 * @experimental This feature is experimental and might change or have limited support.
 */var AvatarEventArgs=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {number} audioOffset - The audio offset.
     * @param {string} description - The description of the event.
     */function AvatarEventArgs(audioOffset,description){_classCallCheck(this,AvatarEventArgs);this.privOffset=audioOffset;this.privDescription=description;}/**
     * The type of the event.
     * @public
     * @returns {AvatarEventTypes} The type of the event.
     */_createClass(AvatarEventArgs,[{key:"type",get:function get(){return this.privType;}/**
     * The time offset associated with this event.
     * @public
     * @returns {number} The time offset associated with this event.
     */},{key:"offset",get:function get(){return this.privOffset;}/**
     * The description of the event.
     * @public
     * @returns {string} The description of the event.
     */},{key:"description",get:function get(){return this.privDescription;}}]);return AvatarEventArgs;}();exports.AvatarEventArgs=AvatarEventArgs;/***/},/* 194 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.AvatarSynthesizer=void 0;var SpeechSynthesisConnectionFactory_js_1=__webpack_require__(195);var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(4);var AudioOutputFormat_js_1=__webpack_require__(85);var Exports_js_3=__webpack_require__(79);var Contracts_js_1=__webpack_require__(64);var Synthesizer_js_1=__webpack_require__(174);/**
 * Defines the avatar synthesizer.
 * @class AvatarSynthesizer
 * Added in version 1.33.0
 *
 * @experimental This feature is experimental and might change or have limited support.
 */var AvatarSynthesizer=/*#__PURE__*/function(_Exports_js_3$Synthes2){_inherits(AvatarSynthesizer,_Exports_js_3$Synthes2);var _super109=_createSuper(AvatarSynthesizer);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {SpeechConfig} speechConfig - The speech config.
     * @param {AvatarConfig} avatarConfig - The talking avatar config.
     */function AvatarSynthesizer(speechConfig,avatarConfig){var _this139;_classCallCheck(this,AvatarSynthesizer);_this139=_super109.call(this,speechConfig);Contracts_js_1.Contracts.throwIfNullOrUndefined(avatarConfig,"avatarConfig");_this139.privConnectionFactory=new SpeechSynthesisConnectionFactory_js_1.SpeechSynthesisConnectionFactory();_this139.privAvatarConfig=avatarConfig;_this139.implCommonSynthesizeSetup();return _this139;}_createClass(AvatarSynthesizer,[{key:"implCommonSynthesizeSetup",value:function implCommonSynthesizeSetup(){_get(_getPrototypeOf(AvatarSynthesizer.prototype),"implCommonSynthesizeSetup",this).call(this);// The service checks the audio format setting while it ignores it in avatar synthesis.
this.privAdapter.audioOutputFormat=AudioOutputFormat_js_1.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(Exports_js_3.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm);}/**
     * Starts the talking avatar session and establishes the WebRTC connection.
     * @member AvatarSynthesizer.prototype.startAvatarAsync
     * @function
     * @public
     * @param {AvatarWebRTCConnectionInfo} peerConnection - The peer connection.
     * @returns {Promise<SynthesisResult>} The promise of the connection result.
     */},{key:"startAvatarAsync",value:function(){var _startAvatarAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee71(peerConnection){var iceGatheringDone,sdp,result,sdpAnswerString,sdpAnswer;return _regeneratorRuntime().wrap(function _callee71$(_context71){while(1)switch(_context71.prev=_context71.next){case 0:Contracts_js_1.Contracts.throwIfNullOrUndefined(peerConnection,"peerConnection");this.privIceServers=peerConnection.getConfiguration().iceServers;Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");iceGatheringDone=new Exports_js_2.Deferred();// https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/icegatheringstatechange_event
peerConnection.onicegatheringstatechange=function(){Exports_js_2.Events.instance.onEvent(new Exports_js_2.PlatformEvent("peer connection: ice gathering state: "+peerConnection.iceGatheringState,Exports_js_2.EventType.Debug));if(peerConnection.iceGatheringState==="complete"){Exports_js_2.Events.instance.onEvent(new Exports_js_2.PlatformEvent("peer connection: ice gathering complete.",Exports_js_2.EventType.Info));iceGatheringDone.resolve();}};peerConnection.onicecandidate=function(event){if(event.candidate){Exports_js_2.Events.instance.onEvent(new Exports_js_2.PlatformEvent("peer connection: ice candidate: "+event.candidate.candidate,Exports_js_2.EventType.Debug));}else{Exports_js_2.Events.instance.onEvent(new Exports_js_2.PlatformEvent("peer connection: ice candidate: complete",Exports_js_2.EventType.Debug));iceGatheringDone.resolve();}};// Set a timeout for ice gathering, currently 2 seconds.
setTimeout(function(){if(peerConnection.iceGatheringState!=="complete"){Exports_js_2.Events.instance.onEvent(new Exports_js_2.PlatformEvent("peer connection: ice gathering timeout.",Exports_js_2.EventType.Warning));iceGatheringDone.resolve();}},2000);_context71.next=9;return peerConnection.createOffer();case 9:sdp=_context71.sent;_context71.next=12;return peerConnection.setLocalDescription(sdp);case 12:_context71.next=14;return iceGatheringDone.promise;case 14:Exports_js_2.Events.instance.onEvent(new Exports_js_2.PlatformEvent("peer connection: got local SDP.",Exports_js_2.EventType.Info));this.privProperties.setProperty(Exports_js_3.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(peerConnection.localDescription));_context71.next=18;return this.speak("",false);case 18:result=_context71.sent;if(!(result.reason!==Exports_js_3.ResultReason.SynthesizingAudioCompleted)){_context71.next=21;break;}return _context71.abrupt("return",new Exports_js_3.SynthesisResult(result.resultId,result.reason,result.errorDetails,result.properties));case 21:sdpAnswerString=atob(result.properties.getProperty(Exports_js_3.PropertyId.TalkingAvatarService_WebRTC_SDP));sdpAnswer=new RTCSessionDescription(JSON.parse(sdpAnswerString));_context71.next=25;return peerConnection.setRemoteDescription(sdpAnswer);case 25:return _context71.abrupt("return",new Exports_js_3.SynthesisResult(result.resultId,result.reason,undefined,result.properties));case 26:case"end":return _context71.stop();}},_callee71,this);}));function startAvatarAsync(_x45){return _startAvatarAsync.apply(this,arguments);}return startAvatarAsync;}()/**
     * Speaks plain text asynchronously. The rendered audio and video will be sent via the WebRTC connection.
     * @member AvatarSynthesizer.prototype.speakTextAsync
     * @function
     * @public
     * @param {string} text - The plain text to speak.
     * @returns {Promise<SynthesisResult>} The promise of the synthesis result.
     */},{key:"speakTextAsync",value:function(){var _speakTextAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee72(text){var r;return _regeneratorRuntime().wrap(function _callee72$(_context72){while(1)switch(_context72.prev=_context72.next){case 0:_context72.next=2;return this.speak(text,false);case 2:r=_context72.sent;return _context72.abrupt("return",new Exports_js_3.SynthesisResult(r.resultId,r.reason,r.errorDetails,r.properties));case 4:case"end":return _context72.stop();}},_callee72,this);}));function speakTextAsync(_x46){return _speakTextAsync.apply(this,arguments);}return speakTextAsync;}()/**
     * Speaks SSML asynchronously. The rendered audio and video will be sent via the WebRTC connection.
     * @member AvatarSynthesizer.prototype.speakSsmlAsync
     * @function
     * @public
     * @param {string} ssml - The SSML text to speak.
     * @returns {Promise<SynthesisResult>} The promise of the synthesis result.
     */},{key:"speakSsmlAsync",value:function(){var _speakSsmlAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee73(ssml){var r;return _regeneratorRuntime().wrap(function _callee73$(_context73){while(1)switch(_context73.prev=_context73.next){case 0:_context73.next=2;return this.speak(ssml,true);case 2:r=_context73.sent;return _context73.abrupt("return",new Exports_js_3.SynthesisResult(r.resultId,r.reason,r.errorDetails,r.properties));case 4:case"end":return _context73.stop();}},_callee73,this);}));function speakSsmlAsync(_x47){return _speakSsmlAsync.apply(this,arguments);}return speakSsmlAsync;}()/**
     * Speaks text asynchronously. The avatar will switch to idle state.
     * @member AvatarSynthesizer.prototype.stopSpeakingAsync
     * @function
     * @public
     * @returns {Promise<void>} The promise of the void result.
     */},{key:"stopSpeakingAsync",value:function(){var _stopSpeakingAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee74(){var request;return _regeneratorRuntime().wrap(function _callee74$(_context74){while(1)switch(_context74.prev=_context74.next){case 0:if(!(this.synthesisRequestQueue.length()>0)){_context74.next=7;break;}_context74.next=3;return this.synthesisRequestQueue.dequeue();case 3:request=_context74.sent;request.err("Synthesis is canceled by user.");_context74.next=0;break;case 7:return _context74.abrupt("return",this.privAdapter.stopSpeaking());case 8:case"end":return _context74.stop();}},_callee74,this);}));function stopSpeakingAsync(){return _stopSpeakingAsync.apply(this,arguments);}return stopSpeakingAsync;}()/**
     * Stops the talking avatar session and closes the WebRTC connection.
     * For now, this is the same as close().
     * You need to create a new AvatarSynthesizer instance to start a new session.
     * @member AvatarSynthesizer.prototype.stopAvatarAsync
     * @function
     * @public
     * @returns {Promise<void>} The promise of the void result.
     */},{key:"stopAvatarAsync",value:function(){var _stopAvatarAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee75(){return _regeneratorRuntime().wrap(function _callee75$(_context75){while(1)switch(_context75.prev=_context75.next){case 0:Contracts_js_1.Contracts.throwIfDisposed(this.privDisposed);return _context75.abrupt("return",this.dispose(true));case 2:case"end":return _context75.stop();}},_callee75,this);}));function stopAvatarAsync(){return _stopAvatarAsync.apply(this,arguments);}return stopAvatarAsync;}()/**
     * Dispose of associated resources.
     * @member AvatarSynthesizer.prototype.close
     * @function
     * @public
     */},{key:"close",value:function(){var _close5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee76(){return _regeneratorRuntime().wrap(function _callee76$(_context76){while(1)switch(_context76.prev=_context76.next){case 0:if(!this.privDisposed){_context76.next=2;break;}return _context76.abrupt("return");case 2:return _context76.abrupt("return",this.dispose(true));case 3:case"end":return _context76.stop();}},_callee76,this);}));function close(){return _close5.apply(this,arguments);}return close;}()/**
     * Gets the ICE servers. Internal use only.
     */},{key:"iceServers",get:function get(){return this.privIceServers;}// Creates the synthesis adapter
},{key:"createSynthesisAdapter",value:function createSynthesisAdapter(authentication,connectionFactory,synthesizerConfig){return new Exports_js_1.AvatarSynthesisAdapter(authentication,connectionFactory,synthesizerConfig,this,this.privAvatarConfig);}},{key:"createRestSynthesisAdapter",value:function createRestSynthesisAdapter(_authentication,_synthesizerConfig){return undefined;}},{key:"createSynthesizerConfig",value:function createSynthesizerConfig(speechConfig){var config=_get(_getPrototypeOf(AvatarSynthesizer.prototype),"createSynthesizerConfig",this).call(this,speechConfig);config.avatarEnabled=true;return config;}},{key:"speak",value:function(){var _speak=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee77(text,isSSML){var _this140=this;var requestId,deferredResult;return _regeneratorRuntime().wrap(function _callee77$(_context77){while(1)switch(_context77.prev=_context77.next){case 0:requestId=Exports_js_2.createNoDashGuid();deferredResult=new Exports_js_2.Deferred();this.synthesisRequestQueue.enqueue(new Synthesizer_js_1.SynthesisRequest(requestId,text,isSSML,function(e){deferredResult.resolve(e);_this140.privSynthesizing=false;void _this140.adapterSpeak();},function(e){deferredResult.reject(e);_this140.privSynthesizing=false;}));void this.adapterSpeak();return _context77.abrupt("return",deferredResult.promise);case 5:case"end":return _context77.stop();}},_callee77,this);}));function speak(_x48,_x49){return _speak.apply(this,arguments);}return speak;}()}]);return AvatarSynthesizer;}(Exports_js_3.Synthesizer);exports.AvatarSynthesizer=AvatarSynthesizer;/***/},/* 195 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechSynthesisConnectionFactory=void 0;var Exports_js_1=__webpack_require__(60);var Exports_js_2=__webpack_require__(79);var ConnectionFactoryBase_js_1=__webpack_require__(134);var Exports_js_3=__webpack_require__(2);var HeaderNames_js_1=__webpack_require__(54);var QueryParameterNames_js_1=__webpack_require__(135);var SpeechSynthesisConnectionFactory=/*#__PURE__*/function(){function SpeechSynthesisConnectionFactory(){_classCallCheck(this,SpeechSynthesisConnectionFactory);this.synthesisUri="/cognitiveservices/websocket/v1";}_createClass(SpeechSynthesisConnectionFactory,[{key:"create",value:function create(config,authInfo,connectionId){var endpoint=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint,undefined);var region=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region,undefined);var hostSuffix=ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region);var endpointId=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_EndpointId,undefined);var hostPrefix=endpointId===undefined?"tts":"voice";var host=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,"wss://"+region+"."+hostPrefix+".speech"+hostSuffix);var queryParams={};var headers={};if(authInfo.token!==undefined&&authInfo.token!==""){headers[authInfo.headerName]=authInfo.token;}headers[HeaderNames_js_1.HeaderNames.ConnectionId]=connectionId;if(endpointId!==undefined&&endpointId!==""){if(!endpoint||endpoint.search(QueryParameterNames_js_1.QueryParameterNames.CustomVoiceDeploymentId)===-1){queryParams[QueryParameterNames_js_1.QueryParameterNames.CustomVoiceDeploymentId]=endpointId;}}if(config.avatarEnabled){if(!endpoint||endpoint.search(QueryParameterNames_js_1.QueryParameterNames.EnableAvatar)===-1){queryParams[QueryParameterNames_js_1.QueryParameterNames.EnableAvatar]="true";}}if(!endpoint){endpoint=host+this.synthesisUri;}config.parameters.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Url,endpoint);var enableCompression=config.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new Exports_js_1.WebsocketConnection(endpoint,queryParams,headers,new Exports_js_3.WebsocketMessageFormatter(),Exports_js_1.ProxyInfo.fromParameters(config.parameters),enableCompression,connectionId);}}]);return SpeechSynthesisConnectionFactory;}();exports.SpeechSynthesisConnectionFactory=SpeechSynthesisConnectionFactory;/***/},/* 196 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.AvatarVideoFormat=exports.Coordinate=void 0;/* eslint-disable max-classes-per-file */ /**
 * Defines a coordinate in 2D space.
 * @class Coordinate
 * Added in version 1.33.0
 */var Coordinate=/*#__PURE__*/_createClass(function Coordinate(x,y){_classCallCheck(this,Coordinate);this.x=x;this.y=y;});exports.Coordinate=Coordinate;/**
 * Defines the avatar output video format.
 * @class AvatarVideoFormat
 * Added in version 1.33.0
 *
 * @experimental This feature is experimental and might change in the future.
 */var AvatarVideoFormat=/*#__PURE__*/function(){/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {string} codec - The video codec.
     * @param {number} bitrate - The video bitrate.
     * @param {number} width - The video width.
     * @param {number} height - The video height.
     */function AvatarVideoFormat(){var codec=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"H264";var bitrate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2000000;var width=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1920;var height=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1080;_classCallCheck(this,AvatarVideoFormat);this.codec=codec;this.bitrate=bitrate;this.width=width;this.height=height;}/**
     * Sets the video crop range.
     */_createClass(AvatarVideoFormat,[{key:"setCropRange",value:function setCropRange(topLeft,bottomRight){this.cropRange={bottomRight:bottomRight,topLeft:topLeft};}}]);return AvatarVideoFormat;}();exports.AvatarVideoFormat=AvatarVideoFormat;/***/},/* 197 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.AvatarWebRTCConnectionResult=void 0;var Exports_js_1=__webpack_require__(79);/**
 * Defines the avatar WebRTC connection result.
 * @class AvatarWebRTCConnectionResult
 * Added in version 1.33.0
 *
 * @experimental This feature is experimental and might change in the future.
 */var AvatarWebRTCConnectionResult=/*#__PURE__*/function(_Exports_js_1$Synthes3){_inherits(AvatarWebRTCConnectionResult,_Exports_js_1$Synthes3);var _super110=_createSuper(AvatarWebRTCConnectionResult);/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param {RTCSessionDescriptionInit} SDPAnswer - The SDP answer of WebRTC connection.
     * @param {string} resultId - The result id.
     * @param {ResultReason} reason - The reason.
     * @param {string} errorDetails - Error details, if provided.
     * @param {PropertyCollection} properties - Additional properties, if provided.
     */function AvatarWebRTCConnectionResult(SDPAnswer,resultId,reason,errorDetails,properties){var _this141;_classCallCheck(this,AvatarWebRTCConnectionResult);_this141=_super110.call(this,resultId,reason,errorDetails,properties);_this141.privSDPAnswer=SDPAnswer;return _this141;}/**
     * Specifies SDP (Session Description Protocol) answer of WebRTC connection.
     * @member AvatarWebRTCConnectionResult.prototype.SDPAnswer
     * @function
     * @public
     * @returns {RTCSessionDescriptionInit} Specifies the SDP answer of WebRTC connection.
     */_createClass(AvatarWebRTCConnectionResult,[{key:"SDPAnswer",get:function get(){return this.privSDPAnswer;}}]);return AvatarWebRTCConnectionResult;}(Exports_js_1.SynthesisResult);exports.AvatarWebRTCConnectionResult=AvatarWebRTCConnectionResult;/***/},/* 198 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";//
// Copyright (c) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.md file in the project root for full license information.
//
Object.defineProperty(exports,"__esModule",{value:true});exports.Diagnostics=void 0;var Exports_js_1=__webpack_require__(60);var Exports_js_2=__webpack_require__(4);/**
 * Defines diagnostics API for managing console output
 * Added in version 1.21.0
 */var Diagnostics=/*#__PURE__*/function(){function Diagnostics(){_classCallCheck(this,Diagnostics);}_createClass(Diagnostics,null,[{key:"SetLoggingLevel",value:function SetLoggingLevel(logLevel){this.privListener=new Exports_js_1.ConsoleLoggingListener(logLevel);Exports_js_2.Events.instance.attachConsoleListener(this.privListener);}},{key:"StartConsoleOutput",value:function StartConsoleOutput(){if(!!this.privListener){this.privListener.enableConsoleOutput=true;}}},{key:"StopConsoleOutput",value:function StopConsoleOutput(){if(!!this.privListener){this.privListener.enableConsoleOutput=false;}}},{key:"SetLogOutputPath",value:function SetLogOutputPath(path){if(typeof window==="undefined"){if(!!this.privListener){this.privListener.logPath=path;}}else{throw new Error("File system logging not available in browser.");}}},{key:"onLogOutput",set:function set(callback){if(!!this.privListener){this.privListener.logCallback=callback;}}}]);return Diagnostics;}();exports.Diagnostics=Diagnostics;Diagnostics.privListener=undefined;/***/},/* 199 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{"default":mod};};Object.defineProperty(exports,"__esModule",{value:true});exports.RestMessageAdapter=exports.RestRequestType=void 0;var bent_1=__importDefault(__webpack_require__(200));var Exports_js_1=__webpack_require__(4);var RestRequestType;(function(RestRequestType){RestRequestType["Get"]="GET";RestRequestType["Post"]="POST";RestRequestType["Delete"]="DELETE";RestRequestType["File"]="file";})(RestRequestType=exports.RestRequestType||(exports.RestRequestType={}));// accept rest operations via request method and return abstracted objects from server response
var RestMessageAdapter=/*#__PURE__*/function(){function RestMessageAdapter(configParams){_classCallCheck(this,RestMessageAdapter);if(!configParams){throw new Exports_js_1.ArgumentNullError("configParams");}this.privHeaders=configParams.headers;this.privIgnoreCache=configParams.ignoreCache;}_createClass(RestMessageAdapter,[{key:"options",set:function set(configParams){this.privHeaders=configParams.headers;this.privIgnoreCache=configParams.ignoreCache;}},{key:"setHeaders",value:function setHeaders(key,value){this.privHeaders[key]=value;}},{key:"request",value:function request(method,uri){var _this142=this;var queryParams=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var body=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var responseReceivedDeferral=new Exports_js_1.Deferred();var requestCommand=method===RestRequestType.File?"POST":method;var handleRestResponse=function handleRestResponse(data){var j=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var d=data;return{data:JSON.stringify(j),headers:JSON.stringify(data.headers),json:j,ok:data.statusCode>=200&&data.statusCode<300,status:data.statusCode,statusText:j.error?j.error.message:d.statusText?d.statusText:d.statusMessage};};var send=function send(postData){var sendRequest=bent_1["default"](uri,requestCommand,_this142.privHeaders,200,201,202,204,400,401,402,403,404);var params=_this142.queryParams(queryParams)===""?"":"?".concat(_this142.queryParams(queryParams));sendRequest(params,postData).then(/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee78(data){var j;return _regeneratorRuntime().wrap(function _callee78$(_context78){while(1)switch(_context78.prev=_context78.next){case 0:if(!(method===RestRequestType.Delete||data.statusCode===204)){_context78.next=4;break;}// No JSON from Delete and reset (204) operations
responseReceivedDeferral.resolve(handleRestResponse(data));_context78.next=14;break;case 4:_context78.prev=4;_context78.next=7;return data.json();case 7:j=_context78.sent;responseReceivedDeferral.resolve(handleRestResponse(data,j));_context78.next=14;break;case 11:_context78.prev=11;_context78.t0=_context78["catch"](4);responseReceivedDeferral.resolve(handleRestResponse(data));case 14:case"end":return _context78.stop();}},_callee78,null,[[4,11]]);}));return function(_x50){return _ref13.apply(this,arguments);};}())["catch"](function(error){responseReceivedDeferral.reject(error);});};if(this.privIgnoreCache){this.privHeaders["Cache-Control"]="no-cache";}if(method===RestRequestType.Post&&body){this.privHeaders["content-type"]="application/json";this.privHeaders["Content-Type"]="application/json";}send(body);return responseReceivedDeferral.promise;}},{key:"queryParams",value:function queryParams(){var params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return Object.keys(params).map(function(k){return encodeURIComponent(k)+"="+encodeURIComponent(params[k]);}).join("&");}}],[{key:"extractHeaderValue",value:function extractHeaderValue(headerKey,headers){var headerValue="";try{var arr=headers.trim().split(/[\r\n]+/);var headerMap={};arr.forEach(function(line){var parts=line.split(": ");var header=parts.shift().toLowerCase();var value=parts.join(": ");headerMap[header]=value;});headerValue=headerMap[headerKey.toLowerCase()];}catch(e){// ignore the error
}return headerValue;}}]);return RestMessageAdapter;}();exports.RestMessageAdapter=RestMessageAdapter;/***/},/* 200 */ /***/function(module,__unused_webpack_exports,__webpack_require__){"use strict";/* global fetch, btoa, Headers */var core=__webpack_require__(201);var StatusError=/*#__PURE__*/function(_Error4){_inherits(StatusError,_Error4);var _super111=_createSuper(StatusError);function StatusError(res){var _this143;_classCallCheck(this,StatusError);for(var _len=arguments.length,params=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){params[_key-1]=arguments[_key];}_this143=_super111.call.apply(_super111,[this].concat(params));if(Error.captureStackTrace){Error.captureStackTrace(_assertThisInitialized(_this143),StatusError);}_this143.name='StatusError';_this143.message=res.statusMessage;_this143.statusCode=res.status;_this143.res=res;_this143.json=res.json.bind(res);_this143.text=res.text.bind(res);_this143.arrayBuffer=res.arrayBuffer.bind(res);var buffer;var get=function get(){if(!buffer)buffer=_this143.arrayBuffer();return buffer;};Object.defineProperty(_assertThisInitialized(_this143),'responseBody',{get:get});// match Node.js headers object
_this143.headers={};var _iterator14=_createForOfIteratorHelper(res.headers.entries()),_step14;try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var _step14$value=_slicedToArray(_step14.value,2),key=_step14$value[0],value=_step14$value[1];_this143.headers[key.toLowerCase()]=value;}}catch(err){_iterator14.e(err);}finally{_iterator14.f();}return _this143;}return _createClass(StatusError);}(/*#__PURE__*/_wrapNativeSuper(Error));var mkrequest=function mkrequest(statusCodes,method,encoding,headers,baseurl){return/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee79(_url,body){var _headers,parsed,resp,_args79=arguments;return _regeneratorRuntime().wrap(function _callee79$(_context79){while(1)switch(_context79.prev=_context79.next){case 0:_headers=_args79.length>2&&_args79[2]!==undefined?_args79[2]:{};_url=baseurl+(_url||'');parsed=new URL(_url);if(!headers)headers={};if(parsed.username){headers.Authorization='Basic '+btoa(parsed.username+':'+parsed.password);parsed=new URL(parsed.protocol+'//'+parsed.host+parsed.pathname+parsed.search);}if(!(parsed.protocol!=='https:'&&parsed.protocol!=='http:')){_context79.next=7;break;}throw new Error("Unknown protocol, ".concat(parsed.protocol));case 7:if(!body){_context79.next=17;break;}if(!(body instanceof ArrayBuffer||ArrayBuffer.isView(body)||typeof body==='string')){_context79.next=11;break;}_context79.next=17;break;case 11:if(!(_typeof(body)==='object')){_context79.next=16;break;}body=JSON.stringify(body);headers['Content-Type']='application/json';_context79.next=17;break;case 16:throw new Error('Unknown body type.');case 17:_headers=new Headers(_objectSpread(_objectSpread({},headers||{}),_headers));_context79.next=20;return fetch(parsed,{method:method,headers:_headers,body:body});case 20:resp=_context79.sent;resp.statusCode=resp.status;if(statusCodes.has(resp.status)){_context79.next=24;break;}throw new StatusError(resp);case 24:if(!(encoding==='json')){_context79.next=28;break;}return _context79.abrupt("return",resp.json());case 28:if(!(encoding==='buffer')){_context79.next=32;break;}return _context79.abrupt("return",resp.arrayBuffer());case 32:if(!(encoding==='string')){_context79.next=36;break;}return _context79.abrupt("return",resp.text());case 36:return _context79.abrupt("return",resp);case 37:case"end":return _context79.stop();}},_callee79);}));return function(_x51,_x52){return _ref14.apply(this,arguments);};}();};module.exports=core(mkrequest);/***/},/* 201 */ /***/function(module){"use strict";var encodings=new Set(['json','buffer','string']);module.exports=function(mkrequest){return function(){var statusCodes=new Set();var method;var encoding;var headers;var baseurl='';for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}args.forEach(function(arg){if(typeof arg==='string'){if(arg.toUpperCase()===arg){if(method){var msg="Can't set method to ".concat(arg,", already set to ").concat(method,".");throw new Error(msg);}else{method=arg;}}else if(arg.startsWith('http:')||arg.startsWith('https:')){baseurl=arg;}else{if(encodings.has(arg)){encoding=arg;}else{throw new Error("Unknown encoding, ".concat(arg));}}}else if(typeof arg==='number'){statusCodes.add(arg);}else if(_typeof(arg)==='object'){if(Array.isArray(arg)||arg instanceof Set){arg.forEach(function(code){return statusCodes.add(code);});}else{if(headers){throw new Error('Cannot set headers twice.');}headers=arg;}}else{throw new Error("Unknown type: ".concat(_typeof(arg)));}});if(!method)method='GET';if(statusCodes.size===0){statusCodes.add(200);}return mkrequest(statusCodes,method,encoding,headers,baseurl);};};/***/},/* 202 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.RestConfigBase=void 0;var RestConfigBase=/*#__PURE__*/function(){function RestConfigBase(){_classCallCheck(this,RestConfigBase);}_createClass(RestConfigBase,null,[{key:"requestOptions",get:function get(){return RestConfigBase.privDefaultRequestOptions;}},{key:"configParams",get:function get(){return RestConfigBase.privDefaultParams;}},{key:"restErrors",get:function get(){return RestConfigBase.privRestErrors;}}]);return RestConfigBase;}();exports.RestConfigBase=RestConfigBase;RestConfigBase.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:false,timeout:10000};RestConfigBase.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."};RestConfigBase.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};/***/},/* 203 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.VoiceProfileConnectionFactory=exports.SpeakerRecognitionConnectionFactory=void 0;/* eslint-disable max-classes-per-file */var Exports_js_1=__webpack_require__(60);var Exports_js_2=__webpack_require__(79);var ConnectionFactoryBase_js_1=__webpack_require__(134);var Exports_js_3=__webpack_require__(2);var HeaderNames_js_1=__webpack_require__(54);var SpeakerRecognitionConnectionFactoryBase=/*#__PURE__*/function(_ConnectionFactoryBas4){_inherits(SpeakerRecognitionConnectionFactoryBase,_ConnectionFactoryBas4);var _super112=_createSuper(SpeakerRecognitionConnectionFactoryBase);function SpeakerRecognitionConnectionFactoryBase(){_classCallCheck(this,SpeakerRecognitionConnectionFactoryBase);return _super112.apply(this,arguments);}_createClass(SpeakerRecognitionConnectionFactoryBase,[{key:"create",value:function create(config,authInfo,endpointPath,connectionId){var endpoint=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint);if(!endpoint){var region=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region);var hostSuffix=ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region);var host=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,"wss://".concat(region,".spr-frontend.speech").concat(hostSuffix));var scenario=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");endpoint="".concat(host,"/speaker/ws/").concat(this.scenarioToPath(scenario),"/").concat(endpointPath);}var queryParams={format:"simple",language:config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(config,queryParams,endpoint);var headers={};if(authInfo.token!==undefined&&authInfo.token!==""){headers[authInfo.headerName]=authInfo.token;}headers[HeaderNames_js_1.HeaderNames.ConnectionId]=connectionId;headers[HeaderNames_js_1.HeaderNames.SpIDAuthKey]=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Key);config.parameters.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Url,endpoint);var enableCompression=config.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new Exports_js_1.WebsocketConnection(endpoint,queryParams,headers,new Exports_js_3.WebsocketMessageFormatter(),Exports_js_1.ProxyInfo.fromRecognizerConfig(config),enableCompression,connectionId);}},{key:"scenarioToPath",value:function scenarioToPath(mode){switch(mode){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent";}}}]);return SpeakerRecognitionConnectionFactoryBase;}(ConnectionFactoryBase_js_1.ConnectionFactoryBase);var SpeakerRecognitionConnectionFactory=/*#__PURE__*/function(_SpeakerRecognitionCo){_inherits(SpeakerRecognitionConnectionFactory,_SpeakerRecognitionCo);var _super113=_createSuper(SpeakerRecognitionConnectionFactory);function SpeakerRecognitionConnectionFactory(){_classCallCheck(this,SpeakerRecognitionConnectionFactory);return _super113.apply(this,arguments);}_createClass(SpeakerRecognitionConnectionFactory,[{key:"create",value:function create(config,authInfo,connectionId){return _get(_getPrototypeOf(SpeakerRecognitionConnectionFactory.prototype),"create",this).call(this,config,authInfo,"recognition",connectionId);}}]);return SpeakerRecognitionConnectionFactory;}(SpeakerRecognitionConnectionFactoryBase);exports.SpeakerRecognitionConnectionFactory=SpeakerRecognitionConnectionFactory;var VoiceProfileConnectionFactory=/*#__PURE__*/function(_SpeakerRecognitionCo2){_inherits(VoiceProfileConnectionFactory,_SpeakerRecognitionCo2);var _super114=_createSuper(VoiceProfileConnectionFactory);function VoiceProfileConnectionFactory(){_classCallCheck(this,VoiceProfileConnectionFactory);return _super114.apply(this,arguments);}_createClass(VoiceProfileConnectionFactory,[{key:"create",value:function create(config,authInfo,connectionId){return _get(_getPrototypeOf(VoiceProfileConnectionFactory.prototype),"create",this).call(this,config,authInfo,"profile",connectionId);}}]);return VoiceProfileConnectionFactory;}(SpeakerRecognitionConnectionFactoryBase);exports.VoiceProfileConnectionFactory=VoiceProfileConnectionFactory;/***/},/* 204 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */Object.defineProperty(exports,"__esModule",{value:true});exports.RecognitionEndedEvent=exports.RecognitionCompletionStatus=exports.RecognitionStartedEvent=exports.ConnectingToServiceEvent=exports.ListeningStartedEvent=exports.RecognitionTriggeredEvent=exports.SpeechRecognitionEvent=void 0;var Exports_js_1=__webpack_require__(4);var SpeechRecognitionEvent=/*#__PURE__*/function(_Exports_js_1$Platfor2){_inherits(SpeechRecognitionEvent,_Exports_js_1$Platfor2);var _super115=_createSuper(SpeechRecognitionEvent);function SpeechRecognitionEvent(eventName,requestId,sessionId){var _this144;var eventType=arguments.length>3&&arguments[3]!==undefined?arguments[3]:Exports_js_1.EventType.Info;_classCallCheck(this,SpeechRecognitionEvent);_this144=_super115.call(this,eventName,eventType);_this144.privRequestId=requestId;_this144.privSessionId=sessionId;return _this144;}_createClass(SpeechRecognitionEvent,[{key:"requestId",get:function get(){return this.privRequestId;}},{key:"sessionId",get:function get(){return this.privSessionId;}}]);return SpeechRecognitionEvent;}(Exports_js_1.PlatformEvent);exports.SpeechRecognitionEvent=SpeechRecognitionEvent;var RecognitionTriggeredEvent=/*#__PURE__*/function(_SpeechRecognitionEve2){_inherits(RecognitionTriggeredEvent,_SpeechRecognitionEve2);var _super116=_createSuper(RecognitionTriggeredEvent);function RecognitionTriggeredEvent(requestId,sessionId,audioSourceId,audioNodeId){var _this145;_classCallCheck(this,RecognitionTriggeredEvent);_this145=_super116.call(this,"RecognitionTriggeredEvent",requestId,sessionId);_this145.privAudioSourceId=audioSourceId;_this145.privAudioNodeId=audioNodeId;return _this145;}_createClass(RecognitionTriggeredEvent,[{key:"audioSourceId",get:function get(){return this.privAudioSourceId;}},{key:"audioNodeId",get:function get(){return this.privAudioNodeId;}}]);return RecognitionTriggeredEvent;}(SpeechRecognitionEvent);exports.RecognitionTriggeredEvent=RecognitionTriggeredEvent;var ListeningStartedEvent=/*#__PURE__*/function(_SpeechRecognitionEve3){_inherits(ListeningStartedEvent,_SpeechRecognitionEve3);var _super117=_createSuper(ListeningStartedEvent);function ListeningStartedEvent(requestId,sessionId,audioSourceId,audioNodeId){var _this146;_classCallCheck(this,ListeningStartedEvent);_this146=_super117.call(this,"ListeningStartedEvent",requestId,sessionId);_this146.privAudioSourceId=audioSourceId;_this146.privAudioNodeId=audioNodeId;return _this146;}_createClass(ListeningStartedEvent,[{key:"audioSourceId",get:function get(){return this.privAudioSourceId;}},{key:"audioNodeId",get:function get(){return this.privAudioNodeId;}}]);return ListeningStartedEvent;}(SpeechRecognitionEvent);exports.ListeningStartedEvent=ListeningStartedEvent;var ConnectingToServiceEvent=/*#__PURE__*/function(_SpeechRecognitionEve4){_inherits(ConnectingToServiceEvent,_SpeechRecognitionEve4);var _super118=_createSuper(ConnectingToServiceEvent);function ConnectingToServiceEvent(requestId,authFetchEventid,sessionId){var _this147;_classCallCheck(this,ConnectingToServiceEvent);_this147=_super118.call(this,"ConnectingToServiceEvent",requestId,sessionId);_this147.privAuthFetchEventid=authFetchEventid;return _this147;}_createClass(ConnectingToServiceEvent,[{key:"authFetchEventid",get:function get(){return this.privAuthFetchEventid;}}]);return ConnectingToServiceEvent;}(SpeechRecognitionEvent);exports.ConnectingToServiceEvent=ConnectingToServiceEvent;var RecognitionStartedEvent=/*#__PURE__*/function(_SpeechRecognitionEve5){_inherits(RecognitionStartedEvent,_SpeechRecognitionEve5);var _super119=_createSuper(RecognitionStartedEvent);function RecognitionStartedEvent(requestId,audioSourceId,audioNodeId,authFetchEventId,sessionId){var _this148;_classCallCheck(this,RecognitionStartedEvent);_this148=_super119.call(this,"RecognitionStartedEvent",requestId,sessionId);_this148.privAudioSourceId=audioSourceId;_this148.privAudioNodeId=audioNodeId;_this148.privAuthFetchEventId=authFetchEventId;return _this148;}_createClass(RecognitionStartedEvent,[{key:"audioSourceId",get:function get(){return this.privAudioSourceId;}},{key:"audioNodeId",get:function get(){return this.privAudioNodeId;}},{key:"authFetchEventId",get:function get(){return this.privAuthFetchEventId;}}]);return RecognitionStartedEvent;}(SpeechRecognitionEvent);exports.RecognitionStartedEvent=RecognitionStartedEvent;var RecognitionCompletionStatus;(function(RecognitionCompletionStatus){RecognitionCompletionStatus[RecognitionCompletionStatus["Success"]=0]="Success";RecognitionCompletionStatus[RecognitionCompletionStatus["AudioSourceError"]=1]="AudioSourceError";RecognitionCompletionStatus[RecognitionCompletionStatus["AudioSourceTimeout"]=2]="AudioSourceTimeout";RecognitionCompletionStatus[RecognitionCompletionStatus["AuthTokenFetchError"]=3]="AuthTokenFetchError";RecognitionCompletionStatus[RecognitionCompletionStatus["AuthTokenFetchTimeout"]=4]="AuthTokenFetchTimeout";RecognitionCompletionStatus[RecognitionCompletionStatus["UnAuthorized"]=5]="UnAuthorized";RecognitionCompletionStatus[RecognitionCompletionStatus["ConnectTimeout"]=6]="ConnectTimeout";RecognitionCompletionStatus[RecognitionCompletionStatus["ConnectError"]=7]="ConnectError";RecognitionCompletionStatus[RecognitionCompletionStatus["ClientRecognitionActivityTimeout"]=8]="ClientRecognitionActivityTimeout";RecognitionCompletionStatus[RecognitionCompletionStatus["UnknownError"]=9]="UnknownError";})(RecognitionCompletionStatus=exports.RecognitionCompletionStatus||(exports.RecognitionCompletionStatus={}));var RecognitionEndedEvent=/*#__PURE__*/function(_SpeechRecognitionEve6){_inherits(RecognitionEndedEvent,_SpeechRecognitionEve6);var _super120=_createSuper(RecognitionEndedEvent);function RecognitionEndedEvent(requestId,audioSourceId,audioNodeId,authFetchEventId,sessionId,serviceTag,status,error){var _this149;_classCallCheck(this,RecognitionEndedEvent);_this149=_super120.call(this,"RecognitionEndedEvent",requestId,sessionId,status===RecognitionCompletionStatus.Success?Exports_js_1.EventType.Info:Exports_js_1.EventType.Error);_this149.privAudioSourceId=audioSourceId;_this149.privAudioNodeId=audioNodeId;_this149.privAuthFetchEventId=authFetchEventId;_this149.privStatus=status;_this149.privError=error;_this149.privServiceTag=serviceTag;return _this149;}_createClass(RecognitionEndedEvent,[{key:"audioSourceId",get:function get(){return this.privAudioSourceId;}},{key:"audioNodeId",get:function get(){return this.privAudioNodeId;}},{key:"authFetchEventId",get:function get(){return this.privAuthFetchEventId;}},{key:"serviceTag",get:function get(){return this.privServiceTag;}},{key:"status",get:function get(){return this.privStatus;}},{key:"error",get:function get(){return this.privError;}}]);return RecognitionEndedEvent;}(SpeechRecognitionEvent);exports.RecognitionEndedEvent=RecognitionEndedEvent;/***/},/* 205 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceRecognizerBase=void 0;var Exports_js_1=__webpack_require__(60);var Exports_js_2=__webpack_require__(4);var Exports_js_3=__webpack_require__(79);var Exports_js_4=__webpack_require__(2);var SpeechConnectionMessage_Internal_js_1=__webpack_require__(206);var ServiceRecognizerBase=/*#__PURE__*/function(){function ServiceRecognizerBase(authentication,connectionFactory,audioSource,recognizerConfig,recognizer){var _this150=this;_classCallCheck(this,ServiceRecognizerBase);// A promise for a configured connection.
// Do not consume directly, call fetchConnection instead.
this.privConnectionConfigurationPromise=undefined;// A promise for a connection, but one that has not had the speech context sent yet.
// Do not consume directly, call fetchConnection instead.
this.privConnectionPromise=undefined;this.privSetTimeout=setTimeout;this.privIsLiveAudio=false;this.privAverageBytesPerMs=0;this.privEnableSpeakerId=false;this.privExpectContentAssessmentResponse=false;this.recognizeOverride=undefined;this.recognizeSpeaker=undefined;this.disconnectOverride=undefined;this.receiveMessageOverride=undefined;this.sendPrePayloadJSONOverride=undefined;this.postConnectImplOverride=undefined;this.configConnectionOverride=undefined;this.handleSpeechPhraseMessage=undefined;this.handleSpeechHypothesisMessage=undefined;if(!authentication){throw new Exports_js_2.ArgumentNullError("authentication");}if(!connectionFactory){throw new Exports_js_2.ArgumentNullError("connectionFactory");}if(!audioSource){throw new Exports_js_2.ArgumentNullError("audioSource");}if(!recognizerConfig){throw new Exports_js_2.ArgumentNullError("recognizerConfig");}this.privEnableSpeakerId=recognizerConfig.isSpeakerDiarizationEnabled;this.privMustReportEndOfStream=false;this.privAuthentication=authentication;this.privConnectionFactory=connectionFactory;this.privAudioSource=audioSource;this.privRecognizerConfig=recognizerConfig;this.privIsDisposed=false;this.privRecognizer=recognizer;this.privRequestSession=new Exports_js_4.RequestSession(this.privAudioSource.id());this.privConnectionEvents=new Exports_js_2.EventSource();this.privServiceEvents=new Exports_js_2.EventSource();this.privDynamicGrammar=new Exports_js_4.DynamicGrammarBuilder();this.privSpeechContext=new Exports_js_4.SpeechContext(this.privDynamicGrammar);this.privAgentConfig=new Exports_js_4.AgentConfig();var webWorkerLoadType=this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.WebWorkerLoadType,"on").toLowerCase();if(webWorkerLoadType==="on"&&typeof Blob!=="undefined"&&typeof Worker!=="undefined"){this.privSetTimeout=Exports_js_2.Timeout.setTimeout;}else{if(typeof window!=="undefined"){// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
this.privSetTimeout=window.setTimeout.bind(window);}if(typeof globalThis!=="undefined"){// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
this.privSetTimeout=globalThis.setTimeout.bind(globalThis);}}this.connectionEvents.attach(function(connectionEvent){if(connectionEvent.name==="ConnectionClosedEvent"){var connectionClosedEvent=connectionEvent;if(connectionClosedEvent.statusCode===1003||connectionClosedEvent.statusCode===1007||connectionClosedEvent.statusCode===1002||connectionClosedEvent.statusCode===4000||_this150.privRequestSession.numConnectionAttempts>_this150.privRecognizerConfig.maxRetryCount){void _this150.cancelRecognitionLocal(Exports_js_3.CancellationReason.Error,connectionClosedEvent.statusCode===1007?Exports_js_3.CancellationErrorCode.BadRequestParameters:Exports_js_3.CancellationErrorCode.ConnectionFailure,"".concat(connectionClosedEvent.reason," websocket error code: ").concat(connectionClosedEvent.statusCode));}}});if(this.privEnableSpeakerId){this.privDiarizationSessionId=Exports_js_2.createNoDashGuid();}this.setLanguageIdJson();this.setOutputDetailLevelJson();}_createClass(ServiceRecognizerBase,[{key:"setTranslationJson",value:function setTranslationJson(){var targetLanguages=this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages,undefined);if(targetLanguages!==undefined){var languages=targetLanguages.split(",");var translationVoice=this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationVoice,undefined);var action=translationVoice!==undefined?"Synthesize":"None";this.privSpeechContext.setSection("translation",{onSuccess:{action:action},output:{interimResults:{mode:"Always"}},targetLanguages:languages});if(translationVoice!==undefined){var languageToVoiceMap={};var _iterator15=_createForOfIteratorHelper(languages),_step15;try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var lang=_step15.value;languageToVoiceMap[lang]=translationVoice;}}catch(err){_iterator15.e(err);}finally{_iterator15.f();}this.privSpeechContext.setSection("synthesis",{defaultVoices:languageToVoiceMap});}}}},{key:"setSpeechSegmentationTimeoutJson",value:function setSpeechSegmentationTimeoutJson(){var speechSegmentationSilenceTimeoutMs=this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.Speech_SegmentationSilenceTimeoutMs,undefined);var speechSegmentationMaximumTimeMs=this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.Speech_SegmentationMaximumTimeMs,undefined);var speechSegmentationStrategy=this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.Speech_SegmentationStrategy,undefined);var segmentation={segmentation:{mode:""}};var configuredSegment=false;if(speechSegmentationStrategy!==undefined){configuredSegment=true;var segMode="";switch(speechSegmentationStrategy.toLowerCase()){case"default":break;case"time":segMode="Custom";break;case"semantic":segMode="Semantic";break;}segmentation.segmentation.mode=segMode;}if(speechSegmentationSilenceTimeoutMs!==undefined){configuredSegment=true;var segmentationSilenceTimeoutMs=parseInt(speechSegmentationSilenceTimeoutMs,10);segmentation.segmentation.mode="Custom";segmentation.segmentation.segmentationSilenceTimeoutMs=segmentationSilenceTimeoutMs;}if(speechSegmentationMaximumTimeMs!==undefined){configuredSegment=true;var segmentationMaximumTimeMs=parseInt(speechSegmentationMaximumTimeMs,10);segmentation.segmentation.mode="Custom";segmentation.segmentation.segmentationForcedTimeoutMs=segmentationMaximumTimeMs;}if(configuredSegment){var recoMode=this.recognitionMode===Exports_js_4.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===Exports_js_4.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE";var phraseDetection=this.privSpeechContext.getSection("phraseDetection");phraseDetection.mode=recoMode;phraseDetection[recoMode]=segmentation;this.privSpeechContext.setSection("phraseDetection",phraseDetection);}}},{key:"setLanguageIdJson",value:function setLanguageIdJson(){var phraseDetection=this.privSpeechContext.getSection("phraseDetection");if(this.privRecognizerConfig.autoDetectSourceLanguages!==undefined){var sourceLanguages=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");var speechContextLidMode;if(this.privRecognizerConfig.languageIdMode==="Continuous"){speechContextLidMode="DetectContinuous";}else{// recognizerConfig.languageIdMode === "AtStart"
speechContextLidMode="DetectAtAudioStart";}this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:sourceLanguages,mode:speechContextLidMode,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}});this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});var customModels=this.privRecognizerConfig.sourceLanguageModels;if(customModels!==undefined){phraseDetection.customModels=customModels;phraseDetection.onInterim={action:"None"};phraseDetection.onSuccess={action:"None"};}}var targetLanguages=this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_TranslationToLanguages,undefined);if(targetLanguages!==undefined){phraseDetection.onInterim={action:"Translate"};phraseDetection.onSuccess={action:"Translate"};this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}});}this.privSpeechContext.setSection("phraseDetection",phraseDetection);}},{key:"setOutputDetailLevelJson",value:function setOutputDetailLevelJson(){if(this.privEnableSpeakerId){var requestWordLevelTimestamps=this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase();if(requestWordLevelTimestamps==="true"){this.privSpeechContext.setWordLevelTimings();}else{var outputFormat=this.privRecognizerConfig.parameters.getProperty(Exports_js_4.OutputFormatPropertyName,Exports_js_3.OutputFormat[Exports_js_3.OutputFormat.Simple]).toLowerCase();if(outputFormat===Exports_js_3.OutputFormat[Exports_js_3.OutputFormat.Detailed].toLocaleLowerCase()){this.privSpeechContext.setDetailedOutputFormat();}}}}},{key:"isSpeakerDiarizationEnabled",get:function get(){return this.privEnableSpeakerId;}},{key:"audioSource",get:function get(){return this.privAudioSource;}},{key:"speechContext",get:function get(){return this.privSpeechContext;}},{key:"dynamicGrammar",get:function get(){return this.privDynamicGrammar;}},{key:"agentConfig",get:function get(){return this.privAgentConfig;}},{key:"conversationTranslatorToken",set:function set(token){this.privRecognizerConfig.parameters.setProperty(Exports_js_3.PropertyId.ConversationTranslator_Token,token);}},{key:"voiceProfileType",set:function set(type){this.privRecognizerConfig.parameters.setProperty(Exports_js_3.PropertyId.SpeechServiceConnection_SpeakerIdMode,type);}},{key:"authentication",set:function set(auth){this.privAuthentication=auth;}},{key:"isDisposed",value:function isDisposed(){return this.privIsDisposed;}},{key:"dispose",value:function(){var _dispose13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee80(reason){var connection;return _regeneratorRuntime().wrap(function _callee80$(_context80){while(1)switch(_context80.prev=_context80.next){case 0:this.privIsDisposed=true;if(!(this.privConnectionConfigurationPromise!==undefined)){_context80.next=13;break;}_context80.prev=2;_context80.next=5;return this.privConnectionConfigurationPromise;case 5:connection=_context80.sent;_context80.next=8;return connection.dispose(reason);case 8:_context80.next=13;break;case 10:_context80.prev=10;_context80.t0=_context80["catch"](2);return _context80.abrupt("return");case 13:case"end":return _context80.stop();}},_callee80,this,[[2,10]]);}));function dispose(_x53){return _dispose13.apply(this,arguments);}return dispose;}()},{key:"connectionEvents",get:function get(){return this.privConnectionEvents;}},{key:"serviceEvents",get:function get(){return this.privServiceEvents;}},{key:"recognitionMode",get:function get(){return this.privRecognizerConfig.recognitionMode;}},{key:"recognize",value:function(){var _recognize=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee82(recoMode,successCallback,errorCallBack){var _this151=this;var conPromise,audioNode,audioStreamNode,format,deviceInfo,sessionStartEventArgs,audioSendPromise;return _regeneratorRuntime().wrap(function _callee82$(_context82){while(1)switch(_context82.prev=_context82.next){case 0:if(!(this.recognizeOverride!==undefined)){_context82.next=4;break;}_context82.next=3;return this.recognizeOverride(recoMode,successCallback,errorCallBack);case 3:return _context82.abrupt("return");case 4:// Clear the existing configuration promise to force a re-transmission of config and context.
this.privConnectionConfigurationPromise=undefined;this.privRecognizerConfig.recognitionMode=recoMode;this.setSpeechSegmentationTimeoutJson();this.setTranslationJson();this.privSuccessCallback=successCallback;this.privErrorCallback=errorCallBack;this.privRequestSession.startNewRecognition();this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);// Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
conPromise=this.connectImpl();_context82.prev=13;_context82.next=16;return this.audioSource.attach(this.privRequestSession.audioNodeId);case 16:audioStreamNode=_context82.sent;_context82.next=19;return this.audioSource.format;case 19:format=_context82.sent;_context82.next=22;return this.audioSource.deviceInfo;case 22:deviceInfo=_context82.sent;this.privIsLiveAudio=deviceInfo.type&&deviceInfo.type===Exports_js_4.type.Microphones;audioNode=new Exports_js_1.ReplayableAudioNode(audioStreamNode,format.avgBytesPerSec);_context82.next=27;return this.privRequestSession.onAudioSourceAttachCompleted(audioNode,false);case 27:this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:deviceInfo};_context82.next=35;break;case 30:_context82.prev=30;_context82.t0=_context82["catch"](13);_context82.next=34;return this.privRequestSession.onStopRecognizing();case 34:throw _context82.t0;case 35:_context82.prev=35;_context82.next=38;return conPromise;case 38:_context82.next=45;break;case 40:_context82.prev=40;_context82.t1=_context82["catch"](35);_context82.next=44;return this.cancelRecognitionLocal(Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.ConnectionFailure,_context82.t1);case 44:return _context82.abrupt("return");case 45:sessionStartEventArgs=new Exports_js_3.SessionEventArgs(this.privRequestSession.sessionId);if(!!this.privRecognizer.sessionStarted){this.privRecognizer.sessionStarted(this.privRecognizer,sessionStartEventArgs);}void this.receiveMessage();audioSendPromise=this.sendAudio(audioNode);audioSendPromise["catch"](/*#__PURE__*/function(){var _ref15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee81(error){return _regeneratorRuntime().wrap(function _callee81$(_context81){while(1)switch(_context81.prev=_context81.next){case 0:_context81.next=2;return _this151.cancelRecognitionLocal(Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.RuntimeError,error);case 2:case"end":return _context81.stop();}},_callee81);}));return function(_x57){return _ref15.apply(this,arguments);};}());return _context82.abrupt("return");case 51:case"end":return _context82.stop();}},_callee82,this,[[13,30],[35,40]]);}));function recognize(_x54,_x55,_x56){return _recognize.apply(this,arguments);}return recognize;}()},{key:"stopRecognizing",value:function(){var _stopRecognizing=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee83(){return _regeneratorRuntime().wrap(function _callee83$(_context83){while(1)switch(_context83.prev=_context83.next){case 0:if(!this.privRequestSession.isRecognizing){_context83.next=14;break;}_context83.prev=1;_context83.next=4;return this.audioSource.turnOff();case 4:_context83.next=6;return this.sendFinalAudio();case 6:_context83.next=8;return this.privRequestSession.onStopRecognizing();case 8:_context83.next=10;return this.privRequestSession.turnCompletionPromise;case 10:_context83.prev=10;_context83.next=13;return this.privRequestSession.dispose();case 13:return _context83.finish(10);case 14:return _context83.abrupt("return");case 15:case"end":return _context83.stop();}},_callee83,this,[[1,,10,14]]);}));function stopRecognizing(){return _stopRecognizing.apply(this,arguments);}return stopRecognizing;}()},{key:"connect",value:function(){var _connect=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee84(){return _regeneratorRuntime().wrap(function _callee84$(_context84){while(1)switch(_context84.prev=_context84.next){case 0:_context84.next=2;return this.connectImpl();case 2:return _context84.abrupt("return",Promise.resolve());case 3:case"end":return _context84.stop();}},_callee84,this);}));function connect(){return _connect.apply(this,arguments);}return connect;}()},{key:"connectAsync",value:function connectAsync(cb,err){this.connectImpl().then(function(){try{if(!!cb){cb();}}catch(e){if(!!err){err(e);}}},function(reason){try{if(!!err){err(reason);}/* eslint-disable no-empty */}catch(error){}});}},{key:"disconnect",value:function(){var _disconnect=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee85(){return _regeneratorRuntime().wrap(function _callee85$(_context85){while(1)switch(_context85.prev=_context85.next){case 0:_context85.next=2;return this.cancelRecognitionLocal(Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.NoError,"Disconnecting");case 2:if(!(this.disconnectOverride!==undefined)){_context85.next=5;break;}_context85.next=5;return this.disconnectOverride();case 5:if(!(this.privConnectionPromise!==undefined)){_context85.next=15;break;}_context85.prev=6;_context85.next=9;return this.privConnectionPromise;case 9:_context85.next=11;return _context85.sent.dispose();case 11:_context85.next=15;break;case 13:_context85.prev=13;_context85.t0=_context85["catch"](6);case 15:this.privConnectionPromise=undefined;case 16:case"end":return _context85.stop();}},_callee85,this,[[6,13]]);}));function disconnect(){return _disconnect.apply(this,arguments);}return disconnect;}()// eslint-disable-next-line @typescript-eslint/no-unused-vars
},{key:"sendMessage",value:function sendMessage(message){return;}},{key:"sendNetworkMessage",value:function(){var _sendNetworkMessage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee86(path,payload){var type,contentType,connection;return _regeneratorRuntime().wrap(function _callee86$(_context86){while(1)switch(_context86.prev=_context86.next){case 0:type=typeof payload==="string"?Exports_js_2.MessageType.Text:Exports_js_2.MessageType.Binary;contentType=typeof payload==="string"?"application/json":"";_context86.next=4;return this.fetchConnection();case 4:connection=_context86.sent;return _context86.abrupt("return",connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(type,path,this.privRequestSession.requestId,contentType,payload)));case 6:case"end":return _context86.stop();}},_callee86,this);}));function sendNetworkMessage(_x58,_x59){return _sendNetworkMessage.apply(this,arguments);}return sendNetworkMessage;}()},{key:"activityTemplate",get:function get(){return this.privActivityTemplate;},set:function set(messagePayload){this.privActivityTemplate=messagePayload;}},{key:"expectContentAssessmentResponse",set:function set(value){this.privExpectContentAssessmentResponse=value;}},{key:"sendTelemetryData",value:function(){var _sendTelemetryData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee87(){var telemetryData,connection;return _regeneratorRuntime().wrap(function _callee87$(_context87){while(1)switch(_context87.prev=_context87.next){case 0:telemetryData=this.privRequestSession.getTelemetry();if(!(ServiceRecognizerBase.telemetryDataEnabled!==true||this.privIsDisposed||null===telemetryData)){_context87.next=3;break;}return _context87.abrupt("return");case 3:if(!!ServiceRecognizerBase.telemetryData){try{ServiceRecognizerBase.telemetryData(telemetryData);/* eslint-disable no-empty */}catch(_unused2){}}_context87.next=6;return this.fetchConnection();case 6:connection=_context87.sent;_context87.next=9;return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",telemetryData));case 9:case"end":return _context87.stop();}},_callee87,this);}));function sendTelemetryData(){return _sendTelemetryData.apply(this,arguments);}return sendTelemetryData;}()// Cancels recognition.
},{key:"cancelRecognitionLocal",value:function(){var _cancelRecognitionLocal=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee88(cancellationReason,errorCode,error){return _regeneratorRuntime().wrap(function _callee88$(_context88){while(1)switch(_context88.prev=_context88.next){case 0:if(!this.privRequestSession.isRecognizing){_context88.next=4;break;}_context88.next=3;return this.privRequestSession.onStopRecognizing();case 3:this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,cancellationReason,errorCode,error);case 4:case"end":return _context88.stop();}},_callee88,this);}));function cancelRecognitionLocal(_x60,_x61,_x62){return _cancelRecognitionLocal.apply(this,arguments);}return cancelRecognitionLocal;}()},{key:"receiveMessage",value:function(){var _receiveMessage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee89(){var connection,message,connectionMessage,speechStartDetected,speechStartEventArgs,json,speechStopDetected,speechStopEventArgs,sessionStopEventArgs;return _regeneratorRuntime().wrap(function _callee89$(_context89){while(1)switch(_context89.prev=_context89.next){case 0:_context89.prev=0;if(!this.privIsDisposed){_context89.next=3;break;}return _context89.abrupt("return");case 3:_context89.next=5;return this.fetchConnection();case 5:connection=_context89.sent;_context89.next=8;return connection.read();case 8:message=_context89.sent;if(!(this.receiveMessageOverride!==undefined)){_context89.next=11;break;}return _context89.abrupt("return",this.receiveMessageOverride());case 11:if(message){_context89.next=13;break;}return _context89.abrupt("return",this.receiveMessage());case 13:this.privServiceHasSentMessage=true;connectionMessage=SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage.fromConnectionMessage(message);if(!(connectionMessage.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())){_context89.next=55;break;}_context89.t0=connectionMessage.path.toLowerCase();_context89.next=_context89.t0==="turn.start"?19:_context89.t0==="speech.startdetected"?22:_context89.t0==="speech.enddetected"?26:_context89.t0==="turn.end"?31:51;break;case 19:this.privMustReportEndOfStream=true;this.privRequestSession.onServiceTurnStartResponse();return _context89.abrupt("break",55);case 22:speechStartDetected=Exports_js_4.SpeechDetected.fromJSON(connectionMessage.textBody,this.privRequestSession.currentTurnAudioOffset);speechStartEventArgs=new Exports_js_3.RecognitionEventArgs(speechStartDetected.Offset,this.privRequestSession.sessionId);if(!!this.privRecognizer.speechStartDetected){this.privRecognizer.speechStartDetected(this.privRecognizer,speechStartEventArgs);}return _context89.abrupt("break",55);case 26:if(connectionMessage.textBody.length>0){json=connectionMessage.textBody;}else{// If the request was empty, the JSON returned is empty.
json="{ Offset: 0 }";}speechStopDetected=Exports_js_4.SpeechDetected.fromJSON(json,this.privRequestSession.currentTurnAudioOffset);speechStopEventArgs=new Exports_js_3.RecognitionEventArgs(speechStopDetected.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);if(!!this.privRecognizer.speechEndDetected){this.privRecognizer.speechEndDetected(this.privRecognizer,speechStopEventArgs);}return _context89.abrupt("break",55);case 31:_context89.next=33;return this.sendTelemetryData();case 33:if(!(this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream)){_context89.next=37;break;}this.privMustReportEndOfStream=false;_context89.next=37;return this.cancelRecognitionLocal(Exports_js_3.CancellationReason.EndOfStream,Exports_js_3.CancellationErrorCode.NoError,undefined);case 37:sessionStopEventArgs=new Exports_js_3.SessionEventArgs(this.privRequestSession.sessionId);_context89.next=40;return this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition);case 40:if(!(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)){_context89.next=45;break;}if(!!this.privRecognizer.sessionStopped){this.privRecognizer.sessionStopped(this.privRecognizer,sessionStopEventArgs);}return _context89.abrupt("return");case 45:_context89.next=47;return this.fetchConnection();case 47:connection=_context89.sent;_context89.next=50;return this.sendPrePayloadJSON(connection);case 50:return _context89.abrupt("break",55);case 51:_context89.next=53;return this.processTypeSpecificMessages(connectionMessage);case 53:if(_context89.sent){_context89.next=55;break;}// here are some messages that the derived class has not processed, dispatch them to connect class
if(!!this.privServiceEvents){this.serviceEvents.onEvent(new Exports_js_2.ServiceEvent(connectionMessage.path.toLowerCase(),connectionMessage.textBody));}case 55:return _context89.abrupt("return",this.receiveMessage());case 58:_context89.prev=58;_context89.t1=_context89["catch"](0);return _context89.abrupt("return",null);case 61:case"end":return _context89.stop();}},_callee89,this,[[0,58]]);}));function receiveMessage(){return _receiveMessage.apply(this,arguments);}return receiveMessage;}()},{key:"updateSpeakerDiarizationAudioOffset",value:function updateSpeakerDiarizationAudioOffset(){var bytesSent=this.privRequestSession.recognitionBytesSent;var audioOffsetMs=this.privAverageBytesPerMs!==0?bytesSent/this.privAverageBytesPerMs:0;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(audioOffsetMs);}},{key:"sendSpeechContext",value:function sendSpeechContext(connection,generateNewRequestId){if(this.privEnableSpeakerId){this.updateSpeakerDiarizationAudioOffset();}var speechContextJson=this.speechContext.toJSON();if(generateNewRequestId){this.privRequestSession.onSpeechContext();}if(speechContextJson){return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",speechContextJson));}return;}},{key:"noOp",value:function noOp(){// operation not supported
return;}// Encapsulated for derived service recognizers that need to send additional JSON
},{key:"sendPrePayloadJSON",value:function(){var _sendPrePayloadJSON=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee90(connection){var generateNewRequestId,_args90=arguments;return _regeneratorRuntime().wrap(function _callee90$(_context90){while(1)switch(_context90.prev=_context90.next){case 0:generateNewRequestId=_args90.length>1&&_args90[1]!==undefined?_args90[1]:true;if(!(this.sendPrePayloadJSONOverride!==undefined)){_context90.next=3;break;}return _context90.abrupt("return",this.sendPrePayloadJSONOverride(connection));case 3:_context90.next=5;return this.sendSpeechContext(connection,generateNewRequestId);case 5:_context90.next=7;return this.sendWaveHeader(connection);case 7:return _context90.abrupt("return");case 8:case"end":return _context90.stop();}},_callee90,this);}));function sendPrePayloadJSON(_x63){return _sendPrePayloadJSON.apply(this,arguments);}return sendPrePayloadJSON;}()},{key:"sendWaveHeader",value:function(){var _sendWaveHeader=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee91(connection){var format;return _regeneratorRuntime().wrap(function _callee91$(_context91){while(1)switch(_context91.prev=_context91.next){case 0:_context91.next=2;return this.audioSource.format;case 2:format=_context91.sent;return _context91.abrupt("return",connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",format.header)));case 4:case"end":return _context91.stop();}},_callee91,this);}));function sendWaveHeader(_x64){return _sendWaveHeader.apply(this,arguments);}return sendWaveHeader;}()// Establishes a websocket connection to the end point.
},{key:"connectImpl",value:function connectImpl(){var _this152=this;if(this.privConnectionPromise!==undefined){return this.privConnectionPromise.then(function(connection){if(connection.state()===Exports_js_2.ConnectionState.Disconnected){_this152.privConnectionId=null;_this152.privConnectionPromise=undefined;_this152.privServiceHasSentMessage=false;return _this152.connectImpl();}return _this152.privConnectionPromise;},function(){_this152.privConnectionId=null;_this152.privConnectionPromise=undefined;_this152.privServiceHasSentMessage=false;return _this152.connectImpl();});}this.privConnectionPromise=this.retryableConnect();// Attach an empty handler to allow the promise to run in the background while
// other startup events happen. It'll eventually be awaited on.
// eslint-disable-next-line @typescript-eslint/no-empty-function
this.privConnectionPromise["catch"](function(){});if(this.postConnectImplOverride!==undefined){return this.postConnectImplOverride(this.privConnectionPromise);}return this.privConnectionPromise;}},{key:"sendSpeechServiceConfig",value:function sendSpeechServiceConfig(connection,requestSession,SpeechServiceConfigJson){requestSession.onSpeechContext();// filter out anything that is not required for the service to work.
if(ServiceRecognizerBase.telemetryDataEnabled!==true){var withTelemetry=JSON.parse(SpeechServiceConfigJson);var replacement={context:{system:withTelemetry.context.system}};SpeechServiceConfigJson=JSON.stringify(replacement);}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){var json=JSON.parse(SpeechServiceConfigJson);json.context.DisableReferenceChannel="True";json.context.MicSpec="1_0_0";SpeechServiceConfigJson=JSON.stringify(json);}if(SpeechServiceConfigJson){return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,"speech.config",requestSession.requestId,"application/json",SpeechServiceConfigJson));}return;}},{key:"fetchConnection",value:function(){var _fetchConnection=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee92(){var _this153=this;return _regeneratorRuntime().wrap(function _callee92$(_context92){while(1)switch(_context92.prev=_context92.next){case 0:if(!(this.privConnectionConfigurationPromise!==undefined)){_context92.next=2;break;}return _context92.abrupt("return",this.privConnectionConfigurationPromise.then(function(connection){if(connection.state()===Exports_js_2.ConnectionState.Disconnected){_this153.privConnectionId=null;_this153.privConnectionConfigurationPromise=undefined;_this153.privServiceHasSentMessage=false;return _this153.fetchConnection();}return _this153.privConnectionConfigurationPromise;},function(){_this153.privConnectionId=null;_this153.privConnectionConfigurationPromise=undefined;_this153.privServiceHasSentMessage=false;return _this153.fetchConnection();}));case 2:this.privConnectionConfigurationPromise=this.configureConnection();_context92.next=5;return this.privConnectionConfigurationPromise;case 5:return _context92.abrupt("return",_context92.sent);case 6:case"end":return _context92.stop();}},_callee92,this);}));function fetchConnection(){return _fetchConnection.apply(this,arguments);}return fetchConnection;}()},{key:"sendAudio",value:function(){var _sendAudio=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee94(audioStreamNode){var _this154=this;var audioFormat,nextSendTime,fastLaneSizeMs,maxSendUnthrottledBytes,startRecogNumber,readAndUploadCycle;return _regeneratorRuntime().wrap(function _callee94$(_context94){while(1)switch(_context94.prev=_context94.next){case 0:_context94.next=2;return this.audioSource.format;case 2:audioFormat=_context94.sent;this.privAverageBytesPerMs=audioFormat.avgBytesPerSec/1000;// The time we last sent data to the service.
nextSendTime=Date.now();// Max amount to send before we start to throttle
fastLaneSizeMs=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000");maxSendUnthrottledBytes=audioFormat.avgBytesPerSec/1000*parseInt(fastLaneSizeMs,10);startRecogNumber=this.privRequestSession.recogNumber;readAndUploadCycle=/*#__PURE__*/function(){var _ref16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee93(){var connection,audioStreamChunk,payload,sendDelay;return _regeneratorRuntime().wrap(function _callee93$(_context93){while(1)switch(_context93.prev=_context93.next){case 0:if(!(!_this154.privIsDisposed&&!_this154.privRequestSession.isSpeechEnded&&_this154.privRequestSession.isRecognizing&&_this154.privRequestSession.recogNumber===startRecogNumber)){_context93.next=21;break;}_context93.next=3;return _this154.fetchConnection();case 3:connection=_context93.sent;_context93.next=6;return audioStreamNode.read();case 6:audioStreamChunk=_context93.sent;if(!_this154.privRequestSession.isSpeechEnded){_context93.next=9;break;}return _context93.abrupt("return");case 9:if(!audioStreamChunk||audioStreamChunk.isEnd){payload=null;sendDelay=0;}else{payload=audioStreamChunk.buffer;_this154.privRequestSession.onAudioSent(payload.byteLength);if(maxSendUnthrottledBytes>=_this154.privRequestSession.bytesSent){sendDelay=0;}else{sendDelay=Math.max(0,nextSendTime-Date.now());}}if(!(0!==sendDelay)){_context93.next=13;break;}_context93.next=13;return _this154.delay(sendDelay);case 13:if(payload!==null){nextSendTime=Date.now()+payload.byteLength*1000/(audioFormat.avgBytesPerSec*2);}// Are we still alive?
if(!(!_this154.privIsDisposed&&!_this154.privRequestSession.isSpeechEnded&&_this154.privRequestSession.isRecognizing&&_this154.privRequestSession.recogNumber===startRecogNumber)){_context93.next=21;break;}connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Binary,"audio",_this154.privRequestSession.requestId,null,payload))["catch"](function(){// eslint-disable-next-line @typescript-eslint/no-empty-function
_this154.privRequestSession.onServiceTurnEndResponse(_this154.privRecognizerConfig.isContinuousRecognition)["catch"](function(){});});if(audioStreamChunk!==null&&audioStreamChunk!==void 0&&audioStreamChunk.isEnd){_context93.next=20;break;}return _context93.abrupt("return",readAndUploadCycle());case 20:// the audio stream has been closed, no need to schedule next
// read-upload cycle.
if(!_this154.privIsLiveAudio){_this154.privRequestSession.onSpeechEnded();}case 21:case"end":return _context93.stop();}},_callee93);}));return function readAndUploadCycle(){return _ref16.apply(this,arguments);};}();return _context94.abrupt("return",readAndUploadCycle());case 10:case"end":return _context94.stop();}},_callee94,this);}));function sendAudio(_x65){return _sendAudio.apply(this,arguments);}return sendAudio;}()},{key:"retryableConnect",value:function(){var _retryableConnect=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee95(){var _this155=this;var isUnAuthorized,sessionId,lastStatusCode,lastReason,authPromise,auth,connection,response;return _regeneratorRuntime().wrap(function _callee95$(_context95){while(1)switch(_context95.prev=_context95.next){case 0:isUnAuthorized=false;this.privAuthFetchEventId=Exports_js_2.createNoDashGuid();sessionId=this.privRequestSession.sessionId;this.privConnectionId=sessionId!==undefined?sessionId:Exports_js_2.createNoDashGuid();this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);lastStatusCode=0;lastReason="";case 7:if(!(this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount)){_context95.next=32;break;}// Get the auth information for the connection. This is a bit of overkill for the current API surface, but leaving the plumbing in place to be able to raise a developer-customer
// facing event when a connection fails to let them try and provide new auth information.
authPromise=isUnAuthorized?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);_context95.next=11;return authPromise;case 11:auth=_context95.sent;_context95.next=14;return this.privRequestSession.onAuthCompleted(false);case 14:// Create the connection
connection=this.privConnectionFactory.create(this.privRecognizerConfig,auth,this.privConnectionId);// Attach the telemetry handlers.
this.privRequestSession.listenForServiceTelemetry(connection.events);// Attach to the underlying event. No need to hold onto the detach pointers as in the event the connection goes away,
// it'll stop sending events.
connection.events.attach(function(event){_this155.connectionEvents.onEvent(event);});_context95.next=19;return connection.open();case 19:response=_context95.sent;if(!(response.statusCode===200)){_context95.next=26;break;}_context95.next=23;return this.privRequestSession.onConnectionEstablishCompleted(response.statusCode);case 23:return _context95.abrupt("return",Promise.resolve(connection));case 26:if(response.statusCode===1006){isUnAuthorized=true;}case 27:lastStatusCode=response.statusCode;lastReason=response.reason;this.privRequestSession.onRetryConnection();_context95.next=7;break;case 32:_context95.next=34;return this.privRequestSession.onConnectionEstablishCompleted(lastStatusCode,lastReason);case 34:return _context95.abrupt("return",Promise.reject("Unable to contact server. StatusCode: ".concat(lastStatusCode,", ").concat(this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Endpoint)," Reason: ").concat(lastReason)));case 35:case"end":return _context95.stop();}},_callee95,this);}));function retryableConnect(){return _retryableConnect.apply(this,arguments);}return retryableConnect;}()},{key:"delay",value:function delay(delayMs){var _this156=this;return new Promise(function(resolve){return _this156.privSetTimeout(resolve,delayMs);});}},{key:"writeBufferToConsole",value:function writeBufferToConsole(buffer){var out="Buffer Size: ";if(null===buffer){out+="null";}else{var readView=new Uint8Array(buffer);out+="".concat(buffer.byteLength,"\r\n");for(var i=0;i<buffer.byteLength;i++){out+=readView[i].toString(16).padStart(2,"0")+" ";if((i+1)%16===0){// eslint-disable-next-line no-console
console.info(out);out="";}}}// eslint-disable-next-line no-console
console.info(out);}},{key:"sendFinalAudio",value:function(){var _sendFinalAudio=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee96(){var connection;return _regeneratorRuntime().wrap(function _callee96$(_context96){while(1)switch(_context96.prev=_context96.next){case 0:_context96.next=2;return this.fetchConnection();case 2:connection=_context96.sent;_context96.next=5;return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null));case 5:return _context96.abrupt("return");case 6:case"end":return _context96.stop();}},_callee96,this);}));function sendFinalAudio(){return _sendFinalAudio.apply(this,arguments);}return sendFinalAudio;}()// Takes an established websocket connection to the endpoint and sends speech configuration information.
},{key:"configureConnection",value:function(){var _configureConnection=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee97(){var connection;return _regeneratorRuntime().wrap(function _callee97$(_context97){while(1)switch(_context97.prev=_context97.next){case 0:_context97.next=2;return this.connectImpl();case 2:connection=_context97.sent;if(!(this.configConnectionOverride!==undefined)){_context97.next=5;break;}return _context97.abrupt("return",this.configConnectionOverride(connection));case 5:_context97.next=7;return this.sendSpeechServiceConfig(connection,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize());case 7:_context97.next=9;return this.sendPrePayloadJSON(connection,false);case 9:return _context97.abrupt("return",connection);case 10:case"end":return _context97.stop();}},_callee97,this);}));function configureConnection(){return _configureConnection.apply(this,arguments);}return configureConnection;}()}]);return ServiceRecognizerBase;}();exports.ServiceRecognizerBase=ServiceRecognizerBase;ServiceRecognizerBase.telemetryDataEnabled=true;/***/},/* 206 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechConnectionMessage=void 0;var Exports_js_1=__webpack_require__(4);var HeaderNames_js_1=__webpack_require__(54);var SpeechConnectionMessage=/*#__PURE__*/function(_Exports_js_1$Connect){_inherits(SpeechConnectionMessage,_Exports_js_1$Connect);var _super121=_createSuper(SpeechConnectionMessage);function SpeechConnectionMessage(messageType,path,requestId,contentType,body,streamId,additionalHeaders,id){var _this157;_classCallCheck(this,SpeechConnectionMessage);if(!path){throw new Exports_js_1.ArgumentNullError("path");}if(!requestId){throw new Exports_js_1.ArgumentNullError("requestId");}var headers={};headers[HeaderNames_js_1.HeaderNames.Path]=path;headers[HeaderNames_js_1.HeaderNames.RequestId]=requestId;headers[HeaderNames_js_1.HeaderNames.RequestTimestamp]=new Date().toISOString();if(contentType){headers[HeaderNames_js_1.HeaderNames.ContentType]=contentType;}if(streamId){headers[HeaderNames_js_1.HeaderNames.RequestStreamId]=streamId;}if(additionalHeaders){for(var headerName in additionalHeaders){if(headerName){headers[headerName]=additionalHeaders[headerName];}}}if(id){_this157=_super121.call(this,messageType,body,headers,id);}else{_this157=_super121.call(this,messageType,body,headers);}_this157.privPath=path;_this157.privRequestId=requestId;_this157.privContentType=contentType;_this157.privStreamId=streamId;_this157.privAdditionalHeaders=additionalHeaders;return _possibleConstructorReturn(_this157);}_createClass(SpeechConnectionMessage,[{key:"path",get:function get(){return this.privPath;}},{key:"requestId",get:function get(){return this.privRequestId;}},{key:"contentType",get:function get(){return this.privContentType;}},{key:"streamId",get:function get(){return this.privStreamId;}},{key:"additionalHeaders",get:function get(){return this.privAdditionalHeaders;}}],[{key:"fromConnectionMessage",value:function fromConnectionMessage(message){var path=null;var requestId=null;var contentType=null;// let requestTimestamp = null;
var streamId=null;var additionalHeaders={};if(message.headers){for(var headerName in message.headers){if(headerName){if(headerName.toLowerCase()===HeaderNames_js_1.HeaderNames.Path.toLowerCase()){path=message.headers[headerName];}else if(headerName.toLowerCase()===HeaderNames_js_1.HeaderNames.RequestId.toLowerCase()){requestId=message.headers[headerName];// } else if (headerName.toLowerCase() === HeaderNames.RequestTimestamp.toLowerCase()) {
//  requestTimestamp = message.headers[headerName];
}else if(headerName.toLowerCase()===HeaderNames_js_1.HeaderNames.ContentType.toLowerCase()){contentType=message.headers[headerName];}else if(headerName.toLowerCase()===HeaderNames_js_1.HeaderNames.RequestStreamId.toLowerCase()){streamId=message.headers[headerName];}else{additionalHeaders[headerName]=message.headers[headerName];}}}}return new SpeechConnectionMessage(message.messageType,path,requestId,contentType,message.body,streamId,additionalHeaders,message.id);}}]);return SpeechConnectionMessage;}(Exports_js_1.ConnectionMessage);exports.SpeechConnectionMessage=SpeechConnectionMessage;/***/},/* 207 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationServiceRecognizer=void 0;var Exports_js_1=__webpack_require__(79);var Exports_js_2=__webpack_require__(2);var ConversationServiceRecognizer=/*#__PURE__*/function(_Exports_js_2$Service){_inherits(ConversationServiceRecognizer,_Exports_js_2$Service);var _super122=_createSuper(ConversationServiceRecognizer);function ConversationServiceRecognizer(authentication,connectionFactory,audioSource,recognizerConfig,recognizer){var _this158;_classCallCheck(this,ConversationServiceRecognizer);_this158=_super122.call(this,authentication,connectionFactory,audioSource,recognizerConfig,recognizer);_this158.handleSpeechPhraseMessage=/*#__PURE__*/function(){var _ref17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee98(textBody){return _regeneratorRuntime().wrap(function _callee98$(_context98){while(1)switch(_context98.prev=_context98.next){case 0:return _context98.abrupt("return",_this158.handleSpeechPhrase(textBody));case 1:case"end":return _context98.stop();}},_callee98);}));return function(_x66){return _ref17.apply(this,arguments);};}();_this158.handleSpeechHypothesisMessage=function(textBody){return _this158.handleSpeechHypothesis(textBody);};return _this158;}_createClass(ConversationServiceRecognizer,[{key:"processTypeSpecificMessages",value:function processTypeSpecificMessages(connectionMessage){void connectionMessage;return;}},{key:"handleRecognizedCallback",value:function handleRecognizedCallback(result,offset,sessionId){void result;void offset;void sessionId;return;}},{key:"handleRecognizingCallback",value:function handleRecognizingCallback(result,duration,sessionId){void result;void duration;void sessionId;return;}},{key:"processSpeechMessages",value:function(){var _processSpeechMessages=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee99(connectionMessage){var processed;return _regeneratorRuntime().wrap(function _callee99$(_context99){while(1)switch(_context99.prev=_context99.next){case 0:processed=false;_context99.t0=connectionMessage.path.toLowerCase();_context99.next=_context99.t0==="speech.hypothesis"?4:_context99.t0==="speech.fragment"?4:_context99.t0==="speech.phrase"?7:12;break;case 4:if(!!this.handleSpeechHypothesisMessage){this.handleSpeechHypothesisMessage(connectionMessage.textBody);}processed=true;return _context99.abrupt("break",13);case 7:if(!this.handleSpeechPhraseMessage){_context99.next=10;break;}_context99.next=10;return this.handleSpeechPhraseMessage(connectionMessage.textBody);case 10:processed=true;return _context99.abrupt("break",13);case 12:return _context99.abrupt("break",13);case 13:return _context99.abrupt("return",processed);case 14:case"end":return _context99.stop();}},_callee99,this);}));function processSpeechMessages(_x67){return _processSpeechMessages.apply(this,arguments);}return processSpeechMessages;}()},{key:"cancelRecognition",value:function cancelRecognition(sessionId,requestId,cancellationReason,errorCode,error){// Implementing to allow inheritance
void sessionId;void requestId;void cancellationReason;void errorCode;void error;}},{key:"handleSpeechPhrase",value:function(){var _handleSpeechPhrase=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee100(textBody){var simple,resultReason,result,resultProps,cancelReason,cancellationErrorCode,detailed;return _regeneratorRuntime().wrap(function _callee100$(_context100){while(1)switch(_context100.prev=_context100.next){case 0:simple=Exports_js_2.SimpleSpeechPhrase.fromJSON(textBody,this.privRequestSession.currentTurnAudioOffset);resultReason=Exports_js_2.EnumTranslation.implTranslateRecognitionResult(simple.RecognitionStatus);resultProps=new Exports_js_1.PropertyCollection();resultProps.setProperty(Exports_js_1.PropertyId.SpeechServiceResponse_JsonResult,textBody);this.privRequestSession.onPhraseRecognized(simple.Offset+simple.Duration);if(!(Exports_js_1.ResultReason.Canceled===resultReason)){_context100.next=12;break;}cancelReason=Exports_js_2.EnumTranslation.implTranslateCancelResult(simple.RecognitionStatus);cancellationErrorCode=Exports_js_2.EnumTranslation.implTranslateCancelErrorCode(simple.RecognitionStatus);_context100.next=10;return this.cancelRecognitionLocal(cancelReason,cancellationErrorCode,Exports_js_2.EnumTranslation.implTranslateErrorDetails(cancellationErrorCode));case 10:_context100.next=13;break;case 12:if(simple.RecognitionStatus!==Exports_js_2.RecognitionStatus.EndOfDictation){if(this.privRecognizerConfig.parameters.getProperty(Exports_js_2.OutputFormatPropertyName)===Exports_js_1.OutputFormat[Exports_js_1.OutputFormat.Simple]){result=new Exports_js_1.SpeechRecognitionResult(this.privRequestSession.requestId,resultReason,simple.DisplayText,simple.Duration,simple.Offset,simple.Language,simple.LanguageDetectionConfidence,simple.SpeakerId,undefined,simple.asJson(),resultProps);}else{detailed=Exports_js_2.DetailedSpeechPhrase.fromJSON(textBody,this.privRequestSession.currentTurnAudioOffset);result=new Exports_js_1.SpeechRecognitionResult(this.privRequestSession.requestId,resultReason,detailed.Text,detailed.Duration,detailed.Offset,detailed.Language,detailed.LanguageDetectionConfidence,detailed.SpeakerId,undefined,detailed.asJson(),resultProps);}this.handleRecognizedCallback(result,result.offset,this.privRequestSession.sessionId);}case 13:case"end":return _context100.stop();}},_callee100,this);}));function handleSpeechPhrase(_x68){return _handleSpeechPhrase.apply(this,arguments);}return handleSpeechPhrase;}()},{key:"handleSpeechHypothesis",value:function handleSpeechHypothesis(textBody){var hypothesis=Exports_js_2.SpeechHypothesis.fromJSON(textBody,this.privRequestSession.currentTurnAudioOffset);var resultProps=new Exports_js_1.PropertyCollection();resultProps.setProperty(Exports_js_1.PropertyId.SpeechServiceResponse_JsonResult,textBody);var result=new Exports_js_1.SpeechRecognitionResult(this.privRequestSession.requestId,Exports_js_1.ResultReason.RecognizingSpeech,hypothesis.Text,hypothesis.Duration,hypothesis.Offset,hypothesis.Language,hypothesis.LanguageDetectionConfidence,hypothesis.SpeakerId,undefined,hypothesis.asJson(),resultProps);this.privRequestSession.onHypothesis(hypothesis.Offset);this.handleRecognizingCallback(result,hypothesis.Duration,this.privRequestSession.sessionId);}}]);return ConversationServiceRecognizer;}(Exports_js_2.ServiceRecognizerBase);exports.ConversationServiceRecognizer=ConversationServiceRecognizer;/***/},/* 208 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.RecognizerConfig=exports.SpeechResultFormat=exports.RecognitionMode=void 0;/* eslint-disable max-classes-per-file */var Exports_js_1=__webpack_require__(79);var Exports_js_2=__webpack_require__(2);var RecognitionMode;(function(RecognitionMode){RecognitionMode[RecognitionMode["Interactive"]=0]="Interactive";RecognitionMode[RecognitionMode["Conversation"]=1]="Conversation";RecognitionMode[RecognitionMode["Dictation"]=2]="Dictation";})(RecognitionMode=exports.RecognitionMode||(exports.RecognitionMode={}));var SpeechResultFormat;(function(SpeechResultFormat){SpeechResultFormat[SpeechResultFormat["Simple"]=0]="Simple";SpeechResultFormat[SpeechResultFormat["Detailed"]=1]="Detailed";})(SpeechResultFormat=exports.SpeechResultFormat||(exports.SpeechResultFormat={}));var RecognizerConfig=/*#__PURE__*/function(){function RecognizerConfig(speechServiceConfig,parameters){_classCallCheck(this,RecognizerConfig);this.privSpeechServiceConfig=speechServiceConfig?speechServiceConfig:new Exports_js_2.SpeechServiceConfig(new Exports_js_2.Context(null));this.privParameters=parameters;this.privMaxRetryCount=parseInt(parameters.getProperty("SPEECH-Error-MaxRetryCount","4"),10);this.privLanguageIdMode=parameters.getProperty(Exports_js_1.PropertyId.SpeechServiceConnection_LanguageIdMode,undefined);this.privEnableSpeakerId=false;}_createClass(RecognizerConfig,[{key:"parameters",get:function get(){return this.privParameters;}},{key:"recognitionMode",get:function get(){return this.privRecognitionMode;},set:function set(value){this.privRecognitionMode=value;this.privRecognitionActivityTimeout=value===RecognitionMode.Interactive?8000:25000;this.privSpeechServiceConfig.Recognition=RecognitionMode[value];}},{key:"SpeechServiceConfig",get:function get(){return this.privSpeechServiceConfig;}},{key:"recognitionActivityTimeout",get:function get(){return this.privRecognitionActivityTimeout;}},{key:"isContinuousRecognition",get:function get(){return this.privRecognitionMode!==RecognitionMode.Interactive;}},{key:"languageIdMode",get:function get(){return this.privLanguageIdMode;}},{key:"autoDetectSourceLanguages",get:function get(){return this.parameters.getProperty(Exports_js_1.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,undefined);}},{key:"recognitionEndpointVersion",get:function get(){return this.parameters.getProperty(Exports_js_1.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,undefined);}},{key:"sourceLanguageModels",get:function get(){var models=[];var modelsExist=false;if(this.autoDetectSourceLanguages!==undefined){var _iterator16=_createForOfIteratorHelper(this.autoDetectSourceLanguages.split(",")),_step16;try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var language=_step16.value;var customProperty=language+Exports_js_1.PropertyId.SpeechServiceConnection_EndpointId.toString();var modelId=this.parameters.getProperty(customProperty,undefined);if(modelId!==undefined){models.push({language:language,endpoint:modelId});modelsExist=true;}else{models.push({language:language,endpoint:""});}}}catch(err){_iterator16.e(err);}finally{_iterator16.f();}}return modelsExist?models:undefined;}},{key:"maxRetryCount",get:function get(){return this.privMaxRetryCount;}},{key:"isSpeakerDiarizationEnabled",get:function get(){return this.privEnableSpeakerId;},set:function set(value){this.privEnableSpeakerId=value;}}]);return RecognizerConfig;}();exports.RecognizerConfig=RecognizerConfig;/***/},/* 209 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});/***/},/* 210 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.WebsocketMessageFormatter=void 0;var Exports_js_1=__webpack_require__(4);var CRLF="\r\n";var WebsocketMessageFormatter=/*#__PURE__*/function(){function WebsocketMessageFormatter(){_classCallCheck(this,WebsocketMessageFormatter);}_createClass(WebsocketMessageFormatter,[{key:"toConnectionMessage",value:function toConnectionMessage(message){var deferral=new Exports_js_1.Deferred();try{if(message.messageType===Exports_js_1.MessageType.Text){var textMessage=message.textContent;var headers={};var body=null;if(textMessage){var headerBodySplit=textMessage.split("\r\n\r\n");if(headerBodySplit&&headerBodySplit.length>0){headers=this.parseHeaders(headerBodySplit[0]);if(headerBodySplit.length>1){body=headerBodySplit[1];}}}deferral.resolve(new Exports_js_1.ConnectionMessage(message.messageType,body,headers,message.id));}else if(message.messageType===Exports_js_1.MessageType.Binary){var binaryMessage=message.binaryContent;var _headers2={};var _body=null;if(!binaryMessage||binaryMessage.byteLength<2){throw new Error("Invalid binary message format. Header length missing.");}var dataView=new DataView(binaryMessage);var headerLength=dataView.getInt16(0);if(binaryMessage.byteLength<headerLength+2){throw new Error("Invalid binary message format. Header content missing.");}var headersString="";for(var i=0;i<headerLength;i++){headersString+=String.fromCharCode(dataView.getInt8(i+2));}_headers2=this.parseHeaders(headersString);if(binaryMessage.byteLength>headerLength+2){_body=binaryMessage.slice(2+headerLength);}deferral.resolve(new Exports_js_1.ConnectionMessage(message.messageType,_body,_headers2,message.id));}}catch(e){deferral.reject("Error formatting the message. Error: ".concat(e));}return deferral.promise;}},{key:"fromConnectionMessage",value:function fromConnectionMessage(message){var deferral=new Exports_js_1.Deferred();try{if(message.messageType===Exports_js_1.MessageType.Text){var payload="".concat(this.makeHeaders(message)).concat(CRLF).concat(message.textBody?message.textBody:"");deferral.resolve(new Exports_js_1.RawWebsocketMessage(Exports_js_1.MessageType.Text,payload,message.id));}else if(message.messageType===Exports_js_1.MessageType.Binary){var headersString=this.makeHeaders(message);var content=message.binaryBody;var headerBuffer=this.stringToArrayBuffer(headersString);var headerInt8Array=new Int8Array(headerBuffer);var headerLength=headerInt8Array.byteLength;var payloadInt8Array=new Int8Array(2+headerLength+(content?content.byteLength:0));payloadInt8Array[0]=headerLength>>8&0xff;payloadInt8Array[1]=headerLength&0xff;payloadInt8Array.set(headerInt8Array,2);if(content){var bodyInt8Array=new Int8Array(content);payloadInt8Array.set(bodyInt8Array,2+headerLength);}var _payload=payloadInt8Array.buffer;deferral.resolve(new Exports_js_1.RawWebsocketMessage(Exports_js_1.MessageType.Binary,_payload,message.id));}}catch(e){deferral.reject("Error formatting the message. ".concat(e));}return deferral.promise;}},{key:"makeHeaders",value:function makeHeaders(message){var headersString="";if(message.headers){for(var header in message.headers){if(header){headersString+="".concat(header,": ").concat(message.headers[header]).concat(CRLF);}}}return headersString;}},{key:"parseHeaders",value:function parseHeaders(headersString){var headers={};if(headersString){var headerMatches=headersString.match(/[^\r\n]+/g);if(headers){var _iterator17=_createForOfIteratorHelper(headerMatches),_step17;try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var header=_step17.value;if(header){var separatorIndex=header.indexOf(":");var headerName=separatorIndex>0?header.substr(0,separatorIndex).trim().toLowerCase():header;var headerValue=separatorIndex>0&&header.length>separatorIndex+1?header.substr(separatorIndex+1).trim():"";headers[headerName]=headerValue;}}}catch(err){_iterator17.e(err);}finally{_iterator17.f();}}}return headers;}},{key:"stringToArrayBuffer",value:function stringToArrayBuffer(str){var buffer=new ArrayBuffer(str.length);var view=new DataView(buffer);for(var i=0;i<str.length;i++){view.setUint8(i,str.charCodeAt(i));}return buffer;}}]);return WebsocketMessageFormatter;}();exports.WebsocketMessageFormatter=WebsocketMessageFormatter;/***/},/* 211 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechConnectionFactory=void 0;var Exports_js_1=__webpack_require__(60);var Exports_js_2=__webpack_require__(2);var Exports_js_3=__webpack_require__(79);var ConnectionFactoryBase_js_1=__webpack_require__(134);var Exports_js_4=__webpack_require__(2);var HeaderNames_js_1=__webpack_require__(54);var QueryParameterNames_js_1=__webpack_require__(135);var SpeechConnectionFactory=/*#__PURE__*/function(_ConnectionFactoryBas5){_inherits(SpeechConnectionFactory,_ConnectionFactoryBas5);var _super123=_createSuper(SpeechConnectionFactory);function SpeechConnectionFactory(){var _this159;_classCallCheck(this,SpeechConnectionFactory);_this159=_super123.apply(this,arguments);_this159.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1";_this159.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1";_this159.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1";_this159.universalUri="/speech/universal/v";return _this159;}_createClass(SpeechConnectionFactory,[{key:"create",value:function create(config,authInfo,connectionId){var endpoint=config.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Endpoint,undefined);var region=config.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Region,undefined);var hostSuffix=ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region);var host=config.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Host,"wss://"+region+".stt.speech"+hostSuffix);var queryParams={};var endpointId=config.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_EndpointId,undefined);var language=config.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage,undefined);if(endpointId){if(!endpoint||endpoint.search(QueryParameterNames_js_1.QueryParameterNames.CustomSpeechDeploymentId)===-1){queryParams[QueryParameterNames_js_1.QueryParameterNames.CustomSpeechDeploymentId]=endpointId;}}else if(language){if(!endpoint||endpoint.search(QueryParameterNames_js_1.QueryParameterNames.Language)===-1){queryParams[QueryParameterNames_js_1.QueryParameterNames.Language]=language;}}if(!endpoint||endpoint.search(QueryParameterNames_js_1.QueryParameterNames.Format)===-1){queryParams[QueryParameterNames_js_1.QueryParameterNames.Format]=config.parameters.getProperty(Exports_js_2.OutputFormatPropertyName,Exports_js_3.OutputFormat[Exports_js_3.OutputFormat.Simple]).toLowerCase();}if(config.autoDetectSourceLanguages!==undefined){queryParams[QueryParameterNames_js_1.QueryParameterNames.EnableLanguageId]="true";}this.setCommonUrlParams(config,queryParams,endpoint);if(!endpoint){switch(config.recognitionMode){case Exports_js_4.RecognitionMode.Conversation:if(config.parameters.getProperty(Exports_js_2.ForceDictationPropertyName,"false")==="true"){endpoint=host+this.dictationRelativeUri;}else{if(config.recognitionEndpointVersion!==undefined&&parseInt(config.recognitionEndpointVersion,10)>1){endpoint="".concat(host).concat(this.universalUri).concat(config.recognitionEndpointVersion);}else{endpoint=host+this.conversationRelativeUri;}}break;case Exports_js_4.RecognitionMode.Dictation:endpoint=host+this.dictationRelativeUri;break;default:if(config.recognitionEndpointVersion!==undefined&&parseInt(config.recognitionEndpointVersion,10)>1){endpoint="".concat(host).concat(this.universalUri).concat(config.recognitionEndpointVersion);}else{endpoint=host+this.interactiveRelativeUri;// default is interactive
}break;}}var headers={};if(authInfo.token!==undefined&&authInfo.token!==""){headers[authInfo.headerName]=authInfo.token;}headers[HeaderNames_js_1.HeaderNames.ConnectionId]=connectionId;var enableCompression=config.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";var webSocketConnection=new Exports_js_1.WebsocketConnection(endpoint,queryParams,headers,new Exports_js_4.WebsocketMessageFormatter(),Exports_js_1.ProxyInfo.fromRecognizerConfig(config),enableCompression,connectionId);// Set the value of SpeechServiceConnection_Url to webSocketConnection.uri (and not to `endpoint`), since this value is the final
// URI that was used to make the connection (including query parameters).
var uri=webSocketConnection.uri;config.parameters.setProperty(Exports_js_3.PropertyId.SpeechServiceConnection_Url,uri);return webSocketConnection;}}]);return SpeechConnectionFactory;}(ConnectionFactoryBase_js_1.ConnectionFactoryBase);exports.SpeechConnectionFactory=SpeechConnectionFactory;/***/},/* 212 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationTranscriberConnectionFactory=void 0;var Exports_js_1=__webpack_require__(60);var Exports_js_2=__webpack_require__(79);var Exports_js_3=__webpack_require__(2);var ConnectionFactoryBase_js_1=__webpack_require__(134);var Exports_js_4=__webpack_require__(2);var HeaderNames_js_1=__webpack_require__(54);var QueryParameterNames_js_1=__webpack_require__(135);var ConversationTranscriberConnectionFactory=/*#__PURE__*/function(_ConnectionFactoryBas6){_inherits(ConversationTranscriberConnectionFactory,_ConnectionFactoryBas6);var _super124=_createSuper(ConversationTranscriberConnectionFactory);function ConversationTranscriberConnectionFactory(){var _this160;_classCallCheck(this,ConversationTranscriberConnectionFactory);_this160=_super124.apply(this,arguments);_this160.universalUri="/speech/universal/v2";return _this160;}_createClass(ConversationTranscriberConnectionFactory,[{key:"create",value:function create(config,authInfo,connectionId){var endpoint=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint,undefined);var region=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region,undefined);var hostSuffix=ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region);var host=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,"wss://"+region+".stt.speech"+hostSuffix);var queryParams={};var endpointId=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_EndpointId,undefined);var language=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage,undefined);if(endpointId){if(!endpoint||endpoint.search(QueryParameterNames_js_1.QueryParameterNames.CustomSpeechDeploymentId)===-1){queryParams[QueryParameterNames_js_1.QueryParameterNames.CustomSpeechDeploymentId]=endpointId;}}else if(language){if(!endpoint||endpoint.search(QueryParameterNames_js_1.QueryParameterNames.Language)===-1){queryParams[QueryParameterNames_js_1.QueryParameterNames.Language]=language;}}if(config.autoDetectSourceLanguages!==undefined){queryParams[QueryParameterNames_js_1.QueryParameterNames.EnableLanguageId]="true";}this.setV2UrlParams(config,queryParams,endpoint);if(!endpoint){endpoint="".concat(host).concat(this.universalUri);}var headers={};if(authInfo.token!==undefined&&authInfo.token!==""){headers[authInfo.headerName]=authInfo.token;}headers[HeaderNames_js_1.HeaderNames.ConnectionId]=connectionId;var enableCompression=config.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";var webSocketConnection=new Exports_js_1.WebsocketConnection(endpoint,queryParams,headers,new Exports_js_4.WebsocketMessageFormatter(),Exports_js_1.ProxyInfo.fromRecognizerConfig(config),enableCompression,connectionId);// Set the value of SpeechServiceConnection_Url to webSocketConnection.uri (and not to `endpoint`), since this value is the final
// URI that was used to make the connection (including query parameters).
var uri=webSocketConnection.uri;config.parameters.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Url,uri);return webSocketConnection;}},{key:"setV2UrlParams",value:function setV2UrlParams(config,queryParams,endpoint){var _this161=this;var propertyIdToParameterMap=new Map([[Exports_js_2.PropertyId.Speech_SegmentationSilenceTimeoutMs,QueryParameterNames_js_1.QueryParameterNames.SegmentationSilenceTimeoutMs],[Exports_js_2.PropertyId.SpeechServiceConnection_EnableAudioLogging,QueryParameterNames_js_1.QueryParameterNames.EnableAudioLogging],[Exports_js_2.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,QueryParameterNames_js_1.QueryParameterNames.EndSilenceTimeoutMs],[Exports_js_2.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,QueryParameterNames_js_1.QueryParameterNames.InitialSilenceTimeoutMs],[Exports_js_2.PropertyId.SpeechServiceResponse_PostProcessingOption,QueryParameterNames_js_1.QueryParameterNames.Postprocessing],[Exports_js_2.PropertyId.SpeechServiceResponse_ProfanityOption,QueryParameterNames_js_1.QueryParameterNames.Profanity],[Exports_js_2.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,QueryParameterNames_js_1.QueryParameterNames.StableIntermediateThreshold]]);propertyIdToParameterMap.forEach(function(parameterName,propertyId){_this161.setUrlParameter(propertyId,parameterName,config,queryParams,endpoint);});var serviceProperties=JSON.parse(config.parameters.getProperty(Exports_js_3.ServicePropertiesPropertyName,"{}"));Object.keys(serviceProperties).forEach(function(value){queryParams[value]=serviceProperties[value];});}}]);return ConversationTranscriberConnectionFactory;}(ConnectionFactoryBase_js_1.ConnectionFactoryBase);exports.ConversationTranscriberConnectionFactory=ConversationTranscriberConnectionFactory;/***/},/* 213 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.TranscriberConnectionFactory=void 0;var Exports_js_1=__webpack_require__(60);var Exports_js_2=__webpack_require__(79);var ConnectionFactoryBase_js_1=__webpack_require__(134);var Exports_js_3=__webpack_require__(2);var HeaderNames_js_1=__webpack_require__(54);var QueryParameterNames_js_1=__webpack_require__(135);var TranscriberConnectionFactory=/*#__PURE__*/function(_ConnectionFactoryBas7){_inherits(TranscriberConnectionFactory,_ConnectionFactoryBas7);var _super125=_createSuper(TranscriberConnectionFactory);function TranscriberConnectionFactory(){var _this162;_classCallCheck(this,TranscriberConnectionFactory);_this162=_super125.apply(this,arguments);_this162.multiaudioRelativeUri="/speech/recognition/multiaudio";return _this162;}_createClass(TranscriberConnectionFactory,[{key:"create",value:function create(config,authInfo,connectionId){var endpoint=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint,undefined);var region=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region,"centralus");var hostSuffix=ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region);var hostDefault="wss://transcribe."+region+".cts.speech"+hostSuffix+this.multiaudioRelativeUri;var host=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,hostDefault);var queryParams={};this.setQueryParams(queryParams,config,endpoint);if(!endpoint){endpoint=host;}var headers={};if(authInfo.token!==undefined&&authInfo.token!==""){headers[authInfo.headerName]=authInfo.token;}headers[HeaderNames_js_1.HeaderNames.ConnectionId]=connectionId;config.parameters.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Url,endpoint);var enableCompression=config.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new Exports_js_1.WebsocketConnection(endpoint,queryParams,headers,new Exports_js_3.WebsocketMessageFormatter(),Exports_js_1.ProxyInfo.fromRecognizerConfig(config),enableCompression,connectionId);}},{key:"setQueryParams",value:function setQueryParams(queryParams,config,endpointUrl){var endpointId=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_EndpointId,undefined);var language=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage,undefined);if(endpointId&&!(QueryParameterNames_js_1.QueryParameterNames.CustomSpeechDeploymentId in queryParams)){queryParams[QueryParameterNames_js_1.QueryParameterNames.CustomSpeechDeploymentId]=endpointId;}if(language&&!(QueryParameterNames_js_1.QueryParameterNames.Language in queryParams)){queryParams[QueryParameterNames_js_1.QueryParameterNames.Language]=language;}var wordLevelTimings=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true";var detailed=config.parameters.getProperty(Exports_js_3.OutputFormatPropertyName,Exports_js_2.OutputFormat[Exports_js_2.OutputFormat.Simple])!==Exports_js_2.OutputFormat[Exports_js_2.OutputFormat.Simple];if(wordLevelTimings||detailed){queryParams[QueryParameterNames_js_1.QueryParameterNames.Format]=Exports_js_2.OutputFormat[Exports_js_2.OutputFormat.Detailed].toLowerCase();}this.setCommonUrlParams(config,queryParams,endpointUrl);}}]);return TranscriberConnectionFactory;}(ConnectionFactoryBase_js_1.ConnectionFactoryBase);exports.TranscriberConnectionFactory=TranscriberConnectionFactory;/***/},/* 214 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.TranslationConnectionFactory=void 0;var Exports_js_1=__webpack_require__(60);var StringUtils_js_1=__webpack_require__(166);var Exports_js_2=__webpack_require__(79);var ConnectionFactoryBase_js_1=__webpack_require__(134);var Exports_js_3=__webpack_require__(2);var HeaderNames_js_1=__webpack_require__(54);var QueryParameterNames_js_1=__webpack_require__(135);var TranslationConnectionFactory=/*#__PURE__*/function(_ConnectionFactoryBas8){_inherits(TranslationConnectionFactory,_ConnectionFactoryBas8);var _super126=_createSuper(TranslationConnectionFactory);function TranslationConnectionFactory(){_classCallCheck(this,TranslationConnectionFactory);return _super126.apply(this,arguments);}_createClass(TranslationConnectionFactory,[{key:"create",value:function create(config,authInfo,connectionId){var endpoint=this.getEndpointUrl(config);var queryParams={};if(config.autoDetectSourceLanguages!==undefined){queryParams[QueryParameterNames_js_1.QueryParameterNames.EnableLanguageId]="true";}this.setQueryParams(queryParams,config,endpoint);var headers={};if(authInfo.token!==undefined&&authInfo.token!==""){headers[authInfo.headerName]=authInfo.token;}headers[HeaderNames_js_1.HeaderNames.ConnectionId]=connectionId;config.parameters.setProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Url,endpoint);var enableCompression=config.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new Exports_js_1.WebsocketConnection(endpoint,queryParams,headers,new Exports_js_3.WebsocketMessageFormatter(),Exports_js_1.ProxyInfo.fromRecognizerConfig(config),enableCompression,connectionId);}},{key:"getEndpointUrl",value:function getEndpointUrl(config,returnRegionPlaceholder){var region=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region);var hostSuffix=ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region);var endpointUrl=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint,undefined);if(!endpointUrl){if(config.autoDetectSourceLanguages!==undefined){var host=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+hostSuffix);endpointUrl=host+"/speech/universal/v2";}else{var _host=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+hostSuffix);endpointUrl=_host+"/speech/translation/cognitiveservices/v1";}}if(returnRegionPlaceholder===true){return endpointUrl;}return StringUtils_js_1.StringUtils.formatString(endpointUrl,{region:region});}},{key:"setQueryParams",value:function setQueryParams(queryParams,config,endpointUrl){queryParams.from=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage);queryParams.to=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_TranslationToLanguages);queryParams.scenario=config.recognitionMode===Exports_js_3.RecognitionMode.Interactive?"interactive":config.recognitionMode===Exports_js_3.RecognitionMode.Conversation?"conversation":"";this.setCommonUrlParams(config,queryParams,endpointUrl);this.setUrlParameter(Exports_js_2.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,QueryParameterNames_js_1.QueryParameterNames.StableTranslation,config,queryParams,endpointUrl);var translationVoice=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_TranslationVoice,undefined);if(translationVoice!==undefined){queryParams.voice=translationVoice;queryParams.features="texttospeech";}}}]);return TranslationConnectionFactory;}(ConnectionFactoryBase_js_1.ConnectionFactoryBase);exports.TranslationConnectionFactory=TranslationConnectionFactory;/***/},/* 215 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.EnumTranslation=void 0;var Exports_js_1=__webpack_require__(79);var Exports_js_2=__webpack_require__(2);var EnumTranslation=/*#__PURE__*/function(){function EnumTranslation(){_classCallCheck(this,EnumTranslation);}_createClass(EnumTranslation,null,[{key:"implTranslateRecognitionResult",value:function implTranslateRecognitionResult(recognitionStatus){var expectEndOfDictation=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var reason=Exports_js_1.ResultReason.Canceled;switch(recognitionStatus){case Exports_js_2.RecognitionStatus.Success:reason=Exports_js_1.ResultReason.RecognizedSpeech;break;case Exports_js_2.RecognitionStatus.EndOfDictation:// If we need the result in EndOfDictation (typically some session level result),
// translate into RecognizedSpeech, otherwise NoMatch
reason=expectEndOfDictation?Exports_js_1.ResultReason.RecognizedSpeech:Exports_js_1.ResultReason.NoMatch;break;case Exports_js_2.RecognitionStatus.NoMatch:case Exports_js_2.RecognitionStatus.InitialSilenceTimeout:case Exports_js_2.RecognitionStatus.BabbleTimeout:reason=Exports_js_1.ResultReason.NoMatch;break;case Exports_js_2.RecognitionStatus.Error:case Exports_js_2.RecognitionStatus.BadRequest:case Exports_js_2.RecognitionStatus.Forbidden:default:reason=Exports_js_1.ResultReason.Canceled;break;}return reason;}},{key:"implTranslateCancelResult",value:function implTranslateCancelResult(recognitionStatus){var reason=Exports_js_1.CancellationReason.EndOfStream;switch(recognitionStatus){case Exports_js_2.RecognitionStatus.Success:case Exports_js_2.RecognitionStatus.EndOfDictation:case Exports_js_2.RecognitionStatus.NoMatch:reason=Exports_js_1.CancellationReason.EndOfStream;break;case Exports_js_2.RecognitionStatus.InitialSilenceTimeout:case Exports_js_2.RecognitionStatus.BabbleTimeout:case Exports_js_2.RecognitionStatus.Error:case Exports_js_2.RecognitionStatus.BadRequest:case Exports_js_2.RecognitionStatus.Forbidden:default:reason=Exports_js_1.CancellationReason.Error;break;}return reason;}},{key:"implTranslateCancelErrorCode",value:function implTranslateCancelErrorCode(recognitionStatus){var reason=Exports_js_1.CancellationErrorCode.NoError;switch(recognitionStatus){case Exports_js_2.RecognitionStatus.Error:reason=Exports_js_1.CancellationErrorCode.ServiceError;break;case Exports_js_2.RecognitionStatus.TooManyRequests:reason=Exports_js_1.CancellationErrorCode.TooManyRequests;break;case Exports_js_2.RecognitionStatus.BadRequest:reason=Exports_js_1.CancellationErrorCode.BadRequestParameters;break;case Exports_js_2.RecognitionStatus.Forbidden:reason=Exports_js_1.CancellationErrorCode.Forbidden;break;default:reason=Exports_js_1.CancellationErrorCode.NoError;break;}return reason;}},{key:"implTranslateErrorDetails",value:function implTranslateErrorDetails(cancellationErrorCode){var errorDetails="The speech service encountered an internal error and could not continue.";switch(cancellationErrorCode){case Exports_js_1.CancellationErrorCode.Forbidden:errorDetails="The recognizer is using a free subscription that ran out of quota.";break;case Exports_js_1.CancellationErrorCode.BadRequestParameters:errorDetails="Invalid parameter or unsupported audio format in the request.";break;case Exports_js_1.CancellationErrorCode.TooManyRequests:errorDetails="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break;default:break;}return errorDetails;}}]);return EnumTranslation;}();exports.EnumTranslation=EnumTranslation;/***/},/* 216 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.RecognitionStatus=exports.SynthesisStatus=void 0;/**
 * @class SynthesisStatus
 * @private
 */var SynthesisStatus;(function(SynthesisStatus){/**
     * The response contains valid audio data.
     * @member SynthesisStatus.Success
     */SynthesisStatus[SynthesisStatus["Success"]=0]="Success";/**
     * Indicates the end of audio data. No valid audio data is included in the message.
     * @member SynthesisStatus.SynthesisEnd
     */SynthesisStatus[SynthesisStatus["SynthesisEnd"]=1]="SynthesisEnd";/**
     * Indicates an error occurred during synthesis data processing.
     * @member SynthesisStatus.Error
     */SynthesisStatus[SynthesisStatus["Error"]=2]="Error";})(SynthesisStatus=exports.SynthesisStatus||(exports.SynthesisStatus={}));var RecognitionStatus;(function(RecognitionStatus){RecognitionStatus[RecognitionStatus["Success"]=0]="Success";RecognitionStatus[RecognitionStatus["NoMatch"]=1]="NoMatch";RecognitionStatus[RecognitionStatus["InitialSilenceTimeout"]=2]="InitialSilenceTimeout";RecognitionStatus[RecognitionStatus["BabbleTimeout"]=3]="BabbleTimeout";RecognitionStatus[RecognitionStatus["Error"]=4]="Error";RecognitionStatus[RecognitionStatus["EndOfDictation"]=5]="EndOfDictation";RecognitionStatus[RecognitionStatus["TooManyRequests"]=6]="TooManyRequests";RecognitionStatus[RecognitionStatus["BadRequest"]=7]="BadRequest";RecognitionStatus[RecognitionStatus["Forbidden"]=8]="Forbidden";})(RecognitionStatus=exports.RecognitionStatus||(exports.RecognitionStatus={}));/***/},/* 217 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.TranslationSynthesisEnd=void 0;var Exports_js_1=__webpack_require__(2);var TranslationSynthesisEnd=/*#__PURE__*/function(){function TranslationSynthesisEnd(json){_classCallCheck(this,TranslationSynthesisEnd);this.privSynthesisEnd=JSON.parse(json);if(!!this.privSynthesisEnd.SynthesisStatus){this.privSynthesisEnd.SynthesisStatus=Exports_js_1.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus];}if(!!this.privSynthesisEnd.Status){this.privSynthesisEnd.SynthesisStatus=Exports_js_1.SynthesisStatus[this.privSynthesisEnd.Status];}}_createClass(TranslationSynthesisEnd,[{key:"SynthesisStatus",get:function get(){return this.privSynthesisEnd.SynthesisStatus;}},{key:"FailureReason",get:function get(){return this.privSynthesisEnd.FailureReason;}}],[{key:"fromJSON",value:function fromJSON(json){return new TranslationSynthesisEnd(json);}}]);return TranslationSynthesisEnd;}();exports.TranslationSynthesisEnd=TranslationSynthesisEnd;/***/},/* 218 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.TranslationHypothesis=void 0;var Contracts_js_1=__webpack_require__(64);var TranslationStatus_js_1=__webpack_require__(48);var TranslationHypothesis=/*#__PURE__*/function(){function TranslationHypothesis(hypothesis,baseOffset){_classCallCheck(this,TranslationHypothesis);this.privTranslationHypothesis=hypothesis;this.privTranslationHypothesis.Offset+=baseOffset;this.privTranslationHypothesis.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationHypothesis.Translation.TranslationStatus);}_createClass(TranslationHypothesis,[{key:"Duration",get:function get(){return this.privTranslationHypothesis.Duration;}},{key:"Offset",get:function get(){return this.privTranslationHypothesis.Offset;}},{key:"Text",get:function get(){return this.privTranslationHypothesis.Text;}},{key:"Translation",get:function get(){return this.privTranslationHypothesis.Translation;}},{key:"Language",get:function get(){var _this$privTranslation;return(_this$privTranslation=this.privTranslationHypothesis.PrimaryLanguage)===null||_this$privTranslation===void 0?void 0:_this$privTranslation.Language;}},{key:"asJson",value:function asJson(){var jsonObj=_objectSpread({},this.privTranslationHypothesis);// Convert the enum value to its string representation for serialization purposes.
return jsonObj.Translation!==undefined?JSON.stringify(_objectSpread(_objectSpread({},jsonObj),{},{TranslationStatus:TranslationStatus_js_1.TranslationStatus[jsonObj.Translation.TranslationStatus]})):JSON.stringify(jsonObj);}},{key:"mapTranslationStatus",value:function mapTranslationStatus(status){if(typeof status==="string"){return TranslationStatus_js_1.TranslationStatus[status];}else if(typeof status==="number"){return status;}}}],[{key:"fromJSON",value:function fromJSON(json,baseOffset){return new TranslationHypothesis(JSON.parse(json),baseOffset);}},{key:"fromTranslationResponse",value:function fromTranslationResponse(translationHypothesis,baseOffset){Contracts_js_1.Contracts.throwIfNullOrUndefined(translationHypothesis,"translationHypothesis");var hypothesis=translationHypothesis.SpeechHypothesis;translationHypothesis.SpeechHypothesis=undefined;hypothesis.Translation=translationHypothesis;return new TranslationHypothesis(hypothesis,baseOffset);}}]);return TranslationHypothesis;}();exports.TranslationHypothesis=TranslationHypothesis;/***/},/* 219 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.TranslationPhrase=void 0;var Contracts_js_1=__webpack_require__(64);var Exports_js_1=__webpack_require__(2);var TranslationStatus_js_1=__webpack_require__(48);var TranslationPhrase=/*#__PURE__*/function(){function TranslationPhrase(phrase,baseOffset){_classCallCheck(this,TranslationPhrase);this.privTranslationPhrase=phrase;this.privTranslationPhrase.Offset+=baseOffset;this.privTranslationPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privTranslationPhrase.RecognitionStatus);if(this.privTranslationPhrase.Translation!==undefined){this.privTranslationPhrase.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationPhrase.Translation.TranslationStatus);}}_createClass(TranslationPhrase,[{key:"RecognitionStatus",get:function get(){return this.privTranslationPhrase.RecognitionStatus;}},{key:"Offset",get:function get(){return this.privTranslationPhrase.Offset;}},{key:"Duration",get:function get(){return this.privTranslationPhrase.Duration;}},{key:"Text",get:function get(){return this.privTranslationPhrase.Text;}},{key:"Language",get:function get(){var _this$privTranslation2;return(_this$privTranslation2=this.privTranslationPhrase.PrimaryLanguage)===null||_this$privTranslation2===void 0?void 0:_this$privTranslation2.Language;}},{key:"Confidence",get:function get(){var _this$privTranslation3;return(_this$privTranslation3=this.privTranslationPhrase.PrimaryLanguage)===null||_this$privTranslation3===void 0?void 0:_this$privTranslation3.Confidence;}},{key:"Translation",get:function get(){return this.privTranslationPhrase.Translation;}},{key:"asJson",value:function asJson(){var jsonObj=_objectSpread({},this.privTranslationPhrase);// Convert the enum values to their string representations for serialization
var serializedObj=_objectSpread(_objectSpread({},jsonObj),{},{RecognitionStatus:Exports_js_1.RecognitionStatus[jsonObj.RecognitionStatus]});if(jsonObj.Translation){// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
serializedObj.Translation=_objectSpread(_objectSpread({},jsonObj.Translation),{},{TranslationStatus:TranslationStatus_js_1.TranslationStatus[jsonObj.Translation.TranslationStatus]});}return JSON.stringify(serializedObj);}},{key:"mapRecognitionStatus",value:function mapRecognitionStatus(status){if(typeof status==="string"){return Exports_js_1.RecognitionStatus[status];}else if(typeof status==="number"){return status;}}},{key:"mapTranslationStatus",value:function mapTranslationStatus(status){if(typeof status==="string"){return TranslationStatus_js_1.TranslationStatus[status];}else if(typeof status==="number"){return status;}}}],[{key:"fromJSON",value:function fromJSON(json,baseOffset){return new TranslationPhrase(JSON.parse(json),baseOffset);}},{key:"fromTranslationResponse",value:function fromTranslationResponse(translationResponse,baseOffset){Contracts_js_1.Contracts.throwIfNullOrUndefined(translationResponse,"translationResponse");var phrase=translationResponse.SpeechPhrase;translationResponse.SpeechPhrase=undefined;phrase.Translation=translationResponse;phrase.Text=phrase.DisplayText;return new TranslationPhrase(phrase,baseOffset);}}]);return TranslationPhrase;}();exports.TranslationPhrase=TranslationPhrase;/***/},/* 220 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.TranslationServiceRecognizer=void 0;var Exports_js_1=__webpack_require__(4);var Exports_js_2=__webpack_require__(79);var Exports_js_3=__webpack_require__(2);// eslint-disable-next-line max-classes-per-file
var TranslationServiceRecognizer=/*#__PURE__*/function(_Exports_js_3$Convers){_inherits(TranslationServiceRecognizer,_Exports_js_3$Convers);var _super127=_createSuper(TranslationServiceRecognizer);function TranslationServiceRecognizer(authentication,connectionFactory,audioSource,recognizerConfig,translationRecognizer){var _this163;_classCallCheck(this,TranslationServiceRecognizer);_this163=_super127.call(this,authentication,connectionFactory,audioSource,recognizerConfig,translationRecognizer);_this163.privTranslationRecognizer=translationRecognizer;_this163.connectionEvents.attach(function(connectionEvent){if(connectionEvent.name==="ConnectionEstablishedEvent"){_this163.privTranslationRecognizer.onConnection();}});return _this163;}_createClass(TranslationServiceRecognizer,[{key:"processTypeSpecificMessages",value:function(){var _processTypeSpecificMessages=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee102(connectionMessage){var _this164=this;var resultProps,processed,handleTranslationPhrase,handleTranslationHypothesis,phrase,hypothesis,synthEnd,result,retEvent,canceledResult;return _regeneratorRuntime().wrap(function _callee102$(_context102){while(1)switch(_context102.prev=_context102.next){case 0:resultProps=new Exports_js_2.PropertyCollection();_context102.next=3;return this.processSpeechMessages(connectionMessage);case 3:processed=_context102.sent;if(!processed){_context102.next=6;break;}return _context102.abrupt("return",true);case 6:handleTranslationPhrase=/*#__PURE__*/function(){var _ref18=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee101(translatedPhrase){var result,reason,_result2,cancelReason,cancellationErrorCode,ev;return _regeneratorRuntime().wrap(function _callee101$(_context101){while(1)switch(_context101.prev=_context101.next){case 0:resultProps.setProperty(Exports_js_2.PropertyId.SpeechServiceResponse_JsonResult,translatedPhrase.asJson());_this164.privRequestSession.onPhraseRecognized(translatedPhrase.Offset+translatedPhrase.Duration);if(!(translatedPhrase.RecognitionStatus===Exports_js_3.RecognitionStatus.Success)){_context101.next=8;break;}// OK, the recognition was successful. How'd the translation do?
result=_this164.fireEventForResult(translatedPhrase,resultProps);if(!!_this164.privTranslationRecognizer.recognized){try{_this164.privTranslationRecognizer.recognized(_this164.privTranslationRecognizer,result);/* eslint-disable no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}// report result to promise.
if(!!_this164.privSuccessCallback){try{_this164.privSuccessCallback(result.result);}catch(e){if(!!_this164.privErrorCallback){_this164.privErrorCallback(e);}}// Only invoke the call back once.
// and if it's successful don't invoke the
// error after that.
_this164.privSuccessCallback=undefined;_this164.privErrorCallback=undefined;}_context101.next=19;break;case 8:reason=Exports_js_3.EnumTranslation.implTranslateRecognitionResult(translatedPhrase.RecognitionStatus);_result2=new Exports_js_2.TranslationRecognitionResult(undefined,_this164.privRequestSession.requestId,reason,translatedPhrase.Text,translatedPhrase.Duration,translatedPhrase.Offset,translatedPhrase.Language,translatedPhrase.Confidence,undefined,translatedPhrase.asJson(),resultProps);if(!(reason===Exports_js_2.ResultReason.Canceled)){_context101.next=17;break;}cancelReason=Exports_js_3.EnumTranslation.implTranslateCancelResult(translatedPhrase.RecognitionStatus);cancellationErrorCode=Exports_js_3.EnumTranslation.implTranslateCancelErrorCode(translatedPhrase.RecognitionStatus);_context101.next=15;return _this164.cancelRecognitionLocal(cancelReason,cancellationErrorCode,Exports_js_3.EnumTranslation.implTranslateErrorDetails(cancellationErrorCode));case 15:_context101.next=18;break;case 17:if(translatedPhrase.RecognitionStatus!==Exports_js_3.RecognitionStatus.EndOfDictation){ev=new Exports_js_2.TranslationRecognitionEventArgs(_result2,_result2.offset,_this164.privRequestSession.sessionId);if(!!_this164.privTranslationRecognizer.recognized){try{_this164.privTranslationRecognizer.recognized(_this164.privTranslationRecognizer,ev);/* eslint-disable no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}// report result to promise.
if(!!_this164.privSuccessCallback){try{_this164.privSuccessCallback(_result2);}catch(e){if(!!_this164.privErrorCallback){_this164.privErrorCallback(e);}}// Only invoke the call back once.
// and if it's successful don't invoke the
// error after that.
_this164.privSuccessCallback=undefined;_this164.privErrorCallback=undefined;}}case 18:processed=true;case 19:case"end":return _context101.stop();}},_callee101);}));return function handleTranslationPhrase(_x70){return _ref18.apply(this,arguments);};}();handleTranslationHypothesis=function handleTranslationHypothesis(hypothesis){resultProps.setProperty(Exports_js_2.PropertyId.SpeechServiceResponse_JsonResult,hypothesis.asJson());var result=_this164.fireEventForResult(hypothesis,resultProps);_this164.privRequestSession.onHypothesis(result.offset);if(!!_this164.privTranslationRecognizer.recognizing){try{_this164.privTranslationRecognizer.recognizing(_this164.privTranslationRecognizer,result);/* eslint-disable no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}processed=true;};if(connectionMessage.messageType===Exports_js_1.MessageType.Text){resultProps.setProperty(Exports_js_2.PropertyId.SpeechServiceResponse_JsonResult,connectionMessage.textBody);}_context102.t0=connectionMessage.path.toLowerCase();_context102.next=_context102.t0==="translation.hypothesis"?12:_context102.t0==="translation.response"?14:_context102.t0==="translation.phrase"?23:_context102.t0==="translation.synthesis"?26:_context102.t0==="audio.end"?29:_context102.t0==="translation.synthesis.end"?29:41;break;case 12:handleTranslationHypothesis(Exports_js_3.TranslationHypothesis.fromJSON(connectionMessage.textBody,this.privRequestSession.currentTurnAudioOffset));return _context102.abrupt("break",42);case 14:phrase=JSON.parse(connectionMessage.textBody);if(!phrase.SpeechPhrase){_context102.next=20;break;}_context102.next=18;return handleTranslationPhrase(Exports_js_3.TranslationPhrase.fromTranslationResponse(phrase,this.privRequestSession.currentTurnAudioOffset));case 18:_context102.next=22;break;case 20:hypothesis=JSON.parse(connectionMessage.textBody);if(!!hypothesis.SpeechHypothesis){handleTranslationHypothesis(Exports_js_3.TranslationHypothesis.fromTranslationResponse(hypothesis,this.privRequestSession.currentTurnAudioOffset));}case 22:return _context102.abrupt("break",42);case 23:_context102.next=25;return handleTranslationPhrase(Exports_js_3.TranslationPhrase.fromJSON(connectionMessage.textBody,this.privRequestSession.currentTurnAudioOffset));case 25:return _context102.abrupt("break",42);case 26:this.sendSynthesisAudio(connectionMessage.binaryBody,this.privRequestSession.sessionId);processed=true;return _context102.abrupt("break",42);case 29:synthEnd=Exports_js_3.TranslationSynthesisEnd.fromJSON(connectionMessage.textBody);_context102.t1=synthEnd.SynthesisStatus;_context102.next=_context102.t1===Exports_js_3.SynthesisStatus.Error?33:_context102.t1===Exports_js_3.SynthesisStatus.Success?36:38;break;case 33:if(!!this.privTranslationRecognizer.synthesizing){result=new Exports_js_2.TranslationSynthesisResult(Exports_js_2.ResultReason.Canceled,undefined);retEvent=new Exports_js_2.TranslationSynthesisEventArgs(result,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,retEvent);/* eslint-disable no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}if(!!this.privTranslationRecognizer.canceled){// And raise a canceled event to send the rich(er) error message back.
canceledResult=new Exports_js_2.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,Exports_js_2.CancellationReason.Error,synthEnd.FailureReason,Exports_js_2.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,canceledResult);/* eslint-disable no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}return _context102.abrupt("break",39);case 36:this.sendSynthesisAudio(undefined,this.privRequestSession.sessionId);return _context102.abrupt("break",39);case 38:return _context102.abrupt("break",39);case 39:processed=true;return _context102.abrupt("break",42);case 41:return _context102.abrupt("break",42);case 42:return _context102.abrupt("return",processed);case 43:case"end":return _context102.stop();}},_callee102,this);}));function processTypeSpecificMessages(_x69){return _processTypeSpecificMessages.apply(this,arguments);}return processTypeSpecificMessages;}()// Cancels recognition.
},{key:"cancelRecognition",value:function cancelRecognition(sessionId,requestId,cancellationReason,errorCode,error){var properties=new Exports_js_2.PropertyCollection();properties.setProperty(Exports_js_3.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[errorCode]);if(!!this.privTranslationRecognizer.canceled){var cancelEvent=new Exports_js_2.TranslationRecognitionCanceledEventArgs(sessionId,cancellationReason,error,errorCode,undefined);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,cancelEvent);/* eslint-disable no-empty */}catch(_unused3){}}if(!!this.privSuccessCallback){var result=new Exports_js_2.TranslationRecognitionResult(undefined,// Translations
requestId,Exports_js_2.ResultReason.Canceled,undefined,// Text
undefined,// Druation
undefined,// Offset
undefined,// Language
undefined,// LanguageDetectionConfidence
error,undefined,// Json
properties);try{this.privSuccessCallback(result);/* eslint-disable no-empty */this.privSuccessCallback=undefined;}catch(_unused4){}}}},{key:"handleRecognizingCallback",value:function handleRecognizingCallback(result,offset,sessionId){try{var ev=new Exports_js_2.TranslationRecognitionEventArgs(Exports_js_2.TranslationRecognitionResult.fromSpeechRecognitionResult(result),offset,sessionId);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,ev);/* eslint-disable no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}},{key:"handleRecognizedCallback",value:function handleRecognizedCallback(result,offset,sessionId){try{var ev=new Exports_js_2.TranslationRecognitionEventArgs(Exports_js_2.TranslationRecognitionResult.fromSpeechRecognitionResult(result),offset,sessionId);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,ev);}catch(error){// Not going to let errors in the event handler
// trip things up.
}}},{key:"fireEventForResult",value:function fireEventForResult(serviceResult,properties){var translations;if(undefined!==serviceResult.Translation.Translations){translations=new Exports_js_2.Translations();var _iterator18=_createForOfIteratorHelper(serviceResult.Translation.Translations),_step18;try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var translation=_step18.value;translations.set(translation.Language,translation.Text||translation.DisplayText);}}catch(err){_iterator18.e(err);}finally{_iterator18.f();}}var resultReason;var confidence;if(serviceResult instanceof Exports_js_3.TranslationPhrase){if(!!serviceResult.Translation&&serviceResult.Translation.TranslationStatus===Exports_js_1.TranslationStatus.Success){resultReason=Exports_js_2.ResultReason.TranslatedSpeech;}else{resultReason=Exports_js_2.ResultReason.RecognizedSpeech;}confidence=serviceResult.Confidence;}else{resultReason=Exports_js_2.ResultReason.TranslatingSpeech;}var language=serviceResult.Language;var result=new Exports_js_2.TranslationRecognitionResult(translations,this.privRequestSession.requestId,resultReason,serviceResult.Text,serviceResult.Duration,serviceResult.Offset,language,confidence,serviceResult.Translation.FailureReason,serviceResult.asJson(),properties);var ev=new Exports_js_2.TranslationRecognitionEventArgs(result,serviceResult.Offset,this.privRequestSession.sessionId);return ev;}},{key:"sendSynthesisAudio",value:function sendSynthesisAudio(audio,sessionId){var reason=undefined===audio?Exports_js_2.ResultReason.SynthesizingAudioCompleted:Exports_js_2.ResultReason.SynthesizingAudio;var result=new Exports_js_2.TranslationSynthesisResult(reason,audio);var retEvent=new Exports_js_2.TranslationSynthesisEventArgs(result,sessionId);if(!!this.privTranslationRecognizer.synthesizing){try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,retEvent);/* eslint-disable no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}}}]);return TranslationServiceRecognizer;}(Exports_js_3.ConversationServiceRecognizer);exports.TranslationServiceRecognizer=TranslationServiceRecognizer;/***/},/* 221 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechDetected=void 0;var SpeechDetected=/*#__PURE__*/function(){function SpeechDetected(json,baseOffset){_classCallCheck(this,SpeechDetected);this.privSpeechStartDetected=JSON.parse(json);this.privSpeechStartDetected.Offset+=baseOffset;}_createClass(SpeechDetected,[{key:"Offset",get:function get(){return this.privSpeechStartDetected.Offset;}}],[{key:"fromJSON",value:function fromJSON(json,baseOffset){return new SpeechDetected(json,baseOffset);}}]);return SpeechDetected;}();exports.SpeechDetected=SpeechDetected;/***/},/* 222 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechHypothesis=void 0;var SpeechHypothesis=/*#__PURE__*/function(){function SpeechHypothesis(json,baseOffset){_classCallCheck(this,SpeechHypothesis);this.privSpeechHypothesis=JSON.parse(json);this.updateOffset(baseOffset);}_createClass(SpeechHypothesis,[{key:"updateOffset",value:function updateOffset(baseOffset){this.privSpeechHypothesis.Offset+=baseOffset;}},{key:"asJson",value:function asJson(){return JSON.stringify(this.privSpeechHypothesis);}},{key:"Text",get:function get(){return this.privSpeechHypothesis.Text;}},{key:"Offset",get:function get(){return this.privSpeechHypothesis.Offset;}},{key:"Duration",get:function get(){return this.privSpeechHypothesis.Duration;}},{key:"Language",get:function get(){return this.privSpeechHypothesis.PrimaryLanguage===undefined?undefined:this.privSpeechHypothesis.PrimaryLanguage.Language;}},{key:"LanguageDetectionConfidence",get:function get(){return this.privSpeechHypothesis.PrimaryLanguage===undefined?undefined:this.privSpeechHypothesis.PrimaryLanguage.Confidence;}},{key:"SpeakerId",get:function get(){return this.privSpeechHypothesis.SpeakerId;}}],[{key:"fromJSON",value:function fromJSON(json,baseOffset){return new SpeechHypothesis(json,baseOffset);}}]);return SpeechHypothesis;}();exports.SpeechHypothesis=SpeechHypothesis;/***/},/* 223 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechKeyword=void 0;var SpeechKeyword=/*#__PURE__*/function(){function SpeechKeyword(json,baseOffset){_classCallCheck(this,SpeechKeyword);this.privSpeechKeyword=JSON.parse(json);this.privSpeechKeyword.Offset+=baseOffset;}_createClass(SpeechKeyword,[{key:"Status",get:function get(){return this.privSpeechKeyword.Status;}},{key:"Text",get:function get(){return this.privSpeechKeyword.Text;}},{key:"Offset",get:function get(){return this.privSpeechKeyword.Offset;}},{key:"Duration",get:function get(){return this.privSpeechKeyword.Duration;}},{key:"asJson",value:function asJson(){return JSON.stringify(this.privSpeechKeyword);}}],[{key:"fromJSON",value:function fromJSON(json,baseOffset){return new SpeechKeyword(json,baseOffset);}}]);return SpeechKeyword;}();exports.SpeechKeyword=SpeechKeyword;/***/},/* 224 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechServiceRecognizer=void 0;var Exports_js_1=__webpack_require__(79);var Exports_js_2=__webpack_require__(2);// eslint-disable-next-line max-classes-per-file
var SpeechServiceRecognizer=/*#__PURE__*/function(_Exports_js_2$Service2){_inherits(SpeechServiceRecognizer,_Exports_js_2$Service2);var _super128=_createSuper(SpeechServiceRecognizer);function SpeechServiceRecognizer(authentication,connectionFactory,audioSource,recognizerConfig,speechRecognizer){var _this165;_classCallCheck(this,SpeechServiceRecognizer);_this165=_super128.call(this,authentication,connectionFactory,audioSource,recognizerConfig,speechRecognizer);_this165.privSpeechRecognizer=speechRecognizer;return _this165;}_createClass(SpeechServiceRecognizer,[{key:"processTypeSpecificMessages",value:function(){var _processTypeSpecificMessages2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee103(connectionMessage){var result,resultProps,processed,hypothesis,ev,simple,resultReason,cancelReason,cancellationErrorCode,detailed,event;return _regeneratorRuntime().wrap(function _callee103$(_context103){while(1)switch(_context103.prev=_context103.next){case 0:resultProps=new Exports_js_1.PropertyCollection();processed=false;_context103.t0=connectionMessage.path.toLowerCase();_context103.next=_context103.t0==="speech.hypothesis"?5:_context103.t0==="speech.fragment"?5:_context103.t0==="speech.phrase"?13:32;break;case 5:hypothesis=Exports_js_2.SpeechHypothesis.fromJSON(connectionMessage.textBody,this.privRequestSession.currentTurnAudioOffset);resultProps.setProperty(Exports_js_1.PropertyId.SpeechServiceResponse_JsonResult,hypothesis.asJson());result=new Exports_js_1.SpeechRecognitionResult(this.privRequestSession.requestId,Exports_js_1.ResultReason.RecognizingSpeech,hypothesis.Text,hypothesis.Duration,hypothesis.Offset,hypothesis.Language,hypothesis.LanguageDetectionConfidence,undefined,// Speaker Id
undefined,hypothesis.asJson(),resultProps);this.privRequestSession.onHypothesis(hypothesis.Offset);ev=new Exports_js_1.SpeechRecognitionEventArgs(result,hypothesis.Offset,this.privRequestSession.sessionId);if(!!this.privSpeechRecognizer.recognizing){try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,ev);/* eslint-disable no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}processed=true;return _context103.abrupt("break",33);case 13:simple=Exports_js_2.SimpleSpeechPhrase.fromJSON(connectionMessage.textBody,this.privRequestSession.currentTurnAudioOffset);resultProps.setProperty(Exports_js_1.PropertyId.SpeechServiceResponse_JsonResult,simple.asJson());resultReason=Exports_js_2.EnumTranslation.implTranslateRecognitionResult(simple.RecognitionStatus,this.privExpectContentAssessmentResponse);this.privRequestSession.onPhraseRecognized(simple.Offset+simple.Duration);if(!(Exports_js_1.ResultReason.Canceled===resultReason)){_context103.next=24;break;}cancelReason=Exports_js_2.EnumTranslation.implTranslateCancelResult(simple.RecognitionStatus);cancellationErrorCode=Exports_js_2.EnumTranslation.implTranslateCancelErrorCode(simple.RecognitionStatus);_context103.next=22;return this.cancelRecognitionLocal(cancelReason,cancellationErrorCode,Exports_js_2.EnumTranslation.implTranslateErrorDetails(cancellationErrorCode));case 22:_context103.next=30;break;case 24:if(!(simple.RecognitionStatus===Exports_js_2.RecognitionStatus.EndOfDictation)){_context103.next=26;break;}return _context103.abrupt("break",33);case 26:if(this.privRecognizerConfig.parameters.getProperty(Exports_js_2.OutputFormatPropertyName)===Exports_js_1.OutputFormat[Exports_js_1.OutputFormat.Simple]){result=new Exports_js_1.SpeechRecognitionResult(this.privRequestSession.requestId,resultReason,simple.DisplayText,simple.Duration,simple.Offset,simple.Language,simple.LanguageDetectionConfidence,undefined,// Speaker Id
undefined,simple.asJson(),resultProps);}else{detailed=Exports_js_2.DetailedSpeechPhrase.fromJSON(connectionMessage.textBody,this.privRequestSession.currentTurnAudioOffset);resultProps.setProperty(Exports_js_1.PropertyId.SpeechServiceResponse_JsonResult,detailed.asJson());result=new Exports_js_1.SpeechRecognitionResult(this.privRequestSession.requestId,resultReason,detailed.RecognitionStatus===Exports_js_2.RecognitionStatus.Success?detailed.NBest[0].Display:"",detailed.Duration,detailed.Offset,detailed.Language,detailed.LanguageDetectionConfidence,undefined,// Speaker Id
undefined,detailed.asJson(),resultProps);}event=new Exports_js_1.SpeechRecognitionEventArgs(result,result.offset,this.privRequestSession.sessionId);if(!!this.privSpeechRecognizer.recognized){try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,event);/* eslint-disable no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}if(!!this.privSuccessCallback){try{this.privSuccessCallback(result);}catch(e){if(!!this.privErrorCallback){this.privErrorCallback(e);}}// Only invoke the call back once.
// and if it's successful don't invoke the
// error after that.
this.privSuccessCallback=undefined;this.privErrorCallback=undefined;}case 30:processed=true;return _context103.abrupt("break",33);case 32:return _context103.abrupt("break",33);case 33:return _context103.abrupt("return",processed);case 34:case"end":return _context103.stop();}},_callee103,this);}));function processTypeSpecificMessages(_x71){return _processTypeSpecificMessages2.apply(this,arguments);}return processTypeSpecificMessages;}()// Cancels recognition.
},{key:"cancelRecognition",value:function cancelRecognition(sessionId,requestId,cancellationReason,errorCode,error){var properties=new Exports_js_1.PropertyCollection();properties.setProperty(Exports_js_2.CancellationErrorCodePropertyName,Exports_js_1.CancellationErrorCode[errorCode]);if(!!this.privSpeechRecognizer.canceled){var cancelEvent=new Exports_js_1.SpeechRecognitionCanceledEventArgs(cancellationReason,error,errorCode,undefined,sessionId);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,cancelEvent);/* eslint-disable no-empty */}catch(_unused5){}}if(!!this.privSuccessCallback){var result=new Exports_js_1.SpeechRecognitionResult(requestId,Exports_js_1.ResultReason.Canceled,undefined,// Text
undefined,// Duration
undefined,// Offset
undefined,// Language
undefined,// Language Detection Confidence
undefined,// Speaker Id
error,undefined,// Json
properties);try{this.privSuccessCallback(result);this.privSuccessCallback=undefined;/* eslint-disable no-empty */}catch(_unused6){}}}}]);return SpeechServiceRecognizer;}(Exports_js_2.ServiceRecognizerBase);exports.SpeechServiceRecognizer=SpeechServiceRecognizer;/***/},/* 225 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationTranscriptionServiceRecognizer=void 0;var Exports_js_1=__webpack_require__(79);var Exports_js_2=__webpack_require__(2);// eslint-disable-next-line max-classes-per-file
var ConversationTranscriptionServiceRecognizer=/*#__PURE__*/function(_Exports_js_2$Service3){_inherits(ConversationTranscriptionServiceRecognizer,_Exports_js_2$Service3);var _super129=_createSuper(ConversationTranscriptionServiceRecognizer);function ConversationTranscriptionServiceRecognizer(authentication,connectionFactory,audioSource,recognizerConfig,conversationTranscriber){var _this166;_classCallCheck(this,ConversationTranscriptionServiceRecognizer);_this166=_super129.call(this,authentication,connectionFactory,audioSource,recognizerConfig,conversationTranscriber);_this166.privConversationTranscriber=conversationTranscriber;_this166.setSpeakerDiarizationJson();return _this166;}_createClass(ConversationTranscriptionServiceRecognizer,[{key:"setSpeakerDiarizationJson",value:function setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){var phraseDetection=this.privSpeechContext.getSection("phraseDetection");phraseDetection.mode="Conversation";var speakerDiarization={};speakerDiarization.mode="Anonymous";speakerDiarization.audioSessionId=this.privDiarizationSessionId;speakerDiarization.audioOffsetMs=0;speakerDiarization.diarizeIntermediates=this.privRecognizerConfig.parameters.getProperty(Exports_js_1.PropertyId.SpeechServiceResponse_DiarizeIntermediateResults,"false")==="true";phraseDetection.speakerDiarization=speakerDiarization;this.privSpeechContext.setSection("phraseDetection",phraseDetection);}}},{key:"processTypeSpecificMessages",value:function(){var _processTypeSpecificMessages3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee104(connectionMessage){var result,resultProps,processed,hypothesis,ev,simple,resultReason,cancelReason,cancellationErrorCode,detailed,event;return _regeneratorRuntime().wrap(function _callee104$(_context104){while(1)switch(_context104.prev=_context104.next){case 0:resultProps=new Exports_js_1.PropertyCollection();resultProps.setProperty(Exports_js_1.PropertyId.SpeechServiceResponse_JsonResult,connectionMessage.textBody);processed=false;_context104.t0=connectionMessage.path.toLowerCase();_context104.next=_context104.t0==="speech.hypothesis"?6:_context104.t0==="speech.fragment"?6:_context104.t0==="speech.phrase"?13:26;break;case 6:hypothesis=Exports_js_2.SpeechHypothesis.fromJSON(connectionMessage.textBody,this.privRequestSession.currentTurnAudioOffset);result=new Exports_js_1.ConversationTranscriptionResult(this.privRequestSession.requestId,Exports_js_1.ResultReason.RecognizingSpeech,hypothesis.Text,hypothesis.Duration,hypothesis.Offset,hypothesis.Language,hypothesis.LanguageDetectionConfidence,hypothesis.SpeakerId,undefined,hypothesis.asJson(),resultProps);this.privRequestSession.onHypothesis(hypothesis.Offset);ev=new Exports_js_1.ConversationTranscriptionEventArgs(result,hypothesis.Duration,this.privRequestSession.sessionId);if(!!this.privConversationTranscriber.transcribing){try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,ev);/* eslint-disable no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}processed=true;return _context104.abrupt("break",27);case 13:simple=Exports_js_2.SimpleSpeechPhrase.fromJSON(connectionMessage.textBody,this.privRequestSession.currentTurnAudioOffset);resultReason=Exports_js_2.EnumTranslation.implTranslateRecognitionResult(simple.RecognitionStatus);this.privRequestSession.onPhraseRecognized(simple.Offset+simple.Duration);if(!(Exports_js_1.ResultReason.Canceled===resultReason)){_context104.next=23;break;}cancelReason=Exports_js_2.EnumTranslation.implTranslateCancelResult(simple.RecognitionStatus);cancellationErrorCode=Exports_js_2.EnumTranslation.implTranslateCancelErrorCode(simple.RecognitionStatus);_context104.next=21;return this.cancelRecognitionLocal(cancelReason,cancellationErrorCode,Exports_js_2.EnumTranslation.implTranslateErrorDetails(cancellationErrorCode));case 21:_context104.next=24;break;case 23:if(!(this.privRequestSession.isSpeechEnded&&resultReason===Exports_js_1.ResultReason.NoMatch&&simple.RecognitionStatus!==Exports_js_2.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(Exports_js_2.OutputFormatPropertyName)===Exports_js_1.OutputFormat[Exports_js_1.OutputFormat.Simple]){result=new Exports_js_1.ConversationTranscriptionResult(this.privRequestSession.requestId,resultReason,simple.DisplayText,simple.Duration,simple.Offset,simple.Language,simple.LanguageDetectionConfidence,simple.SpeakerId,undefined,simple.asJson(),resultProps);}else{detailed=Exports_js_2.DetailedSpeechPhrase.fromJSON(connectionMessage.textBody,this.privRequestSession.currentTurnAudioOffset);result=new Exports_js_1.ConversationTranscriptionResult(this.privRequestSession.requestId,resultReason,detailed.RecognitionStatus===Exports_js_2.RecognitionStatus.Success?detailed.NBest[0].Display:undefined,detailed.Duration,detailed.Offset,detailed.Language,detailed.LanguageDetectionConfidence,simple.SpeakerId,undefined,detailed.asJson(),resultProps);}event=new Exports_js_1.ConversationTranscriptionEventArgs(result,result.offset,this.privRequestSession.sessionId);if(!!this.privConversationTranscriber.transcribed){try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,event);/* eslint-disable no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}}case 24:processed=true;return _context104.abrupt("break",27);case 26:return _context104.abrupt("break",27);case 27:return _context104.abrupt("return",processed);case 28:case"end":return _context104.stop();}},_callee104,this);}));function processTypeSpecificMessages(_x72){return _processTypeSpecificMessages3.apply(this,arguments);}return processTypeSpecificMessages;}()// Cancels recognition.
},{key:"cancelRecognition",value:function cancelRecognition(sessionId,requestId,cancellationReason,errorCode,error){var properties=new Exports_js_1.PropertyCollection();properties.setProperty(Exports_js_2.CancellationErrorCodePropertyName,Exports_js_1.CancellationErrorCode[errorCode]);if(!!this.privConversationTranscriber.canceled){var cancelEvent=new Exports_js_1.ConversationTranscriptionCanceledEventArgs(cancellationReason,error,errorCode,undefined,sessionId);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,cancelEvent);/* eslint-disable no-empty */}catch(_unused7){}}}}]);return ConversationTranscriptionServiceRecognizer;}(Exports_js_2.ServiceRecognizerBase);exports.ConversationTranscriptionServiceRecognizer=ConversationTranscriptionServiceRecognizer;/***/},/* 226 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.TranscriptionServiceRecognizer=void 0;var Exports_js_1=__webpack_require__(4);var Exports_js_2=__webpack_require__(79);var Exports_js_3=__webpack_require__(2);var SpeechConnectionMessage_Internal_js_1=__webpack_require__(206);// eslint-disable-next-line max-classes-per-file
var TranscriptionServiceRecognizer=/*#__PURE__*/function(_Exports_js_3$Convers2){_inherits(TranscriptionServiceRecognizer,_Exports_js_3$Convers2);var _super130=_createSuper(TranscriptionServiceRecognizer);function TranscriptionServiceRecognizer(authentication,connectionFactory,audioSource,recognizerConfig,transcriber){var _this167;_classCallCheck(this,TranscriptionServiceRecognizer);_this167=_super130.call(this,authentication,connectionFactory,audioSource,recognizerConfig,transcriber);_this167.privTranscriberRecognizer=transcriber;_this167.sendPrePayloadJSONOverride=function(connection){return _this167.sendTranscriptionStartJSON(connection);};if(_this167.privRecognizerConfig.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"){_this167.privSpeechContext.setWordLevelTimings();}return _this167;}_createClass(TranscriptionServiceRecognizer,[{key:"sendSpeechEventAsync",value:function(){var _sendSpeechEventAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee105(info,command){var connection;return _regeneratorRuntime().wrap(function _callee105$(_context105){while(1)switch(_context105.prev=_context105.next){case 0:if(!this.privRequestSession.isRecognizing){_context105.next=6;break;}_context105.next=3;return this.fetchConnection();case 3:connection=_context105.sent;_context105.next=6;return this.sendSpeechEvent(connection,this.createSpeechEventPayload(info,command));case 6:case"end":return _context105.stop();}},_callee105,this);}));function sendSpeechEventAsync(_x73,_x74){return _sendSpeechEventAsync.apply(this,arguments);}return sendSpeechEventAsync;}()},{key:"sendMeetingSpeechEventAsync",value:function(){var _sendMeetingSpeechEventAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee106(info,command){var connection;return _regeneratorRuntime().wrap(function _callee106$(_context106){while(1)switch(_context106.prev=_context106.next){case 0:if(!this.privRequestSession.isRecognizing){_context106.next=6;break;}_context106.next=3;return this.fetchConnection();case 3:connection=_context106.sent;_context106.next=6;return this.sendSpeechEvent(connection,this.createMeetingSpeechEventPayload(info,command));case 6:case"end":return _context106.stop();}},_callee106,this);}));function sendMeetingSpeechEventAsync(_x75,_x76){return _sendMeetingSpeechEventAsync.apply(this,arguments);}return sendMeetingSpeechEventAsync;}()},{key:"processTypeSpecificMessages",value:function processTypeSpecificMessages(connectionMessage){return this.processSpeechMessages(connectionMessage);}},{key:"handleRecognizedCallback",value:function handleRecognizedCallback(result,offset,sessionId){try{var event=new Exports_js_2.SpeechRecognitionEventArgs(result,offset,sessionId);this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,event);if(!!this.privSuccessCallback){try{this.privSuccessCallback(result);}catch(e){if(!!this.privErrorCallback){this.privErrorCallback(e);}}// Only invoke the call back once.
// and if it's successful don't invoke the
// error after that.
this.privSuccessCallback=undefined;this.privErrorCallback=undefined;}/* eslint-disable no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}},{key:"handleRecognizingCallback",value:function handleRecognizingCallback(result,duration,sessionId){try{var ev=new Exports_js_2.SpeechRecognitionEventArgs(result,duration,sessionId);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,ev);/* eslint-disable no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}// Cancels recognition.
},{key:"cancelRecognition",value:function cancelRecognition(sessionId,requestId,cancellationReason,errorCode,error){var properties=new Exports_js_2.PropertyCollection();properties.setProperty(Exports_js_3.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[errorCode]);if(this.privTranscriberRecognizer.IsMeetingRecognizer()){if(!!this.privTranscriberRecognizer.canceled){var cancelEvent=new Exports_js_2.MeetingTranscriptionCanceledEventArgs(cancellationReason,error,errorCode,undefined,sessionId);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,cancelEvent);/* eslint-disable no-empty */}catch(_unused8){}}}else{if(!!this.privTranscriberRecognizer.canceled){var _cancelEvent=new Exports_js_2.ConversationTranscriptionCanceledEventArgs(cancellationReason,error,errorCode,undefined,sessionId);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,_cancelEvent);/* eslint-disable no-empty */}catch(_unused9){}}}if(!!this.privSuccessCallback){var result=new Exports_js_2.SpeechRecognitionResult(requestId,Exports_js_2.ResultReason.Canceled,undefined,// Text
undefined,// Duration
undefined,// Offset
undefined,// Language
undefined,// Language Detection Confidence
undefined,// Speaker Id
error,undefined,// Json
properties);try{this.privSuccessCallback(result);this.privSuccessCallback=undefined;/* eslint-disable no-empty */}catch(_unused10){}}}// Encapsulated for derived service recognizers that need to send additional JSON
},{key:"sendTranscriptionStartJSON",value:function(){var _sendTranscriptionStartJSON=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee107(connection){var info,payload,_info,_payload2;return _regeneratorRuntime().wrap(function _callee107$(_context107){while(1)switch(_context107.prev=_context107.next){case 0:_context107.next=2;return this.sendSpeechContext(connection,true);case 2:if(!this.privTranscriberRecognizer.IsMeetingRecognizer()){_context107.next=9;break;}info=this.privTranscriberRecognizer.getMeetingInfo();payload=this.createMeetingSpeechEventPayload(info,"start");_context107.next=7;return this.sendSpeechEvent(connection,payload);case 7:_context107.next=13;break;case 9:_info=this.privTranscriberRecognizer.getConversationInfo();_payload2=this.createSpeechEventPayload(_info,"start");_context107.next=13;return this.sendSpeechEvent(connection,_payload2);case 13:_context107.next=15;return this.sendWaveHeader(connection);case 15:return _context107.abrupt("return");case 16:case"end":return _context107.stop();}},_callee107,this);}));function sendTranscriptionStartJSON(_x77){return _sendTranscriptionStartJSON.apply(this,arguments);}return sendTranscriptionStartJSON;}()},{key:"sendSpeechEvent",value:function sendSpeechEvent(connection,payload){var speechEventJson=JSON.stringify(payload);if(speechEventJson){return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_1.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",speechEventJson));}return;}},{key:"createSpeechEventPayload",value:function createSpeechEventPayload(info,command){var eventDict={id:"meeting",name:command,meeting:info.conversationProperties};eventDict.meeting.id=info.id;eventDict.meeting.attendees=info.participants;return eventDict;}},{key:"createMeetingSpeechEventPayload",value:function createMeetingSpeechEventPayload(info,command){var eventDict={id:"meeting",name:command,meeting:info.meetingProperties};eventDict.meeting.id=info.id;eventDict.meeting.attendees=info.participants;return eventDict;}}]);return TranscriptionServiceRecognizer;}(Exports_js_3.ConversationServiceRecognizer);exports.TranscriptionServiceRecognizer=TranscriptionServiceRecognizer;/***/},/* 227 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.DetailedSpeechPhrase=void 0;var Exports_js_1=__webpack_require__(2);var DetailedSpeechPhrase=/*#__PURE__*/function(){function DetailedSpeechPhrase(json,baseOffset){_classCallCheck(this,DetailedSpeechPhrase);this.privDetailedSpeechPhrase=JSON.parse(json);this.privDetailedSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privDetailedSpeechPhrase.RecognitionStatus);this.updateOffsets(baseOffset);}_createClass(DetailedSpeechPhrase,[{key:"updateOffsets",value:function updateOffsets(baseOffset){this.privDetailedSpeechPhrase.Offset+=baseOffset;if(!!this.privDetailedSpeechPhrase.NBest){var _iterator19=_createForOfIteratorHelper(this.privDetailedSpeechPhrase.NBest),_step19;try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var phrase=_step19.value;if(!!phrase.Words){var _iterator20=_createForOfIteratorHelper(phrase.Words),_step20;try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var word=_step20.value;word.Offset+=baseOffset;}}catch(err){_iterator20.e(err);}finally{_iterator20.f();}}if(!!phrase.DisplayWords){var _iterator21=_createForOfIteratorHelper(phrase.DisplayWords),_step21;try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var _word=_step21.value;_word.Offset+=baseOffset;}}catch(err){_iterator21.e(err);}finally{_iterator21.f();}}}}catch(err){_iterator19.e(err);}finally{_iterator19.f();}}}},{key:"asJson",value:function asJson(){var jsonObj=_objectSpread({},this.privDetailedSpeechPhrase);// Convert the enum value to its string representation for serialization purposes.
return JSON.stringify(_objectSpread(_objectSpread({},jsonObj),{},{RecognitionStatus:Exports_js_1.RecognitionStatus[jsonObj.RecognitionStatus]}));}},{key:"RecognitionStatus",get:function get(){return this.privDetailedSpeechPhrase.RecognitionStatus;}},{key:"NBest",get:function get(){return this.privDetailedSpeechPhrase.NBest;}},{key:"Duration",get:function get(){return this.privDetailedSpeechPhrase.Duration;}},{key:"Offset",get:function get(){return this.privDetailedSpeechPhrase.Offset;}},{key:"Language",get:function get(){return this.privDetailedSpeechPhrase.PrimaryLanguage===undefined?undefined:this.privDetailedSpeechPhrase.PrimaryLanguage.Language;}},{key:"LanguageDetectionConfidence",get:function get(){return this.privDetailedSpeechPhrase.PrimaryLanguage===undefined?undefined:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence;}},{key:"Text",get:function get(){if(!!this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]){return this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText;}return this.privDetailedSpeechPhrase.DisplayText;}},{key:"SpeakerId",get:function get(){return this.privDetailedSpeechPhrase.SpeakerId;}},{key:"mapRecognitionStatus",value:function mapRecognitionStatus(status){if(typeof status==="string"){return Exports_js_1.RecognitionStatus[status];}else if(typeof status==="number"){return status;}}}],[{key:"fromJSON",value:function fromJSON(json,baseOffset){return new DetailedSpeechPhrase(json,baseOffset);}}]);return DetailedSpeechPhrase;}();exports.DetailedSpeechPhrase=DetailedSpeechPhrase;/***/},/* 228 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SimpleSpeechPhrase=void 0;var Exports_js_1=__webpack_require__(2);var SimpleSpeechPhrase=/*#__PURE__*/function(){function SimpleSpeechPhrase(json){var baseOffset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;_classCallCheck(this,SimpleSpeechPhrase);this.privSimpleSpeechPhrase=JSON.parse(json);this.privSimpleSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privSimpleSpeechPhrase.RecognitionStatus);// RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus as unknown as keyof typeof RecognitionStatus];
this.updateOffset(baseOffset);}_createClass(SimpleSpeechPhrase,[{key:"updateOffset",value:function updateOffset(baseOffset){this.privSimpleSpeechPhrase.Offset+=baseOffset;}},{key:"asJson",value:function asJson(){var jsonObj=_objectSpread({},this.privSimpleSpeechPhrase);// Convert the enum value to its string representation for serialization purposes.
return JSON.stringify(_objectSpread(_objectSpread({},jsonObj),{},{RecognitionStatus:Exports_js_1.RecognitionStatus[jsonObj.RecognitionStatus]}));}},{key:"RecognitionStatus",get:function get(){return this.privSimpleSpeechPhrase.RecognitionStatus;}},{key:"DisplayText",get:function get(){return this.privSimpleSpeechPhrase.DisplayText;}},{key:"Offset",get:function get(){return this.privSimpleSpeechPhrase.Offset;}},{key:"Duration",get:function get(){return this.privSimpleSpeechPhrase.Duration;}},{key:"Language",get:function get(){return this.privSimpleSpeechPhrase.PrimaryLanguage===undefined?undefined:this.privSimpleSpeechPhrase.PrimaryLanguage.Language;}},{key:"LanguageDetectionConfidence",get:function get(){return this.privSimpleSpeechPhrase.PrimaryLanguage===undefined?undefined:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence;}},{key:"SpeakerId",get:function get(){return this.privSimpleSpeechPhrase.SpeakerId;}},{key:"mapRecognitionStatus",value:function mapRecognitionStatus(status){if(typeof status==="string"){return Exports_js_1.RecognitionStatus[status];}else if(typeof status==="number"){return status;}}}],[{key:"fromJSON",value:function fromJSON(json,baseOffset){return new SimpleSpeechPhrase(json,baseOffset);}}]);return SimpleSpeechPhrase;}();exports.SimpleSpeechPhrase=SimpleSpeechPhrase;/***/},/* 229 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.AddedLmIntent=void 0;/**
 * @class AddedLmIntent
 */ // eslint-disable-next-line max-classes-per-file
var AddedLmIntent=/*#__PURE__*/_createClass(/**
     * Creates and initializes an instance of this class.
     * @constructor
     * @param modelImpl - The model.
     * @param intentName - The intent name.
     */function AddedLmIntent(modelImpl,intentName){_classCallCheck(this,AddedLmIntent);this.modelImpl=modelImpl;this.intentName=intentName;});exports.AddedLmIntent=AddedLmIntent;/***/},/* 230 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.IntentServiceRecognizer=void 0;var Exports_js_1=__webpack_require__(4);var Exports_js_2=__webpack_require__(79);var Exports_js_3=__webpack_require__(2);// eslint-disable-next-line max-classes-per-file
var IntentServiceRecognizer=/*#__PURE__*/function(_Exports_js_3$Service){_inherits(IntentServiceRecognizer,_Exports_js_3$Service);var _super131=_createSuper(IntentServiceRecognizer);function IntentServiceRecognizer(authentication,connectionFactory,audioSource,recognizerConfig,recognizer){var _this168;_classCallCheck(this,IntentServiceRecognizer);_this168=_super131.call(this,authentication,connectionFactory,audioSource,recognizerConfig,recognizer);_this168.privIntentRecognizer=recognizer;_this168.privIntentDataSent=false;return _this168;}_createClass(IntentServiceRecognizer,[{key:"setIntents",value:function setIntents(addedIntents,umbrellaIntent){this.privAddedLmIntents=addedIntents;this.privUmbrellaIntent=umbrellaIntent;this.privIntentDataSent=true;}},{key:"processTypeSpecificMessages",value:function processTypeSpecificMessages(connectionMessage){var _this169=this;var result;var ev;var processed=false;var resultProps=new Exports_js_2.PropertyCollection();if(connectionMessage.messageType===Exports_js_1.MessageType.Text){resultProps.setProperty(Exports_js_2.PropertyId.SpeechServiceResponse_JsonResult,connectionMessage.textBody);}switch(connectionMessage.path.toLowerCase()){case"speech.hypothesis":var speechHypothesis=Exports_js_3.SpeechHypothesis.fromJSON(connectionMessage.textBody,this.privRequestSession.currentTurnAudioOffset);result=new Exports_js_2.IntentRecognitionResult(undefined,this.privRequestSession.requestId,Exports_js_2.ResultReason.RecognizingIntent,speechHypothesis.Text,speechHypothesis.Duration,speechHypothesis.Offset,speechHypothesis.Language,speechHypothesis.LanguageDetectionConfidence,undefined,speechHypothesis.asJson(),resultProps);this.privRequestSession.onHypothesis(result.offset);ev=new Exports_js_2.IntentRecognitionEventArgs(result,speechHypothesis.Offset,this.privRequestSession.sessionId);if(!!this.privIntentRecognizer.recognizing){try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,ev);/* eslint-disable no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}processed=true;break;case"speech.phrase":var simple=Exports_js_3.SimpleSpeechPhrase.fromJSON(connectionMessage.textBody,this.privRequestSession.currentTurnAudioOffset);result=new Exports_js_2.IntentRecognitionResult(undefined,this.privRequestSession.requestId,Exports_js_3.EnumTranslation.implTranslateRecognitionResult(simple.RecognitionStatus),simple.DisplayText,simple.Duration,simple.Offset,simple.Language,simple.LanguageDetectionConfidence,undefined,simple.asJson(),resultProps);ev=new Exports_js_2.IntentRecognitionEventArgs(result,result.offset,this.privRequestSession.sessionId);var sendEvent=function sendEvent(){if(!!_this169.privIntentRecognizer.recognized){try{_this169.privIntentRecognizer.recognized(_this169.privIntentRecognizer,ev);/* eslint-disable no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}// report result to promise.
if(!!_this169.privSuccessCallback){try{_this169.privSuccessCallback(result);}catch(e){if(!!_this169.privErrorCallback){_this169.privErrorCallback(e);}}// Only invoke the call back once.
// and if it's successful don't invoke the
// error after that.
_this169.privSuccessCallback=undefined;_this169.privErrorCallback=undefined;}};// If intent data was sent, the terminal result for this recognizer is an intent being found.
// If no intent data was sent, the terminal event is speech recognition being successful.
if(false===this.privIntentDataSent||Exports_js_2.ResultReason.NoMatch===ev.result.reason){// Advance the buffers.
this.privRequestSession.onPhraseRecognized(ev.offset+ev.result.duration);sendEvent();}else{// Squirrel away the args, when the response event arrives it will build upon them
// and then return
this.privPendingIntentArgs=ev;}processed=true;break;case"response":// Response from LUIS
ev=this.privPendingIntentArgs;this.privPendingIntentArgs=undefined;if(undefined===ev){if(""===connectionMessage.textBody){// This condition happens if there is nothing but silence in the
// audio sent to the service.
return;}// Odd... Not sure this can happen
ev=new Exports_js_2.IntentRecognitionEventArgs(new Exports_js_2.IntentRecognitionResult(),0,this.privRequestSession.sessionId);}var intentResponse=Exports_js_3.IntentResponse.fromJSON(connectionMessage.textBody);// If LUIS didn't return anything, send the existing event, else
// modify it to show the match.
// See if the intent found is in the list of intents asked for.
if(null!==intentResponse&&!!intentResponse.topScoringIntent&&!!intentResponse.topScoringIntent.intent){var addedIntent=this.privAddedLmIntents[intentResponse.topScoringIntent.intent];if(this.privUmbrellaIntent!==undefined){addedIntent=this.privUmbrellaIntent;}if(!!addedIntent){var intentId=addedIntent===undefined||addedIntent.intentName===undefined?intentResponse.topScoringIntent.intent:addedIntent.intentName;var reason=ev.result.reason;if(undefined!==intentId){reason=Exports_js_2.ResultReason.RecognizedIntent;}// make sure, properties is set.
var properties=undefined!==ev.result.properties?ev.result.properties:new Exports_js_2.PropertyCollection();properties.setProperty(Exports_js_2.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,connectionMessage.textBody);ev=new Exports_js_2.IntentRecognitionEventArgs(new Exports_js_2.IntentRecognitionResult(intentId,ev.result.resultId,reason,ev.result.text,ev.result.duration,ev.result.offset,undefined,undefined,ev.result.errorDetails,ev.result.json,properties),ev.offset,ev.sessionId);}}this.privRequestSession.onPhraseRecognized(ev.offset+ev.result.duration);if(!!this.privIntentRecognizer.recognized){try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,ev);/* eslint-disable no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}// report result to promise.
if(!!this.privSuccessCallback){try{this.privSuccessCallback(ev.result);}catch(e){if(!!this.privErrorCallback){this.privErrorCallback(e);}}// Only invoke the call back once.
// and if it's successful don't invoke the
// error after that.
this.privSuccessCallback=undefined;this.privErrorCallback=undefined;}processed=true;break;default:break;}var defferal=new Exports_js_1.Deferred();defferal.resolve(processed);return defferal.promise;}// Cancels recognition.
},{key:"cancelRecognition",value:function cancelRecognition(sessionId,requestId,cancellationReason,errorCode,error){var properties=new Exports_js_2.PropertyCollection();properties.setProperty(Exports_js_3.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[errorCode]);if(!!this.privIntentRecognizer.canceled){var cancelEvent=new Exports_js_2.IntentRecognitionCanceledEventArgs(cancellationReason,error,errorCode,undefined,undefined,sessionId);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,cancelEvent);/* eslint-disable no-empty */}catch(_unused11){}}if(!!this.privSuccessCallback){var result=new Exports_js_2.IntentRecognitionResult(undefined,// Intent Id
requestId,Exports_js_2.ResultReason.Canceled,undefined,// Text
undefined,// Duration
undefined,// Offset
undefined,// Language
undefined,// LanguageDetectionConfidence
error,undefined,// Json
properties);try{this.privSuccessCallback(result);this.privSuccessCallback=undefined;/* eslint-disable no-empty */}catch(_unused12){}}}}]);return IntentServiceRecognizer;}(Exports_js_3.ServiceRecognizerBase);exports.IntentServiceRecognizer=IntentServiceRecognizer;/***/},/* 231 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// response
Object.defineProperty(exports,"__esModule",{value:true});exports.IntentResponse=void 0;var IntentResponse=/*#__PURE__*/function(){function IntentResponse(json){_classCallCheck(this,IntentResponse);if(json===""){this.privIntentResponse={};}else{this.privIntentResponse=JSON.parse(json);}}_createClass(IntentResponse,[{key:"query",get:function get(){return this.privIntentResponse.query;}},{key:"topScoringIntent",get:function get(){return this.privIntentResponse.topScoringIntent;}},{key:"entities",get:function get(){return this.privIntentResponse.entities;}}],[{key:"fromJSON",value:function fromJSON(json){return new IntentResponse(json);}}]);return IntentResponse;}();exports.IntentResponse=IntentResponse;/***/},/* 232 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */Object.defineProperty(exports,"__esModule",{value:true});/***/},/* 233 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.RequestSession=void 0;var Exports_js_1=__webpack_require__(4);var RecognitionEvents_js_1=__webpack_require__(204);var ServiceTelemetryListener_Internal_js_1=__webpack_require__(234);var RequestSession=/*#__PURE__*/function(){function RequestSession(audioSourceId){_classCallCheck(this,RequestSession);this.privIsDisposed=false;this.privDetachables=new Array();this.privIsAudioNodeDetached=false;this.privIsRecognizing=false;this.privIsSpeechEnded=false;this.privTurnStartAudioOffset=0;this.privLastRecoOffset=0;this.privHypothesisReceived=false;this.privBytesSent=0;this.privRecognitionBytesSent=0;this.privRecogNumber=0;this.privInTurn=false;this.privConnectionAttempts=0;this.privAudioSourceId=audioSourceId;this.privRequestId=Exports_js_1.createNoDashGuid();this.privAudioNodeId=Exports_js_1.createNoDashGuid();this.privTurnDeferral=new Exports_js_1.Deferred();// We're not in a turn, so resolve.
this.privTurnDeferral.resolve();}_createClass(RequestSession,[{key:"sessionId",get:function get(){return this.privSessionId;}},{key:"requestId",get:function get(){return this.privRequestId;}},{key:"audioNodeId",get:function get(){return this.privAudioNodeId;}},{key:"turnCompletionPromise",get:function get(){return this.privTurnDeferral.promise;}},{key:"isSpeechEnded",get:function get(){return this.privIsSpeechEnded;}},{key:"isRecognizing",get:function get(){return this.privIsRecognizing;}},{key:"currentTurnAudioOffset",get:function get(){return this.privTurnStartAudioOffset;}},{key:"recogNumber",get:function get(){return this.privRecogNumber;}},{key:"numConnectionAttempts",get:function get(){return this.privConnectionAttempts;}// The number of bytes sent for the current connection.
// Counter is reset to 0 each time a connection is established.
},{key:"bytesSent",get:function get(){return this.privBytesSent;}// The number of bytes sent for the current recognition.
// Counter is reset to 0 each time recognition is started.
},{key:"recognitionBytesSent",get:function get(){return this.privRecognitionBytesSent;}},{key:"listenForServiceTelemetry",value:function listenForServiceTelemetry(eventSource){if(!!this.privServiceTelemetryListener){this.privDetachables.push(eventSource.attachListener(this.privServiceTelemetryListener));}}},{key:"startNewRecognition",value:function startNewRecognition(){this.privRecognitionBytesSent=0;this.privIsSpeechEnded=false;this.privIsRecognizing=true;this.privTurnStartAudioOffset=0;this.privLastRecoOffset=0;this.privRecogNumber++;this.privServiceTelemetryListener=new ServiceTelemetryListener_Internal_js_1.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId);this.onEvent(new RecognitionEvents_js_1.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId));}},{key:"onAudioSourceAttachCompleted",value:function(){var _onAudioSourceAttachCompleted=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee108(audioNode,isError){return _regeneratorRuntime().wrap(function _callee108$(_context108){while(1)switch(_context108.prev=_context108.next){case 0:this.privAudioNode=audioNode;this.privIsAudioNodeDetached=false;if(!isError){_context108.next=7;break;}_context108.next=5;return this.onComplete();case 5:_context108.next=8;break;case 7:this.onEvent(new RecognitionEvents_js_1.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId));case 8:case"end":return _context108.stop();}},_callee108,this);}));function onAudioSourceAttachCompleted(_x78,_x79){return _onAudioSourceAttachCompleted.apply(this,arguments);}return onAudioSourceAttachCompleted;}()},{key:"onPreConnectionStart",value:function onPreConnectionStart(authFetchEventId,connectionId){this.privAuthFetchEventId=authFetchEventId;this.privSessionId=connectionId;this.onEvent(new RecognitionEvents_js_1.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId));}},{key:"onAuthCompleted",value:function(){var _onAuthCompleted=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee109(isError){return _regeneratorRuntime().wrap(function _callee109$(_context109){while(1)switch(_context109.prev=_context109.next){case 0:if(!isError){_context109.next=3;break;}_context109.next=3;return this.onComplete();case 3:case"end":return _context109.stop();}},_callee109,this);}));function onAuthCompleted(_x80){return _onAuthCompleted.apply(this,arguments);}return onAuthCompleted;}()// eslint-disable-next-line @typescript-eslint/no-unused-vars
},{key:"onConnectionEstablishCompleted",value:function(){var _onConnectionEstablishCompleted=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee110(statusCode,reason){return _regeneratorRuntime().wrap(function _callee110$(_context110){while(1)switch(_context110.prev=_context110.next){case 0:if(!(statusCode===200)){_context110.next=8;break;}this.onEvent(new RecognitionEvents_js_1.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId));if(!!this.privAudioNode){this.privAudioNode.replay();}this.privTurnStartAudioOffset=this.privLastRecoOffset;this.privBytesSent=0;return _context110.abrupt("return");case 8:if(!(statusCode===403)){_context110.next=11;break;}_context110.next=11;return this.onComplete();case 11:case"end":return _context110.stop();}},_callee110,this);}));function onConnectionEstablishCompleted(_x81,_x82){return _onConnectionEstablishCompleted.apply(this,arguments);}return onConnectionEstablishCompleted;}()},{key:"onServiceTurnEndResponse",value:function(){var _onServiceTurnEndResponse=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee111(continuousRecognition){return _regeneratorRuntime().wrap(function _callee111$(_context111){while(1)switch(_context111.prev=_context111.next){case 0:this.privTurnDeferral.resolve();if(!(!continuousRecognition||this.isSpeechEnded)){_context111.next=7;break;}_context111.next=4;return this.onComplete();case 4:this.privInTurn=false;_context111.next=9;break;case 7:// Start a new request set.
this.privTurnStartAudioOffset=this.privLastRecoOffset;this.privAudioNode.replay();case 9:case"end":return _context111.stop();}},_callee111,this);}));function onServiceTurnEndResponse(_x83){return _onServiceTurnEndResponse.apply(this,arguments);}return onServiceTurnEndResponse;}()},{key:"onSpeechContext",value:function onSpeechContext(){this.privRequestId=Exports_js_1.createNoDashGuid();}},{key:"onServiceTurnStartResponse",value:function onServiceTurnStartResponse(){if(!!this.privTurnDeferral&&!!this.privInTurn){// What? How are we starting a turn with another not done?
this.privTurnDeferral.reject("Another turn started before current completed.");// Avoid UnhandledPromiseRejection if privTurnDeferral is not being awaited
// eslint-disable-next-line @typescript-eslint/no-empty-function
this.privTurnDeferral.promise.then()["catch"](function(){});}this.privInTurn=true;this.privTurnDeferral=new Exports_js_1.Deferred();}},{key:"onHypothesis",value:function onHypothesis(offset){if(!this.privHypothesisReceived){this.privHypothesisReceived=true;this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(offset));}}},{key:"onPhraseRecognized",value:function onPhraseRecognized(offset){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(offset));this.onServiceRecognized(offset);}},{key:"onServiceRecognized",value:function onServiceRecognized(offset){this.privLastRecoOffset=offset;this.privHypothesisReceived=false;this.privAudioNode.shrinkBuffers(offset);this.privConnectionAttempts=0;}},{key:"onAudioSent",value:function onAudioSent(bytesSent){this.privBytesSent+=bytesSent;this.privRecognitionBytesSent+=bytesSent;}},{key:"onRetryConnection",value:function onRetryConnection(){this.privConnectionAttempts++;}},{key:"dispose",value:function(){var _dispose14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee112(){var _iterator22,_step22,detachable;return _regeneratorRuntime().wrap(function _callee112$(_context112){while(1)switch(_context112.prev=_context112.next){case 0:if(this.privIsDisposed){_context112.next=21;break;}// we should have completed by now. If we did not its an unknown error.
this.privIsDisposed=true;_iterator22=_createForOfIteratorHelper(this.privDetachables);_context112.prev=3;_iterator22.s();case 5:if((_step22=_iterator22.n()).done){_context112.next=11;break;}detachable=_step22.value;_context112.next=9;return detachable.detach();case 9:_context112.next=5;break;case 11:_context112.next=16;break;case 13:_context112.prev=13;_context112.t0=_context112["catch"](3);_iterator22.e(_context112.t0);case 16:_context112.prev=16;_iterator22.f();return _context112.finish(16);case 19:if(!!this.privServiceTelemetryListener){this.privServiceTelemetryListener.dispose();}this.privIsRecognizing=false;case 21:case"end":return _context112.stop();}},_callee112,this,[[3,13,16,19]]);}));function dispose(){return _dispose14.apply(this,arguments);}return dispose;}()},{key:"getTelemetry",value:function getTelemetry(){if(this.privServiceTelemetryListener.hasTelemetry){return this.privServiceTelemetryListener.getTelemetry();}else{return null;}}},{key:"onStopRecognizing",value:function(){var _onStopRecognizing=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee113(){return _regeneratorRuntime().wrap(function _callee113$(_context113){while(1)switch(_context113.prev=_context113.next){case 0:_context113.next=2;return this.onComplete();case 2:case"end":return _context113.stop();}},_callee113,this);}));function onStopRecognizing(){return _onStopRecognizing.apply(this,arguments);}return onStopRecognizing;}()// Should be called with the audioNode for this session has indicated that it is out of speech.
},{key:"onSpeechEnded",value:function onSpeechEnded(){this.privIsSpeechEnded=true;}},{key:"onEvent",value:function onEvent(event){if(!!this.privServiceTelemetryListener){this.privServiceTelemetryListener.onEvent(event);}Exports_js_1.Events.instance.onEvent(event);}},{key:"onComplete",value:function(){var _onComplete=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee114(){return _regeneratorRuntime().wrap(function _callee114$(_context114){while(1)switch(_context114.prev=_context114.next){case 0:if(!this.privIsRecognizing){_context114.next=4;break;}this.privIsRecognizing=false;_context114.next=4;return this.detachAudioNode();case 4:case"end":return _context114.stop();}},_callee114,this);}));function onComplete(){return _onComplete.apply(this,arguments);}return onComplete;}()},{key:"detachAudioNode",value:function(){var _detachAudioNode=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee115(){return _regeneratorRuntime().wrap(function _callee115$(_context115){while(1)switch(_context115.prev=_context115.next){case 0:if(this.privIsAudioNodeDetached){_context115.next=5;break;}this.privIsAudioNodeDetached=true;if(!this.privAudioNode){_context115.next=5;break;}_context115.next=5;return this.privAudioNode.detach();case 5:case"end":return _context115.stop();}},_callee115,this);}));function detachAudioNode(){return _detachAudioNode.apply(this,arguments);}return detachAudioNode;}()}]);return RequestSession;}();exports.RequestSession=RequestSession;/***/},/* 234 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ServiceTelemetryListener=void 0;/* eslint-disable max-classes-per-file */var Exports_js_1=__webpack_require__(4);var RecognitionEvents_js_1=__webpack_require__(204);var ServiceTelemetryListener=/*#__PURE__*/function(){function ServiceTelemetryListener(requestId,audioSourceId,audioNodeId){_classCallCheck(this,ServiceTelemetryListener);this.privIsDisposed=false;this.privListeningTriggerMetric=null;this.privMicMetric=null;this.privConnectionEstablishMetric=null;this.privRequestId=requestId;this.privAudioSourceId=audioSourceId;this.privAudioNodeId=audioNodeId;this.privReceivedMessages={};this.privPhraseLatencies=[];this.privHypothesisLatencies=[];}_createClass(ServiceTelemetryListener,[{key:"phraseReceived",value:function phraseReceived(audioReceivedTime){if(audioReceivedTime>0){// 0 indicates the time is unknown. Drop it.
this.privPhraseLatencies.push(Date.now()-audioReceivedTime);}}},{key:"hypothesisReceived",value:function hypothesisReceived(audioReceivedTime){if(audioReceivedTime>0){// 0 indicates the time is unknown. Drop it.
this.privHypothesisLatencies.push(Date.now()-audioReceivedTime);}}},{key:"onEvent",value:function onEvent(e){if(this.privIsDisposed){return;}if(e instanceof RecognitionEvents_js_1.RecognitionTriggeredEvent&&e.requestId===this.privRequestId){this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime};}if(e instanceof Exports_js_1.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId){this.privMicStartTime=e.eventTime;}if(e instanceof Exports_js_1.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId){this.privMicStartTime=e.eventTime;}if(e instanceof Exports_js_1.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId){if(!this.privMicMetric){this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime};}}if(e instanceof Exports_js_1.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId){if(!this.privMicMetric){this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime};}}if(e instanceof Exports_js_1.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId){if(!this.privMicMetric){this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime};}}if(e instanceof RecognitionEvents_js_1.ConnectingToServiceEvent&&e.requestId===this.privRequestId){this.privConnectionId=e.sessionId;}if(e instanceof Exports_js_1.ConnectionStartEvent&&e.connectionId===this.privConnectionId){this.privConnectionStartTime=e.eventTime;}if(e instanceof Exports_js_1.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId){if(!this.privConnectionEstablishMetric){this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime};}}if(e instanceof Exports_js_1.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId){if(!this.privConnectionEstablishMetric){this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime};}}if(e instanceof Exports_js_1.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId){if(e.message&&e.message.headers&&e.message.headers.path){if(!this.privReceivedMessages[e.message.headers.path]){this.privReceivedMessages[e.message.headers.path]=new Array();}var maxMessagesToSend=50;if(this.privReceivedMessages[e.message.headers.path].length<maxMessagesToSend){this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime);}}}}},{key:"getTelemetry",value:function getTelemetry(){var metrics=new Array();if(this.privListeningTriggerMetric){metrics.push(this.privListeningTriggerMetric);}if(this.privMicMetric){metrics.push(this.privMicMetric);}if(this.privConnectionEstablishMetric){metrics.push(this.privConnectionEstablishMetric);}if(this.privPhraseLatencies.length>0){metrics.push({PhraseLatencyMs:this.privPhraseLatencies});}if(this.privHypothesisLatencies.length>0){metrics.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});}var telemetry={Metrics:metrics,ReceivedMessages:this.privReceivedMessages};var json=JSON.stringify(telemetry);// We dont want to send the same telemetry again. So clean those out.
this.privReceivedMessages={};this.privListeningTriggerMetric=null;this.privMicMetric=null;this.privConnectionEstablishMetric=null;this.privPhraseLatencies=[];this.privHypothesisLatencies=[];return json;}// Determines if there are any telemetry events to send to the service.
},{key:"hasTelemetry",get:function get(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0;}},{key:"dispose",value:function dispose(){this.privIsDisposed=true;}},{key:"getConnectionError",value:function getConnectionError(statusCode){/*
        -- Websocket status codes --
        NormalClosure = 1000,
        EndpointUnavailable = 1001,
        ProtocolError = 1002,
        InvalidMessageType = 1003,
        Empty = 1005,
        InvalidPayloadData = 1007,
        PolicyViolation = 1008,
        MessageTooBig = 1009,
        MandatoryExtension = 1010,
        InternalServerError = 1011
        */switch(statusCode){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+statusCode.toString();}}}]);return ServiceTelemetryListener;}();exports.ServiceTelemetryListener=ServiceTelemetryListener;/***/},/* 235 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechContext=void 0;/**
 * Represents the JSON used in the speech.context message sent to the speech service.
 * The dynamic grammar is always refreshed from the encapsulated dynamic grammar object.
 */var SpeechContext=/*#__PURE__*/function(){function SpeechContext(dynamicGrammar){_classCallCheck(this,SpeechContext);this.privContext={};this.privDynamicGrammar=dynamicGrammar;}/**
     * Gets a section of the speech.context object.
     * @param sectionName Name of the section to get.
     * @return string or Context JSON serializable object that represents the value.
     */_createClass(SpeechContext,[{key:"getSection",value:function getSection(sectionName){return this.privContext[sectionName]||{};}/**
     * Adds a section to the speech.context object.
     * @param sectionName Name of the section to add.
     * @param value JSON serializable object that represents the value.
     */},{key:"setSection",value:function setSection(sectionName,value){this.privContext[sectionName]=value;}/**
     * @Internal
     * This is only used by pronunciation assessment config.
     * Do not use externally, object returned will change without warning or notice.
     */},{key:"setPronunciationAssessmentParams",value:function setPronunciationAssessmentParams(params,contentAssessmentTopic){var isSpeakerDiarizationEnabled=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(this.privContext.phraseDetection===undefined){this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}};}if(this.privContext.phraseDetection.enrichment===undefined){this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}};}this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(params);if(isSpeakerDiarizationEnabled){this.privContext.phraseDetection.mode="Conversation";}this.setWordLevelTimings();this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment");if(this.privContext.phraseOutput.detailed.options.indexOf("SNR")===-1){this.privContext.phraseOutput.detailed.options.push("SNR");}if(!!contentAssessmentTopic){this.privContext.phraseDetection.enrichment.contentAssessment={topic:contentAssessmentTopic};this.privContext.phraseOutput.detailed.options.push("ContentAssessment");}}},{key:"setDetailedOutputFormat",value:function setDetailedOutputFormat(){if(this.privContext.phraseOutput===undefined){this.privContext.phraseOutput={detailed:{options:[]},format:{}};}if(this.privContext.phraseOutput.detailed===undefined){this.privContext.phraseOutput.detailed={options:[]};}this.privContext.phraseOutput.format="Detailed";}},{key:"setWordLevelTimings",value:function setWordLevelTimings(){if(this.privContext.phraseOutput===undefined){this.privContext.phraseOutput={detailed:{options:[]},format:{}};}if(this.privContext.phraseOutput.detailed===undefined){this.privContext.phraseOutput.detailed={options:[]};}this.privContext.phraseOutput.format="Detailed";if(this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")===-1){this.privContext.phraseOutput.detailed.options.push("WordTimings");}}},{key:"setSpeakerDiarizationAudioOffsetMs",value:function setSpeakerDiarizationAudioOffsetMs(audioOffsetMs){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=audioOffsetMs;}},{key:"toJSON",value:function toJSON(){var dgi=this.privDynamicGrammar.generateGrammarObject();this.setSection("dgi",dgi);var ret=JSON.stringify(this.privContext);return ret;}}]);return SpeechContext;}();exports.SpeechContext=SpeechContext;/***/},/* 236 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.DynamicGrammarBuilder=void 0;/**
 * Responsible for building the object to be sent to the speech service to support dynamic grammars.
 * @class DynamicGrammarBuilder
 */var DynamicGrammarBuilder=/*#__PURE__*/function(){function DynamicGrammarBuilder(){_classCallCheck(this,DynamicGrammarBuilder);}_createClass(DynamicGrammarBuilder,[{key:"addPhrase",value:// Adds one more reference phrases to the dynamic grammar to send.
// All added phrases are generic phrases.
function addPhrase(phrase){if(!this.privPhrases){this.privPhrases=[];}if(phrase instanceof Array){this.privPhrases=this.privPhrases.concat(phrase);}else{this.privPhrases.push(phrase);}}// Clears all phrases stored in the current object.
},{key:"clearPhrases",value:function clearPhrases(){this.privPhrases=undefined;}// Adds one or more reference grammars to the current grammar.
},{key:"addReferenceGrammar",value:function addReferenceGrammar(grammar){if(!this.privGrammars){this.privGrammars=[];}if(grammar instanceof Array){this.privGrammars=this.privGrammars.concat(grammar);}else{this.privGrammars.push(grammar);}}// clears all grammars stored on the recognizer.
},{key:"clearGrammars",value:function clearGrammars(){this.privGrammars=undefined;}// Generates an object that represents the dynamic grammar used by the Speech Service.
// This is done by building an object with the correct layout based on the phrases and reference grammars added to this instance
// of a DynamicGrammarBuilder
},{key:"generateGrammarObject",value:function generateGrammarObject(){if(this.privGrammars===undefined&&this.privPhrases===undefined){return undefined;}var retObj={};retObj.ReferenceGrammars=this.privGrammars;if(undefined!==this.privPhrases&&0!==this.privPhrases.length){var retPhrases=[];this.privPhrases.forEach(function(value){retPhrases.push({Text:value});});retObj.Groups=[{Type:"Generic",Items:retPhrases}];}return retObj;}}]);return DynamicGrammarBuilder;}();exports.DynamicGrammarBuilder=DynamicGrammarBuilder;/***/},/* 237 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});/***/},/* 238 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.DialogServiceAdapter=void 0;var Exports_js_1=__webpack_require__(60);var DialogEvents_js_1=__webpack_require__(29);var Exports_js_2=__webpack_require__(4);var AudioOutputFormat_js_1=__webpack_require__(85);var Exports_js_3=__webpack_require__(79);var DialogServiceTurnStateManager_js_1=__webpack_require__(239);var Exports_js_4=__webpack_require__(2);var ActivityResponsePayload_js_1=__webpack_require__(241);var SpeechConnectionMessage_Internal_js_1=__webpack_require__(206);var DialogServiceAdapter=/*#__PURE__*/function(_Exports_js_4$Service){_inherits(DialogServiceAdapter,_Exports_js_4$Service);var _super132=_createSuper(DialogServiceAdapter);function DialogServiceAdapter(authentication,connectionFactory,audioSource,recognizerConfig,dialogServiceConnector){var _this170;_classCallCheck(this,DialogServiceAdapter);_this170=_super132.call(this,authentication,connectionFactory,audioSource,recognizerConfig,dialogServiceConnector);_this170.privEvents=new Exports_js_2.EventSource();_this170.privDialogServiceConnector=dialogServiceConnector;_this170.receiveMessageOverride=function(){return _this170.receiveDialogMessageOverride();};_this170.privTurnStateManager=new DialogServiceTurnStateManager_js_1.DialogServiceTurnStateManager();_this170.recognizeOverride=function(recoMode,successCallback,errorCallback){return _this170.listenOnce(recoMode,successCallback,errorCallback);};_this170.postConnectImplOverride=function(connection){return _this170.dialogConnectImpl(connection);};_this170.configConnectionOverride=function(connection){return _this170.configConnection(connection);};_this170.disconnectOverride=function(){return _this170.privDisconnect();};_this170.privDialogAudioSource=audioSource;_this170.agentConfigSent=false;_this170.privLastResult=null;_this170.connectionEvents.attach(function(connectionEvent){if(connectionEvent.name==="ConnectionClosedEvent"){_this170.terminateMessageLoop=true;}});return _this170;}_createClass(DialogServiceAdapter,[{key:"sendMessage",value:function(){var _sendMessage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee116(message){var interactionGuid,requestId,agentMessage,agentMessageJson,connection;return _regeneratorRuntime().wrap(function _callee116$(_context116){while(1)switch(_context116.prev=_context116.next){case 0:interactionGuid=Exports_js_2.createGuid();requestId=Exports_js_2.createNoDashGuid();agentMessage={context:{interactionId:interactionGuid},// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
messagePayload:JSON.parse(message),version:0.5};agentMessageJson=JSON.stringify(agentMessage);_context116.next=6;return this.fetchConnection();case 6:connection=_context116.sent;_context116.next=9;return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,"agent",requestId,"application/json",agentMessageJson));case 9:case"end":return _context116.stop();}},_callee116,this);}));function sendMessage(_x84){return _sendMessage.apply(this,arguments);}return sendMessage;}()},{key:"privDisconnect",value:function(){var _privDisconnect=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee117(){return _regeneratorRuntime().wrap(function _callee117$(_context117){while(1)switch(_context117.prev=_context117.next){case 0:_context117.next=2;return this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.NoError,"Disconnecting");case 2:this.terminateMessageLoop=true;this.agentConfigSent=false;return _context117.abrupt("return");case 5:case"end":return _context117.stop();}},_callee117,this);}));function privDisconnect(){return _privDisconnect.apply(this,arguments);}return privDisconnect;}()},{key:"processTypeSpecificMessages",value:function processTypeSpecificMessages(connectionMessage){var resultProps=new Exports_js_3.PropertyCollection();if(connectionMessage.messageType===Exports_js_2.MessageType.Text){resultProps.setProperty(Exports_js_3.PropertyId.SpeechServiceResponse_JsonResult,connectionMessage.textBody);}var result;var processed;switch(connectionMessage.path.toLowerCase()){case"speech.phrase":var speechPhrase=Exports_js_4.SimpleSpeechPhrase.fromJSON(connectionMessage.textBody,this.privRequestSession.currentTurnAudioOffset);this.privRequestSession.onPhraseRecognized(speechPhrase.Offset+speechPhrase.Duration);if(speechPhrase.RecognitionStatus!==Exports_js_4.RecognitionStatus.TooManyRequests&&speechPhrase.RecognitionStatus!==Exports_js_4.RecognitionStatus.Error){var args=this.fireEventForResult(speechPhrase,resultProps);this.privLastResult=args.result;if(!!this.privDialogServiceConnector.recognized){try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,args);/* eslint-disable no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}}processed=true;break;case"speech.hypothesis":var hypothesis=Exports_js_4.SpeechHypothesis.fromJSON(connectionMessage.textBody,this.privRequestSession.currentTurnAudioOffset);result=new Exports_js_3.SpeechRecognitionResult(this.privRequestSession.requestId,Exports_js_3.ResultReason.RecognizingSpeech,hypothesis.Text,hypothesis.Duration,hypothesis.Offset,hypothesis.Language,hypothesis.LanguageDetectionConfidence,undefined,undefined,hypothesis.asJson(),resultProps);this.privRequestSession.onHypothesis(hypothesis.Offset);var ev=new Exports_js_3.SpeechRecognitionEventArgs(result,hypothesis.Offset,this.privRequestSession.sessionId);if(!!this.privDialogServiceConnector.recognizing){try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,ev);/* eslint-disable no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}processed=true;break;case"speech.keyword":var keyword=Exports_js_4.SpeechKeyword.fromJSON(connectionMessage.textBody,this.privRequestSession.currentTurnAudioOffset);result=new Exports_js_3.SpeechRecognitionResult(this.privRequestSession.requestId,keyword.Status==="Accepted"?Exports_js_3.ResultReason.RecognizedKeyword:Exports_js_3.ResultReason.NoMatch,keyword.Text,keyword.Duration,keyword.Offset,undefined,undefined,undefined,undefined,keyword.asJson(),resultProps);if(keyword.Status!=="Accepted"){this.privLastResult=result;}var event=new Exports_js_3.SpeechRecognitionEventArgs(result,result.duration,result.resultId);if(!!this.privDialogServiceConnector.recognized){try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,event);/* eslint-disable no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}processed=true;break;case"audio":{var audioRequestId=connectionMessage.requestId.toUpperCase();var turn=this.privTurnStateManager.GetTurn(audioRequestId);try{// Empty binary message signals end of stream.
if(!connectionMessage.binaryBody){turn.endAudioStream();}else{turn.audioStream.write(connectionMessage.binaryBody);}}catch(error){// Not going to let errors in the event handler
// trip things up.
}}processed=true;break;case"response":{this.handleResponseMessage(connectionMessage);}processed=true;break;default:break;}var defferal=new Exports_js_2.Deferred();defferal.resolve(processed);return defferal.promise;}// Cancels recognition.
},{key:"cancelRecognition",value:function(){var _cancelRecognition=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee118(sessionId,requestId,cancellationReason,errorCode,error){var properties,cancelEvent,result;return _regeneratorRuntime().wrap(function _callee118$(_context118){while(1)switch(_context118.prev=_context118.next){case 0:this.terminateMessageLoop=true;if(!this.privRequestSession.isRecognizing){_context118.next=4;break;}_context118.next=4;return this.privRequestSession.onStopRecognizing();case 4:if(!!this.privDialogServiceConnector.canceled){properties=new Exports_js_3.PropertyCollection();properties.setProperty(Exports_js_4.CancellationErrorCodePropertyName,Exports_js_3.CancellationErrorCode[errorCode]);cancelEvent=new Exports_js_3.SpeechRecognitionCanceledEventArgs(cancellationReason,error,errorCode,undefined,sessionId);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,cancelEvent);/* eslint-disable no-empty */}catch(_unused13){}if(!!this.privSuccessCallback){result=new Exports_js_3.SpeechRecognitionResult(undefined,// ResultId
Exports_js_3.ResultReason.Canceled,undefined,// Text
undefined,// Duration
undefined,// Offset
undefined,// Language
undefined,// Language Detection Confidence
undefined,// Speaker Id
error,undefined,// Json
properties);try{this.privSuccessCallback(result);this.privSuccessCallback=undefined;/* eslint-disable no-empty */}catch(_unused14){}}}case 5:case"end":return _context118.stop();}},_callee118,this);}));function cancelRecognition(_x85,_x86,_x87,_x88,_x89){return _cancelRecognition.apply(this,arguments);}return cancelRecognition;}()},{key:"listenOnce",value:function(){var _listenOnce=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee120(recoMode,successCallback,errorCallback){var _this171=this;var conPromise,preAudioPromise,node,format,deviceInfo,audioNode,sessionStartEventArgs,audioSendPromise;return _regeneratorRuntime().wrap(function _callee120$(_context120){while(1)switch(_context120.prev=_context120.next){case 0:this.privRecognizerConfig.recognitionMode=recoMode;this.privSuccessCallback=successCallback;this.privErrorCallback=errorCallback;this.privRequestSession.startNewRecognition();this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events);this.privRecognizerConfig.parameters.setProperty(Exports_js_3.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);// Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
conPromise=this.connectImpl();preAudioPromise=this.sendPreAudioMessages();_context120.next=10;return this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId);case 10:node=_context120.sent;_context120.next=13;return this.privDialogAudioSource.format;case 13:format=_context120.sent;_context120.next=16;return this.privDialogAudioSource.deviceInfo;case 16:deviceInfo=_context120.sent;audioNode=new Exports_js_1.ReplayableAudioNode(node,format.avgBytesPerSec);_context120.next=20;return this.privRequestSession.onAudioSourceAttachCompleted(audioNode,false);case 20:this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:deviceInfo};_context120.prev=21;_context120.next=24;return conPromise;case 24:_context120.next=26;return preAudioPromise;case 26:_context120.next=33;break;case 28:_context120.prev=28;_context120.t0=_context120["catch"](21);_context120.next=32;return this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.ConnectionFailure,_context120.t0);case 32:return _context120.abrupt("return",Promise.resolve());case 33:sessionStartEventArgs=new Exports_js_3.SessionEventArgs(this.privRequestSession.sessionId);if(!!this.privRecognizer.sessionStarted){this.privRecognizer.sessionStarted(this.privRecognizer,sessionStartEventArgs);}audioSendPromise=this.sendAudio(audioNode);// /* eslint-disable no-empty */
audioSendPromise.then(function(){},/*#__PURE__*/function(){var _ref19=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee119(error){return _regeneratorRuntime().wrap(function _callee119$(_context119){while(1)switch(_context119.prev=_context119.next){case 0:_context119.next=2;return _this171.cancelRecognition(_this171.privRequestSession.sessionId,_this171.privRequestSession.requestId,Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.RuntimeError,error);case 2:case"end":return _context119.stop();}},_callee119);}));return function(_x93){return _ref19.apply(this,arguments);};}());case 37:case"end":return _context120.stop();}},_callee120,this,[[21,28]]);}));function listenOnce(_x90,_x91,_x92){return _listenOnce.apply(this,arguments);}return listenOnce;}()// Establishes a websocket connection to the end point.
},{key:"dialogConnectImpl",value:function dialogConnectImpl(connection){this.privConnectionLoop=this.startMessageLoop();return connection;}},{key:"receiveDialogMessageOverride",value:function receiveDialogMessageOverride(){var _this172=this;// we won't rely on the cascading promises of the connection since we want to continually be available to receive messages
var communicationCustodian=new Exports_js_2.Deferred();var loop=/*#__PURE__*/function(){var _ref20=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee121(){var isDisposed,terminateMessageLoop,connection,message,connectionMessage,turnRequestId,audioSessionReqId,speechStartDetected,speechStartEventArgs,json,speechStopDetected,speechStopEventArgs,turnEndRequestId,_audioSessionReqId,sessionStopEventArgs,_processed,ret;return _regeneratorRuntime().wrap(function _callee121$(_context121){while(1)switch(_context121.prev=_context121.next){case 0:_context121.prev=0;isDisposed=_this172.isDisposed();terminateMessageLoop=!_this172.isDisposed()&&_this172.terminateMessageLoop;if(!(isDisposed||terminateMessageLoop)){_context121.next=6;break;}// We're done.
communicationCustodian.resolve(undefined);return _context121.abrupt("return");case 6:_context121.next=8;return _this172.fetchConnection();case 8:connection=_context121.sent;_context121.next=11;return connection.read();case 11:message=_context121.sent;if(message){_context121.next=14;break;}return _context121.abrupt("return",loop());case 14:connectionMessage=SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage.fromConnectionMessage(message);_context121.t0=connectionMessage.path.toLowerCase();_context121.next=_context121.t0==="turn.start"?18:_context121.t0==="speech.startdetected"?22:_context121.t0==="speech.enddetected"?26:_context121.t0==="turn.end"?32:44;break;case 18:turnRequestId=connectionMessage.requestId.toUpperCase();audioSessionReqId=_this172.privRequestSession.requestId.toUpperCase();// turn started by the service
if(turnRequestId!==audioSessionReqId){_this172.privTurnStateManager.StartTurn(turnRequestId);}else{_this172.privRequestSession.onServiceTurnStartResponse();}return _context121.abrupt("break",53);case 22:speechStartDetected=Exports_js_4.SpeechDetected.fromJSON(connectionMessage.textBody,_this172.privRequestSession.currentTurnAudioOffset);speechStartEventArgs=new Exports_js_3.RecognitionEventArgs(speechStartDetected.Offset,_this172.privRequestSession.sessionId);if(!!_this172.privRecognizer.speechStartDetected){_this172.privRecognizer.speechStartDetected(_this172.privRecognizer,speechStartEventArgs);}return _context121.abrupt("break",53);case 26:if(connectionMessage.textBody.length>0){json=connectionMessage.textBody;}else{// If the request was empty, the JSON returned is empty.
json="{ Offset: 0 }";}speechStopDetected=Exports_js_4.SpeechDetected.fromJSON(json,_this172.privRequestSession.currentTurnAudioOffset);_this172.privRequestSession.onServiceRecognized(speechStopDetected.Offset);speechStopEventArgs=new Exports_js_3.RecognitionEventArgs(speechStopDetected.Offset,_this172.privRequestSession.sessionId);if(!!_this172.privRecognizer.speechEndDetected){_this172.privRecognizer.speechEndDetected(_this172.privRecognizer,speechStopEventArgs);}return _context121.abrupt("break",53);case 32:turnEndRequestId=connectionMessage.requestId.toUpperCase();_audioSessionReqId=_this172.privRequestSession.requestId.toUpperCase();// turn started by the service
if(!(turnEndRequestId!==_audioSessionReqId)){_context121.next=38;break;}_this172.privTurnStateManager.CompleteTurn(turnEndRequestId);_context121.next=43;break;case 38:// Audio session turn
sessionStopEventArgs=new Exports_js_3.SessionEventArgs(_this172.privRequestSession.sessionId);_context121.next=41;return _this172.privRequestSession.onServiceTurnEndResponse(false);case 41:if(!_this172.privRecognizerConfig.isContinuousRecognition||_this172.privRequestSession.isSpeechEnded||!_this172.privRequestSession.isRecognizing){if(!!_this172.privRecognizer.sessionStopped){_this172.privRecognizer.sessionStopped(_this172.privRecognizer,sessionStopEventArgs);}}// report result to promise.
if(!!_this172.privSuccessCallback&&_this172.privLastResult){try{_this172.privSuccessCallback(_this172.privLastResult);_this172.privLastResult=null;}catch(e){if(!!_this172.privErrorCallback){_this172.privErrorCallback(e);}}// Only invoke the call back once.
// and if it's successful don't invoke the
// error after that.
_this172.privSuccessCallback=undefined;_this172.privErrorCallback=undefined;}case 43:return _context121.abrupt("break",53);case 44:_context121.prev=44;_context121.next=47;return _this172.processTypeSpecificMessages(connectionMessage);case 47:_processed=_context121.sent;if(!_processed){if(!!_this172.serviceEvents){_this172.serviceEvents.onEvent(new Exports_js_2.ServiceEvent(connectionMessage.path.toLowerCase(),connectionMessage.textBody));}}_context121.next=53;break;case 51:_context121.prev=51;_context121.t1=_context121["catch"](44);case 53:ret=loop();return _context121.abrupt("return",ret);case 57:_context121.prev=57;_context121.t2=_context121["catch"](0);_this172.terminateMessageLoop=true;communicationCustodian.resolve();case 61:case"end":return _context121.stop();}},_callee121,null,[[0,57],[44,51]]);}));return function loop(){return _ref20.apply(this,arguments);};}();loop()["catch"](function(reason){Exports_js_2.Events.instance.onEvent(new Exports_js_2.BackgroundEvent(reason));});return communicationCustodian.promise;}},{key:"startMessageLoop",value:function(){var _startMessageLoop=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee122(){return _regeneratorRuntime().wrap(function _callee122$(_context122){while(1)switch(_context122.prev=_context122.next){case 0:this.terminateMessageLoop=false;_context122.prev=1;_context122.next=4;return this.receiveDialogMessageOverride();case 4:_context122.next=10;break;case 6:_context122.prev=6;_context122.t0=_context122["catch"](1);_context122.next=10;return this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.RuntimeError,_context122.t0);case 10:return _context122.abrupt("return",Promise.resolve());case 11:case"end":return _context122.stop();}},_callee122,this,[[1,6]]);}));function startMessageLoop(){return _startMessageLoop.apply(this,arguments);}return startMessageLoop;}()// Takes an established websocket connection to the endpoint and sends speech configuration information.
},{key:"configConnection",value:function(){var _configConnection=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee123(connection){return _regeneratorRuntime().wrap(function _callee123$(_context123){while(1)switch(_context123.prev=_context123.next){case 0:if(!this.terminateMessageLoop){_context123.next=3;break;}this.terminateMessageLoop=false;return _context123.abrupt("return",Promise.reject("Connection to service terminated."));case 3:_context123.next=5;return this.sendSpeechServiceConfig(connection,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize());case 5:_context123.next=7;return this.sendAgentConfig(connection);case 7:return _context123.abrupt("return",connection);case 8:case"end":return _context123.stop();}},_callee123,this);}));function configConnection(_x94){return _configConnection.apply(this,arguments);}return configConnection;}()},{key:"sendPreAudioMessages",value:function(){var _sendPreAudioMessages=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee124(){var connection;return _regeneratorRuntime().wrap(function _callee124$(_context124){while(1)switch(_context124.prev=_context124.next){case 0:_context124.next=2;return this.fetchConnection();case 2:connection=_context124.sent;this.addKeywordContextData();_context124.next=6;return this.sendSpeechContext(connection,true);case 6:_context124.next=8;return this.sendAgentContext(connection);case 8:_context124.next=10;return this.sendWaveHeader(connection);case 10:case"end":return _context124.stop();}},_callee124,this);}));function sendPreAudioMessages(){return _sendPreAudioMessages.apply(this,arguments);}return sendPreAudioMessages;}()},{key:"sendAgentConfig",value:function sendAgentConfig(connection){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.Conversation_DialogType)===Exports_js_3.DialogServiceConfig.DialogTypes.CustomCommands){var config=this.agentConfig.get();config.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us");this.agentConfig.set(config);}this.onEvent(new DialogEvents_js_1.SendingAgentContextMessageEvent(this.agentConfig));var agentConfigJson=this.agentConfig.toJsonString();// guard against sending this multiple times on one connection
this.agentConfigSent=true;return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",agentConfigJson));}return;}},{key:"sendAgentContext",value:function sendAgentContext(connection){var guid=Exports_js_2.createGuid();var speechActivityTemplate=this.privDialogServiceConnector.properties.getProperty(Exports_js_3.PropertyId.Conversation_Speech_Activity_Template);var agentContext={channelData:"",context:{interactionId:guid},messagePayload:_typeof(speechActivityTemplate)===undefined?undefined:speechActivityTemplate,version:0.5};var agentContextJson=JSON.stringify(agentContext);return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",agentContextJson));}},{key:"fireEventForResult",value:function fireEventForResult(serviceResult,properties){var resultReason=Exports_js_4.EnumTranslation.implTranslateRecognitionResult(serviceResult.RecognitionStatus);var result=new Exports_js_3.SpeechRecognitionResult(this.privRequestSession.requestId,resultReason,serviceResult.DisplayText,serviceResult.Duration,serviceResult.Offset,serviceResult.Language,serviceResult.LanguageDetectionConfidence,undefined,undefined,serviceResult.asJson(),properties);var ev=new Exports_js_3.SpeechRecognitionEventArgs(result,serviceResult.Offset,this.privRequestSession.sessionId);return ev;}},{key:"handleResponseMessage",value:function handleResponseMessage(responseMessage){// "response" messages can contain either "message" (activity) or "MessageStatus" data. Fire the appropriate
// event according to the message type that's specified.
var responsePayload=JSON.parse(responseMessage.textBody);switch(responsePayload.messageType.toLowerCase()){case"message":var responseRequestId=responseMessage.requestId.toUpperCase();var activityPayload=ActivityResponsePayload_js_1.ActivityPayloadResponse.fromJSON(responseMessage.textBody);var turn=this.privTurnStateManager.GetTurn(responseRequestId);// update the conversation Id
if(activityPayload.conversationId){var updateAgentConfig=this.agentConfig.get();updateAgentConfig.botInfo.conversationId=activityPayload.conversationId;this.agentConfig.set(updateAgentConfig);}var pullAudioOutputStream=turn.processActivityPayload(activityPayload,AudioOutputFormat_js_1.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(Exports_js_3.PropertyId.SpeechServiceConnection_SynthOutputFormat,undefined)));var activity=new Exports_js_3.ActivityReceivedEventArgs(activityPayload.messagePayload,pullAudioOutputStream);if(!!this.privDialogServiceConnector.activityReceived){try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,activity);/* eslint-disable-next-line no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}break;case"messagestatus":if(!!this.privDialogServiceConnector.turnStatusReceived){try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new Exports_js_3.TurnStatusReceivedEventArgs(responseMessage.textBody));/* eslint-disable-next-line no-empty */}catch(error){// Not going to let errors in the event handler
// trip things up.
}}break;default:Exports_js_2.Events.instance.onEvent(new Exports_js_2.BackgroundEvent("Unexpected response of type ".concat(responsePayload.messageType,". Ignoring.")));break;}}},{key:"onEvent",value:function onEvent(event){this.privEvents.onEvent(event);Exports_js_2.Events.instance.onEvent(event);}},{key:"addKeywordContextData",value:function addKeywordContextData(){var keywordPropertyValue=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(keywordPropertyValue===undefined){return;}var keywordOffsetPropertyValue=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets");var keywordDurationPropertyValue=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations");var keywords=keywordPropertyValue.split(";");var keywordOffsets=keywordOffsetPropertyValue===undefined?[]:keywordOffsetPropertyValue.split(";");var keywordDurations=keywordDurationPropertyValue===undefined?[]:keywordDurationPropertyValue.split(";");var keywordDefinitionArray=[];for(var i=0;i<keywords.length;i++){var definition={};definition.text=keywords[i];if(i<keywordOffsets.length){definition.offset=Number(keywordOffsets[i]);}if(i<keywordDurations.length){definition.duration=Number(keywordDurations[i]);}keywordDefinitionArray.push(definition);}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword");this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:keywordDefinitionArray,onReject:{action:"EndOfTurn"},type:"startTrigger"}]);}}]);return DialogServiceAdapter;}(Exports_js_4.ServiceRecognizerBase);exports.DialogServiceAdapter=DialogServiceAdapter;/***/},/* 239 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.DialogServiceTurnStateManager=void 0;var Error_js_1=__webpack_require__(26);var DialogServiceTurnState_js_1=__webpack_require__(240);var DialogServiceTurnStateManager=/*#__PURE__*/function(){function DialogServiceTurnStateManager(){_classCallCheck(this,DialogServiceTurnStateManager);this.privTurnMap=new Map();return;}_createClass(DialogServiceTurnStateManager,[{key:"StartTurn",value:function StartTurn(id){if(this.privTurnMap.has(id)){throw new Error_js_1.InvalidOperationError("Service error: There is already a turn with id:"+id);}var turnState=new DialogServiceTurnState_js_1.DialogServiceTurnState(this,id);this.privTurnMap.set(id,turnState);return this.privTurnMap.get(id);}},{key:"GetTurn",value:function GetTurn(id){return this.privTurnMap.get(id);}},{key:"CompleteTurn",value:function CompleteTurn(id){if(!this.privTurnMap.has(id)){throw new Error_js_1.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+id);}var turnState=this.privTurnMap.get(id);turnState.complete();this.privTurnMap["delete"](id);return turnState;}}]);return DialogServiceTurnStateManager;}();exports.DialogServiceTurnStateManager=DialogServiceTurnStateManager;/***/},/* 240 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.DialogServiceTurnState=void 0;var AudioOutputFormat_js_1=__webpack_require__(85);var AudioOutputStream_js_1=__webpack_require__(84);var ActivityResponsePayload_js_1=__webpack_require__(241);var DialogServiceTurnState=/*#__PURE__*/function(){function DialogServiceTurnState(manager,requestId){_classCallCheck(this,DialogServiceTurnState);this.privRequestId=requestId;this.privIsCompleted=false;this.privAudioStream=null;this.privTurnManager=manager;this.resetTurnEndTimeout();}_createClass(DialogServiceTurnState,[{key:"audioStream",get:function get(){// Called when is needed to stream.
this.resetTurnEndTimeout();return this.privAudioStream;}},{key:"processActivityPayload",value:function processActivityPayload(payload,audioFormat){if(payload.messageDataStreamType===ActivityResponsePayload_js_1.MessageDataStreamType.TextToSpeechAudio){this.privAudioStream=AudioOutputStream_js_1.AudioOutputStream.createPullStream();this.privAudioStream.format=audioFormat!==undefined?audioFormat:AudioOutputFormat_js_1.AudioOutputFormatImpl.getDefaultOutputFormat();}return this.privAudioStream;}},{key:"endAudioStream",value:function endAudioStream(){if(this.privAudioStream!==null&&!this.privAudioStream.isClosed){this.privAudioStream.close();}}},{key:"complete",value:function complete(){if(this.privTimeoutToken!==undefined){// eslint-disable-next-line @typescript-eslint/no-unsafe-argument
clearTimeout(this.privTimeoutToken);}this.endAudioStream();}},{key:"resetTurnEndTimeout",value:function resetTurnEndTimeout(){var _this173=this;if(this.privTimeoutToken!==undefined){// eslint-disable-next-line @typescript-eslint/no-unsafe-argument
clearTimeout(this.privTimeoutToken);}this.privTimeoutToken=setTimeout(function(){_this173.privTurnManager.CompleteTurn(_this173.privRequestId);return;},2000);}}]);return DialogServiceTurnState;}();exports.DialogServiceTurnState=DialogServiceTurnState;/***/},/* 241 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
// response
Object.defineProperty(exports,"__esModule",{value:true});exports.MessageDataStreamType=exports.ActivityPayloadResponse=void 0;var ActivityPayloadResponse=/*#__PURE__*/function(){function ActivityPayloadResponse(json){_classCallCheck(this,ActivityPayloadResponse);this.privActivityResponse=JSON.parse(json);}_createClass(ActivityPayloadResponse,[{key:"conversationId",get:function get(){return this.privActivityResponse.conversationId;}},{key:"messageDataStreamType",get:function get(){return this.privActivityResponse.messageDataStreamType;}},{key:"messagePayload",get:function get(){return this.privActivityResponse.messagePayload;}},{key:"version",get:function get(){return this.privActivityResponse.version;}}],[{key:"fromJSON",value:function fromJSON(json){return new ActivityPayloadResponse(json);}}]);return ActivityPayloadResponse;}();exports.ActivityPayloadResponse=ActivityPayloadResponse;var MessageDataStreamType;(function(MessageDataStreamType){MessageDataStreamType[MessageDataStreamType["None"]=0]="None";MessageDataStreamType[MessageDataStreamType["TextToSpeechAudio"]=1]="TextToSpeechAudio";})(MessageDataStreamType=exports.MessageDataStreamType||(exports.MessageDataStreamType={}));/***/},/* 242 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.AgentConfig=void 0;/**
 * Represents the JSON used in the agent.config message sent to the speech service.
 */var AgentConfig=/*#__PURE__*/function(){function AgentConfig(){_classCallCheck(this,AgentConfig);}_createClass(AgentConfig,[{key:"toJsonString",value:function toJsonString(){return JSON.stringify(this.iPrivConfig);}},{key:"get",value:function get(){return this.iPrivConfig;}/**
     * Setter for the agent.config object.
     * @param value a JSON serializable object.
     */},{key:"set",value:function set(value){this.iPrivConfig=value;}}]);return AgentConfig;}();exports.AgentConfig=AgentConfig;/***/},/* 243 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});var ConversationManager_js_1=__webpack_require__(244);Object.defineProperty(exports,"ConversationManager",{enumerable:true,get:function get(){return ConversationManager_js_1.ConversationManager;}});var ConversationConnectionConfig_js_1=__webpack_require__(245);Object.defineProperty(exports,"ConversationConnectionConfig",{enumerable:true,get:function get(){return ConversationConnectionConfig_js_1.ConversationConnectionConfig;}});var ConversationTranslatorRecognizer_js_1=__webpack_require__(246);Object.defineProperty(exports,"ConversationRecognizerFactory",{enumerable:true,get:function get(){return ConversationTranslatorRecognizer_js_1.ConversationRecognizerFactory;}});var TranscriberRecognizer_js_1=__webpack_require__(258);Object.defineProperty(exports,"TranscriberRecognizer",{enumerable:true,get:function get(){return TranscriberRecognizer_js_1.TranscriberRecognizer;}});var ConversationTranslatorEventArgs_js_1=__webpack_require__(252);Object.defineProperty(exports,"ConversationReceivedTranslationEventArgs",{enumerable:true,get:function get(){return ConversationTranslatorEventArgs_js_1.ConversationReceivedTranslationEventArgs;}});Object.defineProperty(exports,"LockRoomEventArgs",{enumerable:true,get:function get(){return ConversationTranslatorEventArgs_js_1.LockRoomEventArgs;}});Object.defineProperty(exports,"MuteAllEventArgs",{enumerable:true,get:function get(){return ConversationTranslatorEventArgs_js_1.MuteAllEventArgs;}});Object.defineProperty(exports,"ParticipantAttributeEventArgs",{enumerable:true,get:function get(){return ConversationTranslatorEventArgs_js_1.ParticipantAttributeEventArgs;}});Object.defineProperty(exports,"ParticipantEventArgs",{enumerable:true,get:function get(){return ConversationTranslatorEventArgs_js_1.ParticipantEventArgs;}});Object.defineProperty(exports,"ParticipantsListEventArgs",{enumerable:true,get:function get(){return ConversationTranslatorEventArgs_js_1.ParticipantsListEventArgs;}});var ConversationTranslatorInterfaces_js_1=__webpack_require__(253);Object.defineProperty(exports,"ConversationTranslatorCommandTypes",{enumerable:true,get:function get(){return ConversationTranslatorInterfaces_js_1.ConversationTranslatorCommandTypes;}});Object.defineProperty(exports,"ConversationTranslatorMessageTypes",{enumerable:true,get:function get(){return ConversationTranslatorInterfaces_js_1.ConversationTranslatorMessageTypes;}});Object.defineProperty(exports,"InternalParticipants",{enumerable:true,get:function get(){return ConversationTranslatorInterfaces_js_1.InternalParticipants;}});/***/},/* 244 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationManager=void 0;var Exports_js_1=__webpack_require__(60);var Contracts_js_1=__webpack_require__(64);var Exports_js_2=__webpack_require__(79);var ConversationConnectionConfig_js_1=__webpack_require__(245);var ConversationManager=/*#__PURE__*/function(){function ConversationManager(){_classCallCheck(this,ConversationManager);//
this.privRequestParams=ConversationConnectionConfig_js_1.ConversationConnectionConfig.configParams;this.privErrors=ConversationConnectionConfig_js_1.ConversationConnectionConfig.restErrors;this.privHost=ConversationConnectionConfig_js_1.ConversationConnectionConfig.host;this.privApiVersion=ConversationConnectionConfig_js_1.ConversationConnectionConfig.apiVersion;this.privRestPath=ConversationConnectionConfig_js_1.ConversationConnectionConfig.restPath;this.privRestAdapter=new Exports_js_1.RestMessageAdapter({});}/**
     * Make a POST request to the Conversation Manager service endpoint to create or join a conversation.
     * @param args
     * @param conversationCode
     * @param callback
     * @param errorCallback
     */_createClass(ConversationManager,[{key:"createOrJoin",value:function createOrJoin(args,conversationCode,cb,err){var _this174=this;try{Contracts_js_1.Contracts.throwIfNullOrUndefined(args,"args");var languageCode=args.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage,ConversationConnectionConfig_js_1.ConversationConnectionConfig.defaultLanguageCode);var nickname=args.getProperty(Exports_js_2.PropertyId.ConversationTranslator_Name,"conversation_host");var endpointHost=args.getProperty(Exports_js_2.PropertyId.ConversationTranslator_Host,this.privHost);var correlationId=args.getProperty(Exports_js_2.PropertyId.ConversationTranslator_CorrelationId);var subscriptionKey=args.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Key);var subscriptionRegion=args.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region);var authToken=args.getProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token);Contracts_js_1.Contracts.throwIfNullOrWhitespace(languageCode,"languageCode");Contracts_js_1.Contracts.throwIfNullOrWhitespace(nickname,"nickname");Contracts_js_1.Contracts.throwIfNullOrWhitespace(endpointHost,"endpointHost");var queryParams={};queryParams[this.privRequestParams.apiVersion]=this.privApiVersion;queryParams[this.privRequestParams.languageCode]=languageCode;queryParams[this.privRequestParams.nickname]=nickname;var headers={};if(correlationId){headers[this.privRequestParams.correlationId]=correlationId;}headers[this.privRequestParams.clientAppId]=ConversationConnectionConfig_js_1.ConversationConnectionConfig.clientAppId;if(conversationCode!==undefined){queryParams[this.privRequestParams.roomId]=conversationCode;}else{Contracts_js_1.Contracts.throwIfNullOrUndefined(subscriptionRegion,this.privErrors.authInvalidSubscriptionRegion);headers[this.privRequestParams.subscriptionRegion]=subscriptionRegion;if(subscriptionKey){headers[this.privRequestParams.subscriptionKey]=subscriptionKey;}else if(authToken){headers[this.privRequestParams.authorization]="Bearer ".concat(authToken);}else{Contracts_js_1.Contracts.throwIfNullOrUndefined(subscriptionKey,this.privErrors.authInvalidSubscriptionKey);}}var config={};config.headers=headers;this.privRestAdapter.options=config;var endpoint="https://".concat(endpointHost).concat(this.privRestPath);// TODO: support a proxy and certificate validation
this.privRestAdapter.request(Exports_js_1.RestRequestType.Post,endpoint,queryParams,null).then(function(response){var requestId=Exports_js_1.RestMessageAdapter.extractHeaderValue(_this174.privRequestParams.requestId,response.headers);if(!response.ok){if(!!err){// get the error
var errorMessage=_this174.privErrors.invalidCreateJoinConversationResponse.replace("{status}",response.status.toString());var errMessageRaw;try{errMessageRaw=JSON.parse(response.data);errorMessage+=" [".concat(errMessageRaw.error.code,": ").concat(errMessageRaw.error.message,"]");}catch(e){errorMessage+=" [".concat(response.data,"]");}if(requestId){errorMessage+=" ".concat(requestId);}err(errorMessage);}return;}var conversation=JSON.parse(response.data);if(conversation){conversation.requestId=requestId;}if(!!cb){try{cb(conversation);}catch(e){if(!!err){err(e);}}cb=undefined;}// eslint-disable-next-line @typescript-eslint/no-empty-function
})["catch"](function(){});}catch(error){if(!!err){if(error instanceof Error){var typedError=error;err(typedError.name+": "+typedError.message);}else{err(error);}}}}/**
     * Make a DELETE request to the Conversation Manager service endpoint to leave the conversation.
     * @param args
     * @param sessionToken
     * @param callback
     */},{key:"leave",value:function leave(args,sessionToken){var _this175=this;return new Promise(function(resolve,reject){try{Contracts_js_1.Contracts.throwIfNullOrUndefined(args,_this175.privErrors.invalidArgs.replace("{arg}","config"));Contracts_js_1.Contracts.throwIfNullOrWhitespace(sessionToken,_this175.privErrors.invalidArgs.replace("{arg}","token"));var endpointHost=args.getProperty(Exports_js_2.PropertyId.ConversationTranslator_Host,_this175.privHost);var correlationId=args.getProperty(Exports_js_2.PropertyId.ConversationTranslator_CorrelationId);var queryParams={};queryParams[_this175.privRequestParams.apiVersion]=_this175.privApiVersion;queryParams[_this175.privRequestParams.sessionToken]=sessionToken;var headers={};if(correlationId){headers[_this175.privRequestParams.correlationId]=correlationId;}var config={};config.headers=headers;_this175.privRestAdapter.options=config;var endpoint="https://".concat(endpointHost).concat(_this175.privRestPath);// TODO: support a proxy and certificate validation
_this175.privRestAdapter.request(Exports_js_1.RestRequestType.Delete,endpoint,queryParams,null).then(function(response){if(!response.ok){// ignore errors on delete
}resolve();// eslint-disable-next-line @typescript-eslint/no-empty-function
})["catch"](function(){});}catch(error){if(error instanceof Error){var typedError=error;reject(typedError.name+": "+typedError.message);}else{reject(error);}}});}}]);return ConversationManager;}();exports.ConversationManager=ConversationManager;/***/},/* 245 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationConnectionConfig=void 0;var RestConfigBase_js_1=__webpack_require__(202);var ConversationConnectionConfig=/*#__PURE__*/function(_RestConfigBase_js_1$){_inherits(ConversationConnectionConfig,_RestConfigBase_js_1$);var _super133=_createSuper(ConversationConnectionConfig);function ConversationConnectionConfig(){_classCallCheck(this,ConversationConnectionConfig);return _super133.apply(this,arguments);}_createClass(ConversationConnectionConfig,null,[{key:"host",get:function get(){return ConversationConnectionConfig.privHost;}},{key:"apiVersion",get:function get(){return ConversationConnectionConfig.privApiVersion;}},{key:"clientAppId",get:function get(){return ConversationConnectionConfig.privClientAppId;}},{key:"defaultLanguageCode",get:function get(){return ConversationConnectionConfig.privDefaultLanguageCode;}},{key:"restPath",get:function get(){return ConversationConnectionConfig.privRestPath;}},{key:"webSocketPath",get:function get(){return ConversationConnectionConfig.privWebSocketPath;}},{key:"transcriptionEventKeys",get:function get(){return ConversationConnectionConfig.privTranscriptionEventKeys;}}]);return ConversationConnectionConfig;}(RestConfigBase_js_1.RestConfigBase);exports.ConversationConnectionConfig=ConversationConnectionConfig;ConversationConnectionConfig.privHost="dev.microsofttranslator.com";ConversationConnectionConfig.privRestPath="/capito/room";ConversationConnectionConfig.privApiVersion="2.0";ConversationConnectionConfig.privDefaultLanguageCode="en-US";ConversationConnectionConfig.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15";ConversationConnectionConfig.privWebSocketPath="/capito/translate";ConversationConnectionConfig.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"];/***/},/* 246 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationTranslatorRecognizer=exports.ConversationRecognizerFactory=void 0;// eslint-disable-next-line max-classes-per-file
var Exports_js_1=__webpack_require__(2);var Exports_js_2=__webpack_require__(4);var Contracts_js_1=__webpack_require__(64);var Exports_js_3=__webpack_require__(79);var ConversationConnectionFactory_js_1=__webpack_require__(247);var ConversationServiceAdapter_js_1=__webpack_require__(250);var ConversationRecognizerFactory=/*#__PURE__*/function(){function ConversationRecognizerFactory(){_classCallCheck(this,ConversationRecognizerFactory);}_createClass(ConversationRecognizerFactory,null,[{key:"fromConfig",value:function fromConfig(conversation,speechConfig,audioConfig){return new ConversationTranslatorRecognizer(conversation,speechConfig,audioConfig);}}]);return ConversationRecognizerFactory;}();exports.ConversationRecognizerFactory=ConversationRecognizerFactory;/**
 * Sends messages to the Conversation Translator websocket and listens for incoming events containing websocket messages.
 * Based off the recognizers in the SDK folder.
 */var ConversationTranslatorRecognizer=/*#__PURE__*/function(_Exports_js_3$Recogni6){_inherits(ConversationTranslatorRecognizer,_Exports_js_3$Recogni6);var _super134=_createSuper(ConversationTranslatorRecognizer);function ConversationTranslatorRecognizer(conversation,speechConfig,audioConfig){var _this176;_classCallCheck(this,ConversationTranslatorRecognizer);var serviceConfigImpl=speechConfig;Contracts_js_1.Contracts.throwIfNull(serviceConfigImpl,"speechConfig");var conversationImpl=conversation;Contracts_js_1.Contracts.throwIfNull(conversationImpl,"conversationImpl");_this176=_super134.call(this,audioConfig,serviceConfigImpl.properties,new ConversationConnectionFactory_js_1.ConversationConnectionFactory());_this176.privConversation=conversationImpl;_this176.privIsDisposed=false;_this176.privProperties=serviceConfigImpl.properties.clone();_this176.privConnection=Exports_js_3.Connection.fromRecognizer(_assertThisInitialized(_this176));var webWorkerLoadType=_this176.privProperties.getProperty(Exports_js_3.PropertyId.WebWorkerLoadType,"on").toLowerCase();if(webWorkerLoadType==="on"&&typeof Blob!=="undefined"&&typeof Worker!=="undefined"){_this176.privSetTimeout=Exports_js_2.Timeout.setTimeout;_this176.privClearTimeout=Exports_js_2.Timeout.clearTimeout;}else{if(typeof window!=="undefined"){// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
_this176.privSetTimeout=window.setTimeout.bind(window);// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
_this176.privClearTimeout=window.clearTimeout.bind(window);}else{_this176.privSetTimeout=setTimeout;_this176.privClearTimeout=clearTimeout;}}return _this176;}_createClass(ConversationTranslatorRecognizer,[{key:"connected",set:function set(cb){this.privConnection.connected=cb;}},{key:"disconnected",set:function set(cb){this.privConnection.disconnected=cb;}/**
     * Return the speech language used by the recognizer
     */},{key:"speechRecognitionLanguage",get:function get(){return this.privSpeechRecognitionLanguage;}/**
     * Return the properties for the recognizer
     */},{key:"properties",get:function get(){return this.privProperties;}},{key:"isDisposed",value:function isDisposed(){return this.privIsDisposed;}/**
     * Connect to the recognizer
     * @param token
     */},{key:"connect",value:function connect(token,cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);Contracts_js_1.Contracts.throwIfNullOrWhitespace(token,"token");this.privReco.conversationTranslatorToken=token;this.resetConversationTimeout();this.privReco.connectAsync(cb,err);}catch(error){if(!!err){if(error instanceof Error){var typedError=error;err(typedError.name+": "+typedError.message);}else{err(error);}}}}/**
     * Disconnect from the recognizer
     */},{key:"disconnect",value:function disconnect(cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);if(this.privTimeoutToken!==undefined){// eslint-disable-next-line @typescript-eslint/no-unsafe-argument
this.privClearTimeout(this.privTimeoutToken);}this.privReco.disconnect().then(function(){if(!!cb){cb();}},function(error){if(!!err){err(error);}});}catch(error){if(!!err){if(error instanceof Error){var typedError=error;err(typedError.name+": "+typedError.message);}else{err(error);}}// Destroy the recognizer.
this.dispose(true)["catch"](function(reason){Exports_js_2.Events.instance.onEvent(new Exports_js_2.BackgroundEvent(reason));});}}/**
     * Send the mute all participants command to the websocket
     * @param conversationId
     * @param participantId
     * @param isMuted
     */},{key:"sendRequest",value:function sendRequest(command,cb,err){try{Contracts_js_1.Contracts.throwIfDisposed(this.privIsDisposed);this.sendMessage(command,cb,err);}catch(error){if(!!err){if(error instanceof Error){var typedError=error;err(typedError.name+": "+typedError.message);}else{err(error);}}// Destroy the recognizer.
this.dispose(true)["catch"](function(reason){Exports_js_2.Events.instance.onEvent(new Exports_js_2.BackgroundEvent(reason));});}}/**
     * Handle update of service auth token (#694)
     */},{key:"onToken",value:function onToken(token){this.privConversation.onToken(token);}/**
     * Close and dispose the recognizer
     */},{key:"close",value:function(){var _close6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee125(){return _regeneratorRuntime().wrap(function _callee125$(_context125){while(1)switch(_context125.prev=_context125.next){case 0:if(this.privIsDisposed){_context125.next=5;break;}if(!!this.privConnection){this.privConnection.closeConnection();this.privConnection.close();}this.privConnection=undefined;_context125.next=5;return this.dispose(true);case 5:case"end":return _context125.stop();}},_callee125,this);}));function close(){return _close6.apply(this,arguments);}return close;}()/**
     * Dispose the recognizer
     * @param disposing
     */},{key:"dispose",value:function(){var _dispose15=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee126(disposing){return _regeneratorRuntime().wrap(function _callee126$(_context126){while(1)switch(_context126.prev=_context126.next){case 0:if(!this.privIsDisposed){_context126.next=2;break;}return _context126.abrupt("return");case 2:if(!disposing){_context126.next=8;break;}if(this.privTimeoutToken!==undefined){// eslint-disable-next-line @typescript-eslint/no-unsafe-argument
this.privClearTimeout(this.privTimeoutToken);}this.privIsDisposed=true;if(!!this.privConnection){this.privConnection.closeConnection();this.privConnection.close();this.privConnection=undefined;}_context126.next=8;return _get(_getPrototypeOf(ConversationTranslatorRecognizer.prototype),"dispose",this).call(this,disposing);case 8:case"end":return _context126.stop();}},_callee126,this);}));function dispose(_x95){return _dispose15.apply(this,arguments);}return dispose;}()/**
     * Create the config for the recognizer
     * @param speechConfig
     */},{key:"createRecognizerConfig",value:function createRecognizerConfig(speechConfig){return new Exports_js_1.RecognizerConfig(speechConfig,this.privProperties);}/**
     * Create the service recognizer.
     * The audio source is redundnant here but is required by the implementation.
     * @param authentication
     * @param connectionFactory
     * @param audioConfig
     * @param recognizerConfig
     */},{key:"createServiceRecognizer",value:function createServiceRecognizer(authentication,connectionFactory,audioConfig,recognizerConfig){var audioSource=audioConfig;return new ConversationServiceAdapter_js_1.ConversationServiceAdapter(authentication,connectionFactory,audioSource,recognizerConfig,this);}},{key:"sendMessage",value:function sendMessage(msg,cb,err){var withAsync=this.privReco;var PromiseToEmptyCallback=function PromiseToEmptyCallback(promise,cb,err){if(promise!==undefined){promise.then(function(){try{if(!!cb){cb();}}catch(e){if(!!err){err("'Unhandled error on promise callback: ".concat(e,"'"));}}},function(reason){try{if(!!err){err(reason);}// eslint-disable-next-line no-empty
}catch(error){}});}else{if(!!err){err("Null promise");}}};PromiseToEmptyCallback(withAsync.sendMessageAsync(msg),cb,err);this.resetConversationTimeout();}},{key:"resetConversationTimeout",value:function resetConversationTimeout(){var _this177=this;if(this.privTimeoutToken!==undefined){// eslint-disable-next-line @typescript-eslint/no-unsafe-argument
this.privClearTimeout(this.privTimeoutToken);}this.privTimeoutToken=this.privSetTimeout(function(){_this177.sendRequest(_this177.privConversation.getKeepAlive());},60000);}}]);return ConversationTranslatorRecognizer;}(Exports_js_3.Recognizer);exports.ConversationTranslatorRecognizer=ConversationTranslatorRecognizer;/***/},/* 247 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationConnectionFactory=void 0;var Exports_js_1=__webpack_require__(60);var Exports_js_2=__webpack_require__(4);var Contracts_js_1=__webpack_require__(64);var Exports_js_3=__webpack_require__(79);var ConnectionFactoryBase_js_1=__webpack_require__(134);var ConversationConnectionConfig_js_1=__webpack_require__(245);var ConversationWebsocketMessageFormatter_js_1=__webpack_require__(248);/**
 * Create a connection to the Conversation Translator websocket for sending instant messages and commands, and for receiving translated messages.
 * The conversation must already have been started or joined.
 */var ConversationConnectionFactory=/*#__PURE__*/function(_ConnectionFactoryBas9){_inherits(ConversationConnectionFactory,_ConnectionFactoryBas9);var _super135=_createSuper(ConversationConnectionFactory);function ConversationConnectionFactory(){_classCallCheck(this,ConversationConnectionFactory);return _super135.apply(this,arguments);}_createClass(ConversationConnectionFactory,[{key:"create",value:function create(config,authInfo,connectionId){var endpointHost=config.parameters.getProperty(Exports_js_3.PropertyId.ConversationTranslator_Host,ConversationConnectionConfig_js_1.ConversationConnectionConfig.host);var correlationId=config.parameters.getProperty(Exports_js_3.PropertyId.ConversationTranslator_CorrelationId,Exports_js_2.createGuid());var endpoint="wss://".concat(endpointHost).concat(ConversationConnectionConfig_js_1.ConversationConnectionConfig.webSocketPath);var token=config.parameters.getProperty(Exports_js_3.PropertyId.ConversationTranslator_Token,undefined);Contracts_js_1.Contracts.throwIfNullOrUndefined(token,"token");var queryParams={};queryParams[ConversationConnectionConfig_js_1.ConversationConnectionConfig.configParams.apiVersion]=ConversationConnectionConfig_js_1.ConversationConnectionConfig.apiVersion;queryParams[ConversationConnectionConfig_js_1.ConversationConnectionConfig.configParams.token]=token;queryParams[ConversationConnectionConfig_js_1.ConversationConnectionConfig.configParams.correlationId]=correlationId;var enableCompression=config.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new Exports_js_1.WebsocketConnection(endpoint,queryParams,{},new ConversationWebsocketMessageFormatter_js_1.ConversationWebsocketMessageFormatter(),Exports_js_1.ProxyInfo.fromRecognizerConfig(config),enableCompression,connectionId);}}]);return ConversationConnectionFactory;}(ConnectionFactoryBase_js_1.ConnectionFactoryBase);exports.ConversationConnectionFactory=ConversationConnectionFactory;/***/},/* 248 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationWebsocketMessageFormatter=void 0;var Exports_js_1=__webpack_require__(4);var ConversationConnectionMessage_js_1=__webpack_require__(249);/**
 * Based off WebsocketMessageFormatter. The messages for Conversation Translator have some variations from the Speech messages.
 */var ConversationWebsocketMessageFormatter=/*#__PURE__*/function(){function ConversationWebsocketMessageFormatter(){_classCallCheck(this,ConversationWebsocketMessageFormatter);}_createClass(ConversationWebsocketMessageFormatter,[{key:"toConnectionMessage",value:/**
     * Format incoming messages: text (speech partial/final, IM) or binary (tts)
     */function toConnectionMessage(message){var deferral=new Exports_js_1.Deferred();try{if(message.messageType===Exports_js_1.MessageType.Text){var incomingMessage=new ConversationConnectionMessage_js_1.ConversationConnectionMessage(message.messageType,message.textContent,{},message.id);deferral.resolve(incomingMessage);}else if(message.messageType===Exports_js_1.MessageType.Binary){deferral.resolve(new ConversationConnectionMessage_js_1.ConversationConnectionMessage(message.messageType,message.binaryContent,undefined,message.id));}}catch(e){deferral.reject("Error formatting the message. Error: ".concat(e));}return deferral.promise;}/**
     * Format outgoing messages: text (commands or IM)
     */},{key:"fromConnectionMessage",value:function fromConnectionMessage(message){var deferral=new Exports_js_1.Deferred();try{if(message.messageType===Exports_js_1.MessageType.Text){var payload="".concat(message.textBody?message.textBody:"");deferral.resolve(new Exports_js_1.RawWebsocketMessage(Exports_js_1.MessageType.Text,payload,message.id));}}catch(e){deferral.reject("Error formatting the message. ".concat(e));}return deferral.promise;}}]);return ConversationWebsocketMessageFormatter;}();exports.ConversationWebsocketMessageFormatter=ConversationWebsocketMessageFormatter;/***/},/* 249 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationConnectionMessage=void 0;var Exports_js_1=__webpack_require__(4);var ConversationConnectionMessage=/*#__PURE__*/function(_Exports_js_1$Connect2){_inherits(ConversationConnectionMessage,_Exports_js_1$Connect2);var _super136=_createSuper(ConversationConnectionMessage);function ConversationConnectionMessage(messageType,body,headers,id){var _this178;_classCallCheck(this,ConversationConnectionMessage);_this178=_super136.call(this,messageType,body,headers,id);var json=JSON.parse(_this178.textBody);if(json.type!==undefined){_this178.privConversationMessageType=json.type;}return _this178;}_createClass(ConversationConnectionMessage,[{key:"conversationMessageType",get:function get(){return this.privConversationMessageType;}}]);return ConversationConnectionMessage;}(Exports_js_1.ConnectionMessage);exports.ConversationConnectionMessage=ConversationConnectionMessage;/***/},/* 250 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationServiceAdapter=void 0;var Exports_js_1=__webpack_require__(4);var Exports_js_2=__webpack_require__(79);var Exports_js_3=__webpack_require__(2);var ConversationConnectionMessage_js_1=__webpack_require__(249);var ConversationRequestSession_js_1=__webpack_require__(251);var ConversationTranslatorEventArgs_js_1=__webpack_require__(252);var ConversationTranslatorInterfaces_js_1=__webpack_require__(253);var Exports_js_4=__webpack_require__(254);/**
 * The service adapter handles sending and receiving messages to the Conversation Translator websocket.
 */var ConversationServiceAdapter=/*#__PURE__*/function(_Exports_js_3$Service2){_inherits(ConversationServiceAdapter,_Exports_js_3$Service2);var _super137=_createSuper(ConversationServiceAdapter);function ConversationServiceAdapter(authentication,connectionFactory,audioSource,recognizerConfig,conversationServiceConnector){var _this179;_classCallCheck(this,ConversationServiceAdapter);_this179=_super137.call(this,authentication,connectionFactory,audioSource,recognizerConfig,conversationServiceConnector);_this179.privConnectionConfigPromise=undefined;_this179.privLastPartialUtteranceId="";_this179.privConversationServiceConnector=conversationServiceConnector;_this179.privConversationAuthentication=authentication;_this179.receiveMessageOverride=function(){return _this179.receiveConversationMessageOverride();};_this179.recognizeOverride=function(){return _this179.noOp();};_this179.postConnectImplOverride=function(connection){return _this179.conversationConnectImpl(connection);};_this179.configConnectionOverride=function(){return _this179.configConnection();};_this179.disconnectOverride=function(){return _this179.privDisconnect();};_this179.privConversationRequestSession=new ConversationRequestSession_js_1.ConversationRequestSession(Exports_js_1.createNoDashGuid());_this179.privConversationConnectionFactory=connectionFactory;_this179.privConversationIsDisposed=false;return _this179;}_createClass(ConversationServiceAdapter,[{key:"isDisposed",value:function isDisposed(){return _get(_getPrototypeOf(ConversationServiceAdapter.prototype),"isDisposed",this).call(this)||this.privConversationIsDisposed;}},{key:"dispose",value:function(){var _dispose16=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee127(reason){var connection;return _regeneratorRuntime().wrap(function _callee127$(_context127){while(1)switch(_context127.prev=_context127.next){case 0:this.privConversationIsDisposed=true;if(!(this.privConnectionConfigPromise!==undefined)){_context127.next=7;break;}_context127.next=4;return this.privConnectionConfigPromise;case 4:connection=_context127.sent;_context127.next=7;return connection.dispose(reason);case 7:_context127.next=9;return _get(_getPrototypeOf(ConversationServiceAdapter.prototype),"dispose",this).call(this,reason);case 9:case"end":return _context127.stop();}},_callee127,this);}));function dispose(_x96){return _dispose16.apply(this,arguments);}return dispose;}()},{key:"sendMessage",value:function(){var _sendMessage2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee128(message){var connection;return _regeneratorRuntime().wrap(function _callee128$(_context128){while(1)switch(_context128.prev=_context128.next){case 0:_context128.next=2;return this.fetchConnection();case 2:connection=_context128.sent;return _context128.abrupt("return",connection.send(new ConversationConnectionMessage_js_1.ConversationConnectionMessage(Exports_js_1.MessageType.Text,message)));case 4:case"end":return _context128.stop();}},_callee128,this);}));function sendMessage(_x97){return _sendMessage2.apply(this,arguments);}return sendMessage;}()},{key:"sendMessageAsync",value:function(){var _sendMessageAsync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee129(message){var connection;return _regeneratorRuntime().wrap(function _callee129$(_context129){while(1)switch(_context129.prev=_context129.next){case 0:_context129.next=2;return this.fetchConnection();case 2:connection=_context129.sent;_context129.next=5;return connection.send(new ConversationConnectionMessage_js_1.ConversationConnectionMessage(Exports_js_1.MessageType.Text,message));case 5:case"end":return _context129.stop();}},_callee129,this);}));function sendMessageAsync(_x98){return _sendMessageAsync.apply(this,arguments);}return sendMessageAsync;}()},{key:"privDisconnect",value:function privDisconnect(){if(this.terminateMessageLoop){return;}this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,Exports_js_2.CancellationReason.Error,Exports_js_2.CancellationErrorCode.NoError,"Disconnecting");this.terminateMessageLoop=true;return Promise.resolve();}// eslint-disable-next-line @typescript-eslint/require-await
},{key:"processTypeSpecificMessages",value:function(){var _processTypeSpecificMessages4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee130(){return _regeneratorRuntime().wrap(function _callee130$(_context130){while(1)switch(_context130.prev=_context130.next){case 0:return _context130.abrupt("return",true);case 1:case"end":return _context130.stop();}},_callee130);}));function processTypeSpecificMessages(){return _processTypeSpecificMessages4.apply(this,arguments);}return processTypeSpecificMessages;}()// Cancels recognition.
},{key:"cancelRecognition",value:function cancelRecognition(sessionId,requestId,cancellationReason,errorCode,error){this.terminateMessageLoop=true;var cancelEvent=new Exports_js_2.ConversationTranslationCanceledEventArgs(cancellationReason,error,errorCode,undefined,sessionId);try{if(!!this.privConversationServiceConnector.canceled){this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,cancelEvent);}}catch(_unused15){// continue on error
}}/**
     * Establishes a websocket connection to the end point.
     */},{key:"conversationConnectImpl",value:function(){var _conversationConnectImpl=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee131(connection){return _regeneratorRuntime().wrap(function _callee131$(_context131){while(1)switch(_context131.prev=_context131.next){case 0:this.privConnectionLoop=this.startMessageLoop();return _context131.abrupt("return",connection);case 2:case"end":return _context131.stop();}},_callee131,this);}));function conversationConnectImpl(_x99){return _conversationConnectImpl.apply(this,arguments);}return conversationConnectImpl;}()/**
     * Process incoming websocket messages
     */},{key:"receiveConversationMessageOverride",value:function(){var _receiveConversationMessageOverride=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee132(){var communicationCustodian,connection,message,sessionId,conversationMessageType,sendFinal,commandPayload,participantsPayload,participantsResult,joinParticipantPayload,joiningParticipant,leavingParticipant,disconnectParticipant,token,speechPayload,conversationResultReason,speechResult,textPayload,textResult;return _regeneratorRuntime().wrap(function _callee132$(_context132){while(1)switch(_context132.prev=_context132.next){case 0:if(!(this.isDisposed()||this.terminateMessageLoop)){_context132.next=2;break;}return _context132.abrupt("return",Promise.resolve());case 2:// we won't rely on the cascading promises of the connection since we want to continually be available to receive messages
communicationCustodian=new Exports_js_1.Deferred();_context132.prev=3;_context132.next=6;return this.fetchConnection();case 6:connection=_context132.sent;_context132.next=9;return connection.read();case 9:message=_context132.sent;if(!(this.isDisposed()||this.terminateMessageLoop)){_context132.next=13;break;}// We're done.
communicationCustodian.resolve();return _context132.abrupt("return",Promise.resolve());case 13:if(message){_context132.next=15;break;}return _context132.abrupt("return",this.receiveConversationMessageOverride());case 15:sessionId=this.privConversationRequestSession.sessionId;conversationMessageType=message.conversationMessageType.toLowerCase();sendFinal=false;_context132.prev=18;_context132.t0=conversationMessageType;_context132.next=_context132.t0==="info"?22:_context132.t0==="participant_command"?22:_context132.t0==="command"?22:_context132.t0==="partial"?61:_context132.t0==="final"?61:_context132.t0==="translated_message"?66:70;break;case 22:commandPayload=Exports_js_4.CommandResponsePayload.fromJSON(message.textBody);_context132.t1=commandPayload.command.toLowerCase();_context132.next=_context132.t1==="participantlist"?26:_context132.t1==="settranslatetolanguages"?30:_context132.t1==="setprofanityfiltering"?32:_context132.t1==="setmute"?34:_context132.t1==="setmuteall"?36:_context132.t1==="roomexpirationwarning"?38:_context132.t1==="setusetts"?40:_context132.t1==="setlockstate"?42:_context132.t1==="changenickname"?44:_context132.t1==="joinsession"?46:_context132.t1==="leavesession"?50:_context132.t1==="disconnectsession"?53:_context132.t1==="token"?55:59;break;case 26:participantsPayload=Exports_js_4.ParticipantsListPayloadResponse.fromJSON(message.textBody);participantsResult=participantsPayload.participants.map(function(p){var participant={avatar:p.avatar,displayName:p.nickname,id:p.participantId,isHost:p.ishost,isMuted:p.ismuted,isUsingTts:p.usetts,preferredLanguage:p.locale};return participant;});if(!!this.privConversationServiceConnector.participantsListReceived){this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ParticipantsListEventArgs(participantsPayload.roomid,participantsPayload.token,participantsPayload.translateTo,participantsPayload.profanityFilter,participantsPayload.roomProfanityFilter,participantsPayload.roomLocked,participantsPayload.muteAll,participantsResult,sessionId));}return _context132.abrupt("break",60);case 30:if(!!this.privConversationServiceConnector.participantUpdateCommandReceived){this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ParticipantAttributeEventArgs(commandPayload.participantId,ConversationTranslatorInterfaces_js_1.ConversationTranslatorCommandTypes.setTranslateToLanguages,commandPayload.value,sessionId));}return _context132.abrupt("break",60);case 32:if(!!this.privConversationServiceConnector.participantUpdateCommandReceived){this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ParticipantAttributeEventArgs(commandPayload.participantId,ConversationTranslatorInterfaces_js_1.ConversationTranslatorCommandTypes.setProfanityFiltering,commandPayload.value,sessionId));}return _context132.abrupt("break",60);case 34:if(!!this.privConversationServiceConnector.participantUpdateCommandReceived){this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ParticipantAttributeEventArgs(commandPayload.participantId,ConversationTranslatorInterfaces_js_1.ConversationTranslatorCommandTypes.setMute,commandPayload.value,sessionId));}return _context132.abrupt("break",60);case 36:if(!!this.privConversationServiceConnector.muteAllCommandReceived){this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.MuteAllEventArgs(commandPayload.value,sessionId));}return _context132.abrupt("break",60);case 38:if(!!this.privConversationServiceConnector.conversationExpiration){this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new Exports_js_2.ConversationExpirationEventArgs(commandPayload.value,this.privConversationRequestSession.sessionId));}return _context132.abrupt("break",60);case 40:if(!!this.privConversationServiceConnector.participantUpdateCommandReceived){this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ParticipantAttributeEventArgs(commandPayload.participantId,ConversationTranslatorInterfaces_js_1.ConversationTranslatorCommandTypes.setUseTTS,commandPayload.value,sessionId));}return _context132.abrupt("break",60);case 42:if(!!this.privConversationServiceConnector.lockRoomCommandReceived){this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.LockRoomEventArgs(commandPayload.value,sessionId));}return _context132.abrupt("break",60);case 44:if(!!this.privConversationServiceConnector.participantUpdateCommandReceived){this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ParticipantAttributeEventArgs(commandPayload.participantId,ConversationTranslatorInterfaces_js_1.ConversationTranslatorCommandTypes.changeNickname,commandPayload.value,sessionId));}return _context132.abrupt("break",60);case 46:joinParticipantPayload=Exports_js_4.ParticipantPayloadResponse.fromJSON(message.textBody);joiningParticipant={avatar:joinParticipantPayload.avatar,displayName:joinParticipantPayload.nickname,id:joinParticipantPayload.participantId,isHost:joinParticipantPayload.ishost,isMuted:joinParticipantPayload.ismuted,isUsingTts:joinParticipantPayload.usetts,preferredLanguage:joinParticipantPayload.locale};if(!!this.privConversationServiceConnector.participantJoinCommandReceived){this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ParticipantEventArgs(joiningParticipant,sessionId));}return _context132.abrupt("break",60);case 50:leavingParticipant={id:commandPayload.participantId};if(!!this.privConversationServiceConnector.participantLeaveCommandReceived){this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ParticipantEventArgs(leavingParticipant,sessionId));}return _context132.abrupt("break",60);case 53:// eslint-disable-next-line @typescript-eslint/no-unused-vars
disconnectParticipant={id:commandPayload.participantId};return _context132.abrupt("break",60);case 55:token=new Exports_js_3.CognitiveTokenAuthentication(function(){var authorizationToken=commandPayload.token;return Promise.resolve(authorizationToken);},function(){var authorizationToken=commandPayload.token;return Promise.resolve(authorizationToken);});this.authentication=token;this.privConversationServiceConnector.onToken(token);return _context132.abrupt("break",60);case 59:return _context132.abrupt("break",60);case 60:return _context132.abrupt("break",71);case 61:speechPayload=Exports_js_4.SpeechResponsePayload.fromJSON(message.textBody);conversationResultReason=conversationMessageType==="final"?Exports_js_2.ResultReason.TranslatedParticipantSpeech:Exports_js_2.ResultReason.TranslatingParticipantSpeech;speechResult=new Exports_js_2.ConversationTranslationResult(speechPayload.participantId,this.getTranslations(speechPayload.translations),speechPayload.language,speechPayload.id,conversationResultReason,speechPayload.recognition,undefined,undefined,message.textBody,undefined);if(speechPayload.isFinal){// check the length, sometimes empty finals are returned
if(speechResult.text!==undefined&&speechResult.text.length>0){sendFinal=true;}else if(speechPayload.id===this.privLastPartialUtteranceId){// send final as normal. We had a non-empty partial for this same utterance
// so sending the empty final is important
sendFinal=true;}else{// suppress unneeded final
}if(sendFinal){if(!!this.privConversationServiceConnector.translationReceived){this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ConversationReceivedTranslationEventArgs(ConversationTranslatorInterfaces_js_1.ConversationTranslatorMessageTypes["final"],speechResult,sessionId));}}}else if(speechResult.text!==undefined){this.privLastPartialUtteranceId=speechPayload.id;if(!!this.privConversationServiceConnector.translationReceived){this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ConversationReceivedTranslationEventArgs(ConversationTranslatorInterfaces_js_1.ConversationTranslatorMessageTypes.partial,speechResult,sessionId));}}return _context132.abrupt("break",71);case 66:textPayload=Exports_js_4.TextResponsePayload.fromJSON(message.textBody);// TODO: (Native parity) a result reason should be set based whether the participantId is ours or not
textResult=new Exports_js_2.ConversationTranslationResult(textPayload.participantId,this.getTranslations(textPayload.translations),textPayload.language,undefined,undefined,textPayload.originalText,undefined,undefined,undefined,message.textBody,undefined);if(!!this.privConversationServiceConnector.translationReceived){this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new ConversationTranslatorEventArgs_js_1.ConversationReceivedTranslationEventArgs(ConversationTranslatorInterfaces_js_1.ConversationTranslatorMessageTypes.instantMessage,textResult,sessionId));}return _context132.abrupt("break",71);case 70:return _context132.abrupt("break",71);case 71:_context132.next=75;break;case 73:_context132.prev=73;_context132.t2=_context132["catch"](18);case 75:return _context132.abrupt("return",this.receiveConversationMessageOverride());case 78:_context132.prev=78;_context132.t3=_context132["catch"](3);this.terminateMessageLoop=true;case 81:return _context132.abrupt("return",communicationCustodian.promise);case 82:case"end":return _context132.stop();}},_callee132,this,[[3,78],[18,73]]);}));function receiveConversationMessageOverride(){return _receiveConversationMessageOverride.apply(this,arguments);}return receiveConversationMessageOverride;}()},{key:"startMessageLoop",value:function(){var _startMessageLoop2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee133(){var messageRetrievalPromise,r;return _regeneratorRuntime().wrap(function _callee133$(_context133){while(1)switch(_context133.prev=_context133.next){case 0:if(!this.isDisposed()){_context133.next=2;break;}return _context133.abrupt("return",Promise.resolve());case 2:this.terminateMessageLoop=false;messageRetrievalPromise=this.receiveConversationMessageOverride();_context133.prev=4;_context133.next=7;return messageRetrievalPromise;case 7:r=_context133.sent;return _context133.abrupt("return",r);case 11:_context133.prev=11;_context133.t0=_context133["catch"](4);this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",Exports_js_2.CancellationReason.Error,Exports_js_2.CancellationErrorCode.RuntimeError,_context133.t0);return _context133.abrupt("return",null);case 15:case"end":return _context133.stop();}},_callee133,this,[[4,11]]);}));function startMessageLoop(){return _startMessageLoop2.apply(this,arguments);}return startMessageLoop;}()// Takes an established websocket connection to the endpoint
},{key:"configConnection",value:function configConnection(){var _this180=this;if(this.isDisposed()){return Promise.resolve(undefined);}if(this.privConnectionConfigPromise!==undefined){return this.privConnectionConfigPromise.then(function(connection){if(connection.state()===Exports_js_1.ConnectionState.Disconnected){_this180.privConnectionId=null;_this180.privConnectionConfigPromise=undefined;return _this180.configConnection();}return _this180.privConnectionConfigPromise;},function(){_this180.privConnectionId=null;_this180.privConnectionConfigPromise=undefined;return _this180.configConnection();});}if(this.terminateMessageLoop){return Promise.resolve(undefined);}this.privConnectionConfigPromise=this.connectImpl().then(function(connection){return connection;});return this.privConnectionConfigPromise;}},{key:"getTranslations",value:function getTranslations(serviceResultTranslations){var translations;if(undefined!==serviceResultTranslations){translations=new Exports_js_2.Translations();var _iterator23=_createForOfIteratorHelper(serviceResultTranslations),_step23;try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var translation=_step23.value;translations.set(translation.lang,translation.translation);}}catch(err){_iterator23.e(err);}finally{_iterator23.f();}}return translations;}}]);return ConversationServiceAdapter;}(Exports_js_3.ServiceRecognizerBase);exports.ConversationServiceAdapter=ConversationServiceAdapter;/***/},/* 251 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationRequestSession=void 0;var Exports_js_1=__webpack_require__(4);/**
 * Placeholder class for the Conversation Request Session. Based off RequestSession.
 * TODO: define what telemetry is required.
 */var ConversationRequestSession=/*#__PURE__*/function(){function ConversationRequestSession(sessionId){_classCallCheck(this,ConversationRequestSession);this.privIsDisposed=false;this.privDetachables=new Array();this.privSessionId=sessionId;this.privRequestId=Exports_js_1.createNoDashGuid();this.privRequestCompletionDeferral=new Exports_js_1.Deferred();}_createClass(ConversationRequestSession,[{key:"sessionId",get:function get(){return this.privSessionId;}},{key:"requestId",get:function get(){return this.privRequestId;}},{key:"completionPromise",get:function get(){return this.privRequestCompletionDeferral.promise;}},{key:"onPreConnectionStart",value:function onPreConnectionStart(authFetchEventId,connectionId){this.privSessionId=connectionId;}},{key:"onAuthCompleted",value:function onAuthCompleted(isError){if(isError){this.onComplete();}}},{key:"onConnectionEstablishCompleted",value:function onConnectionEstablishCompleted(statusCode){if(statusCode===200){return;}else if(statusCode===403){this.onComplete();}}},{key:"onServiceTurnEndResponse",value:function onServiceTurnEndResponse(continuousRecognition){if(!continuousRecognition){this.onComplete();}else{this.privRequestId=Exports_js_1.createNoDashGuid();}}},{key:"dispose",value:function(){var _dispose17=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee134(){var _iterator24,_step24,detachable;return _regeneratorRuntime().wrap(function _callee134$(_context134){while(1)switch(_context134.prev=_context134.next){case 0:if(this.privIsDisposed){_context134.next=19;break;}// we should have completed by now. If we did not its an unknown error.
this.privIsDisposed=true;_iterator24=_createForOfIteratorHelper(this.privDetachables);_context134.prev=3;_iterator24.s();case 5:if((_step24=_iterator24.n()).done){_context134.next=11;break;}detachable=_step24.value;_context134.next=9;return detachable.detach();case 9:_context134.next=5;break;case 11:_context134.next=16;break;case 13:_context134.prev=13;_context134.t0=_context134["catch"](3);_iterator24.e(_context134.t0);case 16:_context134.prev=16;_iterator24.f();return _context134.finish(16);case 19:case"end":return _context134.stop();}},_callee134,this,[[3,13,16,19]]);}));function dispose(){return _dispose17.apply(this,arguments);}return dispose;}()},{key:"onComplete",value:function onComplete(){//
}}]);return ConversationRequestSession;}();exports.ConversationRequestSession=ConversationRequestSession;/***/},/* 252 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationReceivedTranslationEventArgs=exports.ParticipantsListEventArgs=exports.ParticipantAttributeEventArgs=exports.ParticipantEventArgs=exports.LockRoomEventArgs=exports.MuteAllEventArgs=void 0;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
/* eslint-disable max-classes-per-file */var Exports_js_1=__webpack_require__(79);var MuteAllEventArgs=/*#__PURE__*/function(_Exports_js_1$Session7){_inherits(MuteAllEventArgs,_Exports_js_1$Session7);var _super138=_createSuper(MuteAllEventArgs);function MuteAllEventArgs(isMuted,sessionId){var _this181;_classCallCheck(this,MuteAllEventArgs);_this181=_super138.call(this,sessionId);_this181.privIsMuted=isMuted;return _this181;}_createClass(MuteAllEventArgs,[{key:"isMuted",get:function get(){return this.privIsMuted;}}]);return MuteAllEventArgs;}(Exports_js_1.SessionEventArgs);exports.MuteAllEventArgs=MuteAllEventArgs;var LockRoomEventArgs=/*#__PURE__*/function(_Exports_js_1$Session8){_inherits(LockRoomEventArgs,_Exports_js_1$Session8);var _super139=_createSuper(LockRoomEventArgs);function LockRoomEventArgs(isLocked,sessionId){var _this182;_classCallCheck(this,LockRoomEventArgs);_this182=_super139.call(this,sessionId);_this182.privIsLocked=isLocked;return _this182;}_createClass(LockRoomEventArgs,[{key:"isMuted",get:function get(){return this.privIsLocked;}}]);return LockRoomEventArgs;}(Exports_js_1.SessionEventArgs);exports.LockRoomEventArgs=LockRoomEventArgs;var ParticipantEventArgs=/*#__PURE__*/function(_Exports_js_1$Session9){_inherits(ParticipantEventArgs,_Exports_js_1$Session9);var _super140=_createSuper(ParticipantEventArgs);function ParticipantEventArgs(participant,sessionId){var _this183;_classCallCheck(this,ParticipantEventArgs);_this183=_super140.call(this,sessionId);_this183.privParticipant=participant;return _this183;}_createClass(ParticipantEventArgs,[{key:"participant",get:function get(){return this.privParticipant;}}]);return ParticipantEventArgs;}(Exports_js_1.SessionEventArgs);exports.ParticipantEventArgs=ParticipantEventArgs;var ParticipantAttributeEventArgs=/*#__PURE__*/function(_Exports_js_1$Session10){_inherits(ParticipantAttributeEventArgs,_Exports_js_1$Session10);var _super141=_createSuper(ParticipantAttributeEventArgs);function ParticipantAttributeEventArgs(participantId,key,value,sessionId){var _this184;_classCallCheck(this,ParticipantAttributeEventArgs);_this184=_super141.call(this,sessionId);_this184.privKey=key;_this184.privValue=value;_this184.privParticipantId=participantId;return _this184;}_createClass(ParticipantAttributeEventArgs,[{key:"value",get:function get(){return this.privValue;}},{key:"key",get:function get(){return this.privKey;}},{key:"id",get:function get(){return this.privParticipantId;}}]);return ParticipantAttributeEventArgs;}(Exports_js_1.SessionEventArgs);exports.ParticipantAttributeEventArgs=ParticipantAttributeEventArgs;var ParticipantsListEventArgs=/*#__PURE__*/function(_Exports_js_1$Session11){_inherits(ParticipantsListEventArgs,_Exports_js_1$Session11);var _super142=_createSuper(ParticipantsListEventArgs);function ParticipantsListEventArgs(conversationId,token,translateTo,profanityFilter,roomProfanityFilter,isRoomLocked,isMuteAll,participants,sessionId){var _this185;_classCallCheck(this,ParticipantsListEventArgs);_this185=_super142.call(this,sessionId);_this185.privRoomId=conversationId;_this185.privSessionToken=token;_this185.privTranslateTo=translateTo;_this185.privProfanityFilter=profanityFilter;_this185.privRoomProfanityFilter=roomProfanityFilter;_this185.privIsRoomLocked=isRoomLocked;_this185.privIsRoomLocked=isMuteAll;_this185.privParticipants=participants;return _this185;}_createClass(ParticipantsListEventArgs,[{key:"sessionToken",get:function get(){return this.privSessionToken;}},{key:"conversationId",get:function get(){return this.privRoomId;}},{key:"translateTo",get:function get(){return this.privTranslateTo;}},{key:"profanityFilter",get:function get(){return this.privProfanityFilter;}},{key:"roomProfanityFilter",get:function get(){return this.privRoomProfanityFilter;}},{key:"isRoomLocked",get:function get(){return this.privIsRoomLocked;}},{key:"isMuteAll",get:function get(){return this.privIsMuteAll;}},{key:"participants",get:function get(){return this.privParticipants;}}]);return ParticipantsListEventArgs;}(Exports_js_1.SessionEventArgs);exports.ParticipantsListEventArgs=ParticipantsListEventArgs;var ConversationReceivedTranslationEventArgs=/*#__PURE__*/function(){function ConversationReceivedTranslationEventArgs(command,payload,sessionId){_classCallCheck(this,ConversationReceivedTranslationEventArgs);this.privPayload=payload;this.privCommand=command;this.privSessionId=sessionId;}_createClass(ConversationReceivedTranslationEventArgs,[{key:"payload",get:function get(){return this.privPayload;}},{key:"command",get:function get(){return this.privCommand;}},{key:"sessionId",get:function get(){return this.privSessionId;}}]);return ConversationReceivedTranslationEventArgs;}();exports.ConversationReceivedTranslationEventArgs=ConversationReceivedTranslationEventArgs;/***/},/* 253 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ConversationTranslatorCommandTypes=exports.ConversationTranslatorMessageTypes=exports.InternalParticipants=void 0;/** Users participating in the conversation */var InternalParticipants=/*#__PURE__*/function(){function InternalParticipants(){var participants=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var meId=arguments.length>1?arguments[1]:undefined;_classCallCheck(this,InternalParticipants);this.participants=participants;this.meId=meId;}/**
     * Add or update a participant
     * @param value
     */_createClass(InternalParticipants,[{key:"addOrUpdateParticipant",value:function addOrUpdateParticipant(value){if(value===undefined){return;}var exists=this.getParticipantIndex(value.id);if(exists>-1){this.participants.splice(exists,1,value);}else{this.participants.push(value);}// ensure it was added ok
return this.getParticipant(value.id);}/**
     * Find the participant's position in the participants list.
     * @param id
     */},{key:"getParticipantIndex",value:function getParticipantIndex(id){return this.participants.findIndex(function(p){return p.id===id;});}/**
     * Find the participant by id.
     * @param id
     */},{key:"getParticipant",value:function getParticipant(id){return this.participants.find(function(p){return p.id===id;});}/**
     * Remove a participant from the participants list.
     */},{key:"deleteParticipant",value:function deleteParticipant(id){this.participants=this.participants.filter(function(p){return p.id!==id;});}/**
     * Helper to return the conversation host.
     */},{key:"host",get:function get(){return this.participants.find(function(p){return p.isHost===true;});}/**
     * Helper to return the current user.
     */},{key:"me",get:function get(){return this.getParticipant(this.meId);}}]);return InternalParticipants;}();exports.InternalParticipants=InternalParticipants;/**
 * List of command message types
 */exports.ConversationTranslatorMessageTypes={command:"command","final":"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"};/**
 * List of command types
 */exports.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"};/***/},/* 254 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var CommandResponsePayload_js_1=__webpack_require__(255);Object.defineProperty(exports,"CommandResponsePayload",{enumerable:true,get:function get(){return CommandResponsePayload_js_1.CommandResponsePayload;}});var ParticipantResponsePayload_js_1=__webpack_require__(256);Object.defineProperty(exports,"ParticipantsListPayloadResponse",{enumerable:true,get:function get(){return ParticipantResponsePayload_js_1.ParticipantsListPayloadResponse;}});Object.defineProperty(exports,"ParticipantPayloadResponse",{enumerable:true,get:function get(){return ParticipantResponsePayload_js_1.ParticipantPayloadResponse;}});var TranslationResponsePayload_js_1=__webpack_require__(257);Object.defineProperty(exports,"SpeechResponsePayload",{enumerable:true,get:function get(){return TranslationResponsePayload_js_1.SpeechResponsePayload;}});Object.defineProperty(exports,"TextResponsePayload",{enumerable:true,get:function get(){return TranslationResponsePayload_js_1.TextResponsePayload;}});/***/},/* 255 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.CommandResponsePayload=void 0;var parseCommandResponse=function parseCommandResponse(json){return JSON.parse(json);};var CommandResponsePayload=/*#__PURE__*/function(){function CommandResponsePayload(json){_classCallCheck(this,CommandResponsePayload);this.privCommandResponse=parseCommandResponse(json);}_createClass(CommandResponsePayload,[{key:"type",get:function get(){return this.privCommandResponse.type;}},{key:"command",get:function get(){return this.privCommandResponse.command;}},{key:"id",get:function get(){return this.privCommandResponse.id;}},{key:"nickname",get:function get(){return this.privCommandResponse.nickname;}},{key:"participantId",get:function get(){return this.privCommandResponse.participantId;}},{key:"roomid",get:function get(){return this.privCommandResponse.roomid;}},{key:"value",get:function get(){return this.privCommandResponse.value;}},{key:"token",get:function get(){return this.privCommandResponse.token;}}],[{key:"fromJSON",value:function fromJSON(json){return new CommandResponsePayload(json);}}]);return CommandResponsePayload;}();exports.CommandResponsePayload=CommandResponsePayload;/***/},/* 256 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.ParticipantPayloadResponse=exports.ParticipantsListPayloadResponse=void 0;var parseListResponse=function parseListResponse(json){return JSON.parse(json);};var parseParticipantResponse=function parseParticipantResponse(json){return JSON.parse(json);};var ParticipantsListPayloadResponse=/*#__PURE__*/function(){function ParticipantsListPayloadResponse(json){_classCallCheck(this,ParticipantsListPayloadResponse);this.privParticipantsPayloadResponse=parseListResponse(json);}_createClass(ParticipantsListPayloadResponse,[{key:"roomid",get:function get(){return this.privParticipantsPayloadResponse.roomid;}},{key:"id",get:function get(){return this.privParticipantsPayloadResponse.id;}},{key:"command",get:function get(){return this.privParticipantsPayloadResponse.command;}},{key:"participants",get:function get(){return this.privParticipantsPayloadResponse.participants;}},{key:"token",get:function get(){return this.privParticipantsPayloadResponse.token;}},{key:"translateTo",get:function get(){return this.privParticipantsPayloadResponse.translateTo;}},{key:"profanityFilter",get:function get(){return this.privParticipantsPayloadResponse.profanityFilter;}},{key:"roomProfanityFilter",get:function get(){return this.privParticipantsPayloadResponse.roomProfanityFilter;}},{key:"roomLocked",get:function get(){return this.privParticipantsPayloadResponse.roomLocked;}},{key:"muteAll",get:function get(){return this.privParticipantsPayloadResponse.muteAll;}},{key:"type",get:function get(){return this.privParticipantsPayloadResponse.type;}}],[{key:"fromJSON",value:function fromJSON(json){return new ParticipantsListPayloadResponse(json);}}]);return ParticipantsListPayloadResponse;}();exports.ParticipantsListPayloadResponse=ParticipantsListPayloadResponse;var ParticipantPayloadResponse=/*#__PURE__*/function(){function ParticipantPayloadResponse(json){_classCallCheck(this,ParticipantPayloadResponse);this.privParticipantPayloadResponse=parseParticipantResponse(json);}_createClass(ParticipantPayloadResponse,[{key:"nickname",get:function get(){return this.privParticipantPayloadResponse.nickname;}},{key:"locale",get:function get(){return this.privParticipantPayloadResponse.locale;}},{key:"usetts",get:function get(){return this.privParticipantPayloadResponse.usetts;}},{key:"ismuted",get:function get(){return this.privParticipantPayloadResponse.ismuted;}},{key:"ishost",get:function get(){return this.privParticipantPayloadResponse.ishost;}},{key:"participantId",get:function get(){return this.privParticipantPayloadResponse.participantId;}},{key:"avatar",get:function get(){return this.privParticipantPayloadResponse.avatar;}}],[{key:"fromJSON",value:function fromJSON(json){return new ParticipantPayloadResponse(json);}}]);return ParticipantPayloadResponse;}();exports.ParticipantPayloadResponse=ParticipantPayloadResponse;/***/},/* 257 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.TextResponsePayload=exports.SpeechResponsePayload=void 0;var parseSpeechResponse=function parseSpeechResponse(json){return JSON.parse(json);};var parseTextResponse=function parseTextResponse(json){return JSON.parse(json);};var SpeechResponsePayload=/*#__PURE__*/function(){function SpeechResponsePayload(json){_classCallCheck(this,SpeechResponsePayload);this.privSpeechResponse=parseSpeechResponse(json);}_createClass(SpeechResponsePayload,[{key:"recognition",get:function get(){return this.privSpeechResponse.recognition;}},{key:"translations",get:function get(){return this.privSpeechResponse.translations;}},{key:"id",get:function get(){return this.privSpeechResponse.id;}},{key:"language",get:function get(){return this.privSpeechResponse.language;}},{key:"nickname",get:function get(){return this.privSpeechResponse.nickname;}},{key:"participantId",get:function get(){return this.privSpeechResponse.participantId;}},{key:"roomid",get:function get(){return this.privSpeechResponse.roomid;}},{key:"timestamp",get:function get(){return this.privSpeechResponse.timestamp;}},{key:"type",get:function get(){return this.privSpeechResponse.type;}},{key:"isFinal",get:function get(){return this.privSpeechResponse.type==="final";}}],[{key:"fromJSON",value:function fromJSON(json){return new SpeechResponsePayload(json);}}]);return SpeechResponsePayload;}();exports.SpeechResponsePayload=SpeechResponsePayload;var TextResponsePayload=/*#__PURE__*/function(){function TextResponsePayload(json){_classCallCheck(this,TextResponsePayload);this.privTextResponse=parseTextResponse(json);}_createClass(TextResponsePayload,[{key:"originalText",get:function get(){return this.privTextResponse.originalText;}},{key:"translations",get:function get(){return this.privTextResponse.translations;}},{key:"id",get:function get(){return this.privTextResponse.id;}},{key:"language",get:function get(){return this.privTextResponse.language;}},{key:"nickname",get:function get(){return this.privTextResponse.nickname;}},{key:"participantId",get:function get(){return this.privTextResponse.participantId;}},{key:"roomid",get:function get(){return this.privTextResponse.roomid;}},{key:"timestamp",get:function get(){return this.privTextResponse.timestamp;}},{key:"type",get:function get(){return this.privTextResponse.type;}}],[{key:"fromJSON",value:function fromJSON(json){return new TextResponsePayload(json);}}]);return TextResponsePayload;}();exports.TextResponsePayload=TextResponsePayload;/***/},/* 258 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TranscriberRecognizer=void 0;// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
var Exports_js_1=__webpack_require__(4);var Contracts_js_1=__webpack_require__(64);var Exports_js_2=__webpack_require__(79);var Exports_js_3=__webpack_require__(2);var TranscriberRecognizer=/*#__PURE__*/function(_Exports_js_2$Recogni3){_inherits(TranscriberRecognizer,_Exports_js_2$Recogni3);var _super143=_createSuper(TranscriberRecognizer);/**
     * TranscriberRecognizer constructor.
     * @constructor
     * @param {SpeechTranslationConfig} speechTranslationConfig - Non-audio configuration associated with the recognizer
     * @param {AudioConfig} audioConfig - An audio configuration associated with the recognizer
     */function TranscriberRecognizer(speechTranslationConfig,audioConfig){var _this186;_classCallCheck(this,TranscriberRecognizer);var speechTranslationConfigImpl=speechTranslationConfig;Contracts_js_1.Contracts.throwIfNull(speechTranslationConfigImpl,"speechTranslationConfig");var audioConfigImpl=audioConfig;Contracts_js_1.Contracts.throwIfNull(audioConfigImpl,"audioConfigImpl");Contracts_js_1.Contracts.throwIfNullOrWhitespace(speechTranslationConfigImpl.speechRecognitionLanguage,Exports_js_2.PropertyId[Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage]);_this186=_super143.call(this,audioConfig,speechTranslationConfigImpl.properties,new Exports_js_3.TranscriberConnectionFactory());_this186.privDisposedRecognizer=false;_this186.isMeetingRecognizer=false;return _this186;}_createClass(TranscriberRecognizer,[{key:"speechRecognitionLanguage",get:function get(){Contracts_js_1.Contracts.throwIfDisposed(this.privDisposedRecognizer);return this.properties.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_RecoLanguage);}},{key:"properties",get:function get(){return this.privProperties;}},{key:"authorizationToken",get:function get(){return this.properties.getProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token);},set:function set(token){Contracts_js_1.Contracts.throwIfNullOrWhitespace(token,"token");this.properties.setProperty(Exports_js_2.PropertyId.SpeechServiceAuthorization_Token,token);}},{key:"conversation",set:function set(c){Contracts_js_1.Contracts.throwIfNullOrUndefined(c,"Conversation");this.isMeetingRecognizer=false;this.privConversation=c;}},{key:"getConversationInfo",value:function getConversationInfo(){Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation");return this.privConversation.conversationInfo;}},{key:"meeting",set:function set(m){Contracts_js_1.Contracts.throwIfNullOrUndefined(m,"Meeting");this.isMeetingRecognizer=true;this.privMeeting=m;}},{key:"getMeetingInfo",value:function getMeetingInfo(){Contracts_js_1.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting");return this.privMeeting.meetingInfo;}},{key:"IsMeetingRecognizer",value:function IsMeetingRecognizer(){return this.isMeetingRecognizer;}},{key:"startContinuousRecognitionAsync",value:function startContinuousRecognitionAsync(cb,err){Exports_js_1.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(Exports_js_3.RecognitionMode.Conversation),cb,err);}},{key:"stopContinuousRecognitionAsync",value:function stopContinuousRecognitionAsync(cb,err){Exports_js_1.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),cb,err);}},{key:"close",value:function(){var _close7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee135(){return _regeneratorRuntime().wrap(function _callee135$(_context135){while(1)switch(_context135.prev=_context135.next){case 0:if(this.privDisposedRecognizer){_context135.next=3;break;}_context135.next=3;return this.dispose(true);case 3:case"end":return _context135.stop();}},_callee135,this);}));function close(){return _close7.apply(this,arguments);}return close;}()// Push async join/leave conversation message via serviceRecognizer
},{key:"pushConversationEvent",value:function(){var _pushConversationEvent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee136(conversationInfo,command){var reco;return _regeneratorRuntime().wrap(function _callee136$(_context136){while(1)switch(_context136.prev=_context136.next){case 0:reco=this.privReco;Contracts_js_1.Contracts.throwIfNullOrUndefined(reco,"serviceRecognizer");_context136.next=4;return reco.sendSpeechEventAsync(conversationInfo,command);case 4:case"end":return _context136.stop();}},_callee136,this);}));function pushConversationEvent(_x100,_x101){return _pushConversationEvent.apply(this,arguments);}return pushConversationEvent;}()// Push async join/leave meeting message via serviceRecognizer
},{key:"pushMeetingEvent",value:function(){var _pushMeetingEvent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee137(meetingInfo,command){var reco;return _regeneratorRuntime().wrap(function _callee137$(_context137){while(1)switch(_context137.prev=_context137.next){case 0:reco=this.privReco;Contracts_js_1.Contracts.throwIfNullOrUndefined(reco,"serviceRecognizer");_context137.next=4;return reco.sendMeetingSpeechEventAsync(meetingInfo,command);case 4:case"end":return _context137.stop();}},_callee137,this);}));function pushMeetingEvent(_x102,_x103){return _pushMeetingEvent.apply(this,arguments);}return pushMeetingEvent;}()},{key:"enforceAudioGating",value:function(){var _enforceAudioGating=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee138(){var audioConfigImpl,format,channels;return _regeneratorRuntime().wrap(function _callee138$(_context138){while(1)switch(_context138.prev=_context138.next){case 0:audioConfigImpl=this.audioConfig;_context138.next=3;return audioConfigImpl.format;case 3:format=_context138.sent;channels=format.channels;if(!(channels===1)){_context138.next=10;break;}if(!(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")){_context138.next=8;break;}throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details");case 8:_context138.next=12;break;case 10:if(!(channels!==8)){_context138.next=12;break;}throw new Error("Unsupported audio configuration: Detected ".concat(channels,"-channel audio"));case 12:return _context138.abrupt("return");case 13:case"end":return _context138.stop();}},_callee138,this);}));function enforceAudioGating(){return _enforceAudioGating.apply(this,arguments);}return enforceAudioGating;}()},{key:"connectMeetingCallbacks",value:function connectMeetingCallbacks(transcriber){this.isMeetingRecognizer=true;this.canceled=function(s,e){if(!!transcriber.canceled){transcriber.canceled(transcriber,e);}};this.recognizing=function(s,e){if(!!transcriber.transcribing){transcriber.transcribing(transcriber,e);}};this.recognized=function(s,e){if(!!transcriber.transcribed){transcriber.transcribed(transcriber,e);}};this.sessionStarted=function(s,e){if(!!transcriber.sessionStarted){transcriber.sessionStarted(transcriber,e);}};this.sessionStopped=function(s,e){if(!!transcriber.sessionStopped){transcriber.sessionStopped(transcriber,e);}};}},{key:"disconnectCallbacks",value:function disconnectCallbacks(){this.canceled=undefined;this.recognizing=undefined;this.recognized=undefined;this.sessionStarted=undefined;this.sessionStopped=undefined;}/**
     * Disposes any resources held by the object.
     * @member ConversationTranscriber.prototype.dispose
     * @function
     * @public
     * @param {boolean} disposing - true if disposing the object.
     */},{key:"dispose",value:function(){var _dispose18=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee139(disposing){return _regeneratorRuntime().wrap(function _callee139$(_context139){while(1)switch(_context139.prev=_context139.next){case 0:if(!this.privDisposedRecognizer){_context139.next=2;break;}return _context139.abrupt("return");case 2:if(!disposing){_context139.next=6;break;}this.privDisposedRecognizer=true;_context139.next=6;return this.implRecognizerStop();case 6:_context139.next=8;return _get(_getPrototypeOf(TranscriberRecognizer.prototype),"dispose",this).call(this,disposing);case 8:case"end":return _context139.stop();}},_callee139,this);}));function dispose(_x104){return _dispose18.apply(this,arguments);}return dispose;}()},{key:"createRecognizerConfig",value:function createRecognizerConfig(speechConfig){return new Exports_js_3.RecognizerConfig(speechConfig,this.properties);}},{key:"createServiceRecognizer",value:function createServiceRecognizer(authentication,connectionFactory,audioConfig,recognizerConfig){var configImpl=audioConfig;return new Exports_js_3.TranscriptionServiceRecognizer(authentication,connectionFactory,configImpl,recognizerConfig,this);}}]);return TranscriberRecognizer;}(Exports_js_2.Recognizer);exports.TranscriberRecognizer=TranscriberRecognizer;/***/},/* 259 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SynthesisAudioMetadata=exports.MetadataType=void 0;var MetadataType;(function(MetadataType){MetadataType["WordBoundary"]="WordBoundary";MetadataType["Bookmark"]="Bookmark";MetadataType["Viseme"]="Viseme";MetadataType["SentenceBoundary"]="SentenceBoundary";MetadataType["SessionEnd"]="SessionEnd";MetadataType["AvatarSignal"]="TalkingAvatarSignal";})(MetadataType=exports.MetadataType||(exports.MetadataType={}));var SynthesisAudioMetadata=/*#__PURE__*/function(){function SynthesisAudioMetadata(json){_classCallCheck(this,SynthesisAudioMetadata);this.privSynthesisAudioMetadata=JSON.parse(json);}_createClass(SynthesisAudioMetadata,[{key:"Metadata",get:function get(){return this.privSynthesisAudioMetadata.Metadata;}}],[{key:"fromJSON",value:function fromJSON(json){return new SynthesisAudioMetadata(json);}}]);return SynthesisAudioMetadata;}();exports.SynthesisAudioMetadata=SynthesisAudioMetadata;/***/},/* 260 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SynthesisTurn=void 0;var Exports_js_1=__webpack_require__(4);var AudioOutputStream_js_1=__webpack_require__(84);var Exports_js_2=__webpack_require__(79);var SynthesisAudioMetadata_js_1=__webpack_require__(259);var SynthesisEvents_js_1=__webpack_require__(261);var SynthesisTurn=/*#__PURE__*/function(){function SynthesisTurn(){_classCallCheck(this,SynthesisTurn);this.privIsDisposed=false;this.privIsSynthesizing=false;this.privIsSynthesisEnded=false;this.privBytesReceived=0;this.privInTurn=false;this.privTextOffset=0;this.privNextSearchTextIndex=0;this.privSentenceOffset=0;this.privNextSearchSentenceIndex=0;this.privRequestId=Exports_js_1.createNoDashGuid();this.privTurnDeferral=new Exports_js_1.Deferred();// We're not in a turn, so resolve.
this.privTurnDeferral.resolve();}_createClass(SynthesisTurn,[{key:"requestId",get:function get(){return this.privRequestId;}},{key:"streamId",get:function get(){return this.privStreamId;},set:function set(value){this.privStreamId=value;}},{key:"audioOutputFormat",get:function get(){return this.privAudioOutputFormat;},set:function set(format){this.privAudioOutputFormat=format;}},{key:"turnCompletionPromise",get:function get(){return this.privTurnDeferral.promise;}},{key:"isSynthesisEnded",get:function get(){return this.privIsSynthesisEnded;}},{key:"isSynthesizing",get:function get(){return this.privIsSynthesizing;}},{key:"currentTextOffset",get:function get(){return this.privTextOffset;}},{key:"currentSentenceOffset",get:function get(){return this.privSentenceOffset;}// The number of bytes received for current turn
},{key:"bytesReceived",get:function get(){return this.privBytesReceived;}},{key:"audioDuration",get:function get(){return this.privAudioDuration;}},{key:"extraProperties",get:function get(){if(!!this.privWebRTCSDP){var properties=new Exports_js_2.PropertyCollection();properties.setProperty(Exports_js_2.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP);return properties;}return undefined;}},{key:"getAllReceivedAudio",value:function(){var _getAllReceivedAudio=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee140(){return _regeneratorRuntime().wrap(function _callee140$(_context140){while(1)switch(_context140.prev=_context140.next){case 0:if(!this.privReceivedAudio){_context140.next=2;break;}return _context140.abrupt("return",Promise.resolve(this.privReceivedAudio));case 2:if(this.privIsSynthesisEnded){_context140.next=4;break;}return _context140.abrupt("return",null);case 4:_context140.next=6;return this.readAllAudioFromStream();case 6:return _context140.abrupt("return",Promise.resolve(this.privReceivedAudio));case 7:case"end":return _context140.stop();}},_callee140,this);}));function getAllReceivedAudio(){return _getAllReceivedAudio.apply(this,arguments);}return getAllReceivedAudio;}()},{key:"getAllReceivedAudioWithHeader",value:function(){var _getAllReceivedAudioWithHeader=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee141(){var audio;return _regeneratorRuntime().wrap(function _callee141$(_context141){while(1)switch(_context141.prev=_context141.next){case 0:if(!this.privReceivedAudioWithHeader){_context141.next=2;break;}return _context141.abrupt("return",this.privReceivedAudioWithHeader);case 2:if(this.privIsSynthesisEnded){_context141.next=4;break;}return _context141.abrupt("return",null);case 4:if(!this.audioOutputFormat.hasHeader){_context141.next=12;break;}_context141.next=7;return this.getAllReceivedAudio();case 7:audio=_context141.sent;this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(audio);return _context141.abrupt("return",this.privReceivedAudioWithHeader);case 12:return _context141.abrupt("return",this.getAllReceivedAudio());case 13:case"end":return _context141.stop();}},_callee141,this);}));function getAllReceivedAudioWithHeader(){return _getAllReceivedAudioWithHeader.apply(this,arguments);}return getAllReceivedAudioWithHeader;}()},{key:"startNewSynthesis",value:function startNewSynthesis(requestId,rawText,isSSML,audioDestination){this.privIsSynthesisEnded=false;this.privIsSynthesizing=true;this.privRequestId=requestId;this.privRawText=rawText;this.privIsSSML=isSSML;this.privAudioOutputStream=new AudioOutputStream_js_1.PullAudioOutputStreamImpl();this.privAudioOutputStream.format=this.privAudioOutputFormat;this.privReceivedAudio=null;this.privReceivedAudioWithHeader=null;this.privBytesReceived=0;this.privTextOffset=0;this.privNextSearchTextIndex=0;this.privSentenceOffset=0;this.privNextSearchSentenceIndex=0;this.privPartialVisemeAnimation="";this.privWebRTCSDP="";if(audioDestination!==undefined){this.privTurnAudioDestination=audioDestination;this.privTurnAudioDestination.format=this.privAudioOutputFormat;}this.onEvent(new SynthesisEvents_js_1.SynthesisTriggeredEvent(this.requestId,undefined,audioDestination===undefined?undefined:audioDestination.id()));}},{key:"onPreConnectionStart",value:function onPreConnectionStart(authFetchEventId){this.privAuthFetchEventId=authFetchEventId;this.onEvent(new SynthesisEvents_js_1.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId));}},{key:"onAuthCompleted",value:function onAuthCompleted(isError){if(isError){this.onComplete();}}},{key:"onConnectionEstablishCompleted",value:function onConnectionEstablishCompleted(statusCode){if(statusCode===200){this.onEvent(new SynthesisEvents_js_1.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId));this.privBytesReceived=0;return;}else if(statusCode===403){this.onComplete();}}},{key:"onServiceResponseMessage",value:function onServiceResponseMessage(responseJson){var response=JSON.parse(responseJson);this.streamId=response.audio.streamId;}},{key:"onServiceTurnEndResponse",value:function onServiceTurnEndResponse(){this.privInTurn=false;this.privTurnDeferral.resolve();this.onComplete();}},{key:"onServiceTurnStartResponse",value:function onServiceTurnStartResponse(responseJson){if(!!this.privTurnDeferral&&!!this.privInTurn){// What? How are we starting a turn with another not done?
this.privTurnDeferral.reject("Another turn started before current completed.");// Avoid UnhandledPromiseRejection if privTurnDeferral is not being awaited
// eslint-disable-next-line @typescript-eslint/no-empty-function
this.privTurnDeferral.promise.then()["catch"](function(){});}this.privInTurn=true;this.privTurnDeferral=new Exports_js_1.Deferred();var response=JSON.parse(responseJson);if(!!response.webrtc){this.privWebRTCSDP=response.webrtc.connectionString;}}},{key:"onAudioChunkReceived",value:function onAudioChunkReceived(data){if(this.isSynthesizing){this.privAudioOutputStream.write(data);this.privBytesReceived+=data.byteLength;if(this.privTurnAudioDestination!==undefined){this.privTurnAudioDestination.write(data);}}}},{key:"onTextBoundaryEvent",value:function onTextBoundaryEvent(metadata){this.updateTextOffset(metadata.Data.text.Text,metadata.Type);}},{key:"onVisemeMetadataReceived",value:function onVisemeMetadataReceived(metadata){if(metadata.Data.AnimationChunk!==undefined){this.privPartialVisemeAnimation+=metadata.Data.AnimationChunk;}}},{key:"onSessionEnd",value:function onSessionEnd(metadata){this.privAudioDuration=metadata.Data.Offset;}},{key:"constructSynthesisResult",value:function(){var _constructSynthesisResult=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee142(){var audioBuffer;return _regeneratorRuntime().wrap(function _callee142$(_context142){while(1)switch(_context142.prev=_context142.next){case 0:_context142.next=2;return this.getAllReceivedAudioWithHeader();case 2:audioBuffer=_context142.sent;return _context142.abrupt("return",new Exports_js_2.SpeechSynthesisResult(this.requestId,Exports_js_2.ResultReason.SynthesizingAudioCompleted,audioBuffer,undefined,this.extraProperties,this.audioDuration));case 4:case"end":return _context142.stop();}},_callee142,this);}));function constructSynthesisResult(){return _constructSynthesisResult.apply(this,arguments);}return constructSynthesisResult;}()},{key:"dispose",value:function dispose(){if(!this.privIsDisposed){// we should have completed by now. If we did not its an unknown error.
this.privIsDisposed=true;}}},{key:"onStopSynthesizing",value:function onStopSynthesizing(){this.onComplete();}/**
     * Gets the viseme animation string (merged from animation chunk), and clears the internal
     * partial animation.
     */},{key:"getAndClearVisemeAnimation",value:function getAndClearVisemeAnimation(){var animation=this.privPartialVisemeAnimation;this.privPartialVisemeAnimation="";return animation;}},{key:"onEvent",value:function onEvent(event){Exports_js_1.Events.instance.onEvent(event);}/**
     * Check if the text is an XML(SSML) tag
     * @param text
     * @private
     */},{key:"updateTextOffset",value:function updateTextOffset(text,type){if(type===SynthesisAudioMetadata_js_1.MetadataType.WordBoundary){this.privTextOffset=this.privRawText.indexOf(text,this.privNextSearchTextIndex);if(this.privTextOffset>=0){this.privNextSearchTextIndex=this.privTextOffset+text.length;if(this.privIsSSML){if(this.withinXmlTag(this.privTextOffset)&&!SynthesisTurn.isXmlTag(text)){this.updateTextOffset(text,type);}}}}else{this.privSentenceOffset=this.privRawText.indexOf(text,this.privNextSearchSentenceIndex);if(this.privSentenceOffset>=0){this.privNextSearchSentenceIndex=this.privSentenceOffset+text.length;if(this.privIsSSML){if(this.withinXmlTag(this.privSentenceOffset)&&!SynthesisTurn.isXmlTag(text)){this.updateTextOffset(text,type);}}}}}},{key:"onComplete",value:function onComplete(){if(this.privIsSynthesizing){this.privIsSynthesizing=false;this.privIsSynthesisEnded=true;this.privAudioOutputStream.close();this.privInTurn=false;if(this.privTurnAudioDestination!==undefined){this.privTurnAudioDestination.close();this.privTurnAudioDestination=undefined;}}}},{key:"readAllAudioFromStream",value:function(){var _readAllAudioFromStream=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee143(){return _regeneratorRuntime().wrap(function _callee143$(_context143){while(1)switch(_context143.prev=_context143.next){case 0:if(!this.privIsSynthesisEnded){_context143.next=10;break;}this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);_context143.prev=2;_context143.next=5;return this.privAudioOutputStream.read(this.privReceivedAudio);case 5:_context143.next=10;break;case 7:_context143.prev=7;_context143.t0=_context143["catch"](2);this.privReceivedAudio=new ArrayBuffer(0);case 10:case"end":return _context143.stop();}},_callee143,this,[[2,7]]);}));function readAllAudioFromStream(){return _readAllAudioFromStream.apply(this,arguments);}return readAllAudioFromStream;}()/**
     * Check if current idx is in XML(SSML) tag
     * @param idx
     * @private
     */},{key:"withinXmlTag",value:function withinXmlTag(idx){return this.privRawText.indexOf("<",idx+1)>this.privRawText.indexOf(">",idx+1);}}],[{key:"isXmlTag",value:function isXmlTag(text){return text.length>=2&&text[0]==="<"&&text[text.length-1]===">";}}]);return SynthesisTurn;}();exports.SynthesisTurn=SynthesisTurn;/***/},/* 261 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SynthesisStartedEvent=exports.ConnectingToSynthesisServiceEvent=exports.SynthesisTriggeredEvent=exports.SpeechSynthesisEvent=void 0;/* eslint-disable max-classes-per-file */var Exports_js_1=__webpack_require__(4);var SpeechSynthesisEvent=/*#__PURE__*/function(_Exports_js_1$Platfor3){_inherits(SpeechSynthesisEvent,_Exports_js_1$Platfor3);var _super144=_createSuper(SpeechSynthesisEvent);function SpeechSynthesisEvent(eventName,requestId){var _this187;var eventType=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Exports_js_1.EventType.Info;_classCallCheck(this,SpeechSynthesisEvent);_this187=_super144.call(this,eventName,eventType);_this187.privRequestId=requestId;return _this187;}_createClass(SpeechSynthesisEvent,[{key:"requestId",get:function get(){return this.privRequestId;}}]);return SpeechSynthesisEvent;}(Exports_js_1.PlatformEvent);exports.SpeechSynthesisEvent=SpeechSynthesisEvent;var SynthesisTriggeredEvent=/*#__PURE__*/function(_SpeechSynthesisEvent){_inherits(SynthesisTriggeredEvent,_SpeechSynthesisEvent);var _super145=_createSuper(SynthesisTriggeredEvent);function SynthesisTriggeredEvent(requestId,sessionAudioDestinationId,turnAudioDestinationId){var _this188;_classCallCheck(this,SynthesisTriggeredEvent);_this188=_super145.call(this,"SynthesisTriggeredEvent",requestId);_this188.privSessionAudioDestinationId=sessionAudioDestinationId;_this188.privTurnAudioDestinationId=turnAudioDestinationId;return _this188;}_createClass(SynthesisTriggeredEvent,[{key:"audioSessionDestinationId",get:function get(){return this.privSessionAudioDestinationId;}},{key:"audioTurnDestinationId",get:function get(){return this.privTurnAudioDestinationId;}}]);return SynthesisTriggeredEvent;}(SpeechSynthesisEvent);exports.SynthesisTriggeredEvent=SynthesisTriggeredEvent;var ConnectingToSynthesisServiceEvent=/*#__PURE__*/function(_SpeechSynthesisEvent2){_inherits(ConnectingToSynthesisServiceEvent,_SpeechSynthesisEvent2);var _super146=_createSuper(ConnectingToSynthesisServiceEvent);function ConnectingToSynthesisServiceEvent(requestId,authFetchEventId){var _this189;_classCallCheck(this,ConnectingToSynthesisServiceEvent);_this189=_super146.call(this,"ConnectingToSynthesisServiceEvent",requestId);_this189.privAuthFetchEventId=authFetchEventId;return _this189;}_createClass(ConnectingToSynthesisServiceEvent,[{key:"authFetchEventId",get:function get(){return this.privAuthFetchEventId;}}]);return ConnectingToSynthesisServiceEvent;}(SpeechSynthesisEvent);exports.ConnectingToSynthesisServiceEvent=ConnectingToSynthesisServiceEvent;var SynthesisStartedEvent=/*#__PURE__*/function(_SpeechSynthesisEvent3){_inherits(SynthesisStartedEvent,_SpeechSynthesisEvent3);var _super147=_createSuper(SynthesisStartedEvent);function SynthesisStartedEvent(requestId,authFetchEventId){var _this190;_classCallCheck(this,SynthesisStartedEvent);_this190=_super147.call(this,"SynthesisStartedEvent",requestId);_this190.privAuthFetchEventId=authFetchEventId;return _this190;}_createClass(SynthesisStartedEvent,[{key:"authFetchEventId",get:function get(){return this.privAuthFetchEventId;}}]);return SynthesisStartedEvent;}(SpeechSynthesisEvent);exports.SynthesisStartedEvent=SynthesisStartedEvent;/***/},/* 262 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SynthesisAdapterBase=void 0;var Exports_js_1=__webpack_require__(4);var Exports_js_2=__webpack_require__(79);var Exports_js_3=__webpack_require__(2);var SpeechConnectionMessage_Internal_js_1=__webpack_require__(206);var SynthesisAdapterBase=/*#__PURE__*/function(){function SynthesisAdapterBase(authentication,connectionFactory,synthesizerConfig,audioDestination){var _this191=this;_classCallCheck(this,SynthesisAdapterBase);this.speakOverride=undefined;this.receiveMessageOverride=undefined;this.connectImplOverride=undefined;this.configConnectionOverride=undefined;// A promise for a configured connection.
// Do not consume directly, call fetchConnection instead.
this.privConnectionConfigurationPromise=undefined;if(!authentication){throw new Exports_js_1.ArgumentNullError("authentication");}if(!connectionFactory){throw new Exports_js_1.ArgumentNullError("connectionFactory");}if(!synthesizerConfig){throw new Exports_js_1.ArgumentNullError("synthesizerConfig");}this.privAuthentication=authentication;this.privConnectionFactory=connectionFactory;this.privSynthesizerConfig=synthesizerConfig;this.privIsDisposed=false;this.privSessionAudioDestination=audioDestination;this.privSynthesisTurn=new Exports_js_3.SynthesisTurn();this.privConnectionEvents=new Exports_js_1.EventSource();this.privServiceEvents=new Exports_js_1.EventSource();this.privSynthesisContext=new Exports_js_3.SynthesisContext();this.privAgentConfig=new Exports_js_3.AgentConfig();this.connectionEvents.attach(function(connectionEvent){if(connectionEvent.name==="ConnectionClosedEvent"){var connectionClosedEvent=connectionEvent;if(connectionClosedEvent.statusCode!==1000){_this191.cancelSynthesisLocal(Exports_js_2.CancellationReason.Error,connectionClosedEvent.statusCode===1007?Exports_js_2.CancellationErrorCode.BadRequestParameters:Exports_js_2.CancellationErrorCode.ConnectionFailure,"".concat(connectionClosedEvent.reason," websocket error code: ").concat(connectionClosedEvent.statusCode));}}});}_createClass(SynthesisAdapterBase,[{key:"synthesisContext",get:function get(){return this.privSynthesisContext;}},{key:"agentConfig",get:function get(){return this.privAgentConfig;}},{key:"connectionEvents",get:function get(){return this.privConnectionEvents;}},{key:"serviceEvents",get:function get(){return this.privServiceEvents;}},{key:"activityTemplate",get:function get(){return this.privActivityTemplate;},set:function set(messagePayload){this.privActivityTemplate=messagePayload;}},{key:"audioOutputFormat",set:function set(format){this.privAudioOutputFormat=format;this.privSynthesisTurn.audioOutputFormat=format;if(this.privSessionAudioDestination!==undefined){this.privSessionAudioDestination.format=format;}if(this.synthesisContext!==undefined){this.synthesisContext.audioOutputFormat=format;}}},{key:"isDisposed",value:function isDisposed(){return this.privIsDisposed;}},{key:"dispose",value:function(){var _dispose19=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee144(reason){var connection;return _regeneratorRuntime().wrap(function _callee144$(_context144){while(1)switch(_context144.prev=_context144.next){case 0:this.privIsDisposed=true;if(this.privSessionAudioDestination!==undefined){this.privSessionAudioDestination.close();}if(!(this.privConnectionConfigurationPromise!==undefined)){_context144.next=8;break;}_context144.next=5;return this.privConnectionConfigurationPromise;case 5:connection=_context144.sent;_context144.next=8;return connection.dispose(reason);case 8:case"end":return _context144.stop();}},_callee144,this);}));function dispose(_x105){return _dispose19.apply(this,arguments);}return dispose;}()},{key:"connect",value:function(){var _connect2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee145(){return _regeneratorRuntime().wrap(function _callee145$(_context145){while(1)switch(_context145.prev=_context145.next){case 0:_context145.next=2;return this.connectImpl();case 2:case"end":return _context145.stop();}},_callee145,this);}));function connect(){return _connect2.apply(this,arguments);}return connect;}()},{key:"sendNetworkMessage",value:function(){var _sendNetworkMessage2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee146(path,payload){var type,contentType,connection;return _regeneratorRuntime().wrap(function _callee146$(_context146){while(1)switch(_context146.prev=_context146.next){case 0:type=typeof payload==="string"?Exports_js_1.MessageType.Text:Exports_js_1.MessageType.Binary;contentType=typeof payload==="string"?"application/json":"";_context146.next=4;return this.fetchConnection();case 4:connection=_context146.sent;return _context146.abrupt("return",connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(type,path,this.privSynthesisTurn.requestId,contentType,payload)));case 6:case"end":return _context146.stop();}},_callee146,this);}));function sendNetworkMessage(_x106,_x107){return _sendNetworkMessage2.apply(this,arguments);}return sendNetworkMessage;}()},{key:"Speak",value:function(){var _Speak=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee147(text,isSSML,requestId,successCallback,errorCallBack,audioDestination){var ssml,connection;return _regeneratorRuntime().wrap(function _callee147$(_context147){while(1)switch(_context147.prev=_context147.next){case 0:if(isSSML){ssml=text;}else{ssml=this.privSynthesizer.buildSsml(text);}if(!(this.speakOverride!==undefined)){_context147.next=3;break;}return _context147.abrupt("return",this.speakOverride(ssml,requestId,successCallback,errorCallBack));case 3:this.privSuccessCallback=successCallback;this.privErrorCallback=errorCallBack;this.privSynthesisTurn.startNewSynthesis(requestId,text,isSSML,audioDestination);_context147.prev=6;_context147.next=9;return this.connectImpl();case 9:_context147.next=11;return this.fetchConnection();case 11:connection=_context147.sent;_context147.next=14;return this.sendSynthesisContext(connection);case 14:_context147.next=16;return this.sendSsmlMessage(connection,ssml,requestId);case 16:this.onSynthesisStarted(requestId);void this.receiveMessage();_context147.next=24;break;case 20:_context147.prev=20;_context147.t0=_context147["catch"](6);this.cancelSynthesisLocal(Exports_js_2.CancellationReason.Error,Exports_js_2.CancellationErrorCode.ConnectionFailure,_context147.t0);return _context147.abrupt("return",Promise.reject(_context147.t0));case 24:case"end":return _context147.stop();}},_callee147,this,[[6,20]]);}));function Speak(_x108,_x109,_x110,_x111,_x112,_x113){return _Speak.apply(this,arguments);}return Speak;}()},{key:"stopSpeaking",value:function(){var _stopSpeaking=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee148(){var connection;return _regeneratorRuntime().wrap(function _callee148$(_context148){while(1)switch(_context148.prev=_context148.next){case 0:_context148.next=2;return this.connectImpl();case 2:_context148.next=4;return this.fetchConnection();case 4:connection=_context148.sent;return _context148.abrupt("return",connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_1.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"}))));case 6:case"end":return _context148.stop();}},_callee148,this);}));function stopSpeaking(){return _stopSpeaking.apply(this,arguments);}return stopSpeaking;}()// Cancels synthesis.
},{key:"cancelSynthesis",value:function cancelSynthesis(requestId,_cancellationReason,errorCode,error){var properties=new Exports_js_2.PropertyCollection();properties.setProperty(Exports_js_3.CancellationErrorCodePropertyName,Exports_js_2.CancellationErrorCode[errorCode]);var result=new Exports_js_2.SpeechSynthesisResult(requestId,Exports_js_2.ResultReason.Canceled,undefined,error,properties);this.onSynthesisCancelled(result);if(!!this.privSuccessCallback){try{this.privSuccessCallback(result);/* eslint-disable no-empty */}catch(_unused16){}}}// Cancels synthesis.
},{key:"cancelSynthesisLocal",value:function cancelSynthesisLocal(cancellationReason,errorCode,error){if(!!this.privSynthesisTurn.isSynthesizing){this.privSynthesisTurn.onStopSynthesizing();this.cancelSynthesis(this.privSynthesisTurn.requestId,cancellationReason,errorCode,error);}}// eslint-disable-next-line @typescript-eslint/no-unused-vars
},{key:"processTypeSpecificMessages",value:function processTypeSpecificMessages(_connectionMessage){return true;}},{key:"receiveMessage",value:function(){var _receiveMessage2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee149(){var connection,message,connectionMessage,metadataList,_iterator25,_step25,metadata,wordBoundaryEventArgs,bookmarkEventArgs,visemeEventArgs,result;return _regeneratorRuntime().wrap(function _callee149$(_context149){while(1)switch(_context149.prev=_context149.next){case 0:_context149.prev=0;_context149.next=3;return this.fetchConnection();case 3:connection=_context149.sent;_context149.next=6;return connection.read();case 6:message=_context149.sent;if(!(this.receiveMessageOverride!==undefined)){_context149.next=9;break;}return _context149.abrupt("return",this.receiveMessageOverride());case 9:if(!this.privIsDisposed){_context149.next=11;break;}return _context149.abrupt("return");case 11:if(message){_context149.next=17;break;}if(this.privSynthesisTurn.isSynthesizing){_context149.next=16;break;}return _context149.abrupt("return");case 16:return _context149.abrupt("return",this.receiveMessage());case 17:connectionMessage=SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage.fromConnectionMessage(message);if(!(connectionMessage.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())){_context149.next=76;break;}_context149.t0=connectionMessage.path.toLowerCase();_context149.next=_context149.t0==="turn.start"?22:_context149.t0==="response"?24:_context149.t0==="audio"?26:_context149.t0==="audio.metadata"?28:_context149.t0==="turn.end"?62:75;break;case 22:this.privSynthesisTurn.onServiceTurnStartResponse(connectionMessage.textBody);return _context149.abrupt("break",76);case 24:this.privSynthesisTurn.onServiceResponseMessage(connectionMessage.textBody);return _context149.abrupt("break",76);case 26:if(this.privSynthesisTurn.streamId.toLowerCase()===connectionMessage.streamId.toLowerCase()&&!!connectionMessage.binaryBody){this.privSynthesisTurn.onAudioChunkReceived(connectionMessage.binaryBody);this.onSynthesizing(connectionMessage.binaryBody);if(this.privSessionAudioDestination!==undefined){this.privSessionAudioDestination.write(connectionMessage.binaryBody);}}return _context149.abrupt("break",76);case 28:metadataList=Exports_js_3.SynthesisAudioMetadata.fromJSON(connectionMessage.textBody).Metadata;_iterator25=_createForOfIteratorHelper(metadataList);_context149.prev=30;_iterator25.s();case 32:if((_step25=_iterator25.n()).done){_context149.next=53;break;}metadata=_step25.value;_context149.t1=metadata.Type;_context149.next=_context149.t1===Exports_js_3.MetadataType.WordBoundary?37:_context149.t1===Exports_js_3.MetadataType.SentenceBoundary?37:_context149.t1===Exports_js_3.MetadataType.Bookmark?41:_context149.t1===Exports_js_3.MetadataType.Viseme?44:_context149.t1===Exports_js_3.MetadataType.AvatarSignal?47:_context149.t1===Exports_js_3.MetadataType.SessionEnd?49:51;break;case 37:this.privSynthesisTurn.onTextBoundaryEvent(metadata);wordBoundaryEventArgs=new Exports_js_2.SpeechSynthesisWordBoundaryEventArgs(metadata.Data.Offset,metadata.Data.Duration,metadata.Data.text.Text,metadata.Data.text.Length,metadata.Type===Exports_js_3.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,metadata.Data.text.BoundaryType);this.onWordBoundary(wordBoundaryEventArgs);return _context149.abrupt("break",51);case 41:bookmarkEventArgs=new Exports_js_2.SpeechSynthesisBookmarkEventArgs(metadata.Data.Offset,metadata.Data.Bookmark);this.onBookmarkReached(bookmarkEventArgs);return _context149.abrupt("break",51);case 44:this.privSynthesisTurn.onVisemeMetadataReceived(metadata);if(metadata.Data.IsLastAnimation){visemeEventArgs=new Exports_js_2.SpeechSynthesisVisemeEventArgs(metadata.Data.Offset,metadata.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(visemeEventArgs);}return _context149.abrupt("break",51);case 47:this.onAvatarEvent(metadata);return _context149.abrupt("break",51);case 49:this.privSynthesisTurn.onSessionEnd(metadata);return _context149.abrupt("break",51);case 51:_context149.next=32;break;case 53:_context149.next=58;break;case 55:_context149.prev=55;_context149.t2=_context149["catch"](30);_iterator25.e(_context149.t2);case 58:_context149.prev=58;_iterator25.f();return _context149.finish(58);case 61:return _context149.abrupt("break",76);case 62:this.privSynthesisTurn.onServiceTurnEndResponse();_context149.prev=63;_context149.next=66;return this.privSynthesisTurn.constructSynthesisResult();case 66:result=_context149.sent;if(!!this.privSuccessCallback){this.privSuccessCallback(result);}_context149.next=73;break;case 70:_context149.prev=70;_context149.t3=_context149["catch"](63);if(!!this.privErrorCallback){this.privErrorCallback(_context149.t3);}case 73:this.onSynthesisCompleted(result);return _context149.abrupt("break",76);case 75:if(!this.processTypeSpecificMessages(connectionMessage)){// here are some messages that the derived class has not processed, dispatch them to connect class
if(!!this.privServiceEvents){this.serviceEvents.onEvent(new Exports_js_1.ServiceEvent(connectionMessage.path.toLowerCase(),connectionMessage.textBody));}}case 76:return _context149.abrupt("return",this.receiveMessage());case 79:_context149.prev=79;_context149.t4=_context149["catch"](0);case 81:case"end":return _context149.stop();}},_callee149,this,[[0,79],[30,55,58,61],[63,70]]);}));function receiveMessage(){return _receiveMessage2.apply(this,arguments);}return receiveMessage;}()},{key:"sendSynthesisContext",value:function sendSynthesisContext(connection){this.setSynthesisContextSynthesisSection();var synthesisContextJson=this.synthesisContext.toJSON();if(synthesisContextJson){return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_1.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",synthesisContextJson));}return;}},{key:"setSpeechConfigSynthesisSection",value:function setSpeechConfigSynthesisSection(){return;}},{key:"connectImpl",value:function connectImpl(){var _this192=this;var isUnAuthorized=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.privConnectionPromise!=null){return this.privConnectionPromise.then(function(connection){if(connection.state()===Exports_js_1.ConnectionState.Disconnected){_this192.privConnectionId=null;_this192.privConnectionPromise=null;return _this192.connectImpl();}return _this192.privConnectionPromise;},function(){_this192.privConnectionId=null;_this192.privConnectionPromise=null;return _this192.connectImpl();});}this.privAuthFetchEventId=Exports_js_1.createNoDashGuid();this.privConnectionId=Exports_js_1.createNoDashGuid();this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);var authPromise=isUnAuthorized?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);this.privConnectionPromise=authPromise.then(/*#__PURE__*/function(){var _ref21=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee150(result){var connection,response;return _regeneratorRuntime().wrap(function _callee150$(_context150){while(1)switch(_context150.prev=_context150.next){case 0:_this192.privSynthesisTurn.onAuthCompleted(false);connection=_this192.privConnectionFactory.create(_this192.privSynthesizerConfig,result,_this192.privConnectionId);// Attach to the underlying event. No need to hold onto the detach pointers as in the event the connection goes away,
// it'll stop sending events.
connection.events.attach(function(event){_this192.connectionEvents.onEvent(event);});_context150.next=5;return connection.open();case 5:response=_context150.sent;if(!(response.statusCode===200)){_context150.next=11;break;}_this192.privSynthesisTurn.onConnectionEstablishCompleted(response.statusCode);return _context150.abrupt("return",Promise.resolve(connection));case 11:if(!(response.statusCode===403&&!isUnAuthorized)){_context150.next=15;break;}return _context150.abrupt("return",_this192.connectImpl(true));case 15:_this192.privSynthesisTurn.onConnectionEstablishCompleted(response.statusCode);return _context150.abrupt("return",Promise.reject("Unable to contact server. StatusCode: ".concat(response.statusCode,",\n                    ").concat(_this192.privSynthesizerConfig.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Url)," Reason: ").concat(response.reason)));case 17:case"end":return _context150.stop();}},_callee150);}));return function(_x114){return _ref21.apply(this,arguments);};}(),function(error){_this192.privSynthesisTurn.onAuthCompleted(true);throw new Error(error);});// Attach an empty handler to allow the promise to run in the background while
// other startup events happen. It'll eventually be awaited on.
// eslint-disable-next-line @typescript-eslint/no-empty-function
this.privConnectionPromise["catch"](function(){});return this.privConnectionPromise;}},{key:"sendSpeechServiceConfig",value:function sendSpeechServiceConfig(connection,SpeechServiceConfigJson){if(SpeechServiceConfigJson){return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_1.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",SpeechServiceConfigJson));}}},{key:"sendSsmlMessage",value:function sendSsmlMessage(connection,ssml,requestId){return connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_1.MessageType.Text,"ssml",requestId,"application/ssml+xml",ssml));}},{key:"fetchConnection",value:function(){var _fetchConnection2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee151(){var _this193=this;return _regeneratorRuntime().wrap(function _callee151$(_context151){while(1)switch(_context151.prev=_context151.next){case 0:if(!(this.privConnectionConfigurationPromise!==undefined)){_context151.next=2;break;}return _context151.abrupt("return",this.privConnectionConfigurationPromise.then(function(connection){if(connection.state()===Exports_js_1.ConnectionState.Disconnected){_this193.privConnectionId=null;_this193.privConnectionConfigurationPromise=undefined;return _this193.fetchConnection();}return _this193.privConnectionConfigurationPromise;},function(){_this193.privConnectionId=null;_this193.privConnectionConfigurationPromise=undefined;return _this193.fetchConnection();}));case 2:this.privConnectionConfigurationPromise=this.configureConnection();_context151.next=5;return this.privConnectionConfigurationPromise;case 5:return _context151.abrupt("return",_context151.sent);case 6:case"end":return _context151.stop();}},_callee151,this);}));function fetchConnection(){return _fetchConnection2.apply(this,arguments);}return fetchConnection;}()// Takes an established websocket connection to the endpoint and sends speech configuration information.
},{key:"configureConnection",value:function(){var _configureConnection2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee152(){var connection;return _regeneratorRuntime().wrap(function _callee152$(_context152){while(1)switch(_context152.prev=_context152.next){case 0:_context152.next=2;return this.connectImpl();case 2:connection=_context152.sent;if(!(this.configConnectionOverride!==undefined)){_context152.next=5;break;}return _context152.abrupt("return",this.configConnectionOverride(connection));case 5:this.setSpeechConfigSynthesisSection();_context152.next=8;return this.sendSpeechServiceConfig(connection,this.privSynthesizerConfig.SpeechServiceConfig.serialize());case 8:return _context152.abrupt("return",connection);case 9:case"end":return _context152.stop();}},_callee152,this);}));function configureConnection(){return _configureConnection2.apply(this,arguments);}return configureConnection;}()},{key:"onAvatarEvent",value:function onAvatarEvent(_metadata){return;}},{key:"onSynthesisStarted",value:function onSynthesisStarted(_requestId){return;}},{key:"onSynthesizing",value:function onSynthesizing(_audio){return;}},{key:"onSynthesisCancelled",value:function onSynthesisCancelled(_result){return;}},{key:"onSynthesisCompleted",value:function onSynthesisCompleted(_result){return;}},{key:"onWordBoundary",value:function onWordBoundary(_wordBoundaryEventArgs){return;}},{key:"onVisemeReceived",value:function onVisemeReceived(_visemeEventArgs){return;}},{key:"onBookmarkReached",value:function onBookmarkReached(_bookmarkEventArgs){return;}}]);return SynthesisAdapterBase;}();exports.SynthesisAdapterBase=SynthesisAdapterBase;SynthesisAdapterBase.telemetryDataEnabled=true;/***/},/* 263 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.AvatarSynthesisAdapter=void 0;var Exports_js_1=__webpack_require__(79);var Exports_js_2=__webpack_require__(2);var AvatarSynthesisAdapter=/*#__PURE__*/function(_Exports_js_2$Synthes){_inherits(AvatarSynthesisAdapter,_Exports_js_2$Synthes);var _super148=_createSuper(AvatarSynthesisAdapter);function AvatarSynthesisAdapter(authentication,connectionFactory,synthesizerConfig,avatarSynthesizer,avatarConfig){var _this194;_classCallCheck(this,AvatarSynthesisAdapter);_this194=_super148.call(this,authentication,connectionFactory,synthesizerConfig,undefined);_this194.privAvatarSynthesizer=avatarSynthesizer;_this194.privSynthesizer=avatarSynthesizer;_this194.privAvatarConfig=avatarConfig;return _this194;}_createClass(AvatarSynthesisAdapter,[{key:"setSynthesisContextSynthesisSection",value:function setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(undefined);}},{key:"setSpeechConfigSynthesisSection",value:function setSpeechConfigSynthesisSection(){var _this$privAvatarConfi,_this$privAvatarConfi2,_this$privAvatarConfi3,_this$privAvatarConfi4,_this$privAvatarConfi5,_this$privAvatarConfi6,_this$privAvatarConfi7,_this$privAvatarConfi8,_this$privAvatarConfi9,_this$privAvatarConfi10,_this$privAvatarConfi11,_this$privAvatarConfi12,_this$privAvatarConfi13,_this$privAvatarConfi14,_this$privAvatarConfi15,_this$privAvatarConfi16,_this$privAvatarConfi17,_this$privAvatarConfi18;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:(_this$privAvatarConfi=this.privAvatarConfig.videoFormat)===null||_this$privAvatarConfi===void 0?void 0:_this$privAvatarConfi.bitrate,codec:(_this$privAvatarConfi2=this.privAvatarConfig.videoFormat)===null||_this$privAvatarConfi2===void 0?void 0:_this$privAvatarConfi2.codec,crop:{bottomRight:{x:(_this$privAvatarConfi3=this.privAvatarConfig.videoFormat)===null||_this$privAvatarConfi3===void 0?void 0:(_this$privAvatarConfi4=_this$privAvatarConfi3.cropRange)===null||_this$privAvatarConfi4===void 0?void 0:(_this$privAvatarConfi5=_this$privAvatarConfi4.bottomRight)===null||_this$privAvatarConfi5===void 0?void 0:_this$privAvatarConfi5.x,y:(_this$privAvatarConfi6=this.privAvatarConfig.videoFormat)===null||_this$privAvatarConfi6===void 0?void 0:(_this$privAvatarConfi7=_this$privAvatarConfi6.cropRange)===null||_this$privAvatarConfi7===void 0?void 0:(_this$privAvatarConfi8=_this$privAvatarConfi7.bottomRight)===null||_this$privAvatarConfi8===void 0?void 0:_this$privAvatarConfi8.y},topLeft:{x:(_this$privAvatarConfi9=this.privAvatarConfig.videoFormat)===null||_this$privAvatarConfi9===void 0?void 0:(_this$privAvatarConfi10=_this$privAvatarConfi9.cropRange)===null||_this$privAvatarConfi10===void 0?void 0:(_this$privAvatarConfi11=_this$privAvatarConfi10.topLeft)===null||_this$privAvatarConfi11===void 0?void 0:_this$privAvatarConfi11.x,y:(_this$privAvatarConfi12=this.privAvatarConfig.videoFormat)===null||_this$privAvatarConfi12===void 0?void 0:(_this$privAvatarConfi13=_this$privAvatarConfi12.cropRange)===null||_this$privAvatarConfi13===void 0?void 0:(_this$privAvatarConfi14=_this$privAvatarConfi13.topLeft)===null||_this$privAvatarConfi14===void 0?void 0:_this$privAvatarConfi14.y}},resolution:{height:(_this$privAvatarConfi15=this.privAvatarConfig.videoFormat)===null||_this$privAvatarConfi15===void 0?void 0:_this$privAvatarConfi15.height,width:(_this$privAvatarConfi16=this.privAvatarConfig.videoFormat)===null||_this$privAvatarConfi16===void 0?void 0:_this$privAvatarConfi16.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(Exports_js_1.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:(_this$privAvatarConfi17=this.privAvatarConfig.remoteIceServers)!==null&&_this$privAvatarConfi17!==void 0?_this$privAvatarConfi17:this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:(_this$privAvatarConfi18=this.privAvatarConfig.backgroundImage)===null||_this$privAvatarConfi18===void 0?void 0:_this$privAvatarConfi18.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style,useBuiltInVoice:this.privAvatarConfig.useBuiltInVoice}};}},{key:"onAvatarEvent",value:function onAvatarEvent(metadata){if(!!this.privAvatarSynthesizer.avatarEventReceived){var avatarEventArgs=new Exports_js_1.AvatarEventArgs(metadata.Data.Offset,metadata.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,avatarEventArgs);}catch(error){// Not going to let errors in the event handler
// trip things up.
}}}}]);return AvatarSynthesisAdapter;}(Exports_js_2.SynthesisAdapterBase);exports.AvatarSynthesisAdapter=AvatarSynthesisAdapter;/***/},/* 264 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeechSynthesisAdapter=void 0;var Exports_js_1=__webpack_require__(79);var Exports_js_2=__webpack_require__(2);var SpeechSynthesisAdapter=/*#__PURE__*/function(_Exports_js_2$Synthes2){_inherits(SpeechSynthesisAdapter,_Exports_js_2$Synthes2);var _super149=_createSuper(SpeechSynthesisAdapter);function SpeechSynthesisAdapter(authentication,connectionFactory,synthesizerConfig,speechSynthesizer,audioDestination){var _this195;_classCallCheck(this,SpeechSynthesisAdapter);_this195=_super149.call(this,authentication,connectionFactory,synthesizerConfig,audioDestination);_this195.privSpeechSynthesizer=speechSynthesizer;_this195.privSynthesizer=speechSynthesizer;return _this195;}_createClass(SpeechSynthesisAdapter,[{key:"setSynthesisContextSynthesisSection",value:function setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer);}},{key:"onSynthesisStarted",value:function onSynthesisStarted(requestId){var synthesisStartEventArgs=new Exports_js_1.SpeechSynthesisEventArgs(new Exports_js_1.SpeechSynthesisResult(requestId,Exports_js_1.ResultReason.SynthesizingAudioStarted));if(!!this.privSpeechSynthesizer.synthesisStarted){this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,synthesisStartEventArgs);}}},{key:"onSynthesizing",value:function onSynthesizing(audio){if(!!this.privSpeechSynthesizer.synthesizing){try{var audioWithHeader=this.privSynthesisTurn.audioOutputFormat.addHeader(audio);var ev=new Exports_js_1.SpeechSynthesisEventArgs(new Exports_js_1.SpeechSynthesisResult(this.privSynthesisTurn.requestId,Exports_js_1.ResultReason.SynthesizingAudio,audioWithHeader));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,ev);}catch(error){// Not going to let errors in the event handler
// trip things up.
}}}},{key:"onSynthesisCancelled",value:function onSynthesisCancelled(result){if(!!this.privSpeechSynthesizer.SynthesisCanceled){var cancelEvent=new Exports_js_1.SpeechSynthesisEventArgs(result);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,cancelEvent);/* eslint-disable no-empty */}catch(_unused17){}}}},{key:"onSynthesisCompleted",value:function onSynthesisCompleted(result){if(this.privSpeechSynthesizer.synthesisCompleted){try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new Exports_js_1.SpeechSynthesisEventArgs(result));}catch(e){// Not going to let errors in the event handler
// trip things up.
}}}},{key:"onWordBoundary",value:function onWordBoundary(wordBoundaryEventArgs){if(!!this.privSpeechSynthesizer.wordBoundary){try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,wordBoundaryEventArgs);}catch(error){// Not going to let errors in the event handler
// trip things up.
}}}},{key:"onVisemeReceived",value:function onVisemeReceived(visemeEventArgs){if(!!this.privSpeechSynthesizer.visemeReceived){try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,visemeEventArgs);}catch(error){// Not going to let errors in the event handler
// trip things up.
}}}},{key:"onBookmarkReached",value:function onBookmarkReached(bookmarkEventArgs){if(!!this.privSpeechSynthesizer.bookmarkReached){try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,bookmarkEventArgs);}catch(error){// Not going to let errors in the event handler
// trip things up.
}}}}]);return SpeechSynthesisAdapter;}(Exports_js_2.SynthesisAdapterBase);exports.SpeechSynthesisAdapter=SpeechSynthesisAdapter;/***/},/* 265 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SynthesisRestAdapter=void 0;var Exports_js_1=__webpack_require__(60);var Exports_js_2=__webpack_require__(79);var ConnectionFactoryBase_js_1=__webpack_require__(134);var HeaderNames_js_1=__webpack_require__(54);/**
 * Implements methods for speaker recognition classes, sending requests to endpoint
 * and parsing response into expected format
 * @class SynthesisRestAdapter
 */var SynthesisRestAdapter=/*#__PURE__*/function(){function SynthesisRestAdapter(config,authentication){_classCallCheck(this,SynthesisRestAdapter);var endpoint=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Endpoint,undefined);if(!endpoint){var region=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Region,"westus");var hostSuffix=ConnectionFactoryBase_js_1.ConnectionFactoryBase.getHostSuffix(region);endpoint=config.parameters.getProperty(Exports_js_2.PropertyId.SpeechServiceConnection_Host,"https://".concat(region,".tts.speech").concat(hostSuffix));}this.privUri="".concat(endpoint,"/cognitiveservices/voices/list");var options=Exports_js_1.RestConfigBase.requestOptions;this.privRestAdapter=new Exports_js_1.RestMessageAdapter(options);this.privAuthentication=authentication;}/**
     * Sends list voices request to endpoint.
     * @function
     * @public
     * @param connectionId - guid for connectionId
     * @returns {Promise<IRestResponse>} rest response to status request
     */_createClass(SynthesisRestAdapter,[{key:"getVoicesList",value:function getVoicesList(connectionId){var _this196=this;this.privRestAdapter.setHeaders(HeaderNames_js_1.HeaderNames.ConnectionId,connectionId);return this.privAuthentication.fetch(connectionId).then(function(authInfo){_this196.privRestAdapter.setHeaders(authInfo.headerName,authInfo.token);return _this196.privRestAdapter.request(Exports_js_1.RestRequestType.Get,_this196.privUri);});}}]);return SynthesisRestAdapter;}();exports.SynthesisRestAdapter=SynthesisRestAdapter;/***/},/* 266 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SynthesizerConfig=exports.SynthesisServiceType=void 0;var Exports_js_1=__webpack_require__(2);var SynthesisServiceType;(function(SynthesisServiceType){SynthesisServiceType[SynthesisServiceType["Standard"]=0]="Standard";SynthesisServiceType[SynthesisServiceType["Custom"]=1]="Custom";})(SynthesisServiceType=exports.SynthesisServiceType||(exports.SynthesisServiceType={}));var SynthesizerConfig=/*#__PURE__*/function(){function SynthesizerConfig(speechServiceConfig,parameters){_classCallCheck(this,SynthesizerConfig);this.privSynthesisServiceType=SynthesisServiceType.Standard;this.avatarEnabled=false;this.privSpeechServiceConfig=speechServiceConfig?speechServiceConfig:new Exports_js_1.SpeechServiceConfig(new Exports_js_1.Context(null));this.privParameters=parameters;}_createClass(SynthesizerConfig,[{key:"parameters",get:function get(){return this.privParameters;}},{key:"synthesisServiceType",get:function get(){return this.privSynthesisServiceType;},set:function set(value){this.privSynthesisServiceType=value;}},{key:"synthesisVideoSection",set:function set(value){this.privSpeechServiceConfig.Context.synthesis={video:value};}},{key:"SpeechServiceConfig",get:function get(){return this.privSpeechServiceConfig;}}]);return SynthesizerConfig;}();exports.SynthesizerConfig=SynthesizerConfig;/***/},/* 267 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SynthesisContext=void 0;var Exports_js_1=__webpack_require__(79);/**
 * Represents the JSON used in the synthesis.context message sent to the speech service.
 * The dynamic grammar is always refreshed from the encapsulated dynamic grammar object.
 */var SynthesisContext=/*#__PURE__*/function(){function SynthesisContext(){_classCallCheck(this,SynthesisContext);this.privContext={};}/**
     * Adds a section to the synthesis.context object.
     * @param sectionName Name of the section to add.
     * @param value JSON serializable object that represents the value.
     */_createClass(SynthesisContext,[{key:"setSection",value:function setSection(sectionName,value){this.privContext[sectionName]=value;}/**
     * Sets the audio output format for synthesis context generation.
     * @param format {AudioOutputFormatImpl} the output format
     */},{key:"audioOutputFormat",set:function set(format){this.privAudioOutputFormat=format;}},{key:"toJSON",value:function toJSON(){return JSON.stringify(this.privContext);}},{key:"setSynthesisSection",value:function setSynthesisSection(speechSynthesizer){var synthesisSection=this.buildSynthesisContext(speechSynthesizer);this.setSection("synthesis",synthesisSection);}},{key:"buildSynthesisContext",value:function buildSynthesisContext(speechSynthesizer){return{audio:{metadataOptions:{bookmarkEnabled:!!(speechSynthesizer!==null&&speechSynthesizer!==void 0&&speechSynthesizer.bookmarkReached),punctuationBoundaryEnabled:speechSynthesizer===null||speechSynthesizer===void 0?void 0:speechSynthesizer.properties.getProperty(Exports_js_1.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(speechSynthesizer!==null&&speechSynthesizer!==void 0&&speechSynthesizer.wordBoundary)),sentenceBoundaryEnabled:speechSynthesizer===null||speechSynthesizer===void 0?void 0:speechSynthesizer.properties.getProperty(Exports_js_1.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,false),sessionEndEnabled:true,visemeEnabled:!!(speechSynthesizer!==null&&speechSynthesizer!==void 0&&speechSynthesizer.visemeReceived),wordBoundaryEnabled:speechSynthesizer===null||speechSynthesizer===void 0?void 0:speechSynthesizer.properties.getProperty(Exports_js_1.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(speechSynthesizer!==null&&speechSynthesizer!==void 0&&speechSynthesizer.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:speechSynthesizer===null||speechSynthesizer===void 0?void 0:speechSynthesizer.autoDetectSourceLanguage}};}}]);return SynthesisContext;}();exports.SynthesisContext=SynthesisContext;/***/},/* 268 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeakerRecognitionConfig=void 0;var Exports_js_1=__webpack_require__(2);var SpeakerRecognitionConfig=/*#__PURE__*/function(){function SpeakerRecognitionConfig(context,parameters){_classCallCheck(this,SpeakerRecognitionConfig);this.privContext=context?context:new Exports_js_1.Context(null);this.privParameters=parameters;}_createClass(SpeakerRecognitionConfig,[{key:"parameters",get:function get(){return this.privParameters;}},{key:"Context",get:function get(){return this.privContext;}}]);return SpeakerRecognitionConfig;}();exports.SpeakerRecognitionConfig=SpeakerRecognitionConfig;/***/},/* 269 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.SpeakerServiceRecognizer=void 0;var Exports_js_1=__webpack_require__(60);var Exports_js_2=__webpack_require__(4);var Exports_js_3=__webpack_require__(79);var Exports_js_4=__webpack_require__(2);var SpeechConnectionMessage_Internal_js_1=__webpack_require__(206);// eslint-disable-next-line max-classes-per-file
var SpeakerServiceRecognizer=/*#__PURE__*/function(_Exports_js_4$Service2){_inherits(SpeakerServiceRecognizer,_Exports_js_4$Service2);var _super150=_createSuper(SpeakerServiceRecognizer);function SpeakerServiceRecognizer(authentication,connectionFactory,audioSource,recognizerConfig,recognizer){var _this197;_classCallCheck(this,SpeakerServiceRecognizer);_this197=_super150.call(this,authentication,connectionFactory,audioSource,recognizerConfig,recognizer);_this197.privSpeakerRecognizer=recognizer;_this197.privSpeakerAudioSource=audioSource;_this197.recognizeSpeaker=function(model){return _this197.recognizeSpeakerOnce(model);};_this197.sendPrePayloadJSONOverride=function(){return _this197.noOp();};return _this197;}_createClass(SpeakerServiceRecognizer,[{key:"processTypeSpecificMessages",value:function processTypeSpecificMessages(connectionMessage){var processed=false;var resultProps=new Exports_js_3.PropertyCollection();if(connectionMessage.messageType===Exports_js_2.MessageType.Text){resultProps.setProperty(Exports_js_3.PropertyId.SpeechServiceResponse_JsonResult,connectionMessage.textBody);}switch(connectionMessage.path.toLowerCase()){case"speaker.response":var response=JSON.parse(connectionMessage.textBody);var result;if(response.status.statusCode.toLowerCase()!=="success"){result=new Exports_js_3.SpeakerRecognitionResult(response,Exports_js_3.ResultReason.Canceled,Exports_js_3.CancellationErrorCode.ServiceError,response.status.reason);}else{result=new Exports_js_3.SpeakerRecognitionResult(response,Exports_js_3.ResultReason.RecognizedSpeaker);}if(!!this.privResultDeferral){this.privResultDeferral.resolve(result);}processed=true;break;default:break;}var defferal=new Exports_js_2.Deferred();defferal.resolve(processed);return defferal.promise;}// Cancels recognition.
},{key:"cancelRecognition",value:function cancelRecognition(sessionId,requestId,cancellationReason,errorCode,error){var properties=new Exports_js_3.PropertyCollection();properties.setProperty(Exports_js_4.CancellationErrorCodePropertyName,Exports_js_3.CancellationErrorCode[errorCode]);if(!!this.privResultDeferral){var result=new Exports_js_3.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:error,reason:error}},Exports_js_3.ResultReason.Canceled,errorCode,error);try{this.privResultDeferral.resolve(result);}catch(error){this.privResultDeferral.reject(error);}}}},{key:"recognizeSpeakerOnce",value:function(){var _recognizeSpeakerOnce=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee153(model){var _this198=this;var conPromise,preAudioPromise,node,format,deviceInfo,audioNode,sessionStartEventArgs,audioSendPromise;return _regeneratorRuntime().wrap(function _callee153$(_context153){while(1)switch(_context153.prev=_context153.next){case 0:this.privSpeakerModel=model;this.voiceProfileType=model.scenario;if(!this.privResultDeferral){this.privResultDeferral=new Exports_js_2.Deferred();}this.privRequestSession.startNewRecognition();this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events);this.privRecognizerConfig.parameters.setProperty(Exports_js_3.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);// Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
conPromise=this.connectImpl();preAudioPromise=this.sendPreAudioMessages(this.extractSpeakerContext(model));_context153.next=10;return this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId);case 10:node=_context153.sent;_context153.next=13;return this.privSpeakerAudioSource.format;case 13:format=_context153.sent;_context153.next=16;return this.privSpeakerAudioSource.deviceInfo;case 16:deviceInfo=_context153.sent;audioNode=new Exports_js_1.ReplayableAudioNode(node,format.avgBytesPerSec);_context153.next=20;return this.privRequestSession.onAudioSourceAttachCompleted(audioNode,false);case 20:this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:deviceInfo};_context153.prev=21;_context153.next=24;return conPromise;case 24:_context153.next=26;return preAudioPromise;case 26:_context153.next=31;break;case 28:_context153.prev=28;_context153.t0=_context153["catch"](21);this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.ConnectionFailure,_context153.t0);case 31:sessionStartEventArgs=new Exports_js_3.SessionEventArgs(this.privRequestSession.sessionId);if(!!this.privRecognizer.sessionStarted){this.privRecognizer.sessionStarted(this.privRecognizer,sessionStartEventArgs);}void this.receiveMessage();audioSendPromise=this.sendAudio(audioNode);// /* eslint-disable no-empty */
audioSendPromise.then(function(){},function(error){_this198.cancelRecognition(_this198.privRequestSession.sessionId,_this198.privRequestSession.requestId,Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.RuntimeError,error);});return _context153.abrupt("return",this.privResultDeferral.promise);case 37:case"end":return _context153.stop();}},_callee153,this,[[21,28]]);}));function recognizeSpeakerOnce(_x115){return _recognizeSpeakerOnce.apply(this,arguments);}return recognizeSpeakerOnce;}()},{key:"sendPreAudioMessages",value:function(){var _sendPreAudioMessages2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee154(context){var connection;return _regeneratorRuntime().wrap(function _callee154$(_context154){while(1)switch(_context154.prev=_context154.next){case 0:_context154.next=2;return this.fetchConnection();case 2:connection=_context154.sent;_context154.next=5;return this.sendSpeakerRecognition(connection,context);case 5:case"end":return _context154.stop();}},_callee154,this);}));function sendPreAudioMessages(_x116){return _sendPreAudioMessages2.apply(this,arguments);}return sendPreAudioMessages;}()},{key:"sendSpeakerRecognition",value:function(){var _sendSpeakerRecognition=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee155(connection,context){var speakerContextJson;return _regeneratorRuntime().wrap(function _callee155$(_context155){while(1)switch(_context155.prev=_context155.next){case 0:speakerContextJson=JSON.stringify(context);return _context155.abrupt("return",connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",speakerContextJson)));case 2:case"end":return _context155.stop();}},_callee155,this);}));function sendSpeakerRecognition(_x117,_x118){return _sendSpeakerRecognition.apply(this,arguments);}return sendSpeakerRecognition;}()},{key:"extractSpeakerContext",value:function extractSpeakerContext(model){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:model.profileIds,scenario:model.scenario};}}]);return SpeakerServiceRecognizer;}(Exports_js_4.ServiceRecognizerBase);exports.SpeakerServiceRecognizer=SpeakerServiceRecognizer;/***/},/* 270 */ /***/function(__unused_webpack_module,exports,__webpack_require__){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.VoiceServiceRecognizer=void 0;var Exports_js_1=__webpack_require__(60);var Exports_js_2=__webpack_require__(4);var Exports_js_3=__webpack_require__(79);var Exports_js_4=__webpack_require__(2);var SpeechConnectionMessage_Internal_js_1=__webpack_require__(206);// eslint-disable-next-line max-classes-per-file
var VoiceServiceRecognizer=/*#__PURE__*/function(_Exports_js_4$Service3){_inherits(VoiceServiceRecognizer,_Exports_js_4$Service3);var _super151=_createSuper(VoiceServiceRecognizer);function VoiceServiceRecognizer(authentication,connectionFactory,audioSource,recognizerConfig,recognizer){var _this199;_classCallCheck(this,VoiceServiceRecognizer);_this199=_super151.call(this,authentication,connectionFactory,audioSource,recognizerConfig,recognizer);_this199.privDeferralMap=new Exports_js_2.DeferralMap();_this199.privSpeakerAudioSource=audioSource;_this199.sendPrePayloadJSONOverride=function(){return _this199.noOp();};return _this199;}_createClass(VoiceServiceRecognizer,[{key:"SpeakerAudioSource",set:function set(audioSource){this.privSpeakerAudioSource=audioSource;}},{key:"processTypeSpecificMessages",value:function processTypeSpecificMessages(connectionMessage){var processed=false;var resultProps=new Exports_js_3.PropertyCollection();if(connectionMessage.messageType===Exports_js_2.MessageType.Text){resultProps.setProperty(Exports_js_3.PropertyId.SpeechServiceResponse_JsonResult,connectionMessage.textBody);}switch(connectionMessage.path.toLowerCase()){// Profile management response for create, fetch, delete, reset
case"speaker.profiles":var response=JSON.parse(connectionMessage.textBody);switch(response.operation.toLowerCase()){case"create":this.handleCreateResponse(response,connectionMessage.requestId);break;case"delete":case"reset":this.handleResultResponse(response,connectionMessage.requestId);break;case"fetch":var _enrollmentResponse=JSON.parse(connectionMessage.textBody);this.handleFetchResponse(_enrollmentResponse,connectionMessage.requestId);break;default:break;}processed=true;break;// Activation and authorization phrase response
case"speaker.phrases":var phraseResponse=JSON.parse(connectionMessage.textBody);this.handlePhrasesResponse(phraseResponse,connectionMessage.requestId);processed=true;break;// Enrollment response
case"speaker.profile.enrollment":var enrollmentResponse=JSON.parse(connectionMessage.textBody);var result=new Exports_js_3.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(!!enrollmentResponse.enrollment?enrollmentResponse.enrollment.enrollmentStatus:enrollmentResponse.status.statusCode),!!enrollmentResponse.enrollment?JSON.stringify(enrollmentResponse.enrollment):undefined,enrollmentResponse.status.reason);if(!!this.privDeferralMap.getId(connectionMessage.requestId)){this.privDeferralMap.complete(connectionMessage.requestId,result);}this.privRequestSession.onSpeechEnded();processed=true;break;default:break;}var defferal=new Exports_js_2.Deferred();defferal.resolve(processed);return defferal.promise;}// Cancels recognition.
},{key:"cancelRecognition",value:function cancelRecognition(sessionId,requestId,cancellationReason,errorCode,error){var properties=new Exports_js_3.PropertyCollection();// const enrollmentResponse: EnrollmentResponse = JSON.parse(connectionMessage.textBody) as EnrollmentResponse;
properties.setProperty(Exports_js_4.CancellationErrorCodePropertyName,Exports_js_3.CancellationErrorCode[errorCode]);var result=new Exports_js_3.VoiceProfileEnrollmentResult(Exports_js_3.ResultReason.Canceled,error,error);if(!!this.privDeferralMap.getId(requestId)){this.privDeferralMap.complete(requestId,result);}}},{key:"createProfile",value:function(){var _createProfile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee156(profileType,locale){var conPromise,createProfileDeferral;return _regeneratorRuntime().wrap(function _callee156$(_context156){while(1)switch(_context156.prev=_context156.next){case 0:// Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
this.voiceProfileType=profileType.toString();conPromise=this.connectImpl();_context156.prev=2;createProfileDeferral=new Exports_js_2.Deferred();_context156.next=6;return conPromise;case 6:_context156.next=8;return this.sendCreateProfile(createProfileDeferral,profileType,locale);case 8:void this.receiveMessage();return _context156.abrupt("return",createProfileDeferral.promise);case 12:_context156.prev=12;_context156.t0=_context156["catch"](2);throw _context156.t0;case 15:case"end":return _context156.stop();}},_callee156,this,[[2,12]]);}));function createProfile(_x119,_x120){return _createProfile.apply(this,arguments);}return createProfile;}()},{key:"resetProfile",value:function(){var _resetProfile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee157(profile){return _regeneratorRuntime().wrap(function _callee157$(_context157){while(1)switch(_context157.prev=_context157.next){case 0:this.voiceProfileType=profile.profileType.toString();return _context157.abrupt("return",this.sendCommonRequest("reset",profile.profileType,profile));case 2:case"end":return _context157.stop();}},_callee157,this);}));function resetProfile(_x121){return _resetProfile.apply(this,arguments);}return resetProfile;}()},{key:"deleteProfile",value:function(){var _deleteProfile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee158(profile){return _regeneratorRuntime().wrap(function _callee158$(_context158){while(1)switch(_context158.prev=_context158.next){case 0:this.voiceProfileType=profile.profileType.toString();return _context158.abrupt("return",this.sendCommonRequest("delete",profile.profileType,profile));case 2:case"end":return _context158.stop();}},_callee158,this);}));function deleteProfile(_x122){return _deleteProfile.apply(this,arguments);}return deleteProfile;}()},{key:"retrieveEnrollmentResult",value:function(){var _retrieveEnrollmentResult=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee159(profile){return _regeneratorRuntime().wrap(function _callee159$(_context159){while(1)switch(_context159.prev=_context159.next){case 0:this.voiceProfileType=profile.profileType.toString();this.privExpectedProfileId=profile.profileId;return _context159.abrupt("return",this.sendCommonRequest("fetch",profile.profileType,profile));case 3:case"end":return _context159.stop();}},_callee159,this);}));function retrieveEnrollmentResult(_x123){return _retrieveEnrollmentResult.apply(this,arguments);}return retrieveEnrollmentResult;}()},{key:"getAllProfiles",value:function(){var _getAllProfiles=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee160(profileType){return _regeneratorRuntime().wrap(function _callee160$(_context160){while(1)switch(_context160.prev=_context160.next){case 0:this.voiceProfileType=profileType.toString();return _context160.abrupt("return",this.sendCommonRequest("fetch",profileType));case 2:case"end":return _context160.stop();}},_callee160,this);}));function getAllProfiles(_x124){return _getAllProfiles.apply(this,arguments);}return getAllProfiles;}()},{key:"getActivationPhrases",value:function(){var _getActivationPhrases=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee161(profileType,lang){var conPromise,getPhrasesDeferral;return _regeneratorRuntime().wrap(function _callee161$(_context161){while(1)switch(_context161.prev=_context161.next){case 0:this.voiceProfileType=profileType.toString();// Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
conPromise=this.connectImpl();_context161.prev=2;getPhrasesDeferral=new Exports_js_2.Deferred();_context161.next=6;return conPromise;case 6:_context161.next=8;return this.sendPhrasesRequest(getPhrasesDeferral,profileType,lang);case 8:void this.receiveMessage();return _context161.abrupt("return",getPhrasesDeferral.promise);case 12:_context161.prev=12;_context161.t0=_context161["catch"](2);throw _context161.t0;case 15:case"end":return _context161.stop();}},_callee161,this,[[2,12]]);}));function getActivationPhrases(_x125,_x126){return _getActivationPhrases.apply(this,arguments);}return getActivationPhrases;}()},{key:"enrollProfile",value:function(){var _enrollProfile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee162(profile){var _this200=this;var enrollmentDeferral,conPromise,preAudioPromise,node,format,deviceInfo,audioNode,sessionStartEventArgs,audioSendPromise;return _regeneratorRuntime().wrap(function _callee162$(_context162){while(1)switch(_context162.prev=_context162.next){case 0:this.voiceProfileType=profile.profileType.toString();enrollmentDeferral=new Exports_js_2.Deferred();this.privRequestSession.startNewRecognition();this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events);this.privRecognizerConfig.parameters.setProperty(Exports_js_3.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);// Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
conPromise=this.connectImpl();preAudioPromise=this.sendPreAudioMessages(profile,enrollmentDeferral);_context162.next=9;return this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId);case 9:node=_context162.sent;_context162.next=12;return this.privSpeakerAudioSource.format;case 12:format=_context162.sent;_context162.next=15;return this.privSpeakerAudioSource.deviceInfo;case 15:deviceInfo=_context162.sent;audioNode=new Exports_js_1.ReplayableAudioNode(node,format.avgBytesPerSec);_context162.next=19;return this.privRequestSession.onAudioSourceAttachCompleted(audioNode,false);case 19:this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:deviceInfo};_context162.prev=20;_context162.next=23;return conPromise;case 23:_context162.next=25;return preAudioPromise;case 25:_context162.next=30;break;case 27:_context162.prev=27;_context162.t0=_context162["catch"](20);this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.ConnectionFailure,_context162.t0);case 30:sessionStartEventArgs=new Exports_js_3.SessionEventArgs(this.privRequestSession.sessionId);if(!!this.privRecognizer.sessionStarted){this.privRecognizer.sessionStarted(this.privRecognizer,sessionStartEventArgs);}void this.receiveMessage();audioSendPromise=this.sendAudio(audioNode);// /* eslint-disable no-empty */
audioSendPromise.then(function(){},function(error){_this200.cancelRecognition(_this200.privRequestSession.sessionId,_this200.privRequestSession.requestId,Exports_js_3.CancellationReason.Error,Exports_js_3.CancellationErrorCode.RuntimeError,error);});return _context162.abrupt("return",enrollmentDeferral.promise);case 36:case"end":return _context162.stop();}},_callee162,this,[[20,27]]);}));function enrollProfile(_x127){return _enrollProfile.apply(this,arguments);}return enrollProfile;}()},{key:"sendPreAudioMessages",value:function(){var _sendPreAudioMessages3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee163(profile,enrollmentDeferral){var connection;return _regeneratorRuntime().wrap(function _callee163$(_context163){while(1)switch(_context163.prev=_context163.next){case 0:_context163.next=2;return this.fetchConnection();case 2:connection=_context163.sent;this.privRequestSession.onSpeechContext();this.privDeferralMap.add(this.privRequestSession.requestId,enrollmentDeferral);_context163.next=7;return this.sendBaseRequest(connection,"enroll",this.scenarioFrom(profile.profileType),profile);case 7:case"end":return _context163.stop();}},_callee163,this);}));function sendPreAudioMessages(_x128,_x129){return _sendPreAudioMessages3.apply(this,arguments);}return sendPreAudioMessages;}()},{key:"sendPhrasesRequest",value:function(){var _sendPhrasesRequest=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee164(getPhrasesDeferral,profileType,locale){var connection,scenario,profileCreateRequest;return _regeneratorRuntime().wrap(function _callee164$(_context164){while(1)switch(_context164.prev=_context164.next){case 0:_context164.next=2;return this.fetchConnection();case 2:connection=_context164.sent;this.privRequestSession.onSpeechContext();this.privDeferralMap.add(this.privRequestSession.requestId,getPhrasesDeferral);scenario=this.scenarioFrom(profileType);profileCreateRequest={locale:locale,scenario:scenario};return _context164.abrupt("return",connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(profileCreateRequest))));case 8:case"end":return _context164.stop();}},_callee164,this);}));function sendPhrasesRequest(_x130,_x131,_x132){return _sendPhrasesRequest.apply(this,arguments);}return sendPhrasesRequest;}()},{key:"sendCreateProfile",value:function(){var _sendCreateProfile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee165(createProfileDeferral,profileType,locale){var connection,scenario,profileCreateRequest;return _regeneratorRuntime().wrap(function _callee165$(_context165){while(1)switch(_context165.prev=_context165.next){case 0:_context165.next=2;return this.fetchConnection();case 2:connection=_context165.sent;this.privRequestSession.onSpeechContext();this.privDeferralMap.add(this.privRequestSession.requestId,createProfileDeferral);scenario=profileType===Exports_js_3.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":profileType===Exports_js_3.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification";profileCreateRequest={locale:locale,number:"1",scenario:scenario};return _context165.abrupt("return",connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(profileCreateRequest))));case 8:case"end":return _context165.stop();}},_callee165,this);}));function sendCreateProfile(_x133,_x134,_x135){return _sendCreateProfile.apply(this,arguments);}return sendCreateProfile;}()},{key:"sendCommonRequest",value:function(){var _sendCommonRequest=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee166(operation,profileType){var profile,conPromise,deferral,connection,_args166=arguments;return _regeneratorRuntime().wrap(function _callee166$(_context166){while(1)switch(_context166.prev=_context166.next){case 0:profile=_args166.length>2&&_args166[2]!==undefined?_args166[2]:undefined;// Start the connection to the service. The promise this will create is stored and will be used by configureConnection().
conPromise=this.connectImpl();_context166.prev=2;deferral=new Exports_js_2.Deferred();this.privRequestSession.onSpeechContext();_context166.next=7;return conPromise;case 7:_context166.next=9;return this.fetchConnection();case 9:connection=_context166.sent;this.privDeferralMap.add(this.privRequestSession.requestId,deferral);_context166.next=13;return this.sendBaseRequest(connection,operation,this.scenarioFrom(profileType),profile);case 13:void this.receiveMessage();return _context166.abrupt("return",deferral.promise);case 17:_context166.prev=17;_context166.t0=_context166["catch"](2);throw _context166.t0;case 20:case"end":return _context166.stop();}},_callee166,this,[[2,17]]);}));function sendCommonRequest(_x136,_x137){return _sendCommonRequest.apply(this,arguments);}return sendCommonRequest;}()},{key:"sendBaseRequest",value:function(){var _sendBaseRequest=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee167(connection,operation,scenario,profile){var profileRequest;return _regeneratorRuntime().wrap(function _callee167$(_context167){while(1)switch(_context167.prev=_context167.next){case 0:profileRequest={scenario:scenario};if(!!profile){profileRequest.profileIds=[profile.profileId];}else{profileRequest.maxPageSize=-1;}return _context167.abrupt("return",connection.send(new SpeechConnectionMessage_Internal_js_1.SpeechConnectionMessage(Exports_js_2.MessageType.Text,"speaker.profile.".concat(operation),this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(profileRequest))));case 3:case"end":return _context167.stop();}},_callee167,this);}));function sendBaseRequest(_x138,_x139,_x140,_x141){return _sendBaseRequest.apply(this,arguments);}return sendBaseRequest;}()},{key:"extractSpeakerContext",value:function extractSpeakerContext(model){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:model.profileIds,scenario:model.scenario};}},{key:"handlePhrasesResponse",value:function handlePhrasesResponse(response,requestId){if(!!this.privDeferralMap.getId(requestId)){if(response.status.statusCode.toLowerCase()!=="success"){var reason=Exports_js_3.ResultReason.Canceled;var result=new Exports_js_3.VoiceProfilePhraseResult(reason,response.status.statusCode,response.passPhraseType,[]);this.privDeferralMap.complete(requestId,result);}else if(!!response.phrases&&response.phrases.length>0){var _reason=Exports_js_3.ResultReason.EnrollingVoiceProfile;var _result3=new Exports_js_3.VoiceProfilePhraseResult(_reason,response.status.statusCode,response.passPhraseType,response.phrases);this.privDeferralMap.complete(requestId,_result3);}else{throw new Error("Voice Profile get activation phrases failed, no phrases received");}}else{throw new Error("Voice Profile get activation phrases request for requestID ".concat(requestId," not found"));}}},{key:"handleCreateResponse",value:function handleCreateResponse(response,requestId){if(!!response.profiles&&response.profiles.length>0){if(!!this.privDeferralMap.getId(requestId)){var profileIds=response.profiles.map(function(profile){return profile.profileId;});this.privDeferralMap.complete(requestId,profileIds);}else{throw new Error("Voice Profile create request for requestID ".concat(requestId," not found"));}}else{throw new Error("Voice Profile create failed, no profile id received");}}},{key:"handleResultResponse",value:function handleResultResponse(response,requestId){if(!!this.privDeferralMap.getId(requestId)){var successReason=response.operation.toLowerCase()==="delete"?Exports_js_3.ResultReason.DeletedVoiceProfile:Exports_js_3.ResultReason.ResetVoiceProfile;var reason=response.status.statusCode.toLowerCase()==="success"?successReason:Exports_js_3.ResultReason.Canceled;var result=new Exports_js_3.VoiceProfileResult(reason,"statusCode: ".concat(response.status.statusCode,", errorDetails: ").concat(response.status.reason));this.privDeferralMap.complete(requestId,result);}else{throw new Error("Voice Profile create request for requestID ".concat(requestId," not found"));}}},{key:"handleFetchResponse",value:function handleFetchResponse(enrollmentResponse,requestId){if(!!this.privDeferralMap.getId(requestId)&&!!enrollmentResponse.profiles[0]){if(!!this.privExpectedProfileId&&enrollmentResponse.profiles.length===1&&enrollmentResponse.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=undefined;var profileInfo=enrollmentResponse.profiles[0];var result=new Exports_js_3.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(profileInfo.enrollmentStatus),JSON.stringify(profileInfo),enrollmentResponse.status.reason);this.privDeferralMap.complete(requestId,result);}else if(enrollmentResponse.profiles.length>0){var iProfiles=enrollmentResponse.profiles;var profileResults=[];var _iterator26=_createForOfIteratorHelper(iProfiles),_step26;try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var profile=_step26.value;profileResults.push(new Exports_js_3.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(profile.enrollmentStatus),JSON.stringify(profile),enrollmentResponse.status.reason));}}catch(err){_iterator26.e(err);}finally{_iterator26.f();}this.privDeferralMap.complete(requestId,profileResults);}}else{throw new Error("Voice Profile fetch request for requestID ".concat(requestId," not found"));}}},{key:"enrollmentReasonFrom",value:function enrollmentReasonFrom(statusCode){switch(statusCode.toLowerCase()){case"enrolled":return Exports_js_3.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return Exports_js_3.ResultReason.Canceled;default:return Exports_js_3.ResultReason.EnrollingVoiceProfile;}}},{key:"scenarioFrom",value:function scenarioFrom(profileType){return profileType===Exports_js_3.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":profileType===Exports_js_3.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification";}}]);return VoiceServiceRecognizer;}(Exports_js_4.ServiceRecognizerBase);exports.VoiceServiceRecognizer=VoiceServiceRecognizer;/***/},/* 271 */ /***/function(__unused_webpack_module,exports){"use strict";// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
Object.defineProperty(exports,"__esModule",{value:true});exports.type=exports.connectivity=exports.Device=exports.OS=exports.System=exports.Context=exports.SpeechServiceConfig=void 0;/* eslint-disable max-classes-per-file */ // The config is serialized and sent as the Speech.Config
var SpeechServiceConfig=/*#__PURE__*/function(){function SpeechServiceConfig(context){_classCallCheck(this,SpeechServiceConfig);this.context=context;}_createClass(SpeechServiceConfig,[{key:"serialize",value:function serialize(){return JSON.stringify(this,function(key,value){if(value&&_typeof(value)==="object"&&!Array.isArray(value)){var replacement={};for(var k in value){if(Object.hasOwnProperty.call(value,k)){// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment
replacement[k&&k.charAt(0).toLowerCase()+k.substring(1)]=value[k];}}return replacement;}return value;});}},{key:"Context",get:function get(){return this.context;}},{key:"Recognition",get:function get(){return this.recognition;},set:function set(value){this.recognition=value.toLowerCase();}}]);return SpeechServiceConfig;}();exports.SpeechServiceConfig=SpeechServiceConfig;var Context=/*#__PURE__*/_createClass(function Context(os){_classCallCheck(this,Context);this.system=new System();this.os=os;});exports.Context=Context;var System=/*#__PURE__*/_createClass(function System(){_classCallCheck(this,System);// Note: below will be patched for official builds.
var SPEECHSDK_CLIENTSDK_VERSION="1.43.0";this.name="SpeechSDK";this.version=SPEECHSDK_CLIENTSDK_VERSION;this.build="JavaScript";this.lang="JavaScript";});exports.System=System;var OS=/*#__PURE__*/_createClass(function OS(platform,name,version){_classCallCheck(this,OS);this.platform=platform;this.name=name;this.version=version;});exports.OS=OS;var Device=/*#__PURE__*/_createClass(function Device(manufacturer,model,version){_classCallCheck(this,Device);this.manufacturer=manufacturer;this.model=model;this.version=version;});exports.Device=Device;var connectivity;(function(connectivity){connectivity["Bluetooth"]="Bluetooth";connectivity["Wired"]="Wired";connectivity["WiFi"]="WiFi";connectivity["Cellular"]="Cellular";connectivity["InBuilt"]="InBuilt";connectivity["Unknown"]="Unknown";})(connectivity=exports.connectivity||(exports.connectivity={}));var type;(function(type){type["Phone"]="Phone";type["Speaker"]="Speaker";type["Car"]="Car";type["Headset"]="Headset";type["Thermostat"]="Thermostat";type["Microphones"]="Microphones";type["Deskphone"]="Deskphone";type["RemoteControl"]="RemoteControl";type["Unknown"]="Unknown";type["File"]="File";type["Stream"]="Stream";})(type=exports.type||(exports.type={}));/***/}/******/];/************************************************************************/ /******/ // The module cache
/******/var __webpack_module_cache__={};/******/ /******/ // The require function
/******/function __webpack_require__(moduleId){/******/ // Check if module is in cache
/******/var cachedModule=__webpack_module_cache__[moduleId];/******/if(cachedModule!==undefined){/******/return cachedModule.exports;/******/}/******/ // Create a new module (and put it into the cache)
/******/var module=__webpack_module_cache__[moduleId]={/******/ // no module.id needed
/******/ // no module.loaded needed
/******/exports:{}/******/};/******/ /******/ // Execute the module function
/******/__webpack_modules__[moduleId].call(module.exports,module,module.exports,__webpack_require__);/******/ /******/ // Return the exports of the module
/******/return module.exports;/******/}/******/ /************************************************************************/ /******/ /* webpack/runtime/compat get default export */ /******/(function(){/******/ // getDefaultExport function for compatibility with non-harmony modules
/******/__webpack_require__.n=function(module){/******/var getter=module&&module.__esModule?/******/function(){return module['default'];}:/******/function(){return module;};/******/__webpack_require__.d(getter,{a:getter});/******/return getter;/******/};/******/})();/******/ /******/ /* webpack/runtime/define property getters */ /******/(function(){/******/ // define getter functions for harmony exports
/******/__webpack_require__.d=function(exports,definition){/******/for(var key in definition){/******/if(__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)){/******/Object.defineProperty(exports,key,{enumerable:true,get:definition[key]});/******/}/******/}/******/};/******/})();/******/ /******/ /* webpack/runtime/hasOwnProperty shorthand */ /******/(function(){/******/__webpack_require__.o=function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop);};/******/})();/******/ /******/ /* webpack/runtime/make namespace object */ /******/(function(){/******/ // define __esModule on exports
/******/__webpack_require__.r=function(exports){/******/if(typeof Symbol!=='undefined'&&Symbol.toStringTag){/******/Object.defineProperty(exports,Symbol.toStringTag,{value:'Module'});/******/}/******/Object.defineProperty(exports,'__esModule',{value:true});/******/};/******/})();/******/ /************************************************************************/var __webpack_exports__={};// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(function(){"use strict";__webpack_require__.r(__webpack_exports__);/* harmony import */var _distrib_lib_microsoft_cognitiveservices_speech_sdk_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);/* harmony import */var _distrib_lib_microsoft_cognitiveservices_speech_sdk_js__WEBPACK_IMPORTED_MODULE_0___default=/*#__PURE__*/__webpack_require__.n(_distrib_lib_microsoft_cognitiveservices_speech_sdk_js__WEBPACK_IMPORTED_MODULE_0__);// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT license.
window.SpeechSDK=_distrib_lib_microsoft_cognitiveservices_speech_sdk_js__WEBPACK_IMPORTED_MODULE_0__;})();/******/})();
